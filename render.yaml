# Render.com Production Deployment Configuration
# Multi-service setup for AETERNAAA (Singularity Genesis)

services:
  # üß† Rust Core Monolith (Sovereign Engine)
  - type: web
    name: aeterna-backend
    env: docker
    plan: pro
    region: frankfurt
    dockerContext: .
    dockerfilePath: Dockerfile.backend
    healthCheckPath: /telemetry
    domains:
      - api.aeterna.website
    envVars:
      - key: PORT
        value: 8890
      - key: RUST_LOG
        value: info
      - key: AETERNA_ENV
        value: production
      - key: RAIL_ID
        value: "b156e9ed-bf3d-48d1-9b22-c2629ae816ed"
      - key: STRIPE_SECRET_KEY
        sync: false
      - key: EXCHANGE_API_KEY
        sync: false
      - key: EXCHANGE_SECRET_KEY
        sync: false
      - key: GEMINI_API_KEY
        sync: false
      - key: CORS_ORIGIN
        value: https://aeterna.website
      - key: JULES_API_KEY
        sync: false

  # ‚öôÔ∏è TypeScript Middleware Orchestrator (OmniCore)
  - type: web
    name: aeterna-middleware
    env: docker
    plan: starter
    dockerContext: .
    dockerfilePath: Dockerfile.middleware
    healthCheckPath: /api/status
    envVars:
      - key: NODE_ENV
        value: production
      - key: HTTP_PORT
        value: 8890
      - key: WS_PORT
        value: 8765
      - key: STRIPE_SECRET_KEY
        sync: false
      - key: EXCHANGE_API_KEY
        sync: false
      - key: EXCHANGE_SECRET_KEY
        sync: false
      - key: GEMINI_API_KEY
        sync: false
      - key: CORS_ORIGIN
        value: https://aeterna-backend.onrender.com
      - key: JULES_API_KEY
        sync: false

  # üåê Future-Proof Frontend (Vortex UI)
  - type: web
    name: aeterna-frontend
    env: static
    plan: starter
    buildCommand: cd helios-ui && npm install && npm run build
    staticPublishPath: helios-ui/dist
    domains:
      - aeterna.website
      - www.aeterna.website
    envVars:
      - key: VITE_API_URL
        value: https://api.aeterna.website
      - key: VITE_WS_URL
        value: wss://ws.aeterna.website
      - key: VITE_JULES_API_KEY
        sync: false
