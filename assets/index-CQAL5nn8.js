(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function sb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var US={exports:{}},tg={};var ZE;function qU(){if(ZE)return tg;ZE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:a}}return tg.Fragment=e,tg.jsx=t,tg.jsxs=t,tg}var YE;function ZU(){return YE||(YE=1,US.exports=qU()),US.exports}var R=ZU(),OS={exports:{}},$t={};var $E;function YU(){if($E)return $t;$E=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),x=Symbol.iterator;function _(q){return q===null||typeof q!="object"?null:(q=x&&q[x]||q["@@iterator"],typeof q=="function"?q:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,E={};function M(q,oe,Ae){this.props=q,this.context=oe,this.refs=E,this.updater=Ae||w}M.prototype.isReactComponent={},M.prototype.setState=function(q,oe){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,oe,"setState")},M.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function D(){}D.prototype=M.prototype;function L(q,oe,Ae){this.props=q,this.context=oe,this.refs=E,this.updater=Ae||w}var N=L.prototype=new D;N.constructor=L,A(N,M.prototype),N.isPureReactComponent=!0;var P=Array.isArray;function z(){}var B={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function O(q,oe,Ae){var ke=Ae.ref;return{$$typeof:n,type:q,key:oe,ref:ke!==void 0?ke:null,props:Ae}}function F(q,oe){return O(q.type,oe,q.props)}function W(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function ee(q){var oe={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(Ae){return oe[Ae]})}var J=/\/+/g;function ae(q,oe){return typeof q=="object"&&q!==null&&q.key!=null?ee(""+q.key):oe.toString(36)}function he(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(z,z):(q.status="pending",q.then(function(oe){q.status==="pending"&&(q.status="fulfilled",q.value=oe)},function(oe){q.status==="pending"&&(q.status="rejected",q.reason=oe)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function Z(q,oe,Ae,ke,rt){var de=typeof q;(de==="undefined"||de==="boolean")&&(q=null);var Ce=!1;if(q===null)Ce=!0;else switch(de){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(q.$$typeof){case n:case e:Ce=!0;break;case g:return Ce=q._init,Z(Ce(q._payload),oe,Ae,ke,rt)}}if(Ce)return rt=rt(q),Ce=ke===""?"."+ae(q,0):ke,P(rt)?(Ae="",Ce!=null&&(Ae=Ce.replace(J,"$&/")+"/"),Z(rt,oe,Ae,"",function(ht){return ht})):rt!=null&&(W(rt)&&(rt=F(rt,Ae+(rt.key==null||q&&q.key===rt.key?"":(""+rt.key).replace(J,"$&/")+"/")+Ce)),oe.push(rt)),1;Ce=0;var et=ke===""?".":ke+":";if(P(q))for(var it=0;it<q.length;it++)ke=q[it],de=et+ae(ke,it),Ce+=Z(ke,oe,Ae,de,rt);else if(it=_(q),typeof it=="function")for(q=it.call(q),it=0;!(ke=q.next()).done;)ke=ke.value,de=et+ae(ke,it++),Ce+=Z(ke,oe,Ae,de,rt);else if(de==="object"){if(typeof q.then=="function")return Z(he(q),oe,Ae,ke,rt);throw oe=String(q),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function K(q,oe,Ae){if(q==null)return q;var ke=[],rt=0;return Z(q,ke,"","",function(de){return oe.call(Ae,de,rt++)}),ke}function le(q){if(q._status===-1){var oe=q._result;oe=oe(),oe.then(function(Ae){(q._status===0||q._status===-1)&&(q._status=1,q._result=Ae)},function(Ae){(q._status===0||q._status===-1)&&(q._status=2,q._result=Ae)}),q._status===-1&&(q._status=0,q._result=oe)}if(q._status===1)return q._result.default;throw q._result}var Ee=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Re={map:K,forEach:function(q,oe,Ae){K(q,function(){oe.apply(this,arguments)},Ae)},count:function(q){var oe=0;return K(q,function(){oe++}),oe},toArray:function(q){return K(q,function(oe){return oe})||[]},only:function(q){if(!W(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return $t.Activity=y,$t.Children=Re,$t.Component=M,$t.Fragment=t,$t.Profiler=s,$t.PureComponent=L,$t.StrictMode=i,$t.Suspense=d,$t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,$t.__COMPILER_RUNTIME={__proto__:null,c:function(q){return B.H.useMemoCache(q)}},$t.cache=function(q){return function(){return q.apply(null,arguments)}},$t.cacheSignal=function(){return null},$t.cloneElement=function(q,oe,Ae){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var ke=A({},q.props),rt=q.key;if(oe!=null)for(de in oe.key!==void 0&&(rt=""+oe.key),oe)!V.call(oe,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&oe.ref===void 0||(ke[de]=oe[de]);var de=arguments.length-2;if(de===1)ke.children=Ae;else if(1<de){for(var Ce=Array(de),et=0;et<de;et++)Ce[et]=arguments[et+2];ke.children=Ce}return O(q.type,rt,ke)},$t.createContext=function(q){return q={$$typeof:l,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},$t.createElement=function(q,oe,Ae){var ke,rt={},de=null;if(oe!=null)for(ke in oe.key!==void 0&&(de=""+oe.key),oe)V.call(oe,ke)&&ke!=="key"&&ke!=="__self"&&ke!=="__source"&&(rt[ke]=oe[ke]);var Ce=arguments.length-2;if(Ce===1)rt.children=Ae;else if(1<Ce){for(var et=Array(Ce),it=0;it<Ce;it++)et[it]=arguments[it+2];rt.children=et}if(q&&q.defaultProps)for(ke in Ce=q.defaultProps,Ce)rt[ke]===void 0&&(rt[ke]=Ce[ke]);return O(q,de,rt)},$t.createRef=function(){return{current:null}},$t.forwardRef=function(q){return{$$typeof:u,render:q}},$t.isValidElement=W,$t.lazy=function(q){return{$$typeof:g,_payload:{_status:-1,_result:q},_init:le}},$t.memo=function(q,oe){return{$$typeof:p,type:q,compare:oe===void 0?null:oe}},$t.startTransition=function(q){var oe=B.T,Ae={};B.T=Ae;try{var ke=q(),rt=B.S;rt!==null&&rt(Ae,ke),typeof ke=="object"&&ke!==null&&typeof ke.then=="function"&&ke.then(z,Ee)}catch(de){Ee(de)}finally{oe!==null&&Ae.types!==null&&(oe.types=Ae.types),B.T=oe}},$t.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},$t.use=function(q){return B.H.use(q)},$t.useActionState=function(q,oe,Ae){return B.H.useActionState(q,oe,Ae)},$t.useCallback=function(q,oe){return B.H.useCallback(q,oe)},$t.useContext=function(q){return B.H.useContext(q)},$t.useDebugValue=function(){},$t.useDeferredValue=function(q,oe){return B.H.useDeferredValue(q,oe)},$t.useEffect=function(q,oe){return B.H.useEffect(q,oe)},$t.useEffectEvent=function(q){return B.H.useEffectEvent(q)},$t.useId=function(){return B.H.useId()},$t.useImperativeHandle=function(q,oe,Ae){return B.H.useImperativeHandle(q,oe,Ae)},$t.useInsertionEffect=function(q,oe){return B.H.useInsertionEffect(q,oe)},$t.useLayoutEffect=function(q,oe){return B.H.useLayoutEffect(q,oe)},$t.useMemo=function(q,oe){return B.H.useMemo(q,oe)},$t.useOptimistic=function(q,oe){return B.H.useOptimistic(q,oe)},$t.useReducer=function(q,oe,Ae){return B.H.useReducer(q,oe,Ae)},$t.useRef=function(q){return B.H.useRef(q)},$t.useState=function(q){return B.H.useState(q)},$t.useSyncExternalStore=function(q,oe,Ae){return B.H.useSyncExternalStore(q,oe,Ae)},$t.useTransition=function(){return B.H.useTransition()},$t.version="19.2.3",$t}var KE;function M0(){return KE||(KE=1,OS.exports=YU()),OS.exports}var pe=M0();const jf=sb(pe);var zS={exports:{}},ng={},kS={exports:{}},FS={};var JE;function $U(){return JE||(JE=1,(function(n){function e(Z,K){var le=Z.length;Z.push(K);e:for(;0<le;){var Ee=le-1>>>1,Re=Z[Ee];if(0<s(Re,K))Z[Ee]=K,Z[le]=Re,le=Ee;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var K=Z[0],le=Z.pop();if(le!==K){Z[0]=le;e:for(var Ee=0,Re=Z.length,q=Re>>>1;Ee<q;){var oe=2*(Ee+1)-1,Ae=Z[oe],ke=oe+1,rt=Z[ke];if(0>s(Ae,le))ke<Re&&0>s(rt,Ae)?(Z[Ee]=rt,Z[ke]=le,Ee=ke):(Z[Ee]=Ae,Z[oe]=le,Ee=oe);else if(ke<Re&&0>s(rt,le))Z[Ee]=rt,Z[ke]=le,Ee=ke;else break e}}return K}function s(Z,K){var le=Z.sortIndex-K.sortIndex;return le!==0?le:Z.id-K.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],p=[],g=1,y=null,x=3,_=!1,w=!1,A=!1,E=!1,M=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function N(Z){for(var K=t(p);K!==null;){if(K.callback===null)i(p);else if(K.startTime<=Z)i(p),K.sortIndex=K.expirationTime,e(d,K);else break;K=t(p)}}function P(Z){if(A=!1,N(Z),!w)if(t(d)!==null)w=!0,z||(z=!0,ee());else{var K=t(p);K!==null&&he(P,K.startTime-Z)}}var z=!1,B=-1,V=5,O=-1;function F(){return E?!0:!(n.unstable_now()-O<V)}function W(){if(E=!1,z){var Z=n.unstable_now();O=Z;var K=!0;try{e:{w=!1,A&&(A=!1,D(B),B=-1),_=!0;var le=x;try{t:{for(N(Z),y=t(d);y!==null&&!(y.expirationTime>Z&&F());){var Ee=y.callback;if(typeof Ee=="function"){y.callback=null,x=y.priorityLevel;var Re=Ee(y.expirationTime<=Z);if(Z=n.unstable_now(),typeof Re=="function"){y.callback=Re,N(Z),K=!0;break t}y===t(d)&&i(d),N(Z)}else i(d);y=t(d)}if(y!==null)K=!0;else{var q=t(p);q!==null&&he(P,q.startTime-Z),K=!1}}break e}finally{y=null,x=le,_=!1}K=void 0}}finally{K?ee():z=!1}}}var ee;if(typeof L=="function")ee=function(){L(W)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ae=J.port2;J.port1.onmessage=W,ee=function(){ae.postMessage(null)}}else ee=function(){M(W,0)};function he(Z,K){B=M(function(){Z(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(Z){switch(x){case 1:case 2:case 3:var K=3;break;default:K=x}var le=x;x=K;try{return Z()}finally{x=le}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(Z,K){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var le=x;x=Z;try{return K()}finally{x=le}},n.unstable_scheduleCallback=function(Z,K,le){var Ee=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Ee+le:Ee):le=Ee,Z){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=le+Re,Z={id:g++,callback:K,priorityLevel:Z,startTime:le,expirationTime:Re,sortIndex:-1},le>Ee?(Z.sortIndex=le,e(p,Z),t(d)===null&&Z===t(p)&&(A?(D(B),B=-1):A=!0,he(P,le-Ee))):(Z.sortIndex=Re,e(d,Z),w||_||(w=!0,z||(z=!0,ee()))),Z},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(Z){var K=x;return function(){var le=x;x=K;try{return Z.apply(this,arguments)}finally{x=le}}}})(FS)),FS}var QE;function oN(){return QE||(QE=1,kS.exports=$U()),kS.exports}var BS={exports:{}},Xs={};var eA;function KU(){if(eA)return Xs;eA=1;var n=M0();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(d,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:d,containerInfo:p,implementation:g}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Xs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Xs.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(d,p,null,g)},Xs.flushSync=function(d){var p=l.T,g=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=p,i.p=g,i.d.f()}},Xs.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(d,p))},Xs.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Xs.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,y=u(g,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,_=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?i.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:_}):g==="script"&&i.d.X(d,{crossOrigin:y,integrity:x,fetchPriority:_,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Xs.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=u(p.as,p.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(d)},Xs.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=u(g,p.crossOrigin);i.d.L(d,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Xs.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=u(p.as,p.crossOrigin);i.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(d)},Xs.requestFormReset=function(d){i.d.r(d)},Xs.unstable_batchedUpdates=function(d,p){return d(p)},Xs.useFormState=function(d,p,g){return l.H.useFormState(d,p,g)},Xs.useFormStatus=function(){return l.H.useHostTransitionStatus()},Xs.version="19.2.3",Xs}var tA;function JU(){if(tA)return BS.exports;tA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),BS.exports=KU(),BS.exports}var nA;function QU(){if(nA)return ng;nA=1;var n=oN(),e=M0(),t=JU();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,h=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(h=o.return),r=o.return;while(r)}return o.tag===3?h:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function u(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(a(r)!==r)throw Error(i(188))}function p(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var h=r,m=o;;){var S=h.return;if(S===null)break;var T=S.alternate;if(T===null){if(m=S.return,m!==null){h=m;continue}break}if(S.child===T.child){for(T=S.child;T;){if(T===h)return d(S),r;if(T===m)return d(S),o;T=T.sibling}throw Error(i(188))}if(h.return!==m.return)h=S,m=T;else{for(var U=!1,G=S.child;G;){if(G===h){U=!0,h=S,m=T;break}if(G===m){U=!0,m=S,h=T;break}G=G.sibling}if(!U){for(G=T.child;G;){if(G===h){U=!0,h=T,m=S;break}if(G===m){U=!0,m=T,h=S;break}G=G.sibling}if(!U)throw Error(i(189))}}if(h.alternate!==m)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?r:o}function g(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=g(r),o!==null)return o;r=r.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),L=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function ee(r){return r===null||typeof r!="object"?null:(r=W&&r[W]||r["@@iterator"],typeof r=="function"?r:null)}var J=Symbol.for("react.client.reference");function ae(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===J?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case M:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case z:return"SuspenseList";case O:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case w:return"Portal";case L:return r.displayName||"Context";case D:return(r._context.displayName||"Context")+".Consumer";case N:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case B:return o=r.displayName||null,o!==null?o:ae(r.type)||"Memo";case V:o=r._payload,r=r._init;try{return ae(r(o))}catch{}}return null}var he=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Ee=[],Re=-1;function q(r){return{current:r}}function oe(r){0>Re||(r.current=Ee[Re],Ee[Re]=null,Re--)}function Ae(r,o){Re++,Ee[Re]=r.current,r.current=o}var ke=q(null),rt=q(null),de=q(null),Ce=q(null);function et(r,o){switch(Ae(de,o),Ae(rt,r),Ae(ke,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?vE(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=vE(o),r=yE(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}oe(ke),Ae(ke,r)}function it(){oe(ke),oe(rt),oe(de)}function ht(r){r.memoizedState!==null&&Ae(Ce,r);var o=ke.current,h=yE(o,r.type);o!==h&&(Ae(rt,r),Ae(ke,h))}function tn(r){rt.current===r&&(oe(ke),oe(rt)),Ce.current===r&&(oe(Ce),Km._currentValue=le)}var fn,Pt;function De(r){if(fn===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);fn=o&&o[1]||"",Pt=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fn+r+Pt}var je=!1;function Pe(r,o){if(!r||je)return"";je=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var Oe=function(){throw Error()};if(Object.defineProperty(Oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Oe,[])}catch(Te){var xe=Te}Reflect.construct(r,[],Oe)}else{try{Oe.call()}catch(Te){xe=Te}r.call(Oe.prototype)}}else{try{throw Error()}catch(Te){xe=Te}(Oe=r())&&typeof Oe.catch=="function"&&Oe.catch(function(){})}}catch(Te){if(Te&&xe&&typeof Te.stack=="string")return[Te.stack,xe.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=m.DetermineComponentFrameRoot(),U=T[0],G=T[1];if(U&&G){var Q=U.split(`
`),ge=G.split(`
`);for(S=m=0;m<Q.length&&!Q[m].includes("DetermineComponentFrameRoot");)m++;for(;S<ge.length&&!ge[S].includes("DetermineComponentFrameRoot");)S++;if(m===Q.length||S===ge.length)for(m=Q.length-1,S=ge.length-1;1<=m&&0<=S&&Q[m]!==ge[S];)S--;for(;1<=m&&0<=S;m--,S--)if(Q[m]!==ge[S]){if(m!==1||S!==1)do if(m--,S--,0>S||Q[m]!==ge[S]){var Ne=`
`+Q[m].replace(" at new "," at ");return r.displayName&&Ne.includes("<anonymous>")&&(Ne=Ne.replace("<anonymous>",r.displayName)),Ne}while(1<=m&&0<=S);break}}}finally{je=!1,Error.prepareStackTrace=h}return(h=r?r.displayName||r.name:"")?De(h):""}function tt(r,o){switch(r.tag){case 26:case 27:case 5:return De(r.type);case 16:return De("Lazy");case 13:return r.child!==o&&o!==null?De("Suspense Fallback"):De("Suspense");case 19:return De("SuspenseList");case 0:case 15:return Pe(r.type,!1);case 11:return Pe(r.type.render,!1);case 1:return Pe(r.type,!0);case 31:return De("Activity");default:return""}}function $(r){try{var o="",h=null;do o+=tt(r,h),h=r,r=r.return;while(r);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Tt=Object.prototype.hasOwnProperty,st=n.unstable_scheduleCallback,At=n.unstable_cancelCallback,Ze=n.unstable_shouldYield,X=n.unstable_requestPaint,k=n.unstable_now,se=n.unstable_getCurrentPriorityLevel,Me=n.unstable_ImmediatePriority,Ue=n.unstable_UserBlockingPriority,we=n.unstable_NormalPriority,dt=n.unstable_LowPriority,Ke=n.unstable_IdlePriority,xt=n.log,Dt=n.unstable_setDisableYieldValue,Ve=null,qe=null;function pt(r){if(typeof xt=="function"&&Dt(r),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Ve,r)}catch{}}var ft=Math.clz32?Math.clz32:ie,nt=Math.log,Jt=Math.LN2;function ie(r){return r>>>=0,r===0?32:31-(nt(r)/Jt|0)|0}var at=256,Xe=262144,lt=4194304;function He(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Le(r,o,h){var m=r.pendingLanes;if(m===0)return 0;var S=0,T=r.suspendedLanes,U=r.pingedLanes;r=r.warmLanes;var G=m&134217727;return G!==0?(m=G&~T,m!==0?S=He(m):(U&=G,U!==0?S=He(U):h||(h=G&~r,h!==0&&(S=He(h))))):(G=m&~T,G!==0?S=He(G):U!==0?S=He(U):h||(h=m&~r,h!==0&&(S=He(h)))),S===0?0:o!==0&&o!==S&&(o&T)===0&&(T=S&-S,h=o&-o,T>=h||T===32&&(h&4194048)!==0)?o:S}function Je(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function Ht(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vn(){var r=lt;return lt<<=1,(lt&62914560)===0&&(lt=4194304),r}function bn(r){for(var o=[],h=0;31>h;h++)o.push(r);return o}function rs(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Us(r,o,h,m,S,T){var U=r.pendingLanes;r.pendingLanes=h,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=h,r.entangledLanes&=h,r.errorRecoveryDisabledLanes&=h,r.shellSuspendCounter=0;var G=r.entanglements,Q=r.expirationTimes,ge=r.hiddenUpdates;for(h=U&~h;0<h;){var Ne=31-ft(h),Oe=1<<Ne;G[Ne]=0,Q[Ne]=-1;var xe=ge[Ne];if(xe!==null)for(ge[Ne]=null,Ne=0;Ne<xe.length;Ne++){var Te=xe[Ne];Te!==null&&(Te.lane&=-536870913)}h&=~Oe}m!==0&&No(r,m,0),T!==0&&S===0&&r.tag!==0&&(r.suspendedLanes|=T&~(U&~o))}function No(r,o,h){r.pendingLanes|=o,r.suspendedLanes&=~o;var m=31-ft(o);r.entangledLanes|=o,r.entanglements[m]=r.entanglements[m]|1073741824|h&261930}function Do(r,o){var h=r.entangledLanes|=o;for(r=r.entanglements;h;){var m=31-ft(h),S=1<<m;S&o|r[m]&o&&(r[m]|=o),h&=~S}}function Tl(r,o){var h=o&-o;return h=(h&42)!==0?1:Io(h),(h&(r.suspendedLanes|o))!==0?0:h}function Io(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function $a(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function El(){var r=K.p;return r!==0?r:(r=window.event,r===void 0?32:VE(r.type))}function ps(r,o){var h=K.p;try{return K.p=r,o()}finally{K.p=h}}var tr=Math.random().toString(36).slice(2),ii="__reactFiber$"+tr,zi="__reactProps$"+tr,nr="__reactContainer$"+tr,ir="__reactEvents$"+tr,sr="__reactListeners$"+tr,Lo="__reactHandles$"+tr,Al="__reactResources$"+tr,na="__reactMarker$"+tr;function Ka(r){delete r[ii],delete r[zi],delete r[ir],delete r[sr],delete r[Lo]}function Ja(r){var o=r[ii];if(o)return o;for(var h=r.parentNode;h;){if(o=h[nr]||h[ii]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(r=TE(r);r!==null;){if(h=r[ii])return h;r=TE(r)}return o}r=h,h=r.parentNode}return null}function Qa(r){if(r=r[ii]||r[nr]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function Po(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function ga(r){var o=r[Al];return o||(o=r[Al]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function j(r){r[na]=!0}var re=new Set,_e={};function ve(r,o){ue(r,o),ue(r+"Capture",o)}function ue(r,o){for(_e[r]=o,r=0;r<o.length;r++)re.add(o[r])}var Ye=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mt={},We={};function yt(r){return Tt.call(We,r)?!0:Tt.call(mt,r)?!1:Ye.test(r)?We[r]=!0:(mt[r]=!0,!1)}function bt(r,o,h){if(yt(o))if(h===null)r.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+h)}}function Nt(r,o,h){if(h===null)r.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+h)}}function Mt(r,o,h,m){if(m===null)r.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(h);return}r.setAttributeNS(o,h,""+m)}}function Ot(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function En(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function jn(r,o,h){var m=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var S=m.get,T=m.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return S.call(this)},set:function(U){h=""+U,T.call(this,U)}}),Object.defineProperty(r,o,{enumerable:m.enumerable}),{getValue:function(){return h},setValue:function(U){h=""+U},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function zn(r){if(!r._valueTracker){var o=En(r)?"checked":"value";r._valueTracker=jn(r,o,""+r[o])}}function Xt(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var h=o.getValue(),m="";return r&&(m=En(r)?r.checked?"true":"false":r.value),r=m,r!==h?(o.setValue(r),!0):!1}function ot(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Sn=/[\n"\\]/g;function Ft(r){return r.replace(Sn,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Ci(r,o,h,m,S,T,U,G){r.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?r.type=U:r.removeAttribute("type"),o!=null?U==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+Ot(o)):r.value!==""+Ot(o)&&(r.value=""+Ot(o)):U!=="submit"&&U!=="reset"||r.removeAttribute("value"),o!=null?$n(r,U,Ot(o)):h!=null?$n(r,U,Ot(h)):m!=null&&r.removeAttribute("value"),S==null&&T!=null&&(r.defaultChecked=!!T),S!=null&&(r.checked=S&&typeof S!="function"&&typeof S!="symbol"),G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?r.name=""+Ot(G):r.removeAttribute("name")}function ia(r,o,h,m,S,T,U,G){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.type=T),o!=null||h!=null){if(!(T!=="submit"&&T!=="reset"||o!=null)){zn(r);return}h=h!=null?""+Ot(h):"",o=o!=null?""+Ot(o):h,G||o===r.value||(r.value=o),r.defaultValue=o}m=m??S,m=typeof m!="function"&&typeof m!="symbol"&&!!m,r.checked=G?r.checked:!!m,r.defaultChecked=!!m,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(r.name=U),zn(r)}function $n(r,o,h){o==="number"&&ot(r.ownerDocument)===r||r.defaultValue===""+h||(r.defaultValue=""+h)}function bs(r,o,h,m){if(r=r.options,o){o={};for(var S=0;S<h.length;S++)o["$"+h[S]]=!0;for(h=0;h<r.length;h++)S=o.hasOwnProperty("$"+r[h].value),r[h].selected!==S&&(r[h].selected=S),S&&m&&(r[h].defaultSelected=!0)}else{for(h=""+Ot(h),o=null,S=0;S<r.length;S++){if(r[S].value===h){r[S].selected=!0,m&&(r[S].defaultSelected=!0);return}o!==null||r[S].disabled||(o=r[S])}o!==null&&(o.selected=!0)}}function Rn(r,o,h){if(o!=null&&(o=""+Ot(o),o!==r.value&&(r.value=o),h==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=h!=null?""+Ot(h):""}function ki(r,o,h,m){if(o==null){if(m!=null){if(h!=null)throw Error(i(92));if(he(m)){if(1<m.length)throw Error(i(93));m=m[0]}h=m}h==null&&(h=""),o=h}h=Ot(o),r.defaultValue=h,m=r.textContent,m===h&&m!==""&&m!==null&&(r.value=m),zn(r)}function Ri(r,o){if(o){var h=r.firstChild;if(h&&h===r.lastChild&&h.nodeType===3){h.nodeValue=o;return}}r.textContent=o}var Xi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qi(r,o,h){var m=o.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":m?r.setProperty(o,h):typeof h!="number"||h===0||Xi.has(o)?o==="float"?r.cssFloat=h:r[o]=(""+h).trim():r[o]=h+"px"}function Cl(r,o,h){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?r.setProperty(m,""):m==="float"?r.cssFloat="":r[m]="");for(var S in o)m=o[S],o.hasOwnProperty(S)&&h[S]!==m&&qi(r,S,m)}else for(var T in o)o.hasOwnProperty(T)&&qi(r,T,o[T])}function Cr(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var B0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fu(r){return Dp.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function eo(){}var mh=null;function gh(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Rl=null,Uo=null;function Ip(r){var o=Qa(r);if(o&&(r=o.stateNode)){var h=r[zi]||null;e:switch(r=o.stateNode,o.type){case"input":if(Ci(r,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),o=h.name,h.type==="radio"&&o!=null){for(h=r;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Ft(""+o)+'"][type="radio"]'),o=0;o<h.length;o++){var m=h[o];if(m!==r&&m.form===r.form){var S=m[zi]||null;if(!S)throw Error(i(90));Ci(m,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(o=0;o<h.length;o++)m=h[o],m.form===r.form&&Xt(m)}break e;case"textarea":Rn(r,h.value,h.defaultValue);break e;case"select":o=h.value,o!=null&&bs(r,!!h.multiple,o,!1)}}}var vh=!1;function Lp(r,o,h){if(vh)return r(o,h);vh=!0;try{var m=r(o);return m}finally{if(vh=!1,(Rl!==null||Uo!==null)&&(la(),Rl&&(o=Rl,r=Uo,Uo=Rl=null,Ip(o),r)))for(o=0;o<r.length;o++)Ip(r[o])}}function _c(r,o){var h=r.stateNode;if(h===null)return null;var m=h[zi]||null;if(m===null)return null;h=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break e;default:r=!1}if(r)return null;if(h&&typeof h!="function")throw Error(i(231,o,typeof h));return h}var va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pp=!1;if(va)try{var bc={};Object.defineProperty(bc,"passive",{get:function(){Pp=!0}}),window.addEventListener("test",bc,bc),window.removeEventListener("test",bc,bc)}catch{Pp=!1}var rr=null,yh=null,Nl=null;function Bu(){if(Nl)return Nl;var r,o=yh,h=o.length,m,S="value"in rr?rr.value:rr.textContent,T=S.length;for(r=0;r<h&&o[r]===S[r];r++);var U=h-r;for(m=1;m<=U&&o[h-m]===S[T-m];m++);return Nl=S.slice(r,1<m?1-m:void 0)}function Vu(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Sc(){return!0}function V0(){return!1}function Ss(r){function o(h,m,S,T,U){this._reactName=h,this._targetInst=S,this.type=m,this.nativeEvent=T,this.target=U,this.currentTarget=null;for(var G in r)r.hasOwnProperty(G)&&(h=r[G],this[G]=h?h(T):T[G]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Sc:V0,this.isPropagationStopped=V0,this}return y(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Sc)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Sc)},persist:function(){},isPersistent:Sc}),o}var Oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hu=Ss(Oo),Mc=y({},Oo,{view:0,detail:0}),H0=Ss(Mc),ju,xh,wc,Tc=y({},Mc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mh,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==wc&&(wc&&r.type==="mousemove"?(ju=r.screenX-wc.screenX,xh=r.screenY-wc.screenY):xh=ju=0,wc=r),ju)},movementY:function(r){return"movementY"in r?r.movementY:xh}}),Up=Ss(Tc),j0=y({},Tc,{dataTransfer:0}),G0=Ss(j0),Op=y({},Mc,{relatedTarget:0}),_h=Ss(Op),W0=y({},Oo,{animationName:0,elapsedTime:0,pseudoElement:0}),tS=Ss(W0),nS=y({},Oo,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),X0=Ss(nS),Gu=y({},Oo,{data:0}),bh=Ss(Gu),Sh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Z0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zp(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Z0[r])?!!o[r]:!1}function Mh(){return zp}var Y0=y({},Mc,{key:function(r){if(r.key){var o=Sh[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Vu(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?q0[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mh,charCode:function(r){return r.type==="keypress"?Vu(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Vu(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Dl=Ss(Y0),wh=y({},Tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kp=Ss(wh),Fp=y({},Mc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mh}),$0=Ss(Fp),K0=y({},Oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),iS=Ss(K0),as=y({},Tc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),J0=Ss(as),Q0=y({},Oo,{newState:0,oldState:0}),ev=Ss(Q0),tv=[9,13,27,32],Il=va&&"CompositionEvent"in window,Ec=null;va&&"documentMode"in document&&(Ec=document.documentMode);var Th=va&&"TextEvent"in window&&!Ec,Bp=va&&(!Il||Ec&&8<Ec&&11>=Ec),nv=" ",Wu=!1;function Eh(r,o){switch(r){case"keyup":return tv.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ll=!1;function iv(r,o){switch(r){case"compositionend":return Vp(o);case"keypress":return o.which!==32?null:(Wu=!0,nv);case"textInput":return r=o.data,r===nv&&Wu?null:r;default:return null}}function Hp(r,o){if(Ll)return r==="compositionend"||!Il&&Eh(r,o)?(r=Bu(),Nl=yh=rr=null,Ll=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Bp&&o.locale!=="ko"?null:o.data;default:return null}}var jp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gp(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!jp[r.type]:o==="textarea"}function Ah(r,o,h,m){Rl?Uo?Uo.push(m):Uo=[m]:Rl=m,o=ly(o,"onChange"),0<o.length&&(h=new Hu("onChange","change",null,h,m),r.push({event:h,listeners:o}))}var zo=null,Pl=null;function sv(r){fE(r,0)}function Ac(r){var o=Po(r);if(Xt(o))return r}function Wp(r,o){if(r==="change")return o}var ya=!1;if(va){var Xu;if(va){var Xp="oninput"in document;if(!Xp){var qp=document.createElement("div");qp.setAttribute("oninput","return;"),Xp=typeof qp.oninput=="function"}Xu=Xp}else Xu=!1;ya=Xu&&(!document.documentMode||9<document.documentMode)}function Rr(){zo&&(zo.detachEvent("onpropertychange",qu),Pl=zo=null)}function qu(r){if(r.propertyName==="value"&&Ac(Pl)){var o=[];Ah(o,Pl,r,gh(r)),Lp(sv,o)}}function rv(r,o,h){r==="focusin"?(Rr(),zo=o,Pl=h,zo.attachEvent("onpropertychange",qu)):r==="focusout"&&Rr()}function Zp(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ac(Pl)}function av(r,o){if(r==="click")return Ac(o)}function ov(r,o){if(r==="input"||r==="change")return Ac(o)}function Yp(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Ms=typeof Object.is=="function"?Object.is:Yp;function Cc(r,o){if(Ms(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var h=Object.keys(r),m=Object.keys(o);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var S=h[m];if(!Tt.call(o,S)||!Ms(r[S],o[S]))return!1}return!0}function Zu(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Rc(r,o){var h=Zu(r);r=0;for(var m;h;){if(h.nodeType===3){if(m=r+h.textContent.length,r<=o&&m>=o)return{node:h,offset:o-r};r=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Zu(h)}}function Gn(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?Gn(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function lv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=ot(r.document);o instanceof r.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)r=o.contentWindow;else break;o=ot(r.document)}return o}function $p(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var cv=va&&"documentMode"in document&&11>=document.documentMode,xa=null,_a=null,Nc=null,Ch=!1;function Dc(r,o,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Ch||xa==null||xa!==ot(m)||(m=xa,"selectionStart"in m&&$p(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Nc&&Cc(Nc,m)||(Nc=m,m=ly(_a,"onSelect"),0<m.length&&(o=new Hu("onSelect","select",null,o,h),r.push({event:o,listeners:m}),o.target=xa)))}function ms(r,o){var h={};return h[r.toLowerCase()]=o.toLowerCase(),h["Webkit"+r]="webkit"+o,h["Moz"+r]="moz"+o,h}var Ul={animationend:ms("Animation","AnimationEnd"),animationiteration:ms("Animation","AnimationIteration"),animationstart:ms("Animation","AnimationStart"),transitionrun:ms("Transition","TransitionRun"),transitionstart:ms("Transition","TransitionStart"),transitioncancel:ms("Transition","TransitionCancel"),transitionend:ms("Transition","TransitionEnd")},Yu={},Kp={};va&&(Kp=document.createElement("div").style,"AnimationEvent"in window||(delete Ul.animationend.animation,delete Ul.animationiteration.animation,delete Ul.animationstart.animation),"TransitionEvent"in window||delete Ul.transitionend.transition);function to(r){if(Yu[r])return Yu[r];if(!Ul[r])return r;var o=Ul[r],h;for(h in o)if(o.hasOwnProperty(h)&&h in Kp)return Yu[r]=o[h];return r}var Rh=to("animationend"),$u=to("animationiteration"),Jp=to("animationstart"),uv=to("transitionrun"),sS=to("transitionstart"),fv=to("transitioncancel"),Qp=to("transitionend"),Nr=new Map,Ku="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ku.push("scrollEnd");function Dr(r,o){Nr.set(r,o),ve(o,[r])}var Ju=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Ir=[],no=0,Zi=0;function Qu(){for(var r=no,o=Zi=no=0;o<r;){var h=Ir[o];Ir[o++]=null;var m=Ir[o];Ir[o++]=null;var S=Ir[o];Ir[o++]=null;var T=Ir[o];if(Ir[o++]=null,m!==null&&S!==null){var U=m.pending;U===null?S.next=S:(S.next=U.next,U.next=S),m.pending=S}T!==0&&ko(h,S,T)}}function Yi(r,o,h,m){Ir[no++]=r,Ir[no++]=o,Ir[no++]=h,Ir[no++]=m,Zi|=m,r.lanes|=m,r=r.alternate,r!==null&&(r.lanes|=m)}function Nh(r,o,h,m){return Yi(r,o,h,m),Lr(r)}function ws(r,o){return Yi(r,null,null,o),Lr(r)}function ko(r,o,h){r.lanes|=h;var m=r.alternate;m!==null&&(m.lanes|=h);for(var S=!1,T=r.return;T!==null;)T.childLanes|=h,m=T.alternate,m!==null&&(m.childLanes|=h),T.tag===22&&(r=T.stateNode,r===null||r._visibility&1||(S=!0)),r=T,T=T.return;return r.tag===3?(T=r.stateNode,S&&o!==null&&(S=31-ft(h),r=T.hiddenUpdates,m=r[S],m===null?r[S]=[o]:m.push(o),o.lane=h|536870912),T):null}function Lr(r){if(50<il)throw il=0,ec=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Fo={};function em(r,o,h,m){this.tag=r,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(r,o,h,m){return new em(r,o,h,m)}function Dh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Os(r,o){var h=r.alternate;return h===null?(h=si(r.tag,o,r.key,r.mode),h.elementType=r.elementType,h.type=r.type,h.stateNode=r.stateNode,h.alternate=r,r.alternate=h):(h.pendingProps=o,h.type=r.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=r.flags&65011712,h.childLanes=r.childLanes,h.lanes=r.lanes,h.child=r.child,h.memoizedProps=r.memoizedProps,h.memoizedState=r.memoizedState,h.updateQueue=r.updateQueue,o=r.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=r.sibling,h.index=r.index,h.ref=r.ref,h.refCleanup=r.refCleanup,h}function Ic(r,o){r.flags&=65011714;var h=r.alternate;return h===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=h.childLanes,r.lanes=h.lanes,r.child=h.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=h.memoizedProps,r.memoizedState=h.memoizedState,r.updateQueue=h.updateQueue,r.type=h.type,o=h.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function ba(r,o,h,m,S,T){var U=0;if(m=r,typeof r=="function")Dh(r)&&(U=1);else if(typeof r=="string")U=UU(r,h,ke.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case O:return r=si(31,h,o,S),r.elementType=O,r.lanes=T,r;case A:return Bo(h.children,S,T,o);case E:U=8,S|=24;break;case M:return r=si(12,h,o,S|2),r.elementType=M,r.lanes=T,r;case P:return r=si(13,h,o,S),r.elementType=P,r.lanes=T,r;case z:return r=si(19,h,o,S),r.elementType=z,r.lanes=T,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:U=10;break e;case D:U=9;break e;case N:U=11;break e;case B:U=14;break e;case V:U=16,m=null;break e}U=29,h=Error(i(130,r===null?"null":typeof r,"")),m=null}return o=si(U,h,o,S),o.elementType=r,o.type=m,o.lanes=T,o}function Bo(r,o,h,m){return r=si(7,r,m,o),r.lanes=h,r}function Ih(r,o,h){return r=si(6,r,null,o),r.lanes=h,r}function Lc(r){var o=si(18,null,null,0);return o.stateNode=r,o}function Lh(r,o,h){return o=si(4,r.children!==null?r.children:[],r.key,o),o.lanes=h,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var ef=new WeakMap;function ar(r,o){if(typeof r=="object"&&r!==null){var h=ef.get(r);return h!==void 0?h:(o={value:r,source:o,stack:$(o)},ef.set(r,o),o)}return{value:r,source:o,stack:$(o)}}var Vo=[],Ho=0,Pc=null,Uc=0,zs=[],Qn=0,io=null,ri=1,sa="";function Sa(r,o){Vo[Ho++]=Uc,Vo[Ho++]=Pc,Pc=r,Uc=o}function hv(r,o,h){zs[Qn++]=ri,zs[Qn++]=sa,zs[Qn++]=io,io=r;var m=ri;r=sa;var S=32-ft(m)-1;m&=~(1<<S),h+=1;var T=32-ft(o)+S;if(30<T){var U=S-S%5;T=(m&(1<<U)-1).toString(32),m>>=U,S-=U,ri=1<<32-ft(o)+S|h<<S|m,sa=T+r}else ri=1<<T|h<<S|m,sa=r}function Ma(r){r.return!==null&&(Sa(r,1),hv(r,1,0))}function Ph(r){for(;r===Pc;)Pc=Vo[--Ho],Vo[Ho]=null,Uc=Vo[--Ho],Vo[Ho]=null;for(;r===io;)io=zs[--Qn],zs[Qn]=null,sa=zs[--Qn],zs[Qn]=null,ri=zs[--Qn],zs[Qn]=null}function Uh(r,o){zs[Qn++]=ri,zs[Qn++]=sa,zs[Qn++]=io,ri=o.id,sa=o.overflow,io=r}var di=null,Wn=null,mn=!1,so=null,or=!1,Oc=Error(i(519));function wa(r){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ta(ar(o,r)),Oc}function dv(r){var o=r.stateNode,h=r.type,m=r.memoizedProps;switch(o[ii]=r,o[zi]=m,h){case"dialog":xn("cancel",o),xn("close",o);break;case"iframe":case"object":case"embed":xn("load",o);break;case"video":case"audio":for(h=0;h<Xr.length;h++)xn(Xr[h],o);break;case"source":xn("error",o);break;case"img":case"image":case"link":xn("error",o),xn("load",o);break;case"details":xn("toggle",o);break;case"input":xn("invalid",o),ia(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":xn("invalid",o);break;case"textarea":xn("invalid",o),ki(o,m.value,m.defaultValue,m.children)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||o.textContent===""+h||m.suppressHydrationWarning===!0||mE(o.textContent,h)?(m.popover!=null&&(xn("beforetoggle",o),xn("toggle",o)),m.onScroll!=null&&xn("scroll",o),m.onScrollEnd!=null&&xn("scrollend",o),m.onClick!=null&&(o.onclick=eo),o=!0):o=!1,o||wa(r,!0)}function pv(r){for(di=r.return;di;)switch(di.tag){case 5:case 31:case 13:or=!1;return;case 27:case 3:or=!0;return;default:di=di.return}}function zc(r){if(r!==di)return!1;if(!mn)return pv(r),mn=!0,!1;var o=r.tag,h;if((h=o!==3&&o!==27)&&((h=o===5)&&(h=r.type,h=!(h!=="form"&&h!=="button")||_S(r.type,r.memoizedProps)),h=!h),h&&Wn&&wa(r),pv(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Wn=wE(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Wn=wE(r)}else o===27?(o=Wn,iu(r.type)?(r=TS,TS=null,Wn=r):Wn=o):Wn=di?Fa(r.stateNode.nextSibling):null;return!0}function jo(){Wn=di=null,mn=!1}function Oh(){var r=so;return r!==null&&(mi===null?mi=r:mi.push.apply(mi,r),so=null),r}function Ta(r){so===null?so=[r]:so.push(r)}var kc=q(null),Go=null,Ea=null;function ro(r,o,h){Ae(kc,o._currentValue),o._currentValue=h}function Aa(r){r._currentValue=kc.current,oe(kc)}function zh(r,o,h){for(;r!==null;){var m=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),r===h)break;r=r.return}}function kh(r,o,h,m){var S=r.child;for(S!==null&&(S.return=r);S!==null;){var T=S.dependencies;if(T!==null){var U=S.child;T=T.firstContext;e:for(;T!==null;){var G=T;T=S;for(var Q=0;Q<o.length;Q++)if(G.context===o[Q]){T.lanes|=h,G=T.alternate,G!==null&&(G.lanes|=h),zh(T.return,h,r),m||(U=null);break e}T=G.next}}else if(S.tag===18){if(U=S.return,U===null)throw Error(i(341));U.lanes|=h,T=U.alternate,T!==null&&(T.lanes|=h),zh(U,h,r),U=null}else U=S.child;if(U!==null)U.return=S;else for(U=S;U!==null;){if(U===r){U=null;break}if(S=U.sibling,S!==null){S.return=U.return,U=S;break}U=U.return}S=U}}function Ca(r,o,h,m){r=null;for(var S=o,T=!1;S!==null;){if(!T){if((S.flags&524288)!==0)T=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var U=S.alternate;if(U===null)throw Error(i(387));if(U=U.memoizedProps,U!==null){var G=S.type;Ms(S.pendingProps.value,U.value)||(r!==null?r.push(G):r=[G])}}else if(S===Ce.current){if(U=S.alternate,U===null)throw Error(i(387));U.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(r!==null?r.push(Km):r=[Km])}S=S.return}r!==null&&kh(o,r,h,m),o.flags|=262144}function tf(r){for(r=r.firstContext;r!==null;){if(!Ms(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Wo(r){Go=r,Ea=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Vt(r){return mv(Go,r)}function Fc(r,o){return Go===null&&Wo(r),mv(r,o)}function mv(r,o){var h=o._currentValue;if(o={context:o,memoizedValue:h,next:null},Ea===null){if(r===null)throw Error(i(308));Ea=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Ea=Ea.next=o;return h}var gv=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(h,m){r.push(m)}};this.abort=function(){o.aborted=!0,r.forEach(function(h){return h()})}},rS=n.unstable_scheduleCallback,aS=n.unstable_NormalPriority,Ni={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tm(){return{controller:new gv,data:new Map,refCount:0}}function Ol(r){r.refCount--,r.refCount===0&&rS(aS,function(){r.controller.abort()})}var lr=null,Fh=0,ao=0,Pr=null;function nm(r,o){if(lr===null){var h=lr=[];Fh=0,ao=be(),Pr={status:"pending",value:void 0,then:function(m){h.push(m)}}}return Fh++,o.then(im,im),o}function im(){if(--Fh===0&&lr!==null){Pr!==null&&(Pr.status="fulfilled");var r=lr;lr=null,ao=0,Pr=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function sm(r,o){var h=[],m={status:"pending",value:null,reason:null,then:function(S){h.push(S)}};return r.then(function(){m.status="fulfilled",m.value=o;for(var S=0;S<h.length;S++)(0,h[S])(o)},function(S){for(m.status="rejected",m.reason=S,S=0;S<h.length;S++)(0,h[S])(void 0)}),m}var vv=Z.S;Z.S=function(r,o){Wm=k(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&nm(r,o),vv!==null&&vv(r,o)};var Xo=q(null);function Bh(){var r=Xo.current;return r!==null?r:Gt.pooledCache}function nf(r,o){o===null?Ae(Xo,Xo.current):Ae(Xo,o.pool)}function rm(){var r=Bh();return r===null?null:{parent:Ni._currentValue,pool:r}}var zl=Error(i(460)),sf=Error(i(474)),nn=Error(i(542)),Vh={then:function(){}};function ks(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Hh(r,o,h){switch(h=r[h],h===void 0?r.push(o):h!==o&&(o.then(eo,eo),o=h),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Bl(r),r;default:if(typeof o.status=="string")o.then(eo,eo);else{if(r=Gt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(m){if(o.status==="pending"){var S=o;S.status="fulfilled",S.value=m}},function(m){if(o.status==="pending"){var S=o;S.status="rejected",S.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Bl(r),r}throw Ra=o,zl}}function kl(r){try{var o=r._init;return o(r._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Ra=h,zl):h}}var Ra=null;function Fl(){if(Ra===null)throw Error(i(459));var r=Ra;return Ra=null,r}function Bl(r){if(r===zl||r===nn)throw Error(i(483))}var Vl=null,Hl=0;function rf(r){var o=Hl;return Hl+=1,Vl===null&&(Vl=[]),Hh(Vl,r,o)}function Ur(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Bc(r,o){throw o.$$typeof===x?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function jh(r){function o(ce,ne){if(r){var me=ce.deletions;me===null?(ce.deletions=[ne],ce.flags|=16):me.push(ne)}}function h(ce,ne){if(!r)return null;for(;ne!==null;)o(ce,ne),ne=ne.sibling;return null}function m(ce){for(var ne=new Map;ce!==null;)ce.key!==null?ne.set(ce.key,ce):ne.set(ce.index,ce),ce=ce.sibling;return ne}function S(ce,ne){return ce=Os(ce,ne),ce.index=0,ce.sibling=null,ce}function T(ce,ne,me){return ce.index=me,r?(me=ce.alternate,me!==null?(me=me.index,me<ne?(ce.flags|=67108866,ne):me):(ce.flags|=67108866,ne)):(ce.flags|=1048576,ne)}function U(ce){return r&&ce.alternate===null&&(ce.flags|=67108866),ce}function G(ce,ne,me,Ie){return ne===null||ne.tag!==6?(ne=Ih(me,ce.mode,Ie),ne.return=ce,ne):(ne=S(ne,me),ne.return=ce,ne)}function Q(ce,ne,me,Ie){var Lt=me.type;return Lt===A?Ne(ce,ne,me.props.children,Ie,me.key):ne!==null&&(ne.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===V&&kl(Lt)===ne.type)?(ne=S(ne,me.props),Ur(ne,me),ne.return=ce,ne):(ne=ba(me.type,me.key,me.props,null,ce.mode,Ie),Ur(ne,me),ne.return=ce,ne)}function ge(ce,ne,me,Ie){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==me.containerInfo||ne.stateNode.implementation!==me.implementation?(ne=Lh(me,ce.mode,Ie),ne.return=ce,ne):(ne=S(ne,me.children||[]),ne.return=ce,ne)}function Ne(ce,ne,me,Ie,Lt){return ne===null||ne.tag!==7?(ne=Bo(me,ce.mode,Ie,Lt),ne.return=ce,ne):(ne=S(ne,me),ne.return=ce,ne)}function Oe(ce,ne,me){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=Ih(""+ne,ce.mode,me),ne.return=ce,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case _:return me=ba(ne.type,ne.key,ne.props,null,ce.mode,me),Ur(me,ne),me.return=ce,me;case w:return ne=Lh(ne,ce.mode,me),ne.return=ce,ne;case V:return ne=kl(ne),Oe(ce,ne,me)}if(he(ne)||ee(ne))return ne=Bo(ne,ce.mode,me,null),ne.return=ce,ne;if(typeof ne.then=="function")return Oe(ce,rf(ne),me);if(ne.$$typeof===L)return Oe(ce,Fc(ce,ne),me);Bc(ce,ne)}return null}function xe(ce,ne,me,Ie){var Lt=ne!==null?ne.key:null;if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return Lt!==null?null:G(ce,ne,""+me,Ie);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case _:return me.key===Lt?Q(ce,ne,me,Ie):null;case w:return me.key===Lt?ge(ce,ne,me,Ie):null;case V:return me=kl(me),xe(ce,ne,me,Ie)}if(he(me)||ee(me))return Lt!==null?null:Ne(ce,ne,me,Ie,null);if(typeof me.then=="function")return xe(ce,ne,rf(me),Ie);if(me.$$typeof===L)return xe(ce,ne,Fc(ce,me),Ie);Bc(ce,me)}return null}function Te(ce,ne,me,Ie,Lt){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return ce=ce.get(me)||null,G(ne,ce,""+Ie,Lt);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case _:return ce=ce.get(Ie.key===null?me:Ie.key)||null,Q(ne,ce,Ie,Lt);case w:return ce=ce.get(Ie.key===null?me:Ie.key)||null,ge(ne,ce,Ie,Lt);case V:return Ie=kl(Ie),Te(ce,ne,me,Ie,Lt)}if(he(Ie)||ee(Ie))return ce=ce.get(me)||null,Ne(ne,ce,Ie,Lt,null);if(typeof Ie.then=="function")return Te(ce,ne,me,rf(Ie),Lt);if(Ie.$$typeof===L)return Te(ce,ne,me,Fc(ne,Ie),Lt);Bc(ne,Ie)}return null}function wt(ce,ne,me,Ie){for(var Lt=null,In=null,Et=ne,on=ne=0,wn=null;Et!==null&&on<me.length;on++){Et.index>on?(wn=Et,Et=null):wn=Et.sibling;var Ln=xe(ce,Et,me[on],Ie);if(Ln===null){Et===null&&(Et=wn);break}r&&Et&&Ln.alternate===null&&o(ce,Et),ne=T(Ln,ne,on),In===null?Lt=Ln:In.sibling=Ln,In=Ln,Et=wn}if(on===me.length)return h(ce,Et),mn&&Sa(ce,on),Lt;if(Et===null){for(;on<me.length;on++)Et=Oe(ce,me[on],Ie),Et!==null&&(ne=T(Et,ne,on),In===null?Lt=Et:In.sibling=Et,In=Et);return mn&&Sa(ce,on),Lt}for(Et=m(Et);on<me.length;on++)wn=Te(Et,ce,on,me[on],Ie),wn!==null&&(r&&wn.alternate!==null&&Et.delete(wn.key===null?on:wn.key),ne=T(wn,ne,on),In===null?Lt=wn:In.sibling=wn,In=wn);return r&&Et.forEach(function(lu){return o(ce,lu)}),mn&&Sa(ce,on),Lt}function Bt(ce,ne,me,Ie){if(me==null)throw Error(i(151));for(var Lt=null,In=null,Et=ne,on=ne=0,wn=null,Ln=me.next();Et!==null&&!Ln.done;on++,Ln=me.next()){Et.index>on?(wn=Et,Et=null):wn=Et.sibling;var lu=xe(ce,Et,Ln.value,Ie);if(lu===null){Et===null&&(Et=wn);break}r&&Et&&lu.alternate===null&&o(ce,Et),ne=T(lu,ne,on),In===null?Lt=lu:In.sibling=lu,In=lu,Et=wn}if(Ln.done)return h(ce,Et),mn&&Sa(ce,on),Lt;if(Et===null){for(;!Ln.done;on++,Ln=me.next())Ln=Oe(ce,Ln.value,Ie),Ln!==null&&(ne=T(Ln,ne,on),In===null?Lt=Ln:In.sibling=Ln,In=Ln);return mn&&Sa(ce,on),Lt}for(Et=m(Et);!Ln.done;on++,Ln=me.next())Ln=Te(Et,ce,on,Ln.value,Ie),Ln!==null&&(r&&Ln.alternate!==null&&Et.delete(Ln.key===null?on:Ln.key),ne=T(Ln,ne,on),In===null?Lt=Ln:In.sibling=Ln,In=Ln);return r&&Et.forEach(function(XU){return o(ce,XU)}),mn&&Sa(ce,on),Lt}function Zn(ce,ne,me,Ie){if(typeof me=="object"&&me!==null&&me.type===A&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case _:e:{for(var Lt=me.key;ne!==null;){if(ne.key===Lt){if(Lt=me.type,Lt===A){if(ne.tag===7){h(ce,ne.sibling),Ie=S(ne,me.props.children),Ie.return=ce,ce=Ie;break e}}else if(ne.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===V&&kl(Lt)===ne.type){h(ce,ne.sibling),Ie=S(ne,me.props),Ur(Ie,me),Ie.return=ce,ce=Ie;break e}h(ce,ne);break}else o(ce,ne);ne=ne.sibling}me.type===A?(Ie=Bo(me.props.children,ce.mode,Ie,me.key),Ie.return=ce,ce=Ie):(Ie=ba(me.type,me.key,me.props,null,ce.mode,Ie),Ur(Ie,me),Ie.return=ce,ce=Ie)}return U(ce);case w:e:{for(Lt=me.key;ne!==null;){if(ne.key===Lt)if(ne.tag===4&&ne.stateNode.containerInfo===me.containerInfo&&ne.stateNode.implementation===me.implementation){h(ce,ne.sibling),Ie=S(ne,me.children||[]),Ie.return=ce,ce=Ie;break e}else{h(ce,ne);break}else o(ce,ne);ne=ne.sibling}Ie=Lh(me,ce.mode,Ie),Ie.return=ce,ce=Ie}return U(ce);case V:return me=kl(me),Zn(ce,ne,me,Ie)}if(he(me))return wt(ce,ne,me,Ie);if(ee(me)){if(Lt=ee(me),typeof Lt!="function")throw Error(i(150));return me=Lt.call(me),Bt(ce,ne,me,Ie)}if(typeof me.then=="function")return Zn(ce,ne,rf(me),Ie);if(me.$$typeof===L)return Zn(ce,ne,Fc(ce,me),Ie);Bc(ce,me)}return typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint"?(me=""+me,ne!==null&&ne.tag===6?(h(ce,ne.sibling),Ie=S(ne,me),Ie.return=ce,ce=Ie):(h(ce,ne),Ie=Ih(me,ce.mode,Ie),Ie.return=ce,ce=Ie),U(ce)):h(ce,ne)}return function(ce,ne,me,Ie){try{Hl=0;var Lt=Zn(ce,ne,me,Ie);return Vl=null,Lt}catch(Et){if(Et===zl||Et===nn)throw Et;var In=si(29,Et,null,ce.mode);return In.lanes=Ie,In.return=ce,In}}}var oo=jh(!0),Gh=jh(!1),Ts=!1;function af(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function am(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function lo(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function qo(r,o,h){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(Ct&2)!==0){var S=m.pending;return S===null?o.next=o:(o.next=S.next,S.next=o),m.pending=o,o=Lr(r),ko(r,null,h),o}return Yi(r,m,o,h),Lr(r)}function Zo(r,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194048)!==0)){var m=o.lanes;m&=r.pendingLanes,h|=m,o.lanes=h,Do(r,h)}}function It(r,o){var h=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var S=null,T=null;if(h=h.firstBaseUpdate,h!==null){do{var U={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};T===null?S=T=U:T=T.next=U,h=h.next}while(h!==null);T===null?S=T=o:T=T.next=o}else S=T=o;h={baseState:m.baseState,firstBaseUpdate:S,lastBaseUpdate:T,shared:m.shared,callbacks:m.callbacks},r.updateQueue=h;return}r=h.lastBaseUpdate,r===null?h.firstBaseUpdate=o:r.next=o,h.lastBaseUpdate=o}var om=!1;function of(){if(om){var r=Pr;if(r!==null)throw r}}function Vc(r,o,h,m){om=!1;var S=r.updateQueue;Ts=!1;var T=S.firstBaseUpdate,U=S.lastBaseUpdate,G=S.shared.pending;if(G!==null){S.shared.pending=null;var Q=G,ge=Q.next;Q.next=null,U===null?T=ge:U.next=ge,U=Q;var Ne=r.alternate;Ne!==null&&(Ne=Ne.updateQueue,G=Ne.lastBaseUpdate,G!==U&&(G===null?Ne.firstBaseUpdate=ge:G.next=ge,Ne.lastBaseUpdate=Q))}if(T!==null){var Oe=S.baseState;U=0,Ne=ge=Q=null,G=T;do{var xe=G.lane&-536870913,Te=xe!==G.lane;if(Te?(Qt&xe)===xe:(m&xe)===xe){xe!==0&&xe===ao&&(om=!0),Ne!==null&&(Ne=Ne.next={lane:0,tag:G.tag,payload:G.payload,callback:null,next:null});e:{var wt=r,Bt=G;xe=o;var Zn=h;switch(Bt.tag){case 1:if(wt=Bt.payload,typeof wt=="function"){Oe=wt.call(Zn,Oe,xe);break e}Oe=wt;break e;case 3:wt.flags=wt.flags&-65537|128;case 0:if(wt=Bt.payload,xe=typeof wt=="function"?wt.call(Zn,Oe,xe):wt,xe==null)break e;Oe=y({},Oe,xe);break e;case 2:Ts=!0}}xe=G.callback,xe!==null&&(r.flags|=64,Te&&(r.flags|=8192),Te=S.callbacks,Te===null?S.callbacks=[xe]:Te.push(xe))}else Te={lane:xe,tag:G.tag,payload:G.payload,callback:G.callback,next:null},Ne===null?(ge=Ne=Te,Q=Oe):Ne=Ne.next=Te,U|=xe;if(G=G.next,G===null){if(G=S.shared.pending,G===null)break;Te=G,G=Te.next,Te.next=null,S.lastBaseUpdate=Te,S.shared.pending=null}}while(!0);Ne===null&&(Q=Oe),S.baseState=Q,S.firstBaseUpdate=ge,S.lastBaseUpdate=Ne,T===null&&(S.shared.lanes=0),Oa|=U,r.lanes=U,r.memoizedState=Oe}}function Hc(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function yv(r,o){var h=r.callbacks;if(h!==null)for(r.callbacks=null,r=0;r<h.length;r++)Hc(h[r],o)}var jc=q(null),Wh=q(0);function xv(r,o){r=hr,Ae(Wh,r),Ae(jc,o),hr=r|o.baseLanes}function lm(){Ae(Wh,hr),Ae(jc,jc.current)}function lf(){hr=Wh.current,oe(jc),oe(Wh)}var Fs=q(null),Es=null;function co(r){var o=r.alternate;Ae(gn,gn.current&1),Ae(Fs,r),Es===null&&(o===null||jc.current!==null||o.memoizedState!==null)&&(Es=r)}function cm(r){Ae(gn,gn.current),Ae(Fs,r),Es===null&&(Es=r)}function _v(r){r.tag===22?(Ae(gn,gn.current),Ae(Fs,r),Es===null&&(Es=r)):Bs()}function Bs(){Ae(gn,gn.current),Ae(Fs,Fs.current)}function yi(r){oe(Fs),Es===r&&(Es=null),oe(gn)}var gn=q(0);function cr(r){for(var o=r;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||MS(h)||wS(h)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ei=0,Zt=null,kn=null,hn=null,Or=!1,Gc=!1,jl=!1,Xh=0,cf=0,Wc=null,um=0;function ai(){throw Error(i(321))}function fm(r,o){if(o===null)return!1;for(var h=0;h<o.length&&h<r.length;h++)if(!Ms(r[h],o[h]))return!1;return!0}function qh(r,o,h,m,S,T){return ei=T,Zt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Z.H=r===null||r.memoizedState===null?Jv:Dm,jl=!1,T=h(m,S),jl=!1,Gc&&(T=Gl(o,h,m,S)),bv(r),T}function bv(r){Z.H=Xc;var o=kn!==null&&kn.next!==null;if(ei=0,hn=kn=Zt=null,Or=!1,cf=0,Wc=null,o)throw Error(i(300));r===null||Di||(r=r.dependencies,r!==null&&tf(r)&&(Di=!0))}function Gl(r,o,h,m){Zt=r;var S=0;do{if(Gc&&(Wc=null),cf=0,Gc=!1,25<=S)throw Error(i(301));if(S+=1,hn=kn=null,r.updateQueue!=null){var T=r.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}Z.H=zr,T=o(h,m)}while(Gc);return T}function Wl(){var r=Z.H,o=r.useState()[0];return o=typeof o.then=="function"?uf(o):o,r=r.useState()[0],(kn!==null?kn.memoizedState:null)!==r&&(Zt.flags|=1024),o}function hm(){var r=Xh!==0;return Xh=0,r}function dm(r,o,h){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~h}function pm(r){if(Or){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Or=!1}ei=0,hn=kn=Zt=null,Gc=!1,cf=Xh=0,Wc=null}function Fi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Zt.memoizedState=hn=r:hn=hn.next=r,hn}function xi(){if(kn===null){var r=Zt.alternate;r=r!==null?r.memoizedState:null}else r=kn.next;var o=hn===null?Zt.memoizedState:hn.next;if(o!==null)hn=o,kn=r;else{if(r===null)throw Zt.alternate===null?Error(i(467)):Error(i(310));kn=r,r={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},hn===null?Zt.memoizedState=hn=r:hn=hn.next=r}return hn}function Zh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uf(r){var o=cf;return cf+=1,Wc===null&&(Wc=[]),r=Hh(Wc,r,o),o=Zt,(hn===null?o.memoizedState:hn.next)===null&&(o=o.alternate,Z.H=o===null||o.memoizedState===null?Jv:Dm),r}function Yo(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return uf(r);if(r.$$typeof===L)return Vt(r)}throw Error(i(438,String(r)))}function mm(r){var o=null,h=Zt.updateQueue;if(h!==null&&(o=h.memoCache),o==null){var m=Zt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(S){return S.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),h===null&&(h=Zh(),Zt.updateQueue=h),h.memoCache=o,h=o.data[o.index],h===void 0)for(h=o.data[o.index]=Array(r),m=0;m<r;m++)h[m]=F;return o.index++,h}function uo(r,o){return typeof o=="function"?o(r):o}function Yh(r){var o=xi();return gm(o,kn,r)}function gm(r,o,h){var m=r.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=h;var S=r.baseQueue,T=m.pending;if(T!==null){if(S!==null){var U=S.next;S.next=T.next,T.next=U}o.baseQueue=S=T,m.pending=null}if(T=r.baseState,S===null)r.memoizedState=T;else{o=S.next;var G=U=null,Q=null,ge=o,Ne=!1;do{var Oe=ge.lane&-536870913;if(Oe!==ge.lane?(Qt&Oe)===Oe:(ei&Oe)===Oe){var xe=ge.revertLane;if(xe===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Oe===ao&&(Ne=!0);else if((ei&xe)===xe){ge=ge.next,xe===ao&&(Ne=!0);continue}else Oe={lane:0,revertLane:ge.revertLane,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},Q===null?(G=Q=Oe,U=T):Q=Q.next=Oe,Zt.lanes|=xe,Oa|=xe;Oe=ge.action,jl&&h(T,Oe),T=ge.hasEagerState?ge.eagerState:h(T,Oe)}else xe={lane:Oe,revertLane:ge.revertLane,gesture:ge.gesture,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},Q===null?(G=Q=xe,U=T):Q=Q.next=xe,Zt.lanes|=Oe,Oa|=Oe;ge=ge.next}while(ge!==null&&ge!==o);if(Q===null?U=T:Q.next=G,!Ms(T,r.memoizedState)&&(Di=!0,Ne&&(h=Pr,h!==null)))throw h;r.memoizedState=T,r.baseState=U,r.baseQueue=Q,m.lastRenderedState=T}return S===null&&(m.lanes=0),[r.memoizedState,m.dispatch]}function vm(r){var o=xi(),h=o.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=r;var m=h.dispatch,S=h.pending,T=o.memoizedState;if(S!==null){h.pending=null;var U=S=S.next;do T=r(T,U.action),U=U.next;while(U!==S);Ms(T,o.memoizedState)||(Di=!0),o.memoizedState=T,o.baseQueue===null&&(o.baseState=T),h.lastRenderedState=T}return[T,m]}function Sv(r,o,h){var m=Zt,S=xi(),T=mn;if(T){if(h===void 0)throw Error(i(407));h=h()}else h=o();var U=!Ms((kn||S).memoizedState,h);if(U&&(S.memoizedState=h,Di=!0),S=S.queue,Tm(Tv.bind(null,m,S,r),[r]),S.getSnapshot!==o||U||hn!==null&&hn.memoizedState.tag&1){if(m.flags|=2048,$o(9,{destroy:void 0},wv.bind(null,m,S,h,o),null),Gt===null)throw Error(i(349));T||(ei&127)!==0||Mv(m,o,h)}return h}function Mv(r,o,h){r.flags|=16384,r={getSnapshot:o,value:h},o=Zt.updateQueue,o===null?(o=Zh(),Zt.updateQueue=o,o.stores=[r]):(h=o.stores,h===null?o.stores=[r]:h.push(r))}function wv(r,o,h,m){o.value=h,o.getSnapshot=m,Ev(o)&&Av(r)}function Tv(r,o,h){return h(function(){Ev(o)&&Av(r)})}function Ev(r){var o=r.getSnapshot;r=r.value;try{var h=o();return!Ms(r,h)}catch{return!0}}function Av(r){var o=ws(r,2);o!==null&&rn(o,r,2)}function ym(r){var o=Fi();if(typeof r=="function"){var h=r;if(r=h(),jl){pt(!0);try{h()}finally{pt(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uo,lastRenderedState:r},o}function xm(r,o,h,m){return r.baseState=h,gm(r,kn,typeof m=="function"?m:uo)}function oS(r,o,h,m,S){if(Qh(r))throw Error(i(485));if(r=o.action,r!==null){var T={payload:S,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){T.listeners.push(U)}};Z.T!==null?h(!0):T.isTransition=!1,m(T),h=o.pending,h===null?(T.next=o.pending=T,Cv(o,T)):(T.next=h.next,o.pending=h.next=T)}}function Cv(r,o){var h=o.action,m=o.payload,S=r.state;if(o.isTransition){var T=Z.T,U={};Z.T=U;try{var G=h(S,m),Q=Z.S;Q!==null&&Q(U,G),Rv(r,o,G)}catch(ge){_m(r,o,ge)}finally{T!==null&&U.types!==null&&(T.types=U.types),Z.T=T}}else try{T=h(S,m),Rv(r,o,T)}catch(ge){_m(r,o,ge)}}function Rv(r,o,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){Nv(r,o,m)},function(m){return _m(r,o,m)}):Nv(r,o,h)}function Nv(r,o,h){o.status="fulfilled",o.value=h,Dv(o),r.state=h,o=r.pending,o!==null&&(h=o.next,h===o?r.pending=null:(h=h.next,o.next=h,Cv(r,h)))}function _m(r,o,h){var m=r.pending;if(r.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=h,Dv(o),o=o.next;while(o!==m)}r.action=null}function Dv(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function bm(r,o){return o}function Sm(r,o){if(mn){var h=Gt.formState;if(h!==null){e:{var m=Zt;if(mn){if(Wn){t:{for(var S=Wn,T=or;S.nodeType!==8;){if(!T){S=null;break t}if(S=Fa(S.nextSibling),S===null){S=null;break t}}T=S.data,S=T==="F!"||T==="F"?S:null}if(S){Wn=Fa(S.nextSibling),m=S.data==="F!";break e}}wa(m)}m=!1}m&&(o=h[0])}}return h=Fi(),h.memoizedState=h.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bm,lastRenderedState:o},h.queue=m,h=Yv.bind(null,Zt,m),m.dispatch=h,m=ym(!1),T=Nm.bind(null,Zt,!1,m.queue),m=Fi(),S={state:o,dispatch:null,action:r,pending:null},m.queue=S,h=oS.bind(null,Zt,S,T,h),S.dispatch=h,m.memoizedState=r,[o,h,!1]}function Iv(r){var o=xi();return Mm(o,kn,r)}function Mm(r,o,h){if(o=gm(r,o,bm)[0],r=Yh(uo)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=uf(o)}catch(U){throw U===zl?nn:U}else m=o;o=xi();var S=o.queue,T=S.dispatch;return h!==o.memoizedState&&(Zt.flags|=2048,$o(9,{destroy:void 0},Lv.bind(null,S,h),null)),[m,T,r]}function Lv(r,o){r.action=o}function wm(r){var o=xi(),h=kn;if(h!==null)return Mm(o,h,r);xi(),o=o.memoizedState,h=xi();var m=h.queue.dispatch;return h.memoizedState=r,[o,m,!1]}function $o(r,o,h,m){return r={tag:r,create:h,deps:m,inst:o,next:null},o=Zt.updateQueue,o===null&&(o=Zh(),Zt.updateQueue=o),h=o.lastEffect,h===null?o.lastEffect=r.next=r:(m=h.next,h.next=r,r.next=m,o.lastEffect=r),r}function $h(){return xi().memoizedState}function Kh(r,o,h,m){var S=Fi();Zt.flags|=r,S.memoizedState=$o(1|o,{destroy:void 0},h,m===void 0?null:m)}function Jh(r,o,h,m){var S=xi();m=m===void 0?null:m;var T=S.memoizedState.inst;kn!==null&&m!==null&&fm(m,kn.memoizedState.deps)?S.memoizedState=$o(o,T,h,m):(Zt.flags|=r,S.memoizedState=$o(1|o,T,h,m))}function Pv(r,o){Kh(8390656,8,r,o)}function Tm(r,o){Jh(2048,8,r,o)}function Uv(r){Zt.flags|=4;var o=Zt.updateQueue;if(o===null)o=Zh(),Zt.updateQueue=o,o.events=[r];else{var h=o.events;h===null?o.events=[r]:h.push(r)}}function Ov(r){var o=xi().memoizedState;return Uv({ref:o,nextImpl:r}),function(){if((Ct&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function zv(r,o){return Jh(4,2,r,o)}function kv(r,o){return Jh(4,4,r,o)}function Fv(r,o){if(typeof o=="function"){r=r();var h=o(r);return function(){typeof h=="function"?h():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Bv(r,o,h){h=h!=null?h.concat([r]):null,Jh(4,4,Fv.bind(null,o,r),h)}function Em(){}function Vv(r,o){var h=xi();o=o===void 0?null:o;var m=h.memoizedState;return o!==null&&fm(o,m[1])?m[0]:(h.memoizedState=[r,o],r)}function Hv(r,o){var h=xi();o=o===void 0?null:o;var m=h.memoizedState;if(o!==null&&fm(o,m[1]))return m[0];if(m=r(),jl){pt(!0);try{r()}finally{pt(!1)}}return h.memoizedState=[m,o],m}function Am(r,o,h){return h===void 0||(ei&1073741824)!==0&&(Qt&261930)===0?r.memoizedState=o:(r.memoizedState=h,r=cn(),Zt.lanes|=r,Oa|=r,h)}function jv(r,o,h,m){return Ms(h,o)?h:jc.current!==null?(r=Am(r,h,m),Ms(r,o)||(Di=!0),r):(ei&42)===0||(ei&1073741824)!==0&&(Qt&261930)===0?(Di=!0,r.memoizedState=h):(r=cn(),Zt.lanes|=r,Oa|=r,o)}function Gv(r,o,h,m,S){var T=K.p;K.p=T!==0&&8>T?T:8;var U=Z.T,G={};Z.T=G,Nm(r,!1,o,h);try{var Q=S(),ge=Z.S;if(ge!==null&&ge(G,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var Ne=sm(Q,m);ff(r,o,Ne,pr(r))}else ff(r,o,m,pr(r))}catch(Oe){ff(r,o,{then:function(){},status:"rejected",reason:Oe},pr())}finally{K.p=T,U!==null&&G.types!==null&&(U.types=G.types),Z.T=U}}function lS(){}function Cm(r,o,h,m){if(r.tag!==5)throw Error(i(476));var S=Wv(r).queue;Gv(r,S,o,le,h===null?lS:function(){return Xv(r),h(m)})}function Wv(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:uo,lastRenderedState:le},next:null};var h={};return o.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:uo,lastRenderedState:h},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function Xv(r){var o=Wv(r);o.next===null&&(o=r.alternate.memoizedState),ff(r,o.next.queue,{},pr())}function Rm(){return Vt(Km)}function qv(){return xi().memoizedState}function Zv(){return xi().memoizedState}function cS(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var h=pr();r=lo(h);var m=qo(o,r,h);m!==null&&(rn(m,o,h),Zo(m,o,h)),o={cache:tm()},r.payload=o;return}o=o.return}}function uS(r,o,h){var m=pr();h={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Qh(r)?$v(o,h):(h=Nh(r,o,h,m),h!==null&&(rn(h,r,m),Kv(h,o,m)))}function Yv(r,o,h){var m=pr();ff(r,o,h,m)}function ff(r,o,h,m){var S={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(Qh(r))$v(o,S);else{var T=r.alternate;if(r.lanes===0&&(T===null||T.lanes===0)&&(T=o.lastRenderedReducer,T!==null))try{var U=o.lastRenderedState,G=T(U,h);if(S.hasEagerState=!0,S.eagerState=G,Ms(G,U))return Yi(r,o,S,0),Gt===null&&Qu(),!1}catch{}if(h=Nh(r,o,S,m),h!==null)return rn(h,r,m),Kv(h,o,m),!0}return!1}function Nm(r,o,h,m){if(m={lane:2,revertLane:be(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Qh(r)){if(o)throw Error(i(479))}else o=Nh(r,h,m,2),o!==null&&rn(o,r,2)}function Qh(r){var o=r.alternate;return r===Zt||o!==null&&o===Zt}function $v(r,o){Gc=Or=!0;var h=r.pending;h===null?o.next=o:(o.next=h.next,h.next=o),r.pending=o}function Kv(r,o,h){if((h&4194048)!==0){var m=o.lanes;m&=r.pendingLanes,h|=m,o.lanes=h,Do(r,h)}}var Xc={readContext:Vt,use:Yo,useCallback:ai,useContext:ai,useEffect:ai,useImperativeHandle:ai,useLayoutEffect:ai,useInsertionEffect:ai,useMemo:ai,useReducer:ai,useRef:ai,useState:ai,useDebugValue:ai,useDeferredValue:ai,useTransition:ai,useSyncExternalStore:ai,useId:ai,useHostTransitionStatus:ai,useFormState:ai,useActionState:ai,useOptimistic:ai,useMemoCache:ai,useCacheRefresh:ai};Xc.useEffectEvent=ai;var Jv={readContext:Vt,use:Yo,useCallback:function(r,o){return Fi().memoizedState=[r,o===void 0?null:o],r},useContext:Vt,useEffect:Pv,useImperativeHandle:function(r,o,h){h=h!=null?h.concat([r]):null,Kh(4194308,4,Fv.bind(null,o,r),h)},useLayoutEffect:function(r,o){return Kh(4194308,4,r,o)},useInsertionEffect:function(r,o){Kh(4,2,r,o)},useMemo:function(r,o){var h=Fi();o=o===void 0?null:o;var m=r();if(jl){pt(!0);try{r()}finally{pt(!1)}}return h.memoizedState=[m,o],m},useReducer:function(r,o,h){var m=Fi();if(h!==void 0){var S=h(o);if(jl){pt(!0);try{h(o)}finally{pt(!1)}}}else S=o;return m.memoizedState=m.baseState=S,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:S},m.queue=r,r=r.dispatch=uS.bind(null,Zt,r),[m.memoizedState,r]},useRef:function(r){var o=Fi();return r={current:r},o.memoizedState=r},useState:function(r){r=ym(r);var o=r.queue,h=Yv.bind(null,Zt,o);return o.dispatch=h,[r.memoizedState,h]},useDebugValue:Em,useDeferredValue:function(r,o){var h=Fi();return Am(h,r,o)},useTransition:function(){var r=ym(!1);return r=Gv.bind(null,Zt,r.queue,!0,!1),Fi().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,h){var m=Zt,S=Fi();if(mn){if(h===void 0)throw Error(i(407));h=h()}else{if(h=o(),Gt===null)throw Error(i(349));(Qt&127)!==0||Mv(m,o,h)}S.memoizedState=h;var T={value:h,getSnapshot:o};return S.queue=T,Pv(Tv.bind(null,m,T,r),[r]),m.flags|=2048,$o(9,{destroy:void 0},wv.bind(null,m,T,h,o),null),h},useId:function(){var r=Fi(),o=Gt.identifierPrefix;if(mn){var h=sa,m=ri;h=(m&~(1<<32-ft(m)-1)).toString(32)+h,o="_"+o+"R_"+h,h=Xh++,0<h&&(o+="H"+h.toString(32)),o+="_"}else h=um++,o="_"+o+"r_"+h.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Rm,useFormState:Sm,useActionState:Sm,useOptimistic:function(r){var o=Fi();o.memoizedState=o.baseState=r;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=h,o=Nm.bind(null,Zt,!0,h),h.dispatch=o,[r,o]},useMemoCache:mm,useCacheRefresh:function(){return Fi().memoizedState=cS.bind(null,Zt)},useEffectEvent:function(r){var o=Fi(),h={impl:r};return o.memoizedState=h,function(){if((Ct&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},Dm={readContext:Vt,use:Yo,useCallback:Vv,useContext:Vt,useEffect:Tm,useImperativeHandle:Bv,useInsertionEffect:zv,useLayoutEffect:kv,useMemo:Hv,useReducer:Yh,useRef:$h,useState:function(){return Yh(uo)},useDebugValue:Em,useDeferredValue:function(r,o){var h=xi();return jv(h,kn.memoizedState,r,o)},useTransition:function(){var r=Yh(uo)[0],o=xi().memoizedState;return[typeof r=="boolean"?r:uf(r),o]},useSyncExternalStore:Sv,useId:qv,useHostTransitionStatus:Rm,useFormState:Iv,useActionState:Iv,useOptimistic:function(r,o){var h=xi();return xm(h,kn,r,o)},useMemoCache:mm,useCacheRefresh:Zv};Dm.useEffectEvent=Ov;var zr={readContext:Vt,use:Yo,useCallback:Vv,useContext:Vt,useEffect:Tm,useImperativeHandle:Bv,useInsertionEffect:zv,useLayoutEffect:kv,useMemo:Hv,useReducer:vm,useRef:$h,useState:function(){return vm(uo)},useDebugValue:Em,useDeferredValue:function(r,o){var h=xi();return kn===null?Am(h,r,o):jv(h,kn.memoizedState,r,o)},useTransition:function(){var r=vm(uo)[0],o=xi().memoizedState;return[typeof r=="boolean"?r:uf(r),o]},useSyncExternalStore:Sv,useId:qv,useHostTransitionStatus:Rm,useFormState:wm,useActionState:wm,useOptimistic:function(r,o){var h=xi();return kn!==null?xm(h,kn,r,o):(h.baseState=r,[r,h.queue.dispatch])},useMemoCache:mm,useCacheRefresh:Zv};zr.useEffectEvent=Ov;function ed(r,o,h,m){o=r.memoizedState,h=h(m,o),h=h==null?o:y({},o,h),r.memoizedState=h,r.lanes===0&&(r.updateQueue.baseState=h)}var hf={enqueueSetState:function(r,o,h){r=r._reactInternals;var m=pr(),S=lo(m);S.payload=o,h!=null&&(S.callback=h),o=qo(r,S,m),o!==null&&(rn(o,r,m),Zo(o,r,m))},enqueueReplaceState:function(r,o,h){r=r._reactInternals;var m=pr(),S=lo(m);S.tag=1,S.payload=o,h!=null&&(S.callback=h),o=qo(r,S,m),o!==null&&(rn(o,r,m),Zo(o,r,m))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var h=pr(),m=lo(h);m.tag=2,o!=null&&(m.callback=o),o=qo(r,m,h),o!==null&&(rn(o,r,h),Zo(o,r,h))}};function Im(r,o,h,m,S,T,U){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,T,U):o.prototype&&o.prototype.isPureReactComponent?!Cc(h,m)||!Cc(S,T):!0}function Lm(r,o,h,m){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,m),o.state!==r&&hf.enqueueReplaceState(o,o.state,null)}function Ko(r,o){var h=o;if("ref"in o){h={};for(var m in o)m!=="ref"&&(h[m]=o[m])}if(r=r.defaultProps){h===o&&(h=y({},h));for(var S in r)h[S]===void 0&&(h[S]=r[S])}return h}function Qv(r){Ju(r)}function Pm(r){console.error(r)}function Um(r){Ju(r)}function td(r,o){try{var h=r.onUncaughtError;h(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function ey(r,o,h){try{var m=r.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function Om(r,o,h){return h=lo(h),h.tag=3,h.payload={element:null},h.callback=function(){td(r,o)},h}function zm(r){return r=lo(r),r.tag=3,r}function ty(r,o,h,m){var S=h.type.getDerivedStateFromError;if(typeof S=="function"){var T=m.value;r.payload=function(){return S(T)},r.callback=function(){ey(o,h,m)}}var U=h.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(r.callback=function(){ey(o,h,m),typeof S!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var G=m.stack;this.componentDidCatch(m.value,{componentStack:G!==null?G:""})})}function Bi(r,o,h,m,S){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=h.alternate,o!==null&&Ca(o,h,S,!0),h=Fs.current,h!==null){switch(h.tag){case 31:case 13:return Es===null?Qc():h.alternate===null&&oi===0&&(oi=3),h.flags&=-257,h.flags|=65536,h.lanes=S,m===Vh?h.flags|=16384:(o=h.updateQueue,o===null?h.updateQueue=new Set([m]):o.add(m),wf(r,m,S)),!1;case 22:return h.flags|=65536,m===Vh?h.flags|=16384:(o=h.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=o):(h=o.retryQueue,h===null?o.retryQueue=new Set([m]):h.add(m)),wf(r,m,S)),!1}throw Error(i(435,h.tag))}return wf(r,m,S),Qc(),!1}if(mn)return o=Fs.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=S,m!==Oc&&(r=Error(i(422),{cause:m}),Ta(ar(r,h)))):(m!==Oc&&(o=Error(i(423),{cause:m}),Ta(ar(o,h))),r=r.current.alternate,r.flags|=65536,S&=-S,r.lanes|=S,m=ar(m,h),S=Om(r.stateNode,m,S),It(r,S),oi!==4&&(oi=2)),!1;var T=Error(i(520),{cause:m});if(T=ar(T,h),Ql===null?Ql=[T]:Ql.push(T),oi!==4&&(oi=2),o===null)return!0;m=ar(m,h),h=o;do{switch(h.tag){case 3:return h.flags|=65536,r=S&-S,h.lanes|=r,r=Om(h.stateNode,m,r),It(h,r),!1;case 1:if(o=h.type,T=h.stateNode,(h.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Si===null||!Si.has(T))))return h.flags|=65536,S&=-S,h.lanes|=S,S=zm(S),ty(S,r,h,m),It(h,S),!1}h=h.return}while(h!==null);return!1}var nd=Error(i(461)),Di=!1;function $i(r,o,h,m){o.child=r===null?Gh(o,null,h,m):oo(o,r.child,h,m)}function km(r,o,h,m,S){h=h.render;var T=o.ref;if("ref"in m){var U={};for(var G in m)G!=="ref"&&(U[G]=m[G])}else U=m;return Wo(o),m=qh(r,o,h,U,T,S),G=hm(),r!==null&&!Di?(dm(r,o,S),_i(r,o,S)):(mn&&G&&Ma(o),o.flags|=1,$i(r,o,m,S),o.child)}function Xl(r,o,h,m,S){if(r===null){var T=h.type;return typeof T=="function"&&!Dh(T)&&T.defaultProps===void 0&&h.compare===null?(o.tag=15,o.type=T,id(r,o,T,m,S)):(r=ba(h.type,null,m,o,o.mode,S),r.ref=o.ref,r.return=o,o.child=r)}if(T=r.child,!cd(r,S)){var U=T.memoizedProps;if(h=h.compare,h=h!==null?h:Cc,h(U,m)&&r.ref===o.ref)return _i(r,o,S)}return o.flags|=1,r=Os(T,m),r.ref=o.ref,r.return=o,o.child=r}function id(r,o,h,m,S){if(r!==null){var T=r.memoizedProps;if(Cc(T,m)&&r.ref===o.ref)if(Di=!1,o.pendingProps=m=T,cd(r,S))(r.flags&131072)!==0&&(Di=!0);else return o.lanes=r.lanes,_i(r,o,S)}return qc(r,o,h,m,S)}function ql(r,o,h,m){var S=m.children,T=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((o.flags&128)!==0){if(T=T!==null?T.baseLanes|h:h,r!==null){for(m=o.child=r.child,S=0;m!==null;)S=S|m.lanes|m.childLanes,m=m.sibling;m=S&~T}else m=0,o.child=null;return Vs(r,o,T,h,m)}if((h&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&nf(o,T!==null?T.cachePool:null),T!==null?xv(o,T):lm(),_v(o);else return m=o.lanes=536870912,Vs(r,o,T!==null?T.baseLanes|h:h,h,m)}else T!==null?(nf(o,T.cachePool),xv(o,T),Bs(),o.memoizedState=null):(r!==null&&nf(o,null),lm(),Bs());return $i(r,o,S,h),o.child}function Na(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Vs(r,o,h,m,S){var T=Bh();return T=T===null?null:{parent:Ni._currentValue,pool:T},o.memoizedState={baseLanes:h,cachePool:T},r!==null&&nf(o,null),lm(),_v(o),r!==null&&Ca(r,o,m,!0),o.childLanes=S,null}function sd(r,o){return o=ld({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function ny(r,o,h){return oo(o,r.child,null,h),r=sd(o,o.pendingProps),r.flags|=2,yi(o),o.memoizedState=null,r}function rd(r,o,h){var m=o.pendingProps,S=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(mn){if(m.mode==="hidden")return r=sd(o,m),o.lanes=536870912,Na(null,r);if(cm(o),(r=Wn)?(r=ME(r,or),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:io!==null?{id:ri,overflow:sa}:null,retryLane:536870912,hydrationErrors:null},h=Lc(r),h.return=o,o.child=h,di=o,Wn=null)):r=null,r===null)throw wa(o);return o.lanes=536870912,null}return sd(o,m)}var T=r.memoizedState;if(T!==null){var U=T.dehydrated;if(cm(o),S)if(o.flags&256)o.flags&=-257,o=ny(r,o,h);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(i(558));else if(Di||Ca(r,o,h,!1),S=(h&r.childLanes)!==0,Di||S){if(m=Gt,m!==null&&(U=Tl(m,h),U!==0&&U!==T.retryLane))throw T.retryLane=U,ws(r,U),rn(m,r,U),nd;Qc(),o=ny(r,o,h)}else r=T.treeContext,Wn=Fa(U.nextSibling),di=o,mn=!0,so=null,or=!1,r!==null&&Uh(o,r),o=sd(o,m),o.flags|=4096;return o}return r=Os(r.child,{mode:m.mode,children:m.children}),r.ref=o.ref,o.child=r,r.return=o,r}function Zl(r,o){var h=o.ref;if(h===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(r===null||r.ref!==h)&&(o.flags|=4194816)}}function qc(r,o,h,m,S){return Wo(o),h=qh(r,o,h,m,void 0,S),m=hm(),r!==null&&!Di?(dm(r,o,S),_i(r,o,S)):(mn&&m&&Ma(o),o.flags|=1,$i(r,o,h,S),o.child)}function df(r,o,h,m,S,T){return Wo(o),o.updateQueue=null,h=Gl(o,m,h,S),bv(r),m=hm(),r!==null&&!Di?(dm(r,o,T),_i(r,o,T)):(mn&&m&&Ma(o),o.flags|=1,$i(r,o,h,T),o.child)}function ad(r,o,h,m,S){if(Wo(o),o.stateNode===null){var T=Fo,U=h.contextType;typeof U=="object"&&U!==null&&(T=Vt(U)),T=new h(m,T),o.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=hf,o.stateNode=T,T._reactInternals=o,T=o.stateNode,T.props=m,T.state=o.memoizedState,T.refs={},af(o),U=h.contextType,T.context=typeof U=="object"&&U!==null?Vt(U):Fo,T.state=o.memoizedState,U=h.getDerivedStateFromProps,typeof U=="function"&&(ed(o,h,U,m),T.state=o.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(U=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),U!==T.state&&hf.enqueueReplaceState(T,T.state,null),Vc(o,m,T,S),of(),T.state=o.memoizedState),typeof T.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(r===null){T=o.stateNode;var G=o.memoizedProps,Q=Ko(h,G);T.props=Q;var ge=T.context,Ne=h.contextType;U=Fo,typeof Ne=="object"&&Ne!==null&&(U=Vt(Ne));var Oe=h.getDerivedStateFromProps;Ne=typeof Oe=="function"||typeof T.getSnapshotBeforeUpdate=="function",G=o.pendingProps!==G,Ne||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(G||ge!==U)&&Lm(o,T,m,U),Ts=!1;var xe=o.memoizedState;T.state=xe,Vc(o,m,T,S),of(),ge=o.memoizedState,G||xe!==ge||Ts?(typeof Oe=="function"&&(ed(o,h,Oe,m),ge=o.memoizedState),(Q=Ts||Im(o,h,Q,m,xe,ge,U))?(Ne||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=ge),T.props=m,T.state=ge,T.context=U,m=Q):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{T=o.stateNode,am(r,o),U=o.memoizedProps,Ne=Ko(h,U),T.props=Ne,Oe=o.pendingProps,xe=T.context,ge=h.contextType,Q=Fo,typeof ge=="object"&&ge!==null&&(Q=Vt(ge)),G=h.getDerivedStateFromProps,(ge=typeof G=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(U!==Oe||xe!==Q)&&Lm(o,T,m,Q),Ts=!1,xe=o.memoizedState,T.state=xe,Vc(o,m,T,S),of();var Te=o.memoizedState;U!==Oe||xe!==Te||Ts||r!==null&&r.dependencies!==null&&tf(r.dependencies)?(typeof G=="function"&&(ed(o,h,G,m),Te=o.memoizedState),(Ne=Ts||Im(o,h,Ne,m,xe,Te,Q)||r!==null&&r.dependencies!==null&&tf(r.dependencies))?(ge||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(m,Te,Q),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(m,Te,Q)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||U===r.memoizedProps&&xe===r.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||U===r.memoizedProps&&xe===r.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=Te),T.props=m,T.state=Te,T.context=Q,m=Ne):(typeof T.componentDidUpdate!="function"||U===r.memoizedProps&&xe===r.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||U===r.memoizedProps&&xe===r.memoizedState||(o.flags|=1024),m=!1)}return T=m,Zl(r,o),m=(o.flags&128)!==0,T||m?(T=o.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:T.render(),o.flags|=1,r!==null&&m?(o.child=oo(o,r.child,null,S),o.child=oo(o,null,h,S)):$i(r,o,h,S),o.memoizedState=T.state,r=o.child):r=_i(r,o,S),r}function iy(r,o,h,m){return jo(),o.flags|=256,$i(r,o,h,m),o.child}var Fm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gs(r){return{baseLanes:r,cachePool:rm()}}function od(r,o,h){return r=r!==null?r.childLanes&~h:0,o&&(r|=Rs),r}function sy(r,o,h){var m=o.pendingProps,S=!1,T=(o.flags&128)!==0,U;if((U=T)||(U=r!==null&&r.memoizedState===null?!1:(gn.current&2)!==0),U&&(S=!0,o.flags&=-129),U=(o.flags&32)!==0,o.flags&=-33,r===null){if(mn){if(S?co(o):Bs(),(r=Wn)?(r=ME(r,or),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:io!==null?{id:ri,overflow:sa}:null,retryLane:536870912,hydrationErrors:null},h=Lc(r),h.return=o,o.child=h,di=o,Wn=null)):r=null,r===null)throw wa(o);return wS(r)?o.lanes=32:o.lanes=536870912,null}var G=m.children;return m=m.fallback,S?(Bs(),S=o.mode,G=ld({mode:"hidden",children:G},S),m=Bo(m,S,h,null),G.return=o,m.return=o,G.sibling=m,o.child=G,m=o.child,m.memoizedState=gs(h),m.childLanes=od(r,U,h),o.memoizedState=Fm,Na(null,m)):(co(o),pf(o,G))}var Q=r.memoizedState;if(Q!==null&&(G=Q.dehydrated,G!==null)){if(T)o.flags&256?(co(o),o.flags&=-257,o=Bm(r,o,h)):o.memoizedState!==null?(Bs(),o.child=r.child,o.flags|=128,o=null):(Bs(),G=m.fallback,S=o.mode,m=ld({mode:"visible",children:m.children},S),G=Bo(G,S,h,null),G.flags|=2,m.return=o,G.return=o,m.sibling=G,o.child=m,oo(o,r.child,null,h),m=o.child,m.memoizedState=gs(h),m.childLanes=od(r,U,h),o.memoizedState=Fm,o=Na(null,m));else if(co(o),wS(G)){if(U=G.nextSibling&&G.nextSibling.dataset,U)var ge=U.dgst;U=ge,m=Error(i(419)),m.stack="",m.digest=U,Ta({value:m,source:null,stack:null}),o=Bm(r,o,h)}else if(Di||Ca(r,o,h,!1),U=(h&r.childLanes)!==0,Di||U){if(U=Gt,U!==null&&(m=Tl(U,h),m!==0&&m!==Q.retryLane))throw Q.retryLane=m,ws(r,m),rn(U,r,m),nd;MS(G)||Qc(),o=Bm(r,o,h)}else MS(G)?(o.flags|=192,o.child=r.child,o=null):(r=Q.treeContext,Wn=Fa(G.nextSibling),di=o,mn=!0,so=null,or=!1,r!==null&&Uh(o,r),o=pf(o,m.children),o.flags|=4096);return o}return S?(Bs(),G=m.fallback,S=o.mode,Q=r.child,ge=Q.sibling,m=Os(Q,{mode:"hidden",children:m.children}),m.subtreeFlags=Q.subtreeFlags&65011712,ge!==null?G=Os(ge,G):(G=Bo(G,S,h,null),G.flags|=2),G.return=o,m.return=o,m.sibling=G,o.child=m,Na(null,m),m=o.child,G=r.child.memoizedState,G===null?G=gs(h):(S=G.cachePool,S!==null?(Q=Ni._currentValue,S=S.parent!==Q?{parent:Q,pool:Q}:S):S=rm(),G={baseLanes:G.baseLanes|h,cachePool:S}),m.memoizedState=G,m.childLanes=od(r,U,h),o.memoizedState=Fm,Na(r.child,m)):(co(o),h=r.child,r=h.sibling,h=Os(h,{mode:"visible",children:m.children}),h.return=o,h.sibling=null,r!==null&&(U=o.deletions,U===null?(o.deletions=[r],o.flags|=16):U.push(r)),o.child=h,o.memoizedState=null,h)}function pf(r,o){return o=ld({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function ld(r,o){return r=si(22,r,null,o),r.lanes=0,r}function Bm(r,o,h){return oo(o,r.child,null,h),r=pf(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function ry(r,o,h){r.lanes|=o;var m=r.alternate;m!==null&&(m.lanes|=o),zh(r.return,o,h)}function Yl(r,o,h,m,S,T){var U=r.memoizedState;U===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:S,treeForkCount:T}:(U.isBackwards=o,U.rendering=null,U.renderingStartTime=0,U.last=m,U.tail=h,U.tailMode=S,U.treeForkCount=T)}function Hs(r,o,h){var m=o.pendingProps,S=m.revealOrder,T=m.tail;m=m.children;var U=gn.current,G=(U&2)!==0;if(G?(U=U&1|2,o.flags|=128):U&=1,Ae(gn,U),$i(r,o,m,h),m=mn?Uc:0,!G&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ry(r,h,o);else if(r.tag===19)ry(r,h,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(S){case"forwards":for(h=o.child,S=null;h!==null;)r=h.alternate,r!==null&&cr(r)===null&&(S=h),h=h.sibling;h=S,h===null?(S=o.child,o.child=null):(S=h.sibling,h.sibling=null),Yl(o,!1,S,h,T,m);break;case"backwards":case"unstable_legacy-backwards":for(h=null,S=o.child,o.child=null;S!==null;){if(r=S.alternate,r!==null&&cr(r)===null){o.child=S;break}r=S.sibling,S.sibling=h,h=S,S=r}Yl(o,!0,h,null,T,m);break;case"together":Yl(o,!1,null,null,void 0,m);break;default:o.memoizedState=null}return o.child}function _i(r,o,h){if(r!==null&&(o.dependencies=r.dependencies),Oa|=o.lanes,(h&o.childLanes)===0)if(r!==null){if(Ca(r,o,h,!1),(h&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,h=Os(r,r.pendingProps),o.child=h,h.return=o;r.sibling!==null;)r=r.sibling,h=h.sibling=Os(r,r.pendingProps),h.return=o;h.sibling=null}return o.child}function cd(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&tf(r)))}function fS(r,o,h){switch(o.tag){case 3:et(o,o.stateNode.containerInfo),ro(o,Ni,r.memoizedState.cache),jo();break;case 27:case 5:ht(o);break;case 4:et(o,o.stateNode.containerInfo);break;case 10:ro(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,cm(o),null;break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(co(o),o.flags|=128,null):(h&o.child.childLanes)!==0?sy(r,o,h):(co(o),r=_i(r,o,h),r!==null?r.sibling:null);co(o);break;case 19:var S=(r.flags&128)!==0;if(m=(h&o.childLanes)!==0,m||(Ca(r,o,h,!1),m=(h&o.childLanes)!==0),S){if(m)return Hs(r,o,h);o.flags|=128}if(S=o.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Ae(gn,gn.current),m)break;return null;case 22:return o.lanes=0,ql(r,o,h,o.pendingProps);case 24:ro(o,Ni,r.memoizedState.cache)}return _i(r,o,h)}function ud(r,o,h){if(r!==null)if(r.memoizedProps!==o.pendingProps)Di=!0;else{if(!cd(r,h)&&(o.flags&128)===0)return Di=!1,fS(r,o,h);Di=(r.flags&131072)!==0}else Di=!1,mn&&(o.flags&1048576)!==0&&hv(o,Uc,o.index);switch(o.lanes=0,o.tag){case 16:e:{var m=o.pendingProps;if(r=kl(o.elementType),o.type=r,typeof r=="function")Dh(r)?(m=Ko(r,m),o.tag=1,o=ad(null,o,r,m,h)):(o.tag=0,o=qc(null,o,r,m,h));else{if(r!=null){var S=r.$$typeof;if(S===N){o.tag=11,o=km(null,o,r,m,h);break e}else if(S===B){o.tag=14,o=Xl(null,o,r,m,h);break e}}throw o=ae(r)||r,Error(i(306,o,""))}}return o;case 0:return qc(r,o,o.type,o.pendingProps,h);case 1:return m=o.type,S=Ko(m,o.pendingProps),ad(r,o,m,S,h);case 3:e:{if(et(o,o.stateNode.containerInfo),r===null)throw Error(i(387));m=o.pendingProps;var T=o.memoizedState;S=T.element,am(r,o),Vc(o,m,null,h);var U=o.memoizedState;if(m=U.cache,ro(o,Ni,m),m!==T.cache&&kh(o,[Ni],h,!0),of(),m=U.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:U.cache},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){o=iy(r,o,m,h);break e}else if(m!==S){S=ar(Error(i(424)),o),Ta(S),o=iy(r,o,m,h);break e}else for(r=o.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,Wn=Fa(r.firstChild),di=o,mn=!0,so=null,or=!0,h=Gh(o,null,m,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(jo(),m===S){o=_i(r,o,h);break e}$i(r,o,m,h)}o=o.child}return o;case 26:return Zl(r,o),r===null?(h=RE(o.type,null,o.pendingProps,null))?o.memoizedState=h:mn||(h=o.type,r=o.pendingProps,m=cy(de.current).createElement(h),m[ii]=o,m[zi]=r,Ds(m,h,r),j(m),o.stateNode=m):o.memoizedState=RE(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return ht(o),r===null&&mn&&(m=o.stateNode=EE(o.type,o.pendingProps,de.current),di=o,or=!0,S=Wn,iu(o.type)?(TS=S,Wn=Fa(m.firstChild)):Wn=S),$i(r,o,o.pendingProps.children,h),Zl(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&mn&&((S=m=Wn)&&(m=SU(m,o.type,o.pendingProps,or),m!==null?(o.stateNode=m,di=o,Wn=Fa(m.firstChild),or=!1,S=!0):S=!1),S||wa(o)),ht(o),S=o.type,T=o.pendingProps,U=r!==null?r.memoizedProps:null,m=T.children,_S(S,T)?m=null:U!==null&&_S(S,U)&&(o.flags|=32),o.memoizedState!==null&&(S=qh(r,o,Wl,null,null,h),Km._currentValue=S),Zl(r,o),$i(r,o,m,h),o.child;case 6:return r===null&&mn&&((r=h=Wn)&&(h=MU(h,o.pendingProps,or),h!==null?(o.stateNode=h,di=o,Wn=null,r=!0):r=!1),r||wa(o)),null;case 13:return sy(r,o,h);case 4:return et(o,o.stateNode.containerInfo),m=o.pendingProps,r===null?o.child=oo(o,null,m,h):$i(r,o,m,h),o.child;case 11:return km(r,o,o.type,o.pendingProps,h);case 7:return $i(r,o,o.pendingProps,h),o.child;case 8:return $i(r,o,o.pendingProps.children,h),o.child;case 12:return $i(r,o,o.pendingProps.children,h),o.child;case 10:return m=o.pendingProps,ro(o,o.type,m.value),$i(r,o,m.children,h),o.child;case 9:return S=o.type._context,m=o.pendingProps.children,Wo(o),S=Vt(S),m=m(S),o.flags|=1,$i(r,o,m,h),o.child;case 14:return Xl(r,o,o.type,o.pendingProps,h);case 15:return id(r,o,o.type,o.pendingProps,h);case 19:return Hs(r,o,h);case 31:return rd(r,o,h);case 22:return ql(r,o,h,o.pendingProps);case 24:return Wo(o),m=Vt(Ni),r===null?(S=Bh(),S===null&&(S=Gt,T=tm(),S.pooledCache=T,T.refCount++,T!==null&&(S.pooledCacheLanes|=h),S=T),o.memoizedState={parent:m,cache:S},af(o),ro(o,Ni,S)):((r.lanes&h)!==0&&(am(r,o),Vc(o,null,null,h),of()),S=r.memoizedState,T=o.memoizedState,S.parent!==m?(S={parent:m,cache:m},o.memoizedState=S,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=S),ro(o,Ni,m)):(m=T.cache,ro(o,Ni,m),m!==S.cache&&kh(o,[Ni],h,!0))),$i(r,o,o.pendingProps.children,h),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Da(r){r.flags|=4}function mf(r,o,h,m,S){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(S&335544128)===S)if(r.stateNode.complete)r.flags|=8192;else if(ci())r.flags|=8192;else throw Ra=Vh,sf}else r.flags&=-16777217}function Vm(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!PE(o))if(ci())r.flags|=8192;else throw Ra=Vh,sf}function fo(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?vn():536870912,r.lanes|=o,Kn|=o)}function Ia(r,o){if(!mn)switch(r.tailMode){case"hidden":o=r.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?r.tail=null:h.sibling=null;break;case"collapsed":h=r.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function Fn(r){var o=r.alternate!==null&&r.alternate.child===r.child,h=0,m=0;if(o)for(var S=r.child;S!==null;)h|=S.lanes|S.childLanes,m|=S.subtreeFlags&65011712,m|=S.flags&65011712,S.return=r,S=S.sibling;else for(S=r.child;S!==null;)h|=S.lanes|S.childLanes,m|=S.subtreeFlags,m|=S.flags,S.return=r,S=S.sibling;return r.subtreeFlags|=m,r.childLanes=h,o}function gf(r,o,h){var m=o.pendingProps;switch(Ph(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fn(o),null;case 1:return Fn(o),null;case 3:return h=o.stateNode,m=null,r!==null&&(m=r.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),Aa(Ni),it(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(zc(o)?Da(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Oh())),Fn(o),null;case 26:var S=o.type,T=o.memoizedState;return r===null?(Da(o),T!==null?(Fn(o),Vm(o,T)):(Fn(o),mf(o,S,null,m,h))):T?T!==r.memoizedState?(Da(o),Fn(o),Vm(o,T)):(Fn(o),o.flags&=-16777217):(r=r.memoizedProps,r!==m&&Da(o),Fn(o),mf(o,S,r,m,h)),null;case 27:if(tn(o),h=de.current,S=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==m&&Da(o);else{if(!m){if(o.stateNode===null)throw Error(i(166));return Fn(o),null}r=ke.current,zc(o)?dv(o):(r=EE(S,m,h),o.stateNode=r,Da(o))}return Fn(o),null;case 5:if(tn(o),S=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==m&&Da(o);else{if(!m){if(o.stateNode===null)throw Error(i(166));return Fn(o),null}if(T=ke.current,zc(o))dv(o);else{var U=cy(de.current);switch(T){case 1:T=U.createElementNS("http://www.w3.org/2000/svg",S);break;case 2:T=U.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;default:switch(S){case"svg":T=U.createElementNS("http://www.w3.org/2000/svg",S);break;case"math":T=U.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;case"script":T=U.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof m.is=="string"?U.createElement("select",{is:m.is}):U.createElement("select"),m.multiple?T.multiple=!0:m.size&&(T.size=m.size);break;default:T=typeof m.is=="string"?U.createElement(S,{is:m.is}):U.createElement(S)}}T[ii]=o,T[zi]=m;e:for(U=o.child;U!==null;){if(U.tag===5||U.tag===6)T.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===o)break e;for(;U.sibling===null;){if(U.return===null||U.return===o)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}o.stateNode=T;e:switch(Ds(T,S,m),S){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Da(o)}}return Fn(o),mf(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,h),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==m&&Da(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(i(166));if(r=de.current,zc(o)){if(r=o.stateNode,h=o.memoizedProps,m=null,S=di,S!==null)switch(S.tag){case 27:case 5:m=S.memoizedProps}r[ii]=o,r=!!(r.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||mE(r.nodeValue,h)),r||wa(o,!0)}else r=cy(r).createTextNode(m),r[ii]=o,o.stateNode=r}return Fn(o),null;case 31:if(h=o.memoizedState,r===null||r.memoizedState!==null){if(m=zc(o),h!==null){if(r===null){if(!m)throw Error(i(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[ii]=o}else jo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Fn(o),r=!1}else h=Oh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=h),r=!0;if(!r)return o.flags&256?(yi(o),o):(yi(o),null);if((o.flags&128)!==0)throw Error(i(558))}return Fn(o),null;case 13:if(m=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(S=zc(o),m!==null&&m.dehydrated!==null){if(r===null){if(!S)throw Error(i(318));if(S=o.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(i(317));S[ii]=o}else jo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Fn(o),S=!1}else S=Oh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=S),S=!0;if(!S)return o.flags&256?(yi(o),o):(yi(o),null)}return yi(o),(o.flags&128)!==0?(o.lanes=h,o):(h=m!==null,r=r!==null&&r.memoizedState!==null,h&&(m=o.child,S=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(S=m.alternate.memoizedState.cachePool.pool),T=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(T=m.memoizedState.cachePool.pool),T!==S&&(m.flags|=2048)),h!==r&&h&&(o.child.flags|=8192),fo(o,o.updateQueue),Fn(o),null);case 4:return it(),r===null&&mS(o.stateNode.containerInfo),Fn(o),null;case 10:return Aa(o.type),Fn(o),null;case 19:if(oe(gn),m=o.memoizedState,m===null)return Fn(o),null;if(S=(o.flags&128)!==0,T=m.rendering,T===null)if(S)Ia(m,!1);else{if(oi!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(T=cr(r),T!==null){for(o.flags|=128,Ia(m,!1),r=T.updateQueue,o.updateQueue=r,fo(o,r),o.subtreeFlags=0,r=h,h=o.child;h!==null;)Ic(h,r),h=h.sibling;return Ae(gn,gn.current&1|2),mn&&Sa(o,m.treeForkCount),o.child}r=r.sibling}m.tail!==null&&k()>bi&&(o.flags|=128,S=!0,Ia(m,!1),o.lanes=4194304)}else{if(!S)if(r=cr(T),r!==null){if(o.flags|=128,S=!0,r=r.updateQueue,o.updateQueue=r,fo(o,r),Ia(m,!0),m.tail===null&&m.tailMode==="hidden"&&!T.alternate&&!mn)return Fn(o),null}else 2*k()-m.renderingStartTime>bi&&h!==536870912&&(o.flags|=128,S=!0,Ia(m,!1),o.lanes=4194304);m.isBackwards?(T.sibling=o.child,o.child=T):(r=m.last,r!==null?r.sibling=T:o.child=T,m.last=T)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=k(),r.sibling=null,h=gn.current,Ae(gn,S?h&1|2:h&1),mn&&Sa(o,m.treeForkCount),r):(Fn(o),null);case 22:case 23:return yi(o),lf(),m=o.memoizedState!==null,r!==null?r.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(h&536870912)!==0&&(o.flags&128)===0&&(Fn(o),o.subtreeFlags&6&&(o.flags|=8192)):Fn(o),h=o.updateQueue,h!==null&&fo(o,h.retryQueue),h=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==h&&(o.flags|=2048),r!==null&&oe(Xo),null;case 24:return h=null,r!==null&&(h=r.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),Aa(Ni),Fn(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function kr(r,o){switch(Ph(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Aa(Ni),it(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return tn(o),null;case 31:if(o.memoizedState!==null){if(yi(o),o.alternate===null)throw Error(i(340));jo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(yi(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));jo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return oe(gn),null;case 4:return it(),null;case 10:return Aa(o.type),null;case 22:case 23:return yi(o),lf(),r!==null&&oe(Xo),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Aa(Ni),null;case 25:return null;default:return null}}function ur(r,o){switch(Ph(o),o.tag){case 3:Aa(Ni),it();break;case 26:case 27:case 5:tn(o);break;case 4:it();break;case 31:o.memoizedState!==null&&yi(o);break;case 13:yi(o);break;case 19:oe(gn);break;case 10:Aa(o.type);break;case 22:case 23:yi(o),lf(),r!==null&&oe(Xo);break;case 24:Aa(Ni)}}function Fr(r,o){try{var h=o.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var S=m.next;h=S;do{if((h.tag&r)===r){m=void 0;var T=h.create,U=h.inst;m=T(),U.destroy=m}h=h.next}while(h!==S)}}catch(G){An(o,o.return,G)}}function os(r,o,h){try{var m=o.updateQueue,S=m!==null?m.lastEffect:null;if(S!==null){var T=S.next;m=T;do{if((m.tag&r)===r){var U=m.inst,G=U.destroy;if(G!==void 0){U.destroy=void 0,S=o;var Q=h,ge=G;try{ge()}catch(Ne){An(S,Q,Ne)}}}m=m.next}while(m!==T)}}catch(Ne){An(o,o.return,Ne)}}function ra(r){var o=r.updateQueue;if(o!==null){var h=r.stateNode;try{yv(o,h)}catch(m){An(r,r.return,m)}}}function Ki(r,o,h){h.props=Ko(r.type,r.memoizedProps),h.state=r.memoizedState;try{h.componentWillUnmount()}catch(m){An(r,o,m)}}function ho(r,o){try{var h=r.ref;if(h!==null){switch(r.tag){case 26:case 27:case 5:var m=r.stateNode;break;case 30:m=r.stateNode;break;default:m=r.stateNode}typeof h=="function"?r.refCleanup=h(m):h.current=m}}catch(S){An(r,o,S)}}function ls(r,o){var h=r.ref,m=r.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(S){An(r,o,S)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(S){An(r,o,S)}else h.current=null}function vf(r){var o=r.type,h=r.memoizedProps,m=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(S){An(r,r.return,S)}}function Vi(r,o,h){try{var m=r.stateNode;gU(m,r.type,h,o),m[zi]=o}catch(S){An(r,r.return,S)}}function ti(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&iu(r.type)||r.tag===4}function dn(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ti(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&iu(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function La(r,o,h){var m=r.tag;if(m===5||m===6)r=r.stateNode,o?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(r,o):(o=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,o.appendChild(r),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=eo));else if(m!==4&&(m===27&&iu(r.type)&&(h=r.stateNode,o=null),r=r.child,r!==null))for(La(r,o,h),r=r.sibling;r!==null;)La(r,o,h),r=r.sibling}function As(r,o,h){var m=r.tag;if(m===5||m===6)r=r.stateNode,o?h.insertBefore(r,o):h.appendChild(r);else if(m!==4&&(m===27&&iu(r.type)&&(h=r.stateNode),r=r.child,r!==null))for(As(r,o,h),r=r.sibling;r!==null;)As(r,o,h),r=r.sibling}function fd(r){var o=r.stateNode,h=r.memoizedProps;try{for(var m=r.type,S=o.attributes;S.length;)o.removeAttributeNode(S[0]);Ds(o,m,h),o[ii]=r,o[zi]=h}catch(T){An(r,r.return,T)}}var Br=!1,Xn=!1,aa=!1,ay=typeof WeakSet=="function"?WeakSet:Set,Ji=null;function hS(r,o){if(r=r.containerInfo,yS=gy,r=lv(r),$p(r)){if("selectionStart"in r)var h={start:r.selectionStart,end:r.selectionEnd};else e:{h=(h=r.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var S=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{h.nodeType,T.nodeType}catch{h=null;break e}var U=0,G=-1,Q=-1,ge=0,Ne=0,Oe=r,xe=null;t:for(;;){for(var Te;Oe!==h||S!==0&&Oe.nodeType!==3||(G=U+S),Oe!==T||m!==0&&Oe.nodeType!==3||(Q=U+m),Oe.nodeType===3&&(U+=Oe.nodeValue.length),(Te=Oe.firstChild)!==null;)xe=Oe,Oe=Te;for(;;){if(Oe===r)break t;if(xe===h&&++ge===S&&(G=U),xe===T&&++Ne===m&&(Q=U),(Te=Oe.nextSibling)!==null)break;Oe=xe,xe=Oe.parentNode}Oe=Te}h=G===-1||Q===-1?null:{start:G,end:Q}}else h=null}h=h||{start:0,end:0}}else h=null;for(xS={focusedElem:r,selectionRange:h},gy=!1,Ji=o;Ji!==null;)if(o=Ji,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,Ji=r;else for(;Ji!==null;){switch(o=Ji,T=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(h=0;h<r.length;h++)S=r[h],S.ref.impl=S.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&T!==null){r=void 0,h=o,S=T.memoizedProps,T=T.memoizedState,m=h.stateNode;try{var wt=Ko(h.type,S);r=m.getSnapshotBeforeUpdate(wt,T),m.__reactInternalSnapshotBeforeUpdate=r}catch(Bt){An(h,h.return,Bt)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,h=r.nodeType,h===9)SS(r);else if(h===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":SS(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,Ji=r;break}Ji=o.return}}function ni(r,o,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:jr(r,h),m&4&&Fr(5,h);break;case 1:if(jr(r,h),m&4)if(r=h.stateNode,o===null)try{r.componentDidMount()}catch(U){An(h,h.return,U)}else{var S=Ko(h.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(S,o,r.__reactInternalSnapshotBeforeUpdate)}catch(U){An(h,h.return,U)}}m&64&&ra(h),m&512&&ho(h,h.return);break;case 3:if(jr(r,h),m&64&&(r=h.updateQueue,r!==null)){if(o=null,h.child!==null)switch(h.child.tag){case 27:case 5:o=h.child.stateNode;break;case 1:o=h.child.stateNode}try{yv(r,o)}catch(U){An(h,h.return,U)}}break;case 27:o===null&&m&4&&fd(h);case 26:case 5:jr(r,h),o===null&&m&4&&vf(h),m&512&&ho(h,h.return);break;case 12:jr(r,h);break;case 31:jr(r,h),m&4&&Jo(r,h);break;case 13:jr(r,h),m&4&&Zc(r,h),m&64&&(r=h.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(h=v.bind(null,h),wU(r,h))));break;case 22:if(m=h.memoizedState!==null||Br,!m){o=o!==null&&o.memoizedState!==null||Xn,S=Br;var T=Xn;Br=m,(Xn=o)&&!T?Cs(r,h,(h.subtreeFlags&8772)!==0):jr(r,h),Br=S,Xn=T}break;case 30:break;default:jr(r,h)}}function yf(r){var o=r.alternate;o!==null&&(r.alternate=null,yf(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Ka(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Pn=null,vs=!1;function Vr(r,o,h){for(h=h.child;h!==null;)hd(r,o,h),h=h.sibling}function hd(r,o,h){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Ve,h)}catch{}switch(h.tag){case 26:Xn||ls(h,o),Vr(r,o,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Xn||ls(h,o);var m=Pn,S=vs;iu(h.type)&&(Pn=h.stateNode,vs=!1),Vr(r,o,h),Zm(h.stateNode),Pn=m,vs=S;break;case 5:Xn||ls(h,o);case 6:if(m=Pn,S=vs,Pn=null,Vr(r,o,h),Pn=m,vs=S,Pn!==null)if(vs)try{(Pn.nodeType===9?Pn.body:Pn.nodeName==="HTML"?Pn.ownerDocument.body:Pn).removeChild(h.stateNode)}catch(T){An(h,o,T)}else try{Pn.removeChild(h.stateNode)}catch(T){An(h,o,T)}break;case 18:Pn!==null&&(vs?(r=Pn,bE(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,h.stateNode),_d(r)):bE(Pn,h.stateNode));break;case 4:m=Pn,S=vs,Pn=h.stateNode.containerInfo,vs=!0,Vr(r,o,h),Pn=m,vs=S;break;case 0:case 11:case 14:case 15:os(2,h,o),Xn||os(4,h,o),Vr(r,o,h);break;case 1:Xn||(ls(h,o),m=h.stateNode,typeof m.componentWillUnmount=="function"&&Ki(h,o,m)),Vr(r,o,h);break;case 21:Vr(r,o,h);break;case 22:Xn=(m=Xn)||h.memoizedState!==null,Vr(r,o,h),Xn=m;break;default:Vr(r,o,h)}}function Jo(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{_d(r)}catch(h){An(o,o.return,h)}}}function Zc(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{_d(r)}catch(h){An(o,o.return,h)}}function Hm(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new ay),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new ay),o;default:throw Error(i(435,r.tag))}}function po(r,o){var h=Hm(r);o.forEach(function(m){if(!h.has(m)){h.add(m);var S=b.bind(null,r,m);m.then(S,S)}})}function Hi(r,o){var h=o.deletions;if(h!==null)for(var m=0;m<h.length;m++){var S=h[m],T=r,U=o,G=U;e:for(;G!==null;){switch(G.tag){case 27:if(iu(G.type)){Pn=G.stateNode,vs=!1;break e}break;case 5:Pn=G.stateNode,vs=!1;break e;case 3:case 4:Pn=G.stateNode.containerInfo,vs=!0;break e}G=G.return}if(Pn===null)throw Error(i(160));hd(T,U,S),Pn=null,vs=!1,T=S.alternate,T!==null&&(T.return=null),S.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Qo(o,r),o=o.sibling}var Hr=null;function Qo(r,o){var h=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Hi(o,r),ji(r),m&4&&(os(3,r,r.return),Fr(3,r),os(5,r,r.return));break;case 1:Hi(o,r),ji(r),m&512&&(Xn||h===null||ls(h,h.return)),m&64&&Br&&(r=r.updateQueue,r!==null&&(m=r.callbacks,m!==null&&(h=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var S=Hr;if(Hi(o,r),ji(r),m&512&&(Xn||h===null||ls(h,h.return)),m&4){var T=h!==null?h.memoizedState:null;if(m=r.memoizedState,h===null)if(m===null)if(r.stateNode===null){e:{m=r.type,h=r.memoizedProps,S=S.ownerDocument||S;t:switch(m){case"title":T=S.getElementsByTagName("title")[0],(!T||T[na]||T[ii]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=S.createElement(m),S.head.insertBefore(T,S.querySelector("head > title"))),Ds(T,m,h),T[ii]=r,j(T),m=T;break e;case"link":var U=IE("link","href",S).get(m+(h.href||""));if(U){for(var G=0;G<U.length;G++)if(T=U[G],T.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&T.getAttribute("rel")===(h.rel==null?null:h.rel)&&T.getAttribute("title")===(h.title==null?null:h.title)&&T.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){U.splice(G,1);break t}}T=S.createElement(m),Ds(T,m,h),S.head.appendChild(T);break;case"meta":if(U=IE("meta","content",S).get(m+(h.content||""))){for(G=0;G<U.length;G++)if(T=U[G],T.getAttribute("content")===(h.content==null?null:""+h.content)&&T.getAttribute("name")===(h.name==null?null:h.name)&&T.getAttribute("property")===(h.property==null?null:h.property)&&T.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&T.getAttribute("charset")===(h.charSet==null?null:h.charSet)){U.splice(G,1);break t}}T=S.createElement(m),Ds(T,m,h),S.head.appendChild(T);break;default:throw Error(i(468,m))}T[ii]=r,j(T),m=T}r.stateNode=m}else LE(S,r.type,r.stateNode);else r.stateNode=DE(S,m,r.memoizedProps);else T!==m?(T===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):T.count--,m===null?LE(S,r.type,r.stateNode):DE(S,m,r.memoizedProps)):m===null&&r.stateNode!==null&&Vi(r,r.memoizedProps,h.memoizedProps)}break;case 27:Hi(o,r),ji(r),m&512&&(Xn||h===null||ls(h,h.return)),h!==null&&m&4&&Vi(r,r.memoizedProps,h.memoizedProps);break;case 5:if(Hi(o,r),ji(r),m&512&&(Xn||h===null||ls(h,h.return)),r.flags&32){S=r.stateNode;try{Ri(S,"")}catch(wt){An(r,r.return,wt)}}m&4&&r.stateNode!=null&&(S=r.memoizedProps,Vi(r,S,h!==null?h.memoizedProps:S)),m&1024&&(aa=!0);break;case 6:if(Hi(o,r),ji(r),m&4){if(r.stateNode===null)throw Error(i(162));m=r.memoizedProps,h=r.stateNode;try{h.nodeValue=m}catch(wt){An(r,r.return,wt)}}break;case 3:if(hy=null,S=Hr,Hr=uy(o.containerInfo),Hi(o,r),Hr=S,ji(r),m&4&&h!==null&&h.memoizedState.isDehydrated)try{_d(o.containerInfo)}catch(wt){An(r,r.return,wt)}aa&&(aa=!1,dd(r));break;case 4:m=Hr,Hr=uy(r.stateNode.containerInfo),Hi(o,r),ji(r),Hr=m;break;case 12:Hi(o,r),ji(r);break;case 31:Hi(o,r),ji(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,po(r,m)));break;case 13:Hi(o,r),ji(r),r.child.flags&8192&&r.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Yc=k()),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,po(r,m)));break;case 22:S=r.memoizedState!==null;var Q=h!==null&&h.memoizedState!==null,ge=Br,Ne=Xn;if(Br=ge||S,Xn=Ne||Q,Hi(o,r),Xn=Ne,Br=ge,ji(r),m&8192)e:for(o=r.stateNode,o._visibility=S?o._visibility&-2:o._visibility|1,S&&(h===null||Q||Br||Xn||Pa(r)),h=null,o=r;;){if(o.tag===5||o.tag===26){if(h===null){Q=h=o;try{if(T=Q.stateNode,S)U=T.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{G=Q.stateNode;var Oe=Q.memoizedProps.style,xe=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null;G.style.display=xe==null||typeof xe=="boolean"?"":(""+xe).trim()}}catch(wt){An(Q,Q.return,wt)}}}else if(o.tag===6){if(h===null){Q=o;try{Q.stateNode.nodeValue=S?"":Q.memoizedProps}catch(wt){An(Q,Q.return,wt)}}}else if(o.tag===18){if(h===null){Q=o;try{var Te=Q.stateNode;S?SE(Te,!0):SE(Q.stateNode,!1)}catch(wt){An(Q,Q.return,wt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;h===o&&(h=null),o=o.return}h===o&&(h=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=r.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,po(r,h))));break;case 19:Hi(o,r),ji(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,po(r,m)));break;case 30:break;case 21:break;default:Hi(o,r),ji(r)}}function ji(r){var o=r.flags;if(o&2){try{for(var h,m=r.return;m!==null;){if(ti(m)){h=m;break}m=m.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var S=h.stateNode,T=dn(r);As(r,T,S);break;case 5:var U=h.stateNode;h.flags&32&&(Ri(U,""),h.flags&=-33);var G=dn(r);As(r,G,U);break;case 3:case 4:var Q=h.stateNode.containerInfo,ge=dn(r);La(r,ge,Q);break;default:throw Error(i(161))}}catch(Ne){An(r,r.return,Ne)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function dd(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;dd(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function jr(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)ni(r,o.alternate,o),o=o.sibling}function Pa(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:os(4,o,o.return),Pa(o);break;case 1:ls(o,o.return);var h=o.stateNode;typeof h.componentWillUnmount=="function"&&Ki(o,o.return,h),Pa(o);break;case 27:Zm(o.stateNode);case 26:case 5:ls(o,o.return),Pa(o);break;case 22:o.memoizedState===null&&Pa(o);break;case 30:Pa(o);break;default:Pa(o)}r=r.sibling}}function Cs(r,o,h){for(h=h&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,S=r,T=o,U=T.flags;switch(T.tag){case 0:case 11:case 15:Cs(S,T,h),Fr(4,T);break;case 1:if(Cs(S,T,h),m=T,S=m.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(ge){An(m,m.return,ge)}if(m=T,S=m.updateQueue,S!==null){var G=m.stateNode;try{var Q=S.shared.hiddenCallbacks;if(Q!==null)for(S.shared.hiddenCallbacks=null,S=0;S<Q.length;S++)Hc(Q[S],G)}catch(ge){An(m,m.return,ge)}}h&&U&64&&ra(T),ho(T,T.return);break;case 27:fd(T);case 26:case 5:Cs(S,T,h),h&&m===null&&U&4&&vf(T),ho(T,T.return);break;case 12:Cs(S,T,h);break;case 31:Cs(S,T,h),h&&U&4&&Jo(S,T);break;case 13:Cs(S,T,h),h&&U&4&&Zc(S,T);break;case 22:T.memoizedState===null&&Cs(S,T,h),ho(T,T.return);break;case 30:break;default:Cs(S,T,h)}o=o.sibling}}function el(r,o){var h=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==h&&(r!=null&&r.refCount++,h!=null&&Ol(h))}function $l(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Ol(r))}function cs(r,o,h,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)jm(r,o,h,m),o=o.sibling}function jm(r,o,h,m){var S=o.flags;switch(o.tag){case 0:case 11:case 15:cs(r,o,h,m),S&2048&&Fr(9,o);break;case 1:cs(r,o,h,m);break;case 3:cs(r,o,h,m),S&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Ol(r)));break;case 12:if(S&2048){cs(r,o,h,m),r=o.stateNode;try{var T=o.memoizedProps,U=T.id,G=T.onPostCommit;typeof G=="function"&&G(U,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(Q){An(o,o.return,Q)}}else cs(r,o,h,m);break;case 31:cs(r,o,h,m);break;case 13:cs(r,o,h,m);break;case 23:break;case 22:T=o.stateNode,U=o.alternate,o.memoizedState!==null?T._visibility&2?cs(r,o,h,m):Ua(r,o):T._visibility&2?cs(r,o,h,m):(T._visibility|=2,us(r,o,h,m,(o.subtreeFlags&10256)!==0||!1)),S&2048&&el(U,o);break;case 24:cs(r,o,h,m),S&2048&&$l(o.alternate,o);break;default:cs(r,o,h,m)}}function us(r,o,h,m,S){for(S=S&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var T=r,U=o,G=h,Q=m,ge=U.flags;switch(U.tag){case 0:case 11:case 15:us(T,U,G,Q,S),Fr(8,U);break;case 23:break;case 22:var Ne=U.stateNode;U.memoizedState!==null?Ne._visibility&2?us(T,U,G,Q,S):Ua(T,U):(Ne._visibility|=2,us(T,U,G,Q,S)),S&&ge&2048&&el(U.alternate,U);break;case 24:us(T,U,G,Q,S),S&&ge&2048&&$l(U.alternate,U);break;default:us(T,U,G,Q,S)}o=o.sibling}}function Ua(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var h=r,m=o,S=m.flags;switch(m.tag){case 22:Ua(h,m),S&2048&&el(m.alternate,m);break;case 24:Ua(h,m),S&2048&&$l(m.alternate,m);break;default:Ua(h,m)}o=o.sibling}}var Kl=8192;function fr(r,o,h){if(r.subtreeFlags&Kl)for(r=r.child;r!==null;)pd(r,o,h),r=r.sibling}function pd(r,o,h){switch(r.tag){case 26:fr(r,o,h),r.flags&Kl&&r.memoizedState!==null&&OU(h,Hr,r.memoizedState,r.memoizedProps);break;case 5:fr(r,o,h);break;case 3:case 4:var m=Hr;Hr=uy(r.stateNode.containerInfo),fr(r,o,h),Hr=m;break;case 22:r.memoizedState===null&&(m=r.alternate,m!==null&&m.memoizedState!==null?(m=Kl,Kl=16777216,fr(r,o,h),Kl=m):fr(r,o,h));break;default:fr(r,o,h)}}function Jl(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function tl(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var m=o[h];Ji=m,pi(m,r)}Jl(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)js(r),r=r.sibling}function js(r){switch(r.tag){case 0:case 11:case 15:tl(r),r.flags&2048&&os(9,r,r.return);break;case 3:tl(r);break;case 12:tl(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,Gs(r)):tl(r);break;default:tl(r)}}function Gs(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var m=o[h];Ji=m,pi(m,r)}Jl(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:os(8,o,o.return),Gs(o);break;case 22:h=o.stateNode,h._visibility&2&&(h._visibility&=-3,Gs(o));break;default:Gs(o)}r=r.sibling}}function pi(r,o){for(;Ji!==null;){var h=Ji;switch(h.tag){case 0:case 11:case 15:os(8,h,o);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Ol(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,Ji=m;else e:for(h=r;Ji!==null;){m=Ji;var S=m.sibling,T=m.return;if(yf(m),m===h){Ji=null;break e}if(S!==null){S.return=T,Ji=S;break e}Ji=T}}}var mo={getCacheForType:function(r){var o=Vt(Ni),h=o.data.get(r);return h===void 0&&(h=r(),o.data.set(r,h)),h},cacheSignal:function(){return Vt(Ni).controller.signal}},Yt=typeof WeakMap=="function"?WeakMap:Map,Ct=0,Gt=null,sn=null,Qt=0,yn=0,ys=null,Gr=!1,oa=!1,Gm=!1,hr=0,oi=0,Oa=0,nl=0,xf=0,Rs=0,Kn=0,Ql=null,mi=null,gi=!1,Yc=0,Wm=0,bi=1/0,li=null,Si=null,Un=0,dr=null,$c=null,Wr=0,Kc=0,Jc=null,_f=null,il=0,ec=null;function pr(){return(Ct&2)!==0&&Qt!==0?Qt&-Qt:Z.T!==null?be():El()}function cn(){if(Rs===0)if((Qt&536870912)===0||mn){var r=Xe;Xe<<=1,(Xe&3932160)===0&&(Xe=262144),Rs=r}else Rs=536870912;return r=Fs.current,r!==null&&(r.flags|=32),Rs}function rn(r,o,h){(r===Gt&&(yn===2||yn===9)||r.cancelPendingCommit!==null)&&(rl(r,0),Ii(r,Qt,Rs,!1)),rs(r,h),((Ct&2)===0||r!==Gt)&&(r===Gt&&((Ct&2)===0&&(nl|=h),oi===4&&Ii(r,Qt,Rs,!1)),Ge(r))}function un(r,o,h){if((Ct&6)!==0)throw Error(i(327));var m=!h&&(o&127)===0&&(o&r.expiredLanes)===0||Je(r,o),S=m?bf(r,o):Ns(r,o,!0),T=m;do{if(S===0){oa&&!m&&Ii(r,o,0,!1);break}else{if(h=r.current.alternate,T&&!On(h)){S=Ns(r,o,!1),T=!1;continue}if(S===2){if(T=o,r.errorRecoveryDisabledLanes&T)var U=0;else U=r.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){o=U;e:{var G=r;S=Ql;var Q=G.current.memoizedState.isDehydrated;if(Q&&(rl(G,U).flags|=256),U=Ns(G,U,!1),U!==2){if(Gm&&!Q){G.errorRecoveryDisabledLanes|=T,nl|=T,S=4;break e}T=mi,mi=S,T!==null&&(mi===null?mi=T:mi.push.apply(mi,T))}S=U}if(T=!1,S!==2)continue}}if(S===1){rl(r,0),Ii(r,o,0,!0);break}e:{switch(m=r,T=S,T){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Ii(m,o,Rs,!Gr);break e;case 2:mi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(S=Yc+300-k(),10<S)){if(Ii(m,o,Rs,!Gr),Le(m,0,!0)!==0)break e;Wr=o,m.timeoutHandle=xE(pn.bind(null,m,h,mi,li,gi,o,Rs,nl,Kn,Gr,T,"Throttled",-0,0),S);break e}pn(m,h,mi,li,gi,o,Rs,nl,Kn,Gr,T,null,-0,0)}}break}while(!0);Ge(r)}function pn(r,o,h,m,S,T,U,G,Q,ge,Ne,Oe,xe,Te){if(r.timeoutHandle=-1,Oe=o.subtreeFlags,Oe&8192||(Oe&16785408)===16785408){Oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:eo},pd(o,T,Oe);var wt=(T&62914560)===T?Yc-k():(T&4194048)===T?Wm-k():0;if(wt=zU(Oe,wt),wt!==null){Wr=T,r.cancelPendingCommit=wt(vo.bind(null,r,o,T,h,m,S,U,G,Q,Ne,Oe,null,xe,Te)),Ii(r,T,U,!ge);return}}vo(r,o,T,h,m,S,U,G,Q)}function On(r){for(var o=r;;){var h=o.tag;if((h===0||h===11||h===15)&&o.flags&16384&&(h=o.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var S=h[m],T=S.getSnapshot;S=S.value;try{if(!Ms(T(),S))return!1}catch{return!1}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ii(r,o,h,m){o&=~xf,o&=~nl,r.suspendedLanes|=o,r.pingedLanes&=~o,m&&(r.warmLanes|=o),m=r.expirationTimes;for(var S=o;0<S;){var T=31-ft(S),U=1<<T;m[T]=-1,S&=~U}h!==0&&No(r,h,o)}function la(){return(Ct&6)===0?(gt(0),!1):!0}function sl(){if(sn!==null){if(yn===0)var r=sn.return;else r=sn,Ea=Go=null,pm(r),Vl=null,Hl=0,r=sn;for(;r!==null;)ur(r.alternate,r),r=r.return;sn=null}}function rl(r,o){var h=r.timeoutHandle;h!==-1&&(r.timeoutHandle=-1,xU(h)),h=r.cancelPendingCommit,h!==null&&(r.cancelPendingCommit=null,h()),Wr=0,sl(),Gt=r,sn=h=Os(r.current,null),Qt=o,yn=0,ys=null,Gr=!1,oa=Je(r,o),Gm=!1,Kn=Rs=xf=nl=Oa=oi=0,mi=Ql=null,gi=!1,(o&8)!==0&&(o|=o&32);var m=r.entangledLanes;if(m!==0)for(r=r.entanglements,m&=o;0<m;){var S=31-ft(m),T=1<<S;o|=r[S],m&=~T}return hr=o,Qu(),h}function za(r,o){Zt=null,Z.H=Xc,o===zl||o===nn?(o=Fl(),yn=3):o===sf?(o=Fl(),yn=4):yn=o===nd?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ys=o,sn===null&&(oi=1,td(r,ar(o,r.current)))}function ci(){var r=Fs.current;return r===null?!0:(Qt&4194048)===Qt?Es===null:(Qt&62914560)===Qt||(Qt&536870912)!==0?r===Es:!1}function go(){var r=Z.H;return Z.H=Xc,r===null?Xc:r}function al(){var r=Z.A;return Z.A=mo,r}function Qc(){oi=4,Gr||(Qt&4194048)!==Qt&&Fs.current!==null||(oa=!0),(Oa&134217727)===0&&(nl&134217727)===0||Gt===null||Ii(Gt,Qt,Rs,!1)}function Ns(r,o,h){var m=Ct;Ct|=2;var S=go(),T=al();(Gt!==r||Qt!==o)&&(li=null,rl(r,o)),o=!1;var U=oi;e:do try{if(yn!==0&&sn!==null){var G=sn,Q=ys;switch(yn){case 8:sl(),U=6;break e;case 3:case 2:case 9:case 6:Fs.current===null&&(o=!0);var ge=yn;if(yn=0,ys=null,tc(r,G,Q,ge),h&&oa){U=0;break e}break;default:ge=yn,yn=0,ys=null,tc(r,G,Q,ge)}}eu(),U=oi;break}catch(Ne){za(r,Ne)}while(!0);return o&&r.shellSuspendCounter++,Ea=Go=null,Ct=m,Z.H=S,Z.A=T,sn===null&&(Gt=null,Qt=0,Qu()),U}function eu(){for(;sn!==null;)md(sn)}function bf(r,o){var h=Ct;Ct|=2;var m=go(),S=al();Gt!==r||Qt!==o?(li=null,bi=k()+500,rl(r,o)):oa=Je(r,o);e:do try{if(yn!==0&&sn!==null){o=sn;var T=ys;t:switch(yn){case 1:yn=0,ys=null,tc(r,o,T,1);break;case 2:case 9:if(ks(T)){yn=0,ys=null,Sf(o);break}o=function(){yn!==2&&yn!==9||Gt!==r||(yn=7),Ge(r)},T.then(o,o);break e;case 3:yn=7;break e;case 4:yn=5;break e;case 7:ks(T)?(yn=0,ys=null,Sf(o)):(yn=0,ys=null,tc(r,o,T,7));break;case 5:var U=null;switch(sn.tag){case 26:U=sn.memoizedState;case 5:case 27:var G=sn;if(U?PE(U):G.stateNode.complete){yn=0,ys=null;var Q=G.sibling;if(Q!==null)sn=Q;else{var ge=G.return;ge!==null?(sn=ge,ol(ge)):sn=null}break t}}yn=0,ys=null,tc(r,o,T,5);break;case 6:yn=0,ys=null,tc(r,o,T,6);break;case 8:sl(),oi=6;break e;default:throw Error(i(462))}}Ws();break}catch(Ne){za(r,Ne)}while(!0);return Ea=Go=null,Z.H=m,Z.A=S,Ct=h,sn!==null?0:(Gt=null,Qt=0,Qu(),oi)}function Ws(){for(;sn!==null&&!Ze();)md(sn)}function md(r){var o=ud(r.alternate,r,hr);r.memoizedProps=r.pendingProps,o===null?ol(r):sn=o}function Sf(r){var o=r,h=o.alternate;switch(o.tag){case 15:case 0:o=df(h,o,o.pendingProps,o.type,void 0,Qt);break;case 11:o=df(h,o,o.pendingProps,o.type.render,o.ref,Qt);break;case 5:pm(o);default:ur(h,o),o=sn=Ic(o,hr),o=ud(h,o,hr)}r.memoizedProps=r.pendingProps,o===null?ol(r):sn=o}function tc(r,o,h,m){Ea=Go=null,pm(o),Vl=null,Hl=0;var S=o.return;try{if(Bi(r,S,o,h,Qt)){oi=1,td(r,ar(h,r.current)),sn=null;return}}catch(T){if(S!==null)throw sn=S,T;oi=1,td(r,ar(h,r.current)),sn=null;return}o.flags&32768?(mn||m===1?r=!0:oa||(Qt&536870912)!==0?r=!1:(Gr=r=!0,(m===2||m===9||m===3||m===6)&&(m=Fs.current,m!==null&&m.tag===13&&(m.flags|=16384))),Mf(o,r)):ol(o)}function ol(r){var o=r;do{if((o.flags&32768)!==0){Mf(o,Gr);return}r=o.return;var h=gf(o.alternate,o,hr);if(h!==null){sn=h;return}if(o=o.sibling,o!==null){sn=o;return}sn=o=r}while(o!==null);oi===0&&(oi=5)}function Mf(r,o){do{var h=kr(r.alternate,r);if(h!==null){h.flags&=32767,sn=h;return}if(h=r.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!o&&(r=r.sibling,r!==null)){sn=r;return}sn=r=h}while(r!==null);oi=6,sn=null}function vo(r,o,h,m,S,T,U,G,Q){r.cancelPendingCommit=null;do tu();while(Un!==0);if((Ct&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(T=o.lanes|o.childLanes,T|=Zi,Us(r,h,T,U,G,Q),r===Gt&&(sn=Gt=null,Qt=0),$c=o,dr=r,Wr=h,Kc=T,Jc=S,_f=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,C(we,function(){return gd(),null})):(r.callbackNode=null,r.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=Z.T,Z.T=null,S=K.p,K.p=2,U=Ct,Ct|=4;try{hS(r,o,h)}finally{Ct=U,K.p=S,Z.T=m}}Un=1,Li(),yo(),nc()}}function Li(){if(Un===1){Un=0;var r=dr,o=$c,h=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||h){h=Z.T,Z.T=null;var m=K.p;K.p=2;var S=Ct;Ct|=4;try{Qo(o,r);var T=xS,U=lv(r.containerInfo),G=T.focusedElem,Q=T.selectionRange;if(U!==G&&G&&G.ownerDocument&&Gn(G.ownerDocument.documentElement,G)){if(Q!==null&&$p(G)){var ge=Q.start,Ne=Q.end;if(Ne===void 0&&(Ne=ge),"selectionStart"in G)G.selectionStart=ge,G.selectionEnd=Math.min(Ne,G.value.length);else{var Oe=G.ownerDocument||document,xe=Oe&&Oe.defaultView||window;if(xe.getSelection){var Te=xe.getSelection(),wt=G.textContent.length,Bt=Math.min(Q.start,wt),Zn=Q.end===void 0?Bt:Math.min(Q.end,wt);!Te.extend&&Bt>Zn&&(U=Zn,Zn=Bt,Bt=U);var ce=Rc(G,Bt),ne=Rc(G,Zn);if(ce&&ne&&(Te.rangeCount!==1||Te.anchorNode!==ce.node||Te.anchorOffset!==ce.offset||Te.focusNode!==ne.node||Te.focusOffset!==ne.offset)){var me=Oe.createRange();me.setStart(ce.node,ce.offset),Te.removeAllRanges(),Bt>Zn?(Te.addRange(me),Te.extend(ne.node,ne.offset)):(me.setEnd(ne.node,ne.offset),Te.addRange(me))}}}}for(Oe=[],Te=G;Te=Te.parentNode;)Te.nodeType===1&&Oe.push({element:Te,left:Te.scrollLeft,top:Te.scrollTop});for(typeof G.focus=="function"&&G.focus(),G=0;G<Oe.length;G++){var Ie=Oe[G];Ie.element.scrollLeft=Ie.left,Ie.element.scrollTop=Ie.top}}gy=!!yS,xS=yS=null}finally{Ct=S,K.p=m,Z.T=h}}r.current=o,Un=2}}function yo(){if(Un===2){Un=0;var r=dr,o=$c,h=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||h){h=Z.T,Z.T=null;var m=K.p;K.p=2;var S=Ct;Ct|=4;try{ni(r,o.alternate,o)}finally{Ct=S,K.p=m,Z.T=h}}Un=3}}function nc(){if(Un===4||Un===3){Un=0,X();var r=dr,o=$c,h=Wr,m=_f;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Un=5:(Un=0,$c=dr=null,ka(r,r.pendingLanes));var S=r.pendingLanes;if(S===0&&(Si=null),$a(h),o=o.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Ve,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=Z.T,S=K.p,K.p=2,Z.T=null;try{for(var T=r.onRecoverableError,U=0;U<m.length;U++){var G=m[U];T(G.value,{componentStack:G.stack})}}finally{Z.T=o,K.p=S}}(Wr&3)!==0&&tu(),Ge(r),S=r.pendingLanes,(h&261930)!==0&&(S&42)!==0?r===ec?il++:(il=0,ec=r):il=0,gt(0)}}function ka(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,Ol(o)))}function tu(){return Li(),yo(),nc(),gd()}function gd(){if(Un!==5)return!1;var r=dr,o=Kc;Kc=0;var h=$a(Wr),m=Z.T,S=K.p;try{K.p=32>h?32:h,Z.T=null,h=Jc,Jc=null;var T=dr,U=Wr;if(Un=0,$c=dr=null,Wr=0,(Ct&6)!==0)throw Error(i(331));var G=Ct;if(Ct|=4,js(T.current),jm(T,T.current,U,h),Ct=G,gt(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Ve,T)}catch{}return!0}finally{K.p=S,Z.T=m,ka(r,o)}}function Xm(r,o,h){o=ar(h,o),o=Om(r.stateNode,o,2),r=qo(r,o,2),r!==null&&(rs(r,2),Ge(r))}function An(r,o,h){if(r.tag===3)Xm(r,r,h);else for(;o!==null;){if(o.tag===3){Xm(o,r,h);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Si===null||!Si.has(m))){r=ar(h,r),h=zm(2),m=qo(o,h,2),m!==null&&(ty(h,m,o,r),rs(m,2),Ge(m));break}}o=o.return}}function wf(r,o,h){var m=r.pingCache;if(m===null){m=r.pingCache=new Yt;var S=new Set;m.set(o,S)}else S=m.get(o),S===void 0&&(S=new Set,m.set(o,S));S.has(h)||(Gm=!0,S.add(h),r=c.bind(null,r,o,h),o.then(r,r))}function c(r,o,h){var m=r.pingCache;m!==null&&m.delete(o),r.pingedLanes|=r.suspendedLanes&h,r.warmLanes&=~h,Gt===r&&(Qt&h)===h&&(oi===4||oi===3&&(Qt&62914560)===Qt&&300>k()-Yc?(Ct&2)===0&&rl(r,0):xf|=h,Kn===Qt&&(Kn=0)),Ge(r)}function f(r,o){o===0&&(o=vn()),r=ws(r,o),r!==null&&(rs(r,o),Ge(r))}function v(r){var o=r.memoizedState,h=0;o!==null&&(h=o.retryLane),f(r,h)}function b(r,o){var h=0;switch(r.tag){case 31:case 13:var m=r.stateNode,S=r.memoizedState;S!==null&&(h=S.retryLane);break;case 19:m=r.stateNode;break;case 22:m=r.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(o),f(r,h)}function C(r,o){return st(r,o)}var I=null,H=null,te=!1,Se=!1,Fe=!1,Qe=0;function Ge(r){r!==H&&r.next===null&&(H===null?I=H=r:H=H.next=r),Se=!0,te||(te=!0,fe())}function gt(r,o){if(!Fe&&Se){Fe=!0;do for(var h=!1,m=I;m!==null;){if(r!==0){var S=m.pendingLanes;if(S===0)var T=0;else{var U=m.suspendedLanes,G=m.pingedLanes;T=(1<<31-ft(42|r)+1)-1,T&=S&~(U&~G),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(h=!0,ye(m,T))}else T=Qt,T=Le(m,m===Gt?T:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(T&3)===0||Je(m,T)||(h=!0,ye(m,T));m=m.next}while(h);Fe=!1}}function qt(){Mi()}function Mi(){Se=te=!1;var r=0;Qe!==0&&yU()&&(r=Qe);for(var o=k(),h=null,m=I;m!==null;){var S=m.next,T=nu(m,o);T===0?(m.next=null,h===null?I=S:h.next=S,S===null&&(H=h)):(h=m,(r!==0||(T&3)!==0)&&(Se=!0)),m=S}Un!==0&&Un!==5||gt(r),Qe!==0&&(Qe=0)}function nu(r,o){for(var h=r.suspendedLanes,m=r.pingedLanes,S=r.expirationTimes,T=r.pendingLanes&-62914561;0<T;){var U=31-ft(T),G=1<<U,Q=S[U];Q===-1?((G&h)===0||(G&m)!==0)&&(S[U]=Ht(G,o)):Q<=o&&(r.expiredLanes|=G),T&=~G}if(o=Gt,h=Qt,h=Le(r,r===o?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m=r.callbackNode,h===0||r===o&&(yn===2||yn===9)||r.cancelPendingCommit!==null)return m!==null&&m!==null&&At(m),r.callbackNode=null,r.callbackPriority=0;if((h&3)===0||Je(r,h)){if(o=h&-h,o===r.callbackPriority)return o;switch(m!==null&&At(m),$a(h)){case 2:case 8:h=Ue;break;case 32:h=we;break;case 268435456:h=Ke;break;default:h=we}return m=ll.bind(null,r),h=st(h,m),r.callbackPriority=o,r.callbackNode=h,o}return m!==null&&m!==null&&At(m),r.callbackPriority=2,r.callbackNode=null,2}function ll(r,o){if(Un!==0&&Un!==5)return r.callbackNode=null,r.callbackPriority=0,null;var h=r.callbackNode;if(tu()&&r.callbackNode!==h)return null;var m=Qt;return m=Le(r,r===Gt?m:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m===0?null:(un(r,m,o),nu(r,k()),r.callbackNode!=null&&r.callbackNode===h?ll.bind(null,r):null)}function ye(r,o){if(tu())return null;un(r,o,!0)}function fe(){_U(function(){(Ct&6)!==0?st(Me,qt):Mi()})}function be(){if(Qe===0){var r=ao;r===0&&(r=at,at<<=1,(at&261888)===0&&(at=256)),Qe=r}return Qe}function $e(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Fu(""+r)}function Ut(r,o){var h=o.ownerDocument.createElement("input");return h.name=o.name,h.value=o.value,r.id&&h.setAttribute("form",r.id),o.parentNode.insertBefore(h,o),r=new FormData(r),h.parentNode.removeChild(h),r}function ui(r,o,h,m,S){if(o==="submit"&&h&&h.stateNode===S){var T=$e((S[zi]||null).action),U=m.submitter;U&&(o=(o=U[zi]||null)?$e(o.formAction):U.getAttribute("formAction"),o!==null&&(T=o,U=null));var G=new Hu("action","action",null,m,S);r.push({event:G,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Qe!==0){var Q=U?Ut(S,U):new FormData(S);Cm(h,{pending:!0,data:Q,method:S.method,action:T},null,Q)}}else typeof T=="function"&&(G.preventDefault(),Q=U?Ut(S,U):new FormData(S),Cm(h,{pending:!0,data:Q,method:S.method,action:T},T,Q))},currentTarget:S}]})}}for(var kt=0;kt<Ku.length;kt++){var Mn=Ku[kt],Qi=Mn.toLowerCase(),Cn=Mn[0].toUpperCase()+Mn.slice(1);Dr(Qi,"on"+Cn)}Dr(Rh,"onAnimationEnd"),Dr($u,"onAnimationIteration"),Dr(Jp,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(uv,"onTransitionRun"),Dr(sS,"onTransitionStart"),Dr(fv,"onTransitionCancel"),Dr(Qp,"onTransitionEnd"),ue("onMouseEnter",["mouseout","mouseover"]),ue("onMouseLeave",["mouseout","mouseover"]),ue("onPointerEnter",["pointerout","pointerover"]),ue("onPointerLeave",["pointerout","pointerover"]),ve("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ve("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ve("onBeforeInput",["compositionend","keypress","textInput","paste"]),ve("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ve("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ve("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xr));function fE(r,o){o=(o&4)!==0;for(var h=0;h<r.length;h++){var m=r[h],S=m.event;m=m.listeners;e:{var T=void 0;if(o)for(var U=m.length-1;0<=U;U--){var G=m[U],Q=G.instance,ge=G.currentTarget;if(G=G.listener,Q!==T&&S.isPropagationStopped())break e;T=G,S.currentTarget=ge;try{T(S)}catch(Ne){Ju(Ne)}S.currentTarget=null,T=Q}else for(U=0;U<m.length;U++){if(G=m[U],Q=G.instance,ge=G.currentTarget,G=G.listener,Q!==T&&S.isPropagationStopped())break e;T=G,S.currentTarget=ge;try{T(S)}catch(Ne){Ju(Ne)}S.currentTarget=null,T=Q}}}}function xn(r,o){var h=o[ir];h===void 0&&(h=o[ir]=new Set);var m=r+"__bubble";h.has(m)||(hE(o,r,2,!1),h.add(m))}function pS(r,o,h){var m=0;o&&(m|=4),hE(h,r,m,o)}var oy="_reactListening"+Math.random().toString(36).slice(2);function mS(r){if(!r[oy]){r[oy]=!0,re.forEach(function(h){h!=="selectionchange"&&(dS.has(h)||pS(h,!1,r),pS(h,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[oy]||(o[oy]=!0,pS("selectionchange",!1,o))}}function hE(r,o,h,m){switch(VE(o)){case 2:var S=BU;break;case 8:S=VU;break;default:S=NS}h=S.bind(null,o,h,r),S=void 0,!Pp||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(S=!0),m?S!==void 0?r.addEventListener(o,h,{capture:!0,passive:S}):r.addEventListener(o,h,!0):S!==void 0?r.addEventListener(o,h,{passive:S}):r.addEventListener(o,h,!1)}function gS(r,o,h,m,S){var T=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var U=m.tag;if(U===3||U===4){var G=m.stateNode.containerInfo;if(G===S)break;if(U===4)for(U=m.return;U!==null;){var Q=U.tag;if((Q===3||Q===4)&&U.stateNode.containerInfo===S)return;U=U.return}for(;G!==null;){if(U=Ja(G),U===null)return;if(Q=U.tag,Q===5||Q===6||Q===26||Q===27){m=T=U;continue e}G=G.parentNode}}m=m.return}Lp(function(){var ge=T,Ne=gh(h),Oe=[];e:{var xe=Nr.get(r);if(xe!==void 0){var Te=Hu,wt=r;switch(r){case"keypress":if(Vu(h)===0)break e;case"keydown":case"keyup":Te=Dl;break;case"focusin":wt="focus",Te=_h;break;case"focusout":wt="blur",Te=_h;break;case"beforeblur":case"afterblur":Te=_h;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=Up;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=G0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=$0;break;case Rh:case $u:case Jp:Te=tS;break;case Qp:Te=iS;break;case"scroll":case"scrollend":Te=H0;break;case"wheel":Te=J0;break;case"copy":case"cut":case"paste":Te=X0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=kp;break;case"toggle":case"beforetoggle":Te=ev}var Bt=(o&4)!==0,Zn=!Bt&&(r==="scroll"||r==="scrollend"),ce=Bt?xe!==null?xe+"Capture":null:xe;Bt=[];for(var ne=ge,me;ne!==null;){var Ie=ne;if(me=Ie.stateNode,Ie=Ie.tag,Ie!==5&&Ie!==26&&Ie!==27||me===null||ce===null||(Ie=_c(ne,ce),Ie!=null&&Bt.push(qm(ne,Ie,me))),Zn)break;ne=ne.return}0<Bt.length&&(xe=new Te(xe,wt,null,h,Ne),Oe.push({event:xe,listeners:Bt}))}}if((o&7)===0){e:{if(xe=r==="mouseover"||r==="pointerover",Te=r==="mouseout"||r==="pointerout",xe&&h!==mh&&(wt=h.relatedTarget||h.fromElement)&&(Ja(wt)||wt[nr]))break e;if((Te||xe)&&(xe=Ne.window===Ne?Ne:(xe=Ne.ownerDocument)?xe.defaultView||xe.parentWindow:window,Te?(wt=h.relatedTarget||h.toElement,Te=ge,wt=wt?Ja(wt):null,wt!==null&&(Zn=a(wt),Bt=wt.tag,wt!==Zn||Bt!==5&&Bt!==27&&Bt!==6)&&(wt=null)):(Te=null,wt=ge),Te!==wt)){if(Bt=Up,Ie="onMouseLeave",ce="onMouseEnter",ne="mouse",(r==="pointerout"||r==="pointerover")&&(Bt=kp,Ie="onPointerLeave",ce="onPointerEnter",ne="pointer"),Zn=Te==null?xe:Po(Te),me=wt==null?xe:Po(wt),xe=new Bt(Ie,ne+"leave",Te,h,Ne),xe.target=Zn,xe.relatedTarget=me,Ie=null,Ja(Ne)===ge&&(Bt=new Bt(ce,ne+"enter",wt,h,Ne),Bt.target=me,Bt.relatedTarget=Zn,Ie=Bt),Zn=Ie,Te&&wt)t:{for(Bt=dU,ce=Te,ne=wt,me=0,Ie=ce;Ie;Ie=Bt(Ie))me++;Ie=0;for(var Lt=ne;Lt;Lt=Bt(Lt))Ie++;for(;0<me-Ie;)ce=Bt(ce),me--;for(;0<Ie-me;)ne=Bt(ne),Ie--;for(;me--;){if(ce===ne||ne!==null&&ce===ne.alternate){Bt=ce;break t}ce=Bt(ce),ne=Bt(ne)}Bt=null}else Bt=null;Te!==null&&dE(Oe,xe,Te,Bt,!1),wt!==null&&Zn!==null&&dE(Oe,Zn,wt,Bt,!0)}}e:{if(xe=ge?Po(ge):window,Te=xe.nodeName&&xe.nodeName.toLowerCase(),Te==="select"||Te==="input"&&xe.type==="file")var In=Wp;else if(Gp(xe))if(ya)In=ov;else{In=Zp;var Et=rv}else Te=xe.nodeName,!Te||Te.toLowerCase()!=="input"||xe.type!=="checkbox"&&xe.type!=="radio"?ge&&Cr(ge.elementType)&&(In=Wp):In=av;if(In&&(In=In(r,ge))){Ah(Oe,In,h,Ne);break e}Et&&Et(r,xe,ge),r==="focusout"&&ge&&xe.type==="number"&&ge.memoizedProps.value!=null&&$n(xe,"number",xe.value)}switch(Et=ge?Po(ge):window,r){case"focusin":(Gp(Et)||Et.contentEditable==="true")&&(xa=Et,_a=ge,Nc=null);break;case"focusout":Nc=_a=xa=null;break;case"mousedown":Ch=!0;break;case"contextmenu":case"mouseup":case"dragend":Ch=!1,Dc(Oe,h,Ne);break;case"selectionchange":if(cv)break;case"keydown":case"keyup":Dc(Oe,h,Ne)}var on;if(Il)e:{switch(r){case"compositionstart":var wn="onCompositionStart";break e;case"compositionend":wn="onCompositionEnd";break e;case"compositionupdate":wn="onCompositionUpdate";break e}wn=void 0}else Ll?Eh(r,h)&&(wn="onCompositionEnd"):r==="keydown"&&h.keyCode===229&&(wn="onCompositionStart");wn&&(Bp&&h.locale!=="ko"&&(Ll||wn!=="onCompositionStart"?wn==="onCompositionEnd"&&Ll&&(on=Bu()):(rr=Ne,yh="value"in rr?rr.value:rr.textContent,Ll=!0)),Et=ly(ge,wn),0<Et.length&&(wn=new bh(wn,r,null,h,Ne),Oe.push({event:wn,listeners:Et}),on?wn.data=on:(on=Vp(h),on!==null&&(wn.data=on)))),(on=Th?iv(r,h):Hp(r,h))&&(wn=ly(ge,"onBeforeInput"),0<wn.length&&(Et=new bh("onBeforeInput","beforeinput",null,h,Ne),Oe.push({event:Et,listeners:wn}),Et.data=on)),ui(Oe,r,ge,h,Ne)}fE(Oe,o)})}function qm(r,o,h){return{instance:r,listener:o,currentTarget:h}}function ly(r,o){for(var h=o+"Capture",m=[];r!==null;){var S=r,T=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||T===null||(S=_c(r,h),S!=null&&m.unshift(qm(r,S,T)),S=_c(r,o),S!=null&&m.push(qm(r,S,T))),r.tag===3)return m;r=r.return}return[]}function dU(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function dE(r,o,h,m,S){for(var T=o._reactName,U=[];h!==null&&h!==m;){var G=h,Q=G.alternate,ge=G.stateNode;if(G=G.tag,Q!==null&&Q===m)break;G!==5&&G!==26&&G!==27||ge===null||(Q=ge,S?(ge=_c(h,T),ge!=null&&U.unshift(qm(h,ge,Q))):S||(ge=_c(h,T),ge!=null&&U.push(qm(h,ge,Q)))),h=h.return}U.length!==0&&r.push({event:o,listeners:U})}var pU=/\r\n?/g,mU=/\u0000|\uFFFD/g;function pE(r){return(typeof r=="string"?r:""+r).replace(pU,`
`).replace(mU,"")}function mE(r,o){return o=pE(o),pE(r)===o}function qn(r,o,h,m,S,T){switch(h){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||Ri(r,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&Ri(r,""+m);break;case"className":Nt(r,"class",m);break;case"tabIndex":Nt(r,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Nt(r,h,m);break;case"style":Cl(r,m,T);break;case"data":if(o!=="object"){Nt(r,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||h!=="href")){r.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(h);break}m=Fu(""+m),r.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){r.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(h==="formAction"?(o!=="input"&&qn(r,o,"name",S.name,S,null),qn(r,o,"formEncType",S.formEncType,S,null),qn(r,o,"formMethod",S.formMethod,S,null),qn(r,o,"formTarget",S.formTarget,S,null)):(qn(r,o,"encType",S.encType,S,null),qn(r,o,"method",S.method,S,null),qn(r,o,"target",S.target,S,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(h);break}m=Fu(""+m),r.setAttribute(h,m);break;case"onClick":m!=null&&(r.onclick=eo);break;case"onScroll":m!=null&&xn("scroll",r);break;case"onScrollEnd":m!=null&&xn("scrollend",r);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(S.children!=null)throw Error(i(60));r.innerHTML=h}}break;case"multiple":r.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":r.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){r.removeAttribute("xlink:href");break}h=Fu(""+m),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(h,""+m):r.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(h,""):r.removeAttribute(h);break;case"capture":case"download":m===!0?r.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(h,m):r.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?r.setAttribute(h,m):r.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?r.removeAttribute(h):r.setAttribute(h,m);break;case"popover":xn("beforetoggle",r),xn("toggle",r),bt(r,"popover",m);break;case"xlinkActuate":Mt(r,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Mt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Mt(r,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Mt(r,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Mt(r,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Mt(r,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Mt(r,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Mt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Mt(r,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":bt(r,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=B0.get(h)||h,bt(r,h,m))}}function vS(r,o,h,m,S,T){switch(h){case"style":Cl(r,m,T);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(S.children!=null)throw Error(i(60));r.innerHTML=h}}break;case"children":typeof m=="string"?Ri(r,m):(typeof m=="number"||typeof m=="bigint")&&Ri(r,""+m);break;case"onScroll":m!=null&&xn("scroll",r);break;case"onScrollEnd":m!=null&&xn("scrollend",r);break;case"onClick":m!=null&&(r.onclick=eo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_e.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(S=h.endsWith("Capture"),o=h.slice(2,S?h.length-7:void 0),T=r[zi]||null,T=T!=null?T[h]:null,typeof T=="function"&&r.removeEventListener(o,T,S),typeof m=="function")){typeof T!="function"&&T!==null&&(h in r?r[h]=null:r.hasAttribute(h)&&r.removeAttribute(h)),r.addEventListener(o,m,S);break e}h in r?r[h]=m:m===!0?r.setAttribute(h,""):bt(r,h,m)}}}function Ds(r,o,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xn("error",r),xn("load",r);var m=!1,S=!1,T;for(T in h)if(h.hasOwnProperty(T)){var U=h[T];if(U!=null)switch(T){case"src":m=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:qn(r,o,T,U,h,null)}}S&&qn(r,o,"srcSet",h.srcSet,h,null),m&&qn(r,o,"src",h.src,h,null);return;case"input":xn("invalid",r);var G=T=U=S=null,Q=null,ge=null;for(m in h)if(h.hasOwnProperty(m)){var Ne=h[m];if(Ne!=null)switch(m){case"name":S=Ne;break;case"type":U=Ne;break;case"checked":Q=Ne;break;case"defaultChecked":ge=Ne;break;case"value":T=Ne;break;case"defaultValue":G=Ne;break;case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(i(137,o));break;default:qn(r,o,m,Ne,h,null)}}ia(r,T,G,Q,ge,U,S,!1);return;case"select":xn("invalid",r),m=U=T=null;for(S in h)if(h.hasOwnProperty(S)&&(G=h[S],G!=null))switch(S){case"value":T=G;break;case"defaultValue":U=G;break;case"multiple":m=G;default:qn(r,o,S,G,h,null)}o=T,h=U,r.multiple=!!m,o!=null?bs(r,!!m,o,!1):h!=null&&bs(r,!!m,h,!0);return;case"textarea":xn("invalid",r),T=S=m=null;for(U in h)if(h.hasOwnProperty(U)&&(G=h[U],G!=null))switch(U){case"value":m=G;break;case"defaultValue":S=G;break;case"children":T=G;break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(91));break;default:qn(r,o,U,G,h,null)}ki(r,m,S,T);return;case"option":for(Q in h)h.hasOwnProperty(Q)&&(m=h[Q],m!=null)&&(Q==="selected"?r.selected=m&&typeof m!="function"&&typeof m!="symbol":qn(r,o,Q,m,h,null));return;case"dialog":xn("beforetoggle",r),xn("toggle",r),xn("cancel",r),xn("close",r);break;case"iframe":case"object":xn("load",r);break;case"video":case"audio":for(m=0;m<Xr.length;m++)xn(Xr[m],r);break;case"image":xn("error",r),xn("load",r);break;case"details":xn("toggle",r);break;case"embed":case"source":case"link":xn("error",r),xn("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in h)if(h.hasOwnProperty(ge)&&(m=h[ge],m!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:qn(r,o,ge,m,h,null)}return;default:if(Cr(o)){for(Ne in h)h.hasOwnProperty(Ne)&&(m=h[Ne],m!==void 0&&vS(r,o,Ne,m,h,void 0));return}}for(G in h)h.hasOwnProperty(G)&&(m=h[G],m!=null&&qn(r,o,G,m,h,null))}function gU(r,o,h,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,T=null,U=null,G=null,Q=null,ge=null,Ne=null;for(Te in h){var Oe=h[Te];if(h.hasOwnProperty(Te)&&Oe!=null)switch(Te){case"checked":break;case"value":break;case"defaultValue":Q=Oe;default:m.hasOwnProperty(Te)||qn(r,o,Te,null,m,Oe)}}for(var xe in m){var Te=m[xe];if(Oe=h[xe],m.hasOwnProperty(xe)&&(Te!=null||Oe!=null))switch(xe){case"type":T=Te;break;case"name":S=Te;break;case"checked":ge=Te;break;case"defaultChecked":Ne=Te;break;case"value":U=Te;break;case"defaultValue":G=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(i(137,o));break;default:Te!==Oe&&qn(r,o,xe,Te,m,Oe)}}Ci(r,U,G,Q,ge,Ne,T,S);return;case"select":Te=U=G=xe=null;for(T in h)if(Q=h[T],h.hasOwnProperty(T)&&Q!=null)switch(T){case"value":break;case"multiple":Te=Q;default:m.hasOwnProperty(T)||qn(r,o,T,null,m,Q)}for(S in m)if(T=m[S],Q=h[S],m.hasOwnProperty(S)&&(T!=null||Q!=null))switch(S){case"value":xe=T;break;case"defaultValue":G=T;break;case"multiple":U=T;default:T!==Q&&qn(r,o,S,T,m,Q)}o=G,h=U,m=Te,xe!=null?bs(r,!!h,xe,!1):!!m!=!!h&&(o!=null?bs(r,!!h,o,!0):bs(r,!!h,h?[]:"",!1));return;case"textarea":Te=xe=null;for(G in h)if(S=h[G],h.hasOwnProperty(G)&&S!=null&&!m.hasOwnProperty(G))switch(G){case"value":break;case"children":break;default:qn(r,o,G,null,m,S)}for(U in m)if(S=m[U],T=h[U],m.hasOwnProperty(U)&&(S!=null||T!=null))switch(U){case"value":xe=S;break;case"defaultValue":Te=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:S!==T&&qn(r,o,U,S,m,T)}Rn(r,xe,Te);return;case"option":for(var wt in h)xe=h[wt],h.hasOwnProperty(wt)&&xe!=null&&!m.hasOwnProperty(wt)&&(wt==="selected"?r.selected=!1:qn(r,o,wt,null,m,xe));for(Q in m)xe=m[Q],Te=h[Q],m.hasOwnProperty(Q)&&xe!==Te&&(xe!=null||Te!=null)&&(Q==="selected"?r.selected=xe&&typeof xe!="function"&&typeof xe!="symbol":qn(r,o,Q,xe,m,Te));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Bt in h)xe=h[Bt],h.hasOwnProperty(Bt)&&xe!=null&&!m.hasOwnProperty(Bt)&&qn(r,o,Bt,null,m,xe);for(ge in m)if(xe=m[ge],Te=h[ge],m.hasOwnProperty(ge)&&xe!==Te&&(xe!=null||Te!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(i(137,o));break;default:qn(r,o,ge,xe,m,Te)}return;default:if(Cr(o)){for(var Zn in h)xe=h[Zn],h.hasOwnProperty(Zn)&&xe!==void 0&&!m.hasOwnProperty(Zn)&&vS(r,o,Zn,void 0,m,xe);for(Ne in m)xe=m[Ne],Te=h[Ne],!m.hasOwnProperty(Ne)||xe===Te||xe===void 0&&Te===void 0||vS(r,o,Ne,xe,m,Te);return}}for(var ce in h)xe=h[ce],h.hasOwnProperty(ce)&&xe!=null&&!m.hasOwnProperty(ce)&&qn(r,o,ce,null,m,xe);for(Oe in m)xe=m[Oe],Te=h[Oe],!m.hasOwnProperty(Oe)||xe===Te||xe==null&&Te==null||qn(r,o,Oe,xe,m,Te)}function gE(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vU(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,h=performance.getEntriesByType("resource"),m=0;m<h.length;m++){var S=h[m],T=S.transferSize,U=S.initiatorType,G=S.duration;if(T&&G&&gE(U)){for(U=0,G=S.responseEnd,m+=1;m<h.length;m++){var Q=h[m],ge=Q.startTime;if(ge>G)break;var Ne=Q.transferSize,Oe=Q.initiatorType;Ne&&gE(Oe)&&(Q=Q.responseEnd,U+=Ne*(Q<G?1:(G-ge)/(Q-ge)))}if(--m,o+=8*(T+U)/(S.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var yS=null,xS=null;function cy(r){return r.nodeType===9?r:r.ownerDocument}function vE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yE(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function _S(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var bS=null;function yU(){var r=window.event;return r&&r.type==="popstate"?r===bS?!1:(bS=r,!0):(bS=null,!1)}var xE=typeof setTimeout=="function"?setTimeout:void 0,xU=typeof clearTimeout=="function"?clearTimeout:void 0,_E=typeof Promise=="function"?Promise:void 0,_U=typeof queueMicrotask=="function"?queueMicrotask:typeof _E<"u"?function(r){return _E.resolve(null).then(r).catch(bU)}:xE;function bU(r){setTimeout(function(){throw r})}function iu(r){return r==="head"}function bE(r,o){var h=o,m=0;do{var S=h.nextSibling;if(r.removeChild(h),S&&S.nodeType===8)if(h=S.data,h==="/$"||h==="/&"){if(m===0){r.removeChild(S),_d(o);return}m--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")m++;else if(h==="html")Zm(r.ownerDocument.documentElement);else if(h==="head"){h=r.ownerDocument.head,Zm(h);for(var T=h.firstChild;T;){var U=T.nextSibling,G=T.nodeName;T[na]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&T.rel.toLowerCase()==="stylesheet"||h.removeChild(T),T=U}}else h==="body"&&Zm(r.ownerDocument.body);h=S}while(h);_d(o)}function SE(r,o){var h=r;r=0;do{var m=h.nextSibling;if(h.nodeType===1?o?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(o?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),m&&m.nodeType===8)if(h=m.data,h==="/$"){if(r===0)break;r--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||r++;h=m}while(h)}function SS(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var h=o;switch(o=o.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":SS(h),Ka(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}r.removeChild(h)}}function SU(r,o,h,m){for(;r.nodeType===1;){var S=h;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(m){if(!r[na])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(T=r.getAttribute("rel"),T==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(T!==S.rel||r.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||r.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||r.getAttribute("title")!==(S.title==null?null:S.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(T=r.getAttribute("src"),(T!==(S.src==null?null:S.src)||r.getAttribute("type")!==(S.type==null?null:S.type)||r.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&T&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var T=S.name==null?null:""+S.name;if(S.type==="hidden"&&r.getAttribute("name")===T)return r}else return r;if(r=Fa(r.nextSibling),r===null)break}return null}function MU(r,o,h){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!h||(r=Fa(r.nextSibling),r===null))return null;return r}function ME(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Fa(r.nextSibling),r===null))return null;return r}function MS(r){return r.data==="$?"||r.data==="$~"}function wS(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function wU(r,o){var h=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||h.readyState!=="loading")o();else{var m=function(){o(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),r._reactRetry=m}}function Fa(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var TS=null;function wE(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var h=r.data;if(h==="/$"||h==="/&"){if(o===0)return Fa(r.nextSibling);o--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||o++}r=r.nextSibling}return null}function TE(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var h=r.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(o===0)return r;o--}else h!=="/$"&&h!=="/&"||o++}r=r.previousSibling}return null}function EE(r,o,h){switch(o=cy(h),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Zm(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Ka(r)}var Ba=new Map,AE=new Set;function uy(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ic=K.d;K.d={f:TU,r:EU,D:AU,C:CU,L:RU,m:NU,X:IU,S:DU,M:LU};function TU(){var r=ic.f(),o=la();return r||o}function EU(r){var o=Qa(r);o!==null&&o.tag===5&&o.type==="form"?Xv(o):ic.r(r)}var vd=typeof document>"u"?null:document;function CE(r,o,h){var m=vd;if(m&&typeof o=="string"&&o){var S=Ft(o);S='link[rel="'+r+'"][href="'+S+'"]',typeof h=="string"&&(S+='[crossorigin="'+h+'"]'),AE.has(S)||(AE.add(S),r={rel:r,crossOrigin:h,href:o},m.querySelector(S)===null&&(o=m.createElement("link"),Ds(o,"link",r),j(o),m.head.appendChild(o)))}}function AU(r){ic.D(r),CE("dns-prefetch",r,null)}function CU(r,o){ic.C(r,o),CE("preconnect",r,o)}function RU(r,o,h){ic.L(r,o,h);var m=vd;if(m&&r&&o){var S='link[rel="preload"][as="'+Ft(o)+'"]';o==="image"&&h&&h.imageSrcSet?(S+='[imagesrcset="'+Ft(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(S+='[imagesizes="'+Ft(h.imageSizes)+'"]')):S+='[href="'+Ft(r)+'"]';var T=S;switch(o){case"style":T=yd(r);break;case"script":T=xd(r)}Ba.has(T)||(r=y({rel:"preload",href:o==="image"&&h&&h.imageSrcSet?void 0:r,as:o},h),Ba.set(T,r),m.querySelector(S)!==null||o==="style"&&m.querySelector(Ym(T))||o==="script"&&m.querySelector($m(T))||(o=m.createElement("link"),Ds(o,"link",r),j(o),m.head.appendChild(o)))}}function NU(r,o){ic.m(r,o);var h=vd;if(h&&r){var m=o&&typeof o.as=="string"?o.as:"script",S='link[rel="modulepreload"][as="'+Ft(m)+'"][href="'+Ft(r)+'"]',T=S;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=xd(r)}if(!Ba.has(T)&&(r=y({rel:"modulepreload",href:r},o),Ba.set(T,r),h.querySelector(S)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector($m(T)))return}m=h.createElement("link"),Ds(m,"link",r),j(m),h.head.appendChild(m)}}}function DU(r,o,h){ic.S(r,o,h);var m=vd;if(m&&r){var S=ga(m).hoistableStyles,T=yd(r);o=o||"default";var U=S.get(T);if(!U){var G={loading:0,preload:null};if(U=m.querySelector(Ym(T)))G.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":o},h),(h=Ba.get(T))&&ES(r,h);var Q=U=m.createElement("link");j(Q),Ds(Q,"link",r),Q._p=new Promise(function(ge,Ne){Q.onload=ge,Q.onerror=Ne}),Q.addEventListener("load",function(){G.loading|=1}),Q.addEventListener("error",function(){G.loading|=2}),G.loading|=4,fy(U,o,m)}U={type:"stylesheet",instance:U,count:1,state:G},S.set(T,U)}}}function IU(r,o){ic.X(r,o);var h=vd;if(h&&r){var m=ga(h).hoistableScripts,S=xd(r),T=m.get(S);T||(T=h.querySelector($m(S)),T||(r=y({src:r,async:!0},o),(o=Ba.get(S))&&AS(r,o),T=h.createElement("script"),j(T),Ds(T,"link",r),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(S,T))}}function LU(r,o){ic.M(r,o);var h=vd;if(h&&r){var m=ga(h).hoistableScripts,S=xd(r),T=m.get(S);T||(T=h.querySelector($m(S)),T||(r=y({src:r,async:!0,type:"module"},o),(o=Ba.get(S))&&AS(r,o),T=h.createElement("script"),j(T),Ds(T,"link",r),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(S,T))}}function RE(r,o,h,m){var S=(S=de.current)?uy(S):null;if(!S)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(o=yd(h.href),h=ga(S).hoistableStyles,m=h.get(o),m||(m={type:"style",instance:null,count:0,state:null},h.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){r=yd(h.href);var T=ga(S).hoistableStyles,U=T.get(r);if(U||(S=S.ownerDocument||S,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(r,U),(T=S.querySelector(Ym(r)))&&!T._p&&(U.instance=T,U.state.loading=5),Ba.has(r)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Ba.set(r,h),T||PU(S,r,h,U.state))),o&&m===null)throw Error(i(528,""));return U}if(o&&m!==null)throw Error(i(529,""));return null;case"script":return o=h.async,h=h.src,typeof h=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=xd(h),h=ga(S).hoistableScripts,m=h.get(o),m||(m={type:"script",instance:null,count:0,state:null},h.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function yd(r){return'href="'+Ft(r)+'"'}function Ym(r){return'link[rel="stylesheet"]['+r+"]"}function NE(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function PU(r,o,h,m){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=r.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),Ds(o,"link",h),j(o),r.head.appendChild(o))}function xd(r){return'[src="'+Ft(r)+'"]'}function $m(r){return"script[async]"+r}function DE(r,o,h){if(o.count++,o.instance===null)switch(o.type){case"style":var m=r.querySelector('style[data-href~="'+Ft(h.href)+'"]');if(m)return o.instance=m,j(m),m;var S=y({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(r.ownerDocument||r).createElement("style"),j(m),Ds(m,"style",S),fy(m,h.precedence,r),o.instance=m;case"stylesheet":S=yd(h.href);var T=r.querySelector(Ym(S));if(T)return o.state.loading|=4,o.instance=T,j(T),T;m=NE(h),(S=Ba.get(S))&&ES(m,S),T=(r.ownerDocument||r).createElement("link"),j(T);var U=T;return U._p=new Promise(function(G,Q){U.onload=G,U.onerror=Q}),Ds(T,"link",m),o.state.loading|=4,fy(T,h.precedence,r),o.instance=T;case"script":return T=xd(h.src),(S=r.querySelector($m(T)))?(o.instance=S,j(S),S):(m=h,(S=Ba.get(T))&&(m=y({},h),AS(m,S)),r=r.ownerDocument||r,S=r.createElement("script"),j(S),Ds(S,"link",m),r.head.appendChild(S),o.instance=S);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,fy(m,h.precedence,r));return o.instance}function fy(r,o,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=m.length?m[m.length-1]:null,T=S,U=0;U<m.length;U++){var G=m[U];if(G.dataset.precedence===o)T=G;else if(T!==S)break}T?T.parentNode.insertBefore(r,T.nextSibling):(o=h.nodeType===9?h.head:h,o.insertBefore(r,o.firstChild))}function ES(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function AS(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var hy=null;function IE(r,o,h){if(hy===null){var m=new Map,S=hy=new Map;S.set(h,m)}else S=hy,m=S.get(h),m||(m=new Map,S.set(h,m));if(m.has(r))return m;for(m.set(r,null),h=h.getElementsByTagName(r),S=0;S<h.length;S++){var T=h[S];if(!(T[na]||T[ii]||r==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var U=T.getAttribute(o)||"";U=r+U;var G=m.get(U);G?G.push(T):m.set(U,[T])}}return m}function LE(r,o,h){r=r.ownerDocument||r,r.head.insertBefore(h,o==="title"?r.querySelector("head > title"):null)}function UU(r,o,h){if(h===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(r=o.disabled,typeof o.precedence=="string"&&r==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function PE(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function OU(r,o,h,m){if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var S=yd(m.href),T=o.querySelector(Ym(S));if(T){o=T._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=dy.bind(r),o.then(r,r)),h.state.loading|=4,h.instance=T,j(T);return}T=o.ownerDocument||o,m=NE(m),(S=Ba.get(S))&&ES(m,S),T=T.createElement("link"),j(T);var U=T;U._p=new Promise(function(G,Q){U.onload=G,U.onerror=Q}),Ds(T,"link",m),h.instance=T}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(h,o),(o=h.state.preload)&&(h.state.loading&3)===0&&(r.count++,h=dy.bind(r),o.addEventListener("load",h),o.addEventListener("error",h))}}var CS=0;function zU(r,o){return r.stylesheets&&r.count===0&&my(r,r.stylesheets),0<r.count||0<r.imgCount?function(h){var m=setTimeout(function(){if(r.stylesheets&&my(r,r.stylesheets),r.unsuspend){var T=r.unsuspend;r.unsuspend=null,T()}},6e4+o);0<r.imgBytes&&CS===0&&(CS=62500*vU());var S=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&my(r,r.stylesheets),r.unsuspend)){var T=r.unsuspend;r.unsuspend=null,T()}},(r.imgBytes>CS?50:800)+o);return r.unsuspend=h,function(){r.unsuspend=null,clearTimeout(m),clearTimeout(S)}}:null}function dy(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)my(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var py=null;function my(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,py=new Map,o.forEach(kU,r),py=null,dy.call(r))}function kU(r,o){if(!(o.state.loading&4)){var h=py.get(r);if(h)var m=h.get(null);else{h=new Map,py.set(r,h);for(var S=r.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<S.length;T++){var U=S[T];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(h.set(U.dataset.precedence,U),m=U)}m&&h.set(null,m)}S=o.instance,U=S.getAttribute("data-precedence"),T=h.get(U)||m,T===m&&h.set(null,S),h.set(U,S),this.count++,m=dy.bind(this),S.addEventListener("load",m),S.addEventListener("error",m),T?T.parentNode.insertBefore(S,T.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(S,r.firstChild)),o.state.loading|=4}}var Km={$$typeof:L,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function FU(r,o,h,m,S,T,U,G,Q){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bn(0),this.hiddenUpdates=bn(null),this.identifierPrefix=m,this.onUncaughtError=S,this.onCaughtError=T,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function UE(r,o,h,m,S,T,U,G,Q,ge,Ne,Oe){return r=new FU(r,o,h,U,Q,ge,Ne,Oe,G),o=1,T===!0&&(o|=24),T=si(3,null,null,o),r.current=T,T.stateNode=r,o=tm(),o.refCount++,r.pooledCache=o,o.refCount++,T.memoizedState={element:m,isDehydrated:h,cache:o},af(T),r}function OE(r){return r?(r=Fo,r):Fo}function zE(r,o,h,m,S,T){S=OE(S),m.context===null?m.context=S:m.pendingContext=S,m=lo(o),m.payload={element:h},T=T===void 0?null:T,T!==null&&(m.callback=T),h=qo(r,m,o),h!==null&&(rn(h,r,o),Zo(h,r,o))}function kE(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var h=r.retryLane;r.retryLane=h!==0&&h<o?h:o}}function RS(r,o){kE(r,o),(r=r.alternate)&&kE(r,o)}function FE(r){if(r.tag===13||r.tag===31){var o=ws(r,67108864);o!==null&&rn(o,r,67108864),RS(r,67108864)}}function BE(r){if(r.tag===13||r.tag===31){var o=pr();o=Io(o);var h=ws(r,o);h!==null&&rn(h,r,o),RS(r,o)}}var gy=!0;function BU(r,o,h,m){var S=Z.T;Z.T=null;var T=K.p;try{K.p=2,NS(r,o,h,m)}finally{K.p=T,Z.T=S}}function VU(r,o,h,m){var S=Z.T;Z.T=null;var T=K.p;try{K.p=8,NS(r,o,h,m)}finally{K.p=T,Z.T=S}}function NS(r,o,h,m){if(gy){var S=DS(m);if(S===null)gS(r,o,m,vy,h),HE(r,m);else if(jU(S,r,o,h,m))m.stopPropagation();else if(HE(r,m),o&4&&-1<HU.indexOf(r)){for(;S!==null;){var T=Qa(S);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var U=He(T.pendingLanes);if(U!==0){var G=T;for(G.pendingLanes|=2,G.entangledLanes|=2;U;){var Q=1<<31-ft(U);G.entanglements[1]|=Q,U&=~Q}Ge(T),(Ct&6)===0&&(bi=k()+500,gt(0))}}break;case 31:case 13:G=ws(T,2),G!==null&&rn(G,T,2),la(),RS(T,2)}if(T=DS(m),T===null&&gS(r,o,m,vy,h),T===S)break;S=T}S!==null&&m.stopPropagation()}else gS(r,o,m,null,h)}}function DS(r){return r=gh(r),IS(r)}var vy=null;function IS(r){if(vy=null,r=Ja(r),r!==null){var o=a(r);if(o===null)r=null;else{var h=o.tag;if(h===13){if(r=l(o),r!==null)return r;r=null}else if(h===31){if(r=u(o),r!==null)return r;r=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return vy=r,null}function VE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(se()){case Me:return 2;case Ue:return 8;case we:case dt:return 32;case Ke:return 268435456;default:return 32}default:return 32}}var LS=!1,su=null,ru=null,au=null,Jm=new Map,Qm=new Map,ou=[],HU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function HE(r,o){switch(r){case"focusin":case"focusout":su=null;break;case"dragenter":case"dragleave":ru=null;break;case"mouseover":case"mouseout":au=null;break;case"pointerover":case"pointerout":Jm.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qm.delete(o.pointerId)}}function eg(r,o,h,m,S,T){return r===null||r.nativeEvent!==T?(r={blockedOn:o,domEventName:h,eventSystemFlags:m,nativeEvent:T,targetContainers:[S]},o!==null&&(o=Qa(o),o!==null&&FE(o)),r):(r.eventSystemFlags|=m,o=r.targetContainers,S!==null&&o.indexOf(S)===-1&&o.push(S),r)}function jU(r,o,h,m,S){switch(o){case"focusin":return su=eg(su,r,o,h,m,S),!0;case"dragenter":return ru=eg(ru,r,o,h,m,S),!0;case"mouseover":return au=eg(au,r,o,h,m,S),!0;case"pointerover":var T=S.pointerId;return Jm.set(T,eg(Jm.get(T)||null,r,o,h,m,S)),!0;case"gotpointercapture":return T=S.pointerId,Qm.set(T,eg(Qm.get(T)||null,r,o,h,m,S)),!0}return!1}function jE(r){var o=Ja(r.target);if(o!==null){var h=a(o);if(h!==null){if(o=h.tag,o===13){if(o=l(h),o!==null){r.blockedOn=o,ps(r.priority,function(){BE(h)});return}}else if(o===31){if(o=u(h),o!==null){r.blockedOn=o,ps(r.priority,function(){BE(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){r.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}r.blockedOn=null}function yy(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var h=DS(r.nativeEvent);if(h===null){h=r.nativeEvent;var m=new h.constructor(h.type,h);mh=m,h.target.dispatchEvent(m),mh=null}else return o=Qa(h),o!==null&&FE(o),r.blockedOn=h,!1;o.shift()}return!0}function GE(r,o,h){yy(r)&&h.delete(o)}function GU(){LS=!1,su!==null&&yy(su)&&(su=null),ru!==null&&yy(ru)&&(ru=null),au!==null&&yy(au)&&(au=null),Jm.forEach(GE),Qm.forEach(GE)}function xy(r,o){r.blockedOn===o&&(r.blockedOn=null,LS||(LS=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,GU)))}var _y=null;function WE(r){_y!==r&&(_y=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){_y===r&&(_y=null);for(var o=0;o<r.length;o+=3){var h=r[o],m=r[o+1],S=r[o+2];if(typeof m!="function"){if(IS(m||h)===null)continue;break}var T=Qa(h);T!==null&&(r.splice(o,3),o-=3,Cm(T,{pending:!0,data:S,method:h.method,action:m},m,S))}}))}function _d(r){function o(Q){return xy(Q,r)}su!==null&&xy(su,r),ru!==null&&xy(ru,r),au!==null&&xy(au,r),Jm.forEach(o),Qm.forEach(o);for(var h=0;h<ou.length;h++){var m=ou[h];m.blockedOn===r&&(m.blockedOn=null)}for(;0<ou.length&&(h=ou[0],h.blockedOn===null);)jE(h),h.blockedOn===null&&ou.shift();if(h=(r.ownerDocument||r).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var S=h[m],T=h[m+1],U=S[zi]||null;if(typeof T=="function")U||WE(h);else if(U){var G=null;if(T&&T.hasAttribute("formAction")){if(S=T,U=T[zi]||null)G=U.formAction;else if(IS(S)!==null)continue}else G=U.action;typeof G=="function"?h[m+1]=G:(h.splice(m,3),m-=3),WE(h)}}}function XE(){function r(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(U){return S=U})},focusReset:"manual",scroll:"manual"})}function o(){S!==null&&(S(),S=null),m||setTimeout(h,20)}function h(){if(!m&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,S=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(h,100),function(){m=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),S!==null&&(S(),S=null)}}}function PS(r){this._internalRoot=r}by.prototype.render=PS.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var h=o.current,m=pr();zE(h,m,r,o,null,null)},by.prototype.unmount=PS.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;zE(r.current,2,null,r,null,null),la(),o[nr]=null}};function by(r){this._internalRoot=r}by.prototype.unstable_scheduleHydration=function(r){if(r){var o=El();r={blockedOn:null,target:r,priority:o};for(var h=0;h<ou.length&&o!==0&&o<ou[h].priority;h++);ou.splice(h,0,r),h===0&&jE(r)}};var qE=e.version;if(qE!=="19.2.3")throw Error(i(527,qE,"19.2.3"));K.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(o),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var WU={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sy.isDisabled&&Sy.supportsFiber)try{Ve=Sy.inject(WU),qe=Sy}catch{}}return ng.createRoot=function(r,o){if(!s(r))throw Error(i(299));var h=!1,m="",S=Qv,T=Pm,U=Um;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(S=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(U=o.onRecoverableError)),o=UE(r,1,!1,null,null,h,m,null,S,T,U,XE),r[nr]=o.current,mS(r),new PS(o)},ng.hydrateRoot=function(r,o,h){if(!s(r))throw Error(i(299));var m=!1,S="",T=Qv,U=Pm,G=Um,Q=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onUncaughtError!==void 0&&(T=h.onUncaughtError),h.onCaughtError!==void 0&&(U=h.onCaughtError),h.onRecoverableError!==void 0&&(G=h.onRecoverableError),h.formState!==void 0&&(Q=h.formState)),o=UE(r,1,!0,o,h??null,m,S,Q,T,U,G,XE),o.context=OE(null),h=o.current,m=pr(),m=Io(m),S=lo(m),S.callback=null,qo(h,S,m),h=m,o.current.lanes=h,rs(o,h),Ge(o),r[nr]=o.current,mS(r),new by(o)},ng.version="19.2.3",ng}var iA;function eO(){if(iA)return zS.exports;iA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),zS.exports=QU(),zS.exports}var tO=eO();const nO=sb(tO);const iO=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sO=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),sA=n=>{const e=sO(n);return e.charAt(0).toUpperCase()+e.slice(1)},lN=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),rO=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var aO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const oO=pe.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:a,iconNode:l,...u},d)=>pe.createElement("svg",{ref:d,...aO,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:lN("lucide",s),...!a&&!rO(u)&&{"aria-hidden":"true"},...u},[...l.map(([p,g])=>pe.createElement(p,g)),...Array.isArray(a)?a:[a]]));const _n=(n,e)=>{const t=pe.forwardRef(({className:i,...s},a)=>pe.createElement(oO,{ref:a,iconNode:e,className:lN(`lucide-${iO(sA(n))}`,`lucide-${n}`,i),...s}));return t.displayName=sA(n),t};const lO=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Bx=_n("activity",lO);const cO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],uO=_n("arrow-right",cO);const fO=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]],hO=_n("atom",fO);const dO=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],cN=_n("bell",dO);const pO=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],rA=_n("boxes",pO);const mO=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Vx=_n("brain",mO);const gO=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],aA=_n("chart-column",gO);const vO=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],yO=_n("check",vO);const xO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],yw=_n("circle-check-big",xO);const _O=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],hM=_n("cpu",_O);const bO=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],uN=_n("credit-card",bO);const SO=[["path",{d:"m10 16 1.5 1.5",key:"11lckj"}],["path",{d:"m14 8-1.5-1.5",key:"1ohn8i"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m17 6-2.891-2.891",key:"xu6p2f"}],["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"m20 9 .891.891",key:"3xwk7g"}],["path",{d:"M3.109 14.109 4 15",key:"q76aoh"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m7 18 2.891 2.891",key:"1sisit"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}]],MO=_n("dna",SO);const wO=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],xw=_n("dollar-sign",wO);const TO=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],EO=_n("git-branch",TO);const AO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Hx=_n("globe",AO);const CO=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],RO=_n("house",CO);const NO=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],DO=_n("link",NO);const IO=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],fN=_n("lock",IO);const LO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],PO=_n("log-out",LO);const UO=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],hN=_n("mail",UO);const OO=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],zO=_n("menu",OO);const kO=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],oA=_n("message-square",kO);const FO=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],BO=_n("network",FO);const VO=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],dN=_n("search",VO);const HO=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],pN=_n("send",HO);const jO=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dM=_n("settings",jO);const GO=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],mN=_n("shield",GO);const WO=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],XO=_n("shopping-bag",WO);const qO=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],lA=_n("terminal",qO);const ZO=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],YO=_n("trash",ZO);const $O=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],gN=_n("trending-up",$O);const KO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],vN=_n("user",KO);const JO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],pM=_n("users",JO);const QO=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],cA=_n("wallet",QO);const ez=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],mM=_n("workflow",ez);const tz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],nz=_n("x",tz);const iz=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],_w=_n("zap",iz),uA=n=>{let e;const t=new Set,i=(p,g)=>{const y=typeof p=="function"?p(e):p;if(!Object.is(y,e)){const x=e;e=g??(typeof y!="object"||y===null)?y:Object.assign({},e,y),t.forEach(_=>_(e,x))}},s=()=>e,u={setState:i,getState:s,getInitialState:()=>d,subscribe:p=>(t.add(p),()=>t.delete(p))},d=e=n(i,s,u);return u},yN=(n=>n?uA(n):uA),sz=n=>n;function rz(n,e=sz){const t=jf.useSyncExternalStore(n.subscribe,jf.useCallback(()=>e(n.getState()),[n,e]),jf.useCallback(()=>e(n.getInitialState()),[n,e]));return jf.useDebugValue(t),t}const fA=n=>{const e=yN(n),t=i=>rz(e,i);return Object.assign(t,e),t},az=(n=>n?fA(n):fA);function ze(n,e,t){function i(u,d){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:d,constr:l,traits:new Set},enumerable:!1}),u._zod.traits.has(n))return;u._zod.traits.add(n),e(u,d);const p=l.prototype,g=Object.keys(p);for(let y=0;y<g.length;y++){const x=g[y];x in u||(u[x]=p[x].bind(u))}}const s=t?.Parent??Object;class a extends s{}Object.defineProperty(a,"name",{value:n});function l(u){var d;const p=t?.Parent?new a:this;i(p,u),(d=p._zod).deferred??(d.deferred=[]);for(const g of p._zod.deferred)g();return p}return Object.defineProperty(l,"init",{value:i}),Object.defineProperty(l,Symbol.hasInstance,{value:u=>t?.Parent&&u instanceof t.Parent?!0:u?._zod?.traits?.has(n)}),Object.defineProperty(l,"name",{value:n}),l}class ep extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class xN extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const _N={};function ih(n){return _N}function bN(n){const e=Object.values(n).filter(i=>typeof i=="number");return Object.entries(n).filter(([i,s])=>e.indexOf(+i)===-1).map(([i,s])=>s)}function gM(n,e){return typeof e=="bigint"?e.toString():e}function bw(n){return{get value(){{const e=n();return Object.defineProperty(this,"value",{value:e}),e}}}}function Sw(n){return n==null}function Mw(n){const e=n.startsWith("^")?1:0,t=n.endsWith("$")?n.length-1:n.length;return n.slice(e,t)}function oz(n,e){const t=(n.toString().split(".")[1]||"").length,i=e.toString();let s=(i.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(i)){const d=i.match(/\d?e-(\d?)/);d?.[1]&&(s=Number.parseInt(d[1]))}const a=t>s?t:s,l=Number.parseInt(n.toFixed(a).replace(".","")),u=Number.parseInt(e.toFixed(a).replace(".",""));return l%u/10**a}const hA=Symbol("evaluating");function Hn(n,e,t){let i;Object.defineProperty(n,e,{get(){if(i!==hA)return i===void 0&&(i=hA,i=t()),i},set(s){Object.defineProperty(n,e,{value:s})},configurable:!0})}function fh(n,e,t){Object.defineProperty(n,e,{value:t,writable:!0,enumerable:!0,configurable:!0})}function Iu(...n){const e={};for(const t of n){const i=Object.getOwnPropertyDescriptors(t);Object.assign(e,i)}return Object.defineProperties({},e)}function dA(n){return JSON.stringify(n)}function lz(n){return n.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const SN="captureStackTrace"in Error?Error.captureStackTrace:(...n)=>{};function jx(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}const cz=bw(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const n=Function;return new n(""),!0}catch{return!1}});function Xg(n){if(jx(n)===!1)return!1;const e=n.constructor;if(e===void 0||typeof e!="function")return!0;const t=e.prototype;return!(jx(t)===!1||Object.prototype.hasOwnProperty.call(t,"isPrototypeOf")===!1)}function MN(n){return Xg(n)?{...n}:Array.isArray(n)?[...n]:n}const uz=new Set(["string","number","symbol"]);function rb(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Lu(n,e,t){const i=new n._zod.constr(e??n._zod.def);return(!e||t?.parent)&&(i._zod.parent=n),i}function zt(n){const e=n;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function fz(n){return Object.keys(n).filter(e=>n[e]._zod.optin==="optional"&&n[e]._zod.optout==="optional")}const hz={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function dz(n,e){const t=n._zod.def,i=t.checks;if(i&&i.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const a=Iu(n._zod.def,{get shape(){const l={};for(const u in e){if(!(u in t.shape))throw new Error(`Unrecognized key: "${u}"`);e[u]&&(l[u]=t.shape[u])}return fh(this,"shape",l),l},checks:[]});return Lu(n,a)}function pz(n,e){const t=n._zod.def,i=t.checks;if(i&&i.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const a=Iu(n._zod.def,{get shape(){const l={...n._zod.def.shape};for(const u in e){if(!(u in t.shape))throw new Error(`Unrecognized key: "${u}"`);e[u]&&delete l[u]}return fh(this,"shape",l),l},checks:[]});return Lu(n,a)}function mz(n,e){if(!Xg(e))throw new Error("Invalid input to extend: expected a plain object");const t=n._zod.def.checks;if(t&&t.length>0){const a=n._zod.def.shape;for(const l in e)if(Object.getOwnPropertyDescriptor(a,l)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=Iu(n._zod.def,{get shape(){const a={...n._zod.def.shape,...e};return fh(this,"shape",a),a}});return Lu(n,s)}function gz(n,e){if(!Xg(e))throw new Error("Invalid input to safeExtend: expected a plain object");const t=Iu(n._zod.def,{get shape(){const i={...n._zod.def.shape,...e};return fh(this,"shape",i),i}});return Lu(n,t)}function vz(n,e){const t=Iu(n._zod.def,{get shape(){const i={...n._zod.def.shape,...e._zod.def.shape};return fh(this,"shape",i),i},get catchall(){return e._zod.def.catchall},checks:[]});return Lu(n,t)}function yz(n,e,t){const s=e._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const l=Iu(e._zod.def,{get shape(){const u=e._zod.def.shape,d={...u};if(t)for(const p in t){if(!(p in u))throw new Error(`Unrecognized key: "${p}"`);t[p]&&(d[p]=n?new n({type:"optional",innerType:u[p]}):u[p])}else for(const p in u)d[p]=n?new n({type:"optional",innerType:u[p]}):u[p];return fh(this,"shape",d),d},checks:[]});return Lu(e,l)}function xz(n,e,t){const i=Iu(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(t)for(const l in t){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);t[l]&&(a[l]=new n({type:"nonoptional",innerType:s[l]}))}else for(const l in s)a[l]=new n({type:"nonoptional",innerType:s[l]});return fh(this,"shape",a),a}});return Lu(e,i)}function Xd(n,e=0){if(n.aborted===!0)return!0;for(let t=e;t<n.issues.length;t++)if(n.issues[t]?.continue!==!0)return!0;return!1}function wN(n,e){return e.map(t=>{var i;return(i=t).path??(i.path=[]),t.path.unshift(n),t})}function My(n){return typeof n=="string"?n:n?.message}function sh(n,e,t){const i={...n,path:n.path??[]};if(!n.message){const s=My(n.inst?._zod.def?.error?.(n))??My(e?.error?.(n))??My(t.customError?.(n))??My(t.localeError?.(n))??"Invalid input";i.message=s}return delete i.inst,delete i.continue,e?.reportInput||delete i.input,i}function ww(n){return Array.isArray(n)?"array":typeof n=="string"?"string":"unknown"}function qg(...n){const[e,t,i]=n;return typeof e=="string"?{message:e,code:"custom",input:t,inst:i}:{...e}}const TN=(n,e)=>{n.name="$ZodError",Object.defineProperty(n,"_zod",{value:n._zod,enumerable:!1}),Object.defineProperty(n,"issues",{value:e,enumerable:!1}),n.message=JSON.stringify(e,gM,2),Object.defineProperty(n,"toString",{value:()=>n.message,enumerable:!1})},EN=ze("$ZodError",TN),AN=ze("$ZodError",TN,{Parent:Error});function _z(n,e=t=>t.message){const t={},i=[];for(const s of n.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):i.push(e(s));return{formErrors:i,fieldErrors:t}}function bz(n,e=t=>t.message){const t={_errors:[]},i=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(l=>i({issues:l}));else if(a.code==="invalid_key")i({issues:a.issues});else if(a.code==="invalid_element")i({issues:a.issues});else if(a.path.length===0)t._errors.push(e(a));else{let l=t,u=0;for(;u<a.path.length;){const d=a.path[u];u===a.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(e(a))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}};return i(n),t}const Tw=n=>(e,t,i,s)=>{const a=i?Object.assign(i,{async:!1}):{async:!1},l=e._zod.run({value:t,issues:[]},a);if(l instanceof Promise)throw new ep;if(l.issues.length){const u=new(s?.Err??n)(l.issues.map(d=>sh(d,a,ih())));throw SN(u,s?.callee),u}return l.value},Ew=n=>async(e,t,i,s)=>{const a=i?Object.assign(i,{async:!0}):{async:!0};let l=e._zod.run({value:t,issues:[]},a);if(l instanceof Promise&&(l=await l),l.issues.length){const u=new(s?.Err??n)(l.issues.map(d=>sh(d,a,ih())));throw SN(u,s?.callee),u}return l.value},ab=n=>(e,t,i)=>{const s=i?{...i,async:!1}:{async:!1},a=e._zod.run({value:t,issues:[]},s);if(a instanceof Promise)throw new ep;return a.issues.length?{success:!1,error:new(n??EN)(a.issues.map(l=>sh(l,s,ih())))}:{success:!0,data:a.value}},Sz=ab(AN),ob=n=>async(e,t,i)=>{const s=i?Object.assign(i,{async:!0}):{async:!0};let a=e._zod.run({value:t,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new n(a.issues.map(l=>sh(l,s,ih())))}:{success:!0,data:a.value}},Mz=ob(AN),wz=n=>(e,t,i)=>{const s=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Tw(n)(e,t,s)},Tz=n=>(e,t,i)=>Tw(n)(e,t,i),Ez=n=>async(e,t,i)=>{const s=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Ew(n)(e,t,s)},Az=n=>async(e,t,i)=>Ew(n)(e,t,i),Cz=n=>(e,t,i)=>{const s=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return ab(n)(e,t,s)},Rz=n=>(e,t,i)=>ab(n)(e,t,i),Nz=n=>async(e,t,i)=>{const s=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return ob(n)(e,t,s)},Dz=n=>async(e,t,i)=>ob(n)(e,t,i),Iz=/^[cC][^\s-]{8,}$/,Lz=/^[0-9a-z]+$/,Pz=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Uz=/^[0-9a-vA-V]{20}$/,Oz=/^[A-Za-z0-9]{27}$/,zz=/^[a-zA-Z0-9_-]{21}$/,kz=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Fz=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,pA=n=>n?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${n}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Bz=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Vz="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Hz(){return new RegExp(Vz,"u")}const jz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Gz=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Wz=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Xz=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,qz=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,CN=/^[A-Za-z0-9_-]*$/,Zz=/^\+[1-9]\d{6,14}$/,RN="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Yz=new RegExp(`^${RN}$`);function NN(n){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof n.precision=="number"?n.precision===-1?`${e}`:n.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${n.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function $z(n){return new RegExp(`^${NN(n)}$`)}function Kz(n){const e=NN({precision:n.precision}),t=["Z"];n.local&&t.push(""),n.offset&&t.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${e}(?:${t.join("|")})`;return new RegExp(`^${RN}T(?:${i})$`)}const Jz=n=>{const e=n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},Qz=/^-?\d+$/,e4=/^-?\d+(?:\.\d+)?$/,t4=/^[^A-Z]*$/,n4=/^[^a-z]*$/,ea=ze("$ZodCheck",(n,e)=>{var t;n._zod??(n._zod={}),n._zod.def=e,(t=n._zod).onattach??(t.onattach=[])}),DN={number:"number",bigint:"bigint",object:"date"},IN=ze("$ZodCheckLessThan",(n,e)=>{ea.init(n,e);const t=DN[typeof e.value];n._zod.onattach.push(i=>{const s=i._zod.bag,a=(e.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<a&&(e.inclusive?s.maximum=e.value:s.exclusiveMaximum=e.value)}),n._zod.check=i=>{(e.inclusive?i.value<=e.value:i.value<e.value)||i.issues.push({origin:t,code:"too_big",maximum:typeof e.value=="object"?e.value.getTime():e.value,input:i.value,inclusive:e.inclusive,inst:n,continue:!e.abort})}}),LN=ze("$ZodCheckGreaterThan",(n,e)=>{ea.init(n,e);const t=DN[typeof e.value];n._zod.onattach.push(i=>{const s=i._zod.bag,a=(e.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>a&&(e.inclusive?s.minimum=e.value:s.exclusiveMinimum=e.value)}),n._zod.check=i=>{(e.inclusive?i.value>=e.value:i.value>e.value)||i.issues.push({origin:t,code:"too_small",minimum:typeof e.value=="object"?e.value.getTime():e.value,input:i.value,inclusive:e.inclusive,inst:n,continue:!e.abort})}}),i4=ze("$ZodCheckMultipleOf",(n,e)=>{ea.init(n,e),n._zod.onattach.push(t=>{var i;(i=t._zod.bag).multipleOf??(i.multipleOf=e.value)}),n._zod.check=t=>{if(typeof t.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof t.value=="bigint"?t.value%e.value===BigInt(0):oz(t.value,e.value)===0)||t.issues.push({origin:typeof t.value,code:"not_multiple_of",divisor:e.value,input:t.value,inst:n,continue:!e.abort})}}),s4=ze("$ZodCheckNumberFormat",(n,e)=>{ea.init(n,e),e.format=e.format||"float64";const t=e.format?.includes("int"),i=t?"int":"number",[s,a]=hz[e.format];n._zod.onattach.push(l=>{const u=l._zod.bag;u.format=e.format,u.minimum=s,u.maximum=a,t&&(u.pattern=Qz)}),n._zod.check=l=>{const u=l.value;if(t){if(!Number.isInteger(u)){l.issues.push({expected:i,format:e.format,code:"invalid_type",continue:!1,input:u,inst:n});return}if(!Number.isSafeInteger(u)){u>0?l.issues.push({input:u,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:n,origin:i,inclusive:!0,continue:!e.abort}):l.issues.push({input:u,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:n,origin:i,inclusive:!0,continue:!e.abort});return}}u<s&&l.issues.push({origin:"number",input:u,code:"too_small",minimum:s,inclusive:!0,inst:n,continue:!e.abort}),u>a&&l.issues.push({origin:"number",input:u,code:"too_big",maximum:a,inclusive:!0,inst:n,continue:!e.abort})}}),r4=ze("$ZodCheckMaxLength",(n,e)=>{var t;ea.init(n,e),(t=n._zod.def).when??(t.when=i=>{const s=i.value;return!Sw(s)&&s.length!==void 0}),n._zod.onattach.push(i=>{const s=i._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(i._zod.bag.maximum=e.maximum)}),n._zod.check=i=>{const s=i.value;if(s.length<=e.maximum)return;const l=ww(s);i.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:n,continue:!e.abort})}}),a4=ze("$ZodCheckMinLength",(n,e)=>{var t;ea.init(n,e),(t=n._zod.def).when??(t.when=i=>{const s=i.value;return!Sw(s)&&s.length!==void 0}),n._zod.onattach.push(i=>{const s=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(i._zod.bag.minimum=e.minimum)}),n._zod.check=i=>{const s=i.value;if(s.length>=e.minimum)return;const l=ww(s);i.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:n,continue:!e.abort})}}),o4=ze("$ZodCheckLengthEquals",(n,e)=>{var t;ea.init(n,e),(t=n._zod.def).when??(t.when=i=>{const s=i.value;return!Sw(s)&&s.length!==void 0}),n._zod.onattach.push(i=>{const s=i._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),n._zod.check=i=>{const s=i.value,a=s.length;if(a===e.length)return;const l=ww(s),u=a>e.length;i.issues.push({origin:l,...u?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:i.value,inst:n,continue:!e.abort})}}),lb=ze("$ZodCheckStringFormat",(n,e)=>{var t,i;ea.init(n,e),n._zod.onattach.push(s=>{const a=s._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(t=n._zod).check??(t.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:n,continue:!e.abort})}):(i=n._zod).check??(i.check=()=>{})}),l4=ze("$ZodCheckRegex",(n,e)=>{lb.init(n,e),n._zod.check=t=>{e.pattern.lastIndex=0,!e.pattern.test(t.value)&&t.issues.push({origin:"string",code:"invalid_format",format:"regex",input:t.value,pattern:e.pattern.toString(),inst:n,continue:!e.abort})}}),c4=ze("$ZodCheckLowerCase",(n,e)=>{e.pattern??(e.pattern=t4),lb.init(n,e)}),u4=ze("$ZodCheckUpperCase",(n,e)=>{e.pattern??(e.pattern=n4),lb.init(n,e)}),f4=ze("$ZodCheckIncludes",(n,e)=>{ea.init(n,e);const t=rb(e.includes),i=new RegExp(typeof e.position=="number"?`^.{${e.position}}${t}`:t);e.pattern=i,n._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(i)}),n._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:n,continue:!e.abort})}}),h4=ze("$ZodCheckStartsWith",(n,e)=>{ea.init(n,e);const t=new RegExp(`^${rb(e.prefix)}.*`);e.pattern??(e.pattern=t),n._zod.onattach.push(i=>{const s=i._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(t)}),n._zod.check=i=>{i.value.startsWith(e.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:i.value,inst:n,continue:!e.abort})}}),d4=ze("$ZodCheckEndsWith",(n,e)=>{ea.init(n,e);const t=new RegExp(`.*${rb(e.suffix)}$`);e.pattern??(e.pattern=t),n._zod.onattach.push(i=>{const s=i._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(t)}),n._zod.check=i=>{i.value.endsWith(e.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:i.value,inst:n,continue:!e.abort})}}),p4=ze("$ZodCheckOverwrite",(n,e)=>{ea.init(n,e),n._zod.check=t=>{t.value=e.tx(t.value)}});class m4{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const i=e.split(`
`).filter(l=>l),s=Math.min(...i.map(l=>l.length-l.trimStart().length)),a=i.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of a)this.content.push(l)}compile(){const e=Function,t=this?.args,s=[...(this?.content??[""]).map(a=>`  ${a}`)];return new e(...t,s.join(`
`))}}const g4={major:4,minor:3,patch:5},is=ze("$ZodType",(n,e)=>{var t;n??(n={}),n._zod.def=e,n._zod.bag=n._zod.bag||{},n._zod.version=g4;const i=[...n._zod.def.checks??[]];n._zod.traits.has("$ZodCheck")&&i.unshift(n);for(const s of i)for(const a of s._zod.onattach)a(n);if(i.length===0)(t=n._zod).deferred??(t.deferred=[]),n._zod.deferred?.push(()=>{n._zod.run=n._zod.parse});else{const s=(l,u,d)=>{let p=Xd(l),g;for(const y of u){if(y._zod.def.when){if(!y._zod.def.when(l))continue}else if(p)continue;const x=l.issues.length,_=y._zod.check(l);if(_ instanceof Promise&&d?.async===!1)throw new ep;if(g||_ instanceof Promise)g=(g??Promise.resolve()).then(async()=>{await _,l.issues.length!==x&&(p||(p=Xd(l,x)))});else{if(l.issues.length===x)continue;p||(p=Xd(l,x))}}return g?g.then(()=>l):l},a=(l,u,d)=>{if(Xd(l))return l.aborted=!0,l;const p=s(u,i,d);if(p instanceof Promise){if(d.async===!1)throw new ep;return p.then(g=>n._zod.parse(g,d))}return n._zod.parse(p,d)};n._zod.run=(l,u)=>{if(u.skipChecks)return n._zod.parse(l,u);if(u.direction==="backward"){const p=n._zod.parse({value:l.value,issues:[]},{...u,skipChecks:!0});return p instanceof Promise?p.then(g=>a(g,l,u)):a(p,l,u)}const d=n._zod.parse(l,u);if(d instanceof Promise){if(u.async===!1)throw new ep;return d.then(p=>s(p,i,u))}return s(d,i,u)}}Hn(n,"~standard",()=>({validate:s=>{try{const a=Sz(n,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return Mz(n,s).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}))}),Aw=ze("$ZodString",(n,e)=>{is.init(n,e),n._zod.pattern=[...n?._zod.bag?.patterns??[]].pop()??Jz(n._zod.bag),n._zod.parse=(t,i)=>{if(e.coerce)try{t.value=String(t.value)}catch{}return typeof t.value=="string"||t.issues.push({expected:"string",code:"invalid_type",input:t.value,inst:n}),t}}),vi=ze("$ZodStringFormat",(n,e)=>{lb.init(n,e),Aw.init(n,e)}),v4=ze("$ZodGUID",(n,e)=>{e.pattern??(e.pattern=Fz),vi.init(n,e)}),y4=ze("$ZodUUID",(n,e)=>{if(e.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(i===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=pA(i))}else e.pattern??(e.pattern=pA());vi.init(n,e)}),x4=ze("$ZodEmail",(n,e)=>{e.pattern??(e.pattern=Bz),vi.init(n,e)}),_4=ze("$ZodURL",(n,e)=>{vi.init(n,e),n._zod.check=t=>{try{const i=t.value.trim(),s=new URL(i);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:t.value,inst:n,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:t.value,inst:n,continue:!e.abort})),e.normalize?t.value=s.href:t.value=i;return}catch{t.issues.push({code:"invalid_format",format:"url",input:t.value,inst:n,continue:!e.abort})}}}),b4=ze("$ZodEmoji",(n,e)=>{e.pattern??(e.pattern=Hz()),vi.init(n,e)}),S4=ze("$ZodNanoID",(n,e)=>{e.pattern??(e.pattern=zz),vi.init(n,e)}),M4=ze("$ZodCUID",(n,e)=>{e.pattern??(e.pattern=Iz),vi.init(n,e)}),w4=ze("$ZodCUID2",(n,e)=>{e.pattern??(e.pattern=Lz),vi.init(n,e)}),T4=ze("$ZodULID",(n,e)=>{e.pattern??(e.pattern=Pz),vi.init(n,e)}),E4=ze("$ZodXID",(n,e)=>{e.pattern??(e.pattern=Uz),vi.init(n,e)}),A4=ze("$ZodKSUID",(n,e)=>{e.pattern??(e.pattern=Oz),vi.init(n,e)}),C4=ze("$ZodISODateTime",(n,e)=>{e.pattern??(e.pattern=Kz(e)),vi.init(n,e)}),R4=ze("$ZodISODate",(n,e)=>{e.pattern??(e.pattern=Yz),vi.init(n,e)}),N4=ze("$ZodISOTime",(n,e)=>{e.pattern??(e.pattern=$z(e)),vi.init(n,e)}),D4=ze("$ZodISODuration",(n,e)=>{e.pattern??(e.pattern=kz),vi.init(n,e)}),I4=ze("$ZodIPv4",(n,e)=>{e.pattern??(e.pattern=jz),vi.init(n,e),n._zod.bag.format="ipv4"}),L4=ze("$ZodIPv6",(n,e)=>{e.pattern??(e.pattern=Gz),vi.init(n,e),n._zod.bag.format="ipv6",n._zod.check=t=>{try{new URL(`http://[${t.value}]`)}catch{t.issues.push({code:"invalid_format",format:"ipv6",input:t.value,inst:n,continue:!e.abort})}}}),P4=ze("$ZodCIDRv4",(n,e)=>{e.pattern??(e.pattern=Wz),vi.init(n,e)}),U4=ze("$ZodCIDRv6",(n,e)=>{e.pattern??(e.pattern=Xz),vi.init(n,e),n._zod.check=t=>{const i=t.value.split("/");try{if(i.length!==2)throw new Error;const[s,a]=i;if(!a)throw new Error;const l=Number(a);if(`${l}`!==a)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{t.issues.push({code:"invalid_format",format:"cidrv6",input:t.value,inst:n,continue:!e.abort})}}});function PN(n){if(n==="")return!0;if(n.length%4!==0)return!1;try{return atob(n),!0}catch{return!1}}const O4=ze("$ZodBase64",(n,e)=>{e.pattern??(e.pattern=qz),vi.init(n,e),n._zod.bag.contentEncoding="base64",n._zod.check=t=>{PN(t.value)||t.issues.push({code:"invalid_format",format:"base64",input:t.value,inst:n,continue:!e.abort})}});function z4(n){if(!CN.test(n))return!1;const e=n.replace(/[-_]/g,i=>i==="-"?"+":"/"),t=e.padEnd(Math.ceil(e.length/4)*4,"=");return PN(t)}const k4=ze("$ZodBase64URL",(n,e)=>{e.pattern??(e.pattern=CN),vi.init(n,e),n._zod.bag.contentEncoding="base64url",n._zod.check=t=>{z4(t.value)||t.issues.push({code:"invalid_format",format:"base64url",input:t.value,inst:n,continue:!e.abort})}}),F4=ze("$ZodE164",(n,e)=>{e.pattern??(e.pattern=Zz),vi.init(n,e)});function B4(n,e=null){try{const t=n.split(".");if(t.length!==3)return!1;const[i]=t;if(!i)return!1;const s=JSON.parse(atob(i));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const V4=ze("$ZodJWT",(n,e)=>{vi.init(n,e),n._zod.check=t=>{B4(t.value,e.alg)||t.issues.push({code:"invalid_format",format:"jwt",input:t.value,inst:n,continue:!e.abort})}}),UN=ze("$ZodNumber",(n,e)=>{is.init(n,e),n._zod.pattern=n._zod.bag.pattern??e4,n._zod.parse=(t,i)=>{if(e.coerce)try{t.value=Number(t.value)}catch{}const s=t.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return t;const a=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return t.issues.push({expected:"number",code:"invalid_type",input:s,inst:n,...a?{received:a}:{}}),t}}),H4=ze("$ZodNumberFormat",(n,e)=>{s4.init(n,e),UN.init(n,e)}),j4=ze("$ZodUnknown",(n,e)=>{is.init(n,e),n._zod.parse=t=>t}),G4=ze("$ZodNever",(n,e)=>{is.init(n,e),n._zod.parse=(t,i)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:n}),t)});function mA(n,e,t){n.issues.length&&e.issues.push(...wN(t,n.issues)),e.value[t]=n.value}const W4=ze("$ZodArray",(n,e)=>{is.init(n,e),n._zod.parse=(t,i)=>{const s=t.value;if(!Array.isArray(s))return t.issues.push({expected:"array",code:"invalid_type",input:s,inst:n}),t;t.value=Array(s.length);const a=[];for(let l=0;l<s.length;l++){const u=s[l],d=e.element._zod.run({value:u,issues:[]},i);d instanceof Promise?a.push(d.then(p=>mA(p,t,l))):mA(d,t,l)}return a.length?Promise.all(a).then(()=>t):t}});function Gx(n,e,t,i,s){if(n.issues.length){if(s&&!(t in i))return;e.issues.push(...wN(t,n.issues))}n.value===void 0?t in i&&(e.value[t]=void 0):e.value[t]=n.value}function ON(n){const e=Object.keys(n.shape);for(const i of e)if(!n.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const t=fz(n.shape);return{...n,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(t)}}function zN(n,e,t,i,s,a){const l=[],u=s.keySet,d=s.catchall._zod,p=d.def.type,g=d.optout==="optional";for(const y in e){if(u.has(y))continue;if(p==="never"){l.push(y);continue}const x=d.run({value:e[y],issues:[]},i);x instanceof Promise?n.push(x.then(_=>Gx(_,t,y,e,g))):Gx(x,t,y,e,g)}return l.length&&t.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:a}),n.length?Promise.all(n).then(()=>t):t}const X4=ze("$ZodObject",(n,e)=>{if(is.init(n,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const u=e.shape;Object.defineProperty(e,"shape",{get:()=>{const d={...u};return Object.defineProperty(e,"shape",{value:d}),d}})}const i=bw(()=>ON(e));Hn(n._zod,"propValues",()=>{const u=e.shape,d={};for(const p in u){const g=u[p]._zod;if(g.values){d[p]??(d[p]=new Set);for(const y of g.values)d[p].add(y)}}return d});const s=jx,a=e.catchall;let l;n._zod.parse=(u,d)=>{l??(l=i.value);const p=u.value;if(!s(p))return u.issues.push({expected:"object",code:"invalid_type",input:p,inst:n}),u;u.value={};const g=[],y=l.shape;for(const x of l.keys){const _=y[x],w=_._zod.optout==="optional",A=_._zod.run({value:p[x],issues:[]},d);A instanceof Promise?g.push(A.then(E=>Gx(E,u,x,p,w))):Gx(A,u,x,p,w)}return a?zN(g,p,u,d,i.value,n):g.length?Promise.all(g).then(()=>u):u}}),q4=ze("$ZodObjectJIT",(n,e)=>{X4.init(n,e);const t=n._zod.parse,i=bw(()=>ON(e)),s=x=>{const _=new m4(["shape","payload","ctx"]),w=i.value,A=L=>{const N=dA(L);return`shape[${N}]._zod.run({ value: input[${N}], issues: [] }, ctx)`};_.write("const input = payload.value;");const E=Object.create(null);let M=0;for(const L of w.keys)E[L]=`key_${M++}`;_.write("const newResult = {};");for(const L of w.keys){const N=E[L],P=dA(L),B=x[L]?._zod?.optout==="optional";_.write(`const ${N} = ${A(L)};`),B?_.write(`
        if (${N}.issues.length) {
          if (${P} in input) {
            payload.issues = payload.issues.concat(${N}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${P}, ...iss.path] : [${P}]
            })));
          }
        }
        
        if (${N}.value === undefined) {
          if (${P} in input) {
            newResult[${P}] = undefined;
          }
        } else {
          newResult[${P}] = ${N}.value;
        }
        
      `):_.write(`
        if (${N}.issues.length) {
          payload.issues = payload.issues.concat(${N}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${P}, ...iss.path] : [${P}]
          })));
        }
        
        if (${N}.value === undefined) {
          if (${P} in input) {
            newResult[${P}] = undefined;
          }
        } else {
          newResult[${P}] = ${N}.value;
        }
        
      `)}_.write("payload.value = newResult;"),_.write("return payload;");const D=_.compile();return(L,N)=>D(x,L,N)};let a;const l=jx,u=!_N.jitless,p=u&&cz.value,g=e.catchall;let y;n._zod.parse=(x,_)=>{y??(y=i.value);const w=x.value;return l(w)?u&&p&&_?.async===!1&&_.jitless!==!0?(a||(a=s(e.shape)),x=a(x,_),g?zN([],w,x,_,y,n):x):t(x,_):(x.issues.push({expected:"object",code:"invalid_type",input:w,inst:n}),x)}});function gA(n,e,t,i){for(const a of n)if(a.issues.length===0)return e.value=a.value,e;const s=n.filter(a=>!Xd(a));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:t,errors:n.map(a=>a.issues.map(l=>sh(l,i,ih())))}),e)}const Z4=ze("$ZodUnion",(n,e)=>{is.init(n,e),Hn(n._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),Hn(n._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),Hn(n._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),Hn(n._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>Mw(a.source)).join("|")})$`)}});const t=e.options.length===1,i=e.options[0]._zod.run;n._zod.parse=(s,a)=>{if(t)return i(s,a);let l=!1;const u=[];for(const d of e.options){const p=d._zod.run({value:s.value,issues:[]},a);if(p instanceof Promise)u.push(p),l=!0;else{if(p.issues.length===0)return p;u.push(p)}}return l?Promise.all(u).then(d=>gA(d,s,n,a)):gA(u,s,n,a)}}),Y4=ze("$ZodIntersection",(n,e)=>{is.init(n,e),n._zod.parse=(t,i)=>{const s=t.value,a=e.left._zod.run({value:s,issues:[]},i),l=e.right._zod.run({value:s,issues:[]},i);return a instanceof Promise||l instanceof Promise?Promise.all([a,l]).then(([d,p])=>vA(t,d,p)):vA(t,a,l)}});function vM(n,e){if(n===e)return{valid:!0,data:n};if(n instanceof Date&&e instanceof Date&&+n==+e)return{valid:!0,data:n};if(Xg(n)&&Xg(e)){const t=Object.keys(e),i=Object.keys(n).filter(a=>t.indexOf(a)!==-1),s={...n,...e};for(const a of i){const l=vM(n[a],e[a]);if(!l.valid)return{valid:!1,mergeErrorPath:[a,...l.mergeErrorPath]};s[a]=l.data}return{valid:!0,data:s}}if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return{valid:!1,mergeErrorPath:[]};const t=[];for(let i=0;i<n.length;i++){const s=n[i],a=e[i],l=vM(s,a);if(!l.valid)return{valid:!1,mergeErrorPath:[i,...l.mergeErrorPath]};t.push(l.data)}return{valid:!0,data:t}}return{valid:!1,mergeErrorPath:[]}}function vA(n,e,t){const i=new Map;let s;for(const u of e.issues)if(u.code==="unrecognized_keys"){s??(s=u);for(const d of u.keys)i.has(d)||i.set(d,{}),i.get(d).l=!0}else n.issues.push(u);for(const u of t.issues)if(u.code==="unrecognized_keys")for(const d of u.keys)i.has(d)||i.set(d,{}),i.get(d).r=!0;else n.issues.push(u);const a=[...i].filter(([,u])=>u.l&&u.r).map(([u])=>u);if(a.length&&s&&n.issues.push({...s,keys:a}),Xd(n))return n;const l=vM(e.value,t.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return n.value=l.data,n}const $4=ze("$ZodEnum",(n,e)=>{is.init(n,e);const t=bN(e.entries),i=new Set(t);n._zod.values=i,n._zod.pattern=new RegExp(`^(${t.filter(s=>uz.has(typeof s)).map(s=>typeof s=="string"?rb(s):s.toString()).join("|")})$`),n._zod.parse=(s,a)=>{const l=s.value;return i.has(l)||s.issues.push({code:"invalid_value",values:t,input:l,inst:n}),s}}),K4=ze("$ZodTransform",(n,e)=>{is.init(n,e),n._zod.parse=(t,i)=>{if(i.direction==="backward")throw new xN(n.constructor.name);const s=e.transform(t.value,t);if(i.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(t.value=l,t));if(s instanceof Promise)throw new ep;return t.value=s,t}});function yA(n,e){return n.issues.length&&e===void 0?{issues:[],value:void 0}:n}const kN=ze("$ZodOptional",(n,e)=>{is.init(n,e),n._zod.optin="optional",n._zod.optout="optional",Hn(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),Hn(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${Mw(t.source)})?$`):void 0}),n._zod.parse=(t,i)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(t,i);return s instanceof Promise?s.then(a=>yA(a,t.value)):yA(s,t.value)}return t.value===void 0?t:e.innerType._zod.run(t,i)}}),J4=ze("$ZodExactOptional",(n,e)=>{kN.init(n,e),Hn(n._zod,"values",()=>e.innerType._zod.values),Hn(n._zod,"pattern",()=>e.innerType._zod.pattern),n._zod.parse=(t,i)=>e.innerType._zod.run(t,i)}),Q4=ze("$ZodNullable",(n,e)=>{is.init(n,e),Hn(n._zod,"optin",()=>e.innerType._zod.optin),Hn(n._zod,"optout",()=>e.innerType._zod.optout),Hn(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${Mw(t.source)}|null)$`):void 0}),Hn(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),n._zod.parse=(t,i)=>t.value===null?t:e.innerType._zod.run(t,i)}),ek=ze("$ZodDefault",(n,e)=>{is.init(n,e),n._zod.optin="optional",Hn(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,i)=>{if(i.direction==="backward")return e.innerType._zod.run(t,i);if(t.value===void 0)return t.value=e.defaultValue,t;const s=e.innerType._zod.run(t,i);return s instanceof Promise?s.then(a=>xA(a,e)):xA(s,e)}});function xA(n,e){return n.value===void 0&&(n.value=e.defaultValue),n}const tk=ze("$ZodPrefault",(n,e)=>{is.init(n,e),n._zod.optin="optional",Hn(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,i)=>(i.direction==="backward"||t.value===void 0&&(t.value=e.defaultValue),e.innerType._zod.run(t,i))}),nk=ze("$ZodNonOptional",(n,e)=>{is.init(n,e),Hn(n._zod,"values",()=>{const t=e.innerType._zod.values;return t?new Set([...t].filter(i=>i!==void 0)):void 0}),n._zod.parse=(t,i)=>{const s=e.innerType._zod.run(t,i);return s instanceof Promise?s.then(a=>_A(a,n)):_A(s,n)}});function _A(n,e){return!n.issues.length&&n.value===void 0&&n.issues.push({code:"invalid_type",expected:"nonoptional",input:n.value,inst:e}),n}const ik=ze("$ZodCatch",(n,e)=>{is.init(n,e),Hn(n._zod,"optin",()=>e.innerType._zod.optin),Hn(n._zod,"optout",()=>e.innerType._zod.optout),Hn(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,i)=>{if(i.direction==="backward")return e.innerType._zod.run(t,i);const s=e.innerType._zod.run(t,i);return s instanceof Promise?s.then(a=>(t.value=a.value,a.issues.length&&(t.value=e.catchValue({...t,error:{issues:a.issues.map(l=>sh(l,i,ih()))},input:t.value}),t.issues=[]),t)):(t.value=s.value,s.issues.length&&(t.value=e.catchValue({...t,error:{issues:s.issues.map(a=>sh(a,i,ih()))},input:t.value}),t.issues=[]),t)}}),sk=ze("$ZodPipe",(n,e)=>{is.init(n,e),Hn(n._zod,"values",()=>e.in._zod.values),Hn(n._zod,"optin",()=>e.in._zod.optin),Hn(n._zod,"optout",()=>e.out._zod.optout),Hn(n._zod,"propValues",()=>e.in._zod.propValues),n._zod.parse=(t,i)=>{if(i.direction==="backward"){const a=e.out._zod.run(t,i);return a instanceof Promise?a.then(l=>wy(l,e.in,i)):wy(a,e.in,i)}const s=e.in._zod.run(t,i);return s instanceof Promise?s.then(a=>wy(a,e.out,i)):wy(s,e.out,i)}});function wy(n,e,t){return n.issues.length?(n.aborted=!0,n):e._zod.run({value:n.value,issues:n.issues},t)}const rk=ze("$ZodReadonly",(n,e)=>{is.init(n,e),Hn(n._zod,"propValues",()=>e.innerType._zod.propValues),Hn(n._zod,"values",()=>e.innerType._zod.values),Hn(n._zod,"optin",()=>e.innerType?._zod?.optin),Hn(n._zod,"optout",()=>e.innerType?._zod?.optout),n._zod.parse=(t,i)=>{if(i.direction==="backward")return e.innerType._zod.run(t,i);const s=e.innerType._zod.run(t,i);return s instanceof Promise?s.then(bA):bA(s)}});function bA(n){return n.value=Object.freeze(n.value),n}const ak=ze("$ZodCustom",(n,e)=>{ea.init(n,e),is.init(n,e),n._zod.parse=(t,i)=>t,n._zod.check=t=>{const i=t.value,s=e.fn(i);if(s instanceof Promise)return s.then(a=>SA(a,t,i,n));SA(s,t,i,n)}});function SA(n,e,t,i){if(!n){const s={code:"custom",input:t,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(s.params=i._zod.def.params),e.issues.push(qg(s))}}var MA;class ok{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){const i=t[0];return this._map.set(e,i),i&&typeof i=="object"&&"id"in i&&this._idmap.set(i.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&typeof t=="object"&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const i={...this.get(t)??{}};delete i.id;const s={...i,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function lk(){return new ok}(MA=globalThis).__zod_globalRegistry??(MA.__zod_globalRegistry=lk());const Mg=globalThis.__zod_globalRegistry;function ck(n,e){return new n({type:"string",...zt(e)})}function uk(n,e){return new n({type:"string",format:"email",check:"string_format",abort:!1,...zt(e)})}function wA(n,e){return new n({type:"string",format:"guid",check:"string_format",abort:!1,...zt(e)})}function fk(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,...zt(e)})}function hk(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...zt(e)})}function dk(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...zt(e)})}function pk(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...zt(e)})}function mk(n,e){return new n({type:"string",format:"url",check:"string_format",abort:!1,...zt(e)})}function gk(n,e){return new n({type:"string",format:"emoji",check:"string_format",abort:!1,...zt(e)})}function vk(n,e){return new n({type:"string",format:"nanoid",check:"string_format",abort:!1,...zt(e)})}function yk(n,e){return new n({type:"string",format:"cuid",check:"string_format",abort:!1,...zt(e)})}function xk(n,e){return new n({type:"string",format:"cuid2",check:"string_format",abort:!1,...zt(e)})}function _k(n,e){return new n({type:"string",format:"ulid",check:"string_format",abort:!1,...zt(e)})}function bk(n,e){return new n({type:"string",format:"xid",check:"string_format",abort:!1,...zt(e)})}function Sk(n,e){return new n({type:"string",format:"ksuid",check:"string_format",abort:!1,...zt(e)})}function Mk(n,e){return new n({type:"string",format:"ipv4",check:"string_format",abort:!1,...zt(e)})}function wk(n,e){return new n({type:"string",format:"ipv6",check:"string_format",abort:!1,...zt(e)})}function Tk(n,e){return new n({type:"string",format:"cidrv4",check:"string_format",abort:!1,...zt(e)})}function Ek(n,e){return new n({type:"string",format:"cidrv6",check:"string_format",abort:!1,...zt(e)})}function Ak(n,e){return new n({type:"string",format:"base64",check:"string_format",abort:!1,...zt(e)})}function Ck(n,e){return new n({type:"string",format:"base64url",check:"string_format",abort:!1,...zt(e)})}function Rk(n,e){return new n({type:"string",format:"e164",check:"string_format",abort:!1,...zt(e)})}function Nk(n,e){return new n({type:"string",format:"jwt",check:"string_format",abort:!1,...zt(e)})}function Dk(n,e){return new n({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...zt(e)})}function Ik(n,e){return new n({type:"string",format:"date",check:"string_format",...zt(e)})}function Lk(n,e){return new n({type:"string",format:"time",check:"string_format",precision:null,...zt(e)})}function Pk(n,e){return new n({type:"string",format:"duration",check:"string_format",...zt(e)})}function Uk(n,e){return new n({type:"number",checks:[],...zt(e)})}function Ok(n,e){return new n({type:"number",check:"number_format",abort:!1,format:"safeint",...zt(e)})}function zk(n){return new n({type:"unknown"})}function kk(n,e){return new n({type:"never",...zt(e)})}function TA(n,e){return new IN({check:"less_than",...zt(e),value:n,inclusive:!1})}function VS(n,e){return new IN({check:"less_than",...zt(e),value:n,inclusive:!0})}function EA(n,e){return new LN({check:"greater_than",...zt(e),value:n,inclusive:!1})}function HS(n,e){return new LN({check:"greater_than",...zt(e),value:n,inclusive:!0})}function AA(n,e){return new i4({check:"multiple_of",...zt(e),value:n})}function FN(n,e){return new r4({check:"max_length",...zt(e),maximum:n})}function Wx(n,e){return new a4({check:"min_length",...zt(e),minimum:n})}function BN(n,e){return new o4({check:"length_equals",...zt(e),length:n})}function Fk(n,e){return new l4({check:"string_format",format:"regex",...zt(e),pattern:n})}function Bk(n){return new c4({check:"string_format",format:"lowercase",...zt(n)})}function Vk(n){return new u4({check:"string_format",format:"uppercase",...zt(n)})}function Hk(n,e){return new f4({check:"string_format",format:"includes",...zt(e),includes:n})}function jk(n,e){return new h4({check:"string_format",format:"starts_with",...zt(e),prefix:n})}function Gk(n,e){return new d4({check:"string_format",format:"ends_with",...zt(e),suffix:n})}function _p(n){return new p4({check:"overwrite",tx:n})}function Wk(n){return _p(e=>e.normalize(n))}function Xk(){return _p(n=>n.trim())}function qk(){return _p(n=>n.toLowerCase())}function Zk(){return _p(n=>n.toUpperCase())}function Yk(){return _p(n=>lz(n))}function $k(n,e,t){return new n({type:"array",element:e,...zt(t)})}function Kk(n,e,t){return new n({type:"custom",check:"custom",fn:e,...zt(t)})}function Jk(n){const e=Qk(t=>(t.addIssue=i=>{if(typeof i=="string")t.issues.push(qg(i,t.value,e._zod.def));else{const s=i;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=t.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),t.issues.push(qg(s))}},n(t.value,t)));return e}function Qk(n,e){const t=new ea({check:"custom",...zt(e)});return t._zod.check=n,t}function VN(n){let e=n?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:n.processors??{},metadataRegistry:n?.metadata??Mg,target:e,unrepresentable:n?.unrepresentable??"throw",override:n?.override??(()=>{}),io:n?.io??"output",counter:0,seen:new Map,cycles:n?.cycles??"ref",reused:n?.reused??"inline",external:n?.external??void 0}}function Ps(n,e,t={path:[],schemaPath:[]}){var i;const s=n._zod.def,a=e.seen.get(n);if(a)return a.count++,t.schemaPath.includes(n)&&(a.cycle=t.path),a.schema;const l={schema:{},count:1,cycle:void 0,path:t.path};e.seen.set(n,l);const u=n._zod.toJSONSchema?.();if(u)l.schema=u;else{const g={...t,schemaPath:[...t.schemaPath,n],path:t.path};if(n._zod.processJSONSchema)n._zod.processJSONSchema(e,l.schema,g);else{const x=l.schema,_=e.processors[s.type];if(!_)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);_(n,e,x,g)}const y=n._zod.parent;y&&(l.ref||(l.ref=y),Ps(y,e,g),e.seen.get(y).isParent=!0)}const d=e.metadataRegistry.get(n);return d&&Object.assign(l.schema,d),e.io==="input"&&vr(n)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((i=l.schema).default??(i.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(n).schema}function HN(n,e){const t=n.seen.get(e);if(!t)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=new Map;for(const l of n.seen.entries()){const u=n.metadataRegistry.get(l[0])?.id;if(u){const d=i.get(u);if(d&&d!==l[0])throw new Error(`Duplicate schema id "${u}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);i.set(u,l[0])}}const s=l=>{const u=n.target==="draft-2020-12"?"$defs":"definitions";if(n.external){const y=n.external.registry.get(l[0])?.id,x=n.external.uri??(w=>w);if(y)return{ref:x(y)};const _=l[1].defId??l[1].schema.id??`schema${n.counter++}`;return l[1].defId=_,{defId:_,ref:`${x("__shared")}#/${u}/${_}`}}if(l[1]===t)return{ref:"#"};const p=`#/${u}/`,g=l[1].schema.id??`__schema${n.counter++}`;return{defId:g,ref:p+g}},a=l=>{if(l[1].schema.$ref)return;const u=l[1],{ref:d,defId:p}=s(l);u.def={...u.schema},p&&(u.defId=p);const g=u.schema;for(const y in g)delete g[y];g.$ref=d};if(n.cycles==="throw")for(const l of n.seen.entries()){const u=l[1];if(u.cycle)throw new Error(`Cycle detected: #/${u.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of n.seen.entries()){const u=l[1];if(e===l[0]){a(l);continue}if(n.external){const p=n.external.registry.get(l[0])?.id;if(e!==l[0]&&p){a(l);continue}}if(n.metadataRegistry.get(l[0])?.id){a(l);continue}if(u.cycle){a(l);continue}if(u.count>1&&n.reused==="ref"){a(l);continue}}}function jN(n,e){const t=n.seen.get(e);if(!t)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=l=>{const u=n.seen.get(l);if(u.ref===null)return;const d=u.def??u.schema,p={...d},g=u.ref;if(u.ref=null,g){i(g);const x=n.seen.get(g),_=x.schema;if(_.$ref&&(n.target==="draft-07"||n.target==="draft-04"||n.target==="openapi-3.0")?(d.allOf=d.allOf??[],d.allOf.push(_)):Object.assign(d,_),Object.assign(d,p),l._zod.parent===g)for(const A in d)A==="$ref"||A==="allOf"||A in p||delete d[A];if(_.$ref)for(const A in d)A==="$ref"||A==="allOf"||A in x.def&&JSON.stringify(d[A])===JSON.stringify(x.def[A])&&delete d[A]}const y=l._zod.parent;if(y&&y!==g){i(y);const x=n.seen.get(y);if(x?.schema.$ref&&(d.$ref=x.schema.$ref,x.def))for(const _ in d)_==="$ref"||_==="allOf"||_ in x.def&&JSON.stringify(d[_])===JSON.stringify(x.def[_])&&delete d[_]}n.override({zodSchema:l,jsonSchema:d,path:u.path??[]})};for(const l of[...n.seen.entries()].reverse())i(l[0]);const s={};if(n.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":n.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":n.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":n.target,n.external?.uri){const l=n.external.registry.get(e)?.id;if(!l)throw new Error("Schema is missing an `id` property");s.$id=n.external.uri(l)}Object.assign(s,t.def??t.schema);const a=n.external?.defs??{};for(const l of n.seen.entries()){const u=l[1];u.def&&u.defId&&(a[u.defId]=u.def)}n.external||Object.keys(a).length>0&&(n.target==="draft-2020-12"?s.$defs=a:s.definitions=a);try{const l=JSON.parse(JSON.stringify(s));return Object.defineProperty(l,"~standard",{value:{...e["~standard"],jsonSchema:{input:Xx(e,"input",n.processors),output:Xx(e,"output",n.processors)}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function vr(n,e){const t=e??{seen:new Set};if(t.seen.has(n))return!1;t.seen.add(n);const i=n._zod.def;if(i.type==="transform")return!0;if(i.type==="array")return vr(i.element,t);if(i.type==="set")return vr(i.valueType,t);if(i.type==="lazy")return vr(i.getter(),t);if(i.type==="promise"||i.type==="optional"||i.type==="nonoptional"||i.type==="nullable"||i.type==="readonly"||i.type==="default"||i.type==="prefault")return vr(i.innerType,t);if(i.type==="intersection")return vr(i.left,t)||vr(i.right,t);if(i.type==="record"||i.type==="map")return vr(i.keyType,t)||vr(i.valueType,t);if(i.type==="pipe")return vr(i.in,t)||vr(i.out,t);if(i.type==="object"){for(const s in i.shape)if(vr(i.shape[s],t))return!0;return!1}if(i.type==="union"){for(const s of i.options)if(vr(s,t))return!0;return!1}if(i.type==="tuple"){for(const s of i.items)if(vr(s,t))return!0;return!!(i.rest&&vr(i.rest,t))}return!1}const e5=(n,e={})=>t=>{const i=VN({...t,processors:e});return Ps(n,i),HN(i,n),jN(i,n)},Xx=(n,e,t={})=>i=>{const{libraryOptions:s,target:a}=i??{},l=VN({...s??{},target:a,io:e,processors:t});return Ps(n,l),HN(l,n),jN(l,n)},t5={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},n5=(n,e,t,i)=>{const s=t;s.type="string";const{minimum:a,maximum:l,format:u,patterns:d,contentEncoding:p}=n._zod.bag;if(typeof a=="number"&&(s.minLength=a),typeof l=="number"&&(s.maxLength=l),u&&(s.format=t5[u]??u,s.format===""&&delete s.format,u==="time"&&delete s.format),p&&(s.contentEncoding=p),d&&d.size>0){const g=[...d];g.length===1?s.pattern=g[0].source:g.length>1&&(s.allOf=[...g.map(y=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:y.source}))])}},i5=(n,e,t,i)=>{const s=t,{minimum:a,maximum:l,format:u,multipleOf:d,exclusiveMaximum:p,exclusiveMinimum:g}=n._zod.bag;typeof u=="string"&&u.includes("int")?s.type="integer":s.type="number",typeof g=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.minimum=g,s.exclusiveMinimum=!0):s.exclusiveMinimum=g),typeof a=="number"&&(s.minimum=a,typeof g=="number"&&e.target!=="draft-04"&&(g>=a?delete s.minimum:delete s.exclusiveMinimum)),typeof p=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.maximum=p,s.exclusiveMaximum=!0):s.exclusiveMaximum=p),typeof l=="number"&&(s.maximum=l,typeof p=="number"&&e.target!=="draft-04"&&(p<=l?delete s.maximum:delete s.exclusiveMaximum)),typeof d=="number"&&(s.multipleOf=d)},s5=(n,e,t,i)=>{t.not={}},r5=(n,e,t,i)=>{},a5=(n,e,t,i)=>{const s=n._zod.def,a=bN(s.entries);a.every(l=>typeof l=="number")&&(t.type="number"),a.every(l=>typeof l=="string")&&(t.type="string"),t.enum=a},o5=(n,e,t,i)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},l5=(n,e,t,i)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},c5=(n,e,t,i)=>{const s=t,a=n._zod.def,{minimum:l,maximum:u}=n._zod.bag;typeof l=="number"&&(s.minItems=l),typeof u=="number"&&(s.maxItems=u),s.type="array",s.items=Ps(a.element,e,{...i,path:[...i.path,"items"]})},u5=(n,e,t,i)=>{const s=t,a=n._zod.def;s.type="object",s.properties={};const l=a.shape;for(const p in l)s.properties[p]=Ps(l[p],e,{...i,path:[...i.path,"properties",p]});const u=new Set(Object.keys(l)),d=new Set([...u].filter(p=>{const g=a.shape[p]._zod;return e.io==="input"?g.optin===void 0:g.optout===void 0}));d.size>0&&(s.required=Array.from(d)),a.catchall?._zod.def.type==="never"?s.additionalProperties=!1:a.catchall?a.catchall&&(s.additionalProperties=Ps(a.catchall,e,{...i,path:[...i.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},f5=(n,e,t,i)=>{const s=n._zod.def,a=s.inclusive===!1,l=s.options.map((u,d)=>Ps(u,e,{...i,path:[...i.path,a?"oneOf":"anyOf",d]}));a?t.oneOf=l:t.anyOf=l},h5=(n,e,t,i)=>{const s=n._zod.def,a=Ps(s.left,e,{...i,path:[...i.path,"allOf",0]}),l=Ps(s.right,e,{...i,path:[...i.path,"allOf",1]}),u=p=>"allOf"in p&&Object.keys(p).length===1,d=[...u(a)?a.allOf:[a],...u(l)?l.allOf:[l]];t.allOf=d},d5=(n,e,t,i)=>{const s=n._zod.def,a=Ps(s.innerType,e,i),l=e.seen.get(n);e.target==="openapi-3.0"?(l.ref=s.innerType,t.nullable=!0):t.anyOf=[a,{type:"null"}]},p5=(n,e,t,i)=>{const s=n._zod.def;Ps(s.innerType,e,i);const a=e.seen.get(n);a.ref=s.innerType},m5=(n,e,t,i)=>{const s=n._zod.def;Ps(s.innerType,e,i);const a=e.seen.get(n);a.ref=s.innerType,t.default=JSON.parse(JSON.stringify(s.defaultValue))},g5=(n,e,t,i)=>{const s=n._zod.def;Ps(s.innerType,e,i);const a=e.seen.get(n);a.ref=s.innerType,e.io==="input"&&(t._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},v5=(n,e,t,i)=>{const s=n._zod.def;Ps(s.innerType,e,i);const a=e.seen.get(n);a.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}t.default=l},y5=(n,e,t,i)=>{const s=n._zod.def,a=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;Ps(a,e,i);const l=e.seen.get(n);l.ref=a},x5=(n,e,t,i)=>{const s=n._zod.def;Ps(s.innerType,e,i);const a=e.seen.get(n);a.ref=s.innerType,t.readOnly=!0},GN=(n,e,t,i)=>{const s=n._zod.def;Ps(s.innerType,e,i);const a=e.seen.get(n);a.ref=s.innerType},_5=ze("ZodISODateTime",(n,e)=>{C4.init(n,e),Ai.init(n,e)});function b5(n){return Dk(_5,n)}const S5=ze("ZodISODate",(n,e)=>{R4.init(n,e),Ai.init(n,e)});function M5(n){return Ik(S5,n)}const w5=ze("ZodISOTime",(n,e)=>{N4.init(n,e),Ai.init(n,e)});function T5(n){return Lk(w5,n)}const E5=ze("ZodISODuration",(n,e)=>{D4.init(n,e),Ai.init(n,e)});function A5(n){return Pk(E5,n)}const C5=(n,e)=>{EN.init(n,e),n.name="ZodError",Object.defineProperties(n,{format:{value:t=>bz(n,t)},flatten:{value:t=>_z(n,t)},addIssue:{value:t=>{n.issues.push(t),n.message=JSON.stringify(n.issues,gM,2)}},addIssues:{value:t=>{n.issues.push(...t),n.message=JSON.stringify(n.issues,gM,2)}},isEmpty:{get(){return n.issues.length===0}}})},Za=ze("ZodError",C5,{Parent:Error}),R5=Tw(Za),N5=Ew(Za),D5=ab(Za),I5=ob(Za),L5=wz(Za),P5=Tz(Za),U5=Ez(Za),O5=Az(Za),z5=Cz(Za),k5=Rz(Za),F5=Nz(Za),B5=Dz(Za),ss=ze("ZodType",(n,e)=>(is.init(n,e),Object.assign(n["~standard"],{jsonSchema:{input:Xx(n,"input"),output:Xx(n,"output")}}),n.toJSONSchema=e5(n,{}),n.def=e,n.type=e.type,Object.defineProperty(n,"_def",{value:e}),n.check=(...t)=>n.clone(Iu(e,{checks:[...e.checks??[],...t.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]}),{parent:!0}),n.with=n.check,n.clone=(t,i)=>Lu(n,t,i),n.brand=()=>n,n.register=((t,i)=>(t.add(n,i),n)),n.parse=(t,i)=>R5(n,t,i,{callee:n.parse}),n.safeParse=(t,i)=>D5(n,t,i),n.parseAsync=async(t,i)=>N5(n,t,i,{callee:n.parseAsync}),n.safeParseAsync=async(t,i)=>I5(n,t,i),n.spa=n.safeParseAsync,n.encode=(t,i)=>L5(n,t,i),n.decode=(t,i)=>P5(n,t,i),n.encodeAsync=async(t,i)=>U5(n,t,i),n.decodeAsync=async(t,i)=>O5(n,t,i),n.safeEncode=(t,i)=>z5(n,t,i),n.safeDecode=(t,i)=>k5(n,t,i),n.safeEncodeAsync=async(t,i)=>F5(n,t,i),n.safeDecodeAsync=async(t,i)=>B5(n,t,i),n.refine=(t,i)=>n.check(LF(t,i)),n.superRefine=t=>n.check(PF(t)),n.overwrite=t=>n.check(_p(t)),n.optional=()=>DA(n),n.exactOptional=()=>_F(n),n.nullable=()=>IA(n),n.nullish=()=>DA(IA(n)),n.nonoptional=t=>EF(n,t),n.array=()=>uF(n),n.or=t=>dF([n,t]),n.and=t=>mF(n,t),n.transform=t=>LA(n,yF(t)),n.default=t=>MF(n,t),n.prefault=t=>TF(n,t),n.catch=t=>CF(n,t),n.pipe=t=>LA(n,t),n.readonly=()=>DF(n),n.describe=t=>{const i=n.clone();return Mg.add(i,{description:t}),i},Object.defineProperty(n,"description",{get(){return Mg.get(n)?.description},configurable:!0}),n.meta=(...t)=>{if(t.length===0)return Mg.get(n);const i=n.clone();return Mg.add(i,t[0]),i},n.isOptional=()=>n.safeParse(void 0).success,n.isNullable=()=>n.safeParse(null).success,n.apply=t=>t(n),n)),WN=ze("_ZodString",(n,e)=>{Aw.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(i,s,a)=>n5(n,i,s);const t=n._zod.bag;n.format=t.format??null,n.minLength=t.minimum??null,n.maxLength=t.maximum??null,n.regex=(...i)=>n.check(Fk(...i)),n.includes=(...i)=>n.check(Hk(...i)),n.startsWith=(...i)=>n.check(jk(...i)),n.endsWith=(...i)=>n.check(Gk(...i)),n.min=(...i)=>n.check(Wx(...i)),n.max=(...i)=>n.check(FN(...i)),n.length=(...i)=>n.check(BN(...i)),n.nonempty=(...i)=>n.check(Wx(1,...i)),n.lowercase=i=>n.check(Bk(i)),n.uppercase=i=>n.check(Vk(i)),n.trim=()=>n.check(Xk()),n.normalize=(...i)=>n.check(Wk(...i)),n.toLowerCase=()=>n.check(qk()),n.toUpperCase=()=>n.check(Zk()),n.slugify=()=>n.check(Yk())}),V5=ze("ZodString",(n,e)=>{Aw.init(n,e),WN.init(n,e),n.email=t=>n.check(uk(H5,t)),n.url=t=>n.check(mk(j5,t)),n.jwt=t=>n.check(Nk(sF,t)),n.emoji=t=>n.check(gk(G5,t)),n.guid=t=>n.check(wA(CA,t)),n.uuid=t=>n.check(fk(Ty,t)),n.uuidv4=t=>n.check(hk(Ty,t)),n.uuidv6=t=>n.check(dk(Ty,t)),n.uuidv7=t=>n.check(pk(Ty,t)),n.nanoid=t=>n.check(vk(W5,t)),n.guid=t=>n.check(wA(CA,t)),n.cuid=t=>n.check(yk(X5,t)),n.cuid2=t=>n.check(xk(q5,t)),n.ulid=t=>n.check(_k(Z5,t)),n.base64=t=>n.check(Ak(tF,t)),n.base64url=t=>n.check(Ck(nF,t)),n.xid=t=>n.check(bk(Y5,t)),n.ksuid=t=>n.check(Sk($5,t)),n.ipv4=t=>n.check(Mk(K5,t)),n.ipv6=t=>n.check(wk(J5,t)),n.cidrv4=t=>n.check(Tk(Q5,t)),n.cidrv6=t=>n.check(Ek(eF,t)),n.e164=t=>n.check(Rk(iF,t)),n.datetime=t=>n.check(b5(t)),n.date=t=>n.check(M5(t)),n.time=t=>n.check(T5(t)),n.duration=t=>n.check(A5(t))});function ig(n){return ck(V5,n)}const Ai=ze("ZodStringFormat",(n,e)=>{vi.init(n,e),WN.init(n,e)}),H5=ze("ZodEmail",(n,e)=>{x4.init(n,e),Ai.init(n,e)}),CA=ze("ZodGUID",(n,e)=>{v4.init(n,e),Ai.init(n,e)}),Ty=ze("ZodUUID",(n,e)=>{y4.init(n,e),Ai.init(n,e)}),j5=ze("ZodURL",(n,e)=>{_4.init(n,e),Ai.init(n,e)}),G5=ze("ZodEmoji",(n,e)=>{b4.init(n,e),Ai.init(n,e)}),W5=ze("ZodNanoID",(n,e)=>{S4.init(n,e),Ai.init(n,e)}),X5=ze("ZodCUID",(n,e)=>{M4.init(n,e),Ai.init(n,e)}),q5=ze("ZodCUID2",(n,e)=>{w4.init(n,e),Ai.init(n,e)}),Z5=ze("ZodULID",(n,e)=>{T4.init(n,e),Ai.init(n,e)}),Y5=ze("ZodXID",(n,e)=>{E4.init(n,e),Ai.init(n,e)}),$5=ze("ZodKSUID",(n,e)=>{A4.init(n,e),Ai.init(n,e)}),K5=ze("ZodIPv4",(n,e)=>{I4.init(n,e),Ai.init(n,e)}),J5=ze("ZodIPv6",(n,e)=>{L4.init(n,e),Ai.init(n,e)}),Q5=ze("ZodCIDRv4",(n,e)=>{P4.init(n,e),Ai.init(n,e)}),eF=ze("ZodCIDRv6",(n,e)=>{U4.init(n,e),Ai.init(n,e)}),tF=ze("ZodBase64",(n,e)=>{O4.init(n,e),Ai.init(n,e)}),nF=ze("ZodBase64URL",(n,e)=>{k4.init(n,e),Ai.init(n,e)}),iF=ze("ZodE164",(n,e)=>{F4.init(n,e),Ai.init(n,e)}),sF=ze("ZodJWT",(n,e)=>{V4.init(n,e),Ai.init(n,e)}),XN=ze("ZodNumber",(n,e)=>{UN.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(i,s,a)=>i5(n,i,s),n.gt=(i,s)=>n.check(EA(i,s)),n.gte=(i,s)=>n.check(HS(i,s)),n.min=(i,s)=>n.check(HS(i,s)),n.lt=(i,s)=>n.check(TA(i,s)),n.lte=(i,s)=>n.check(VS(i,s)),n.max=(i,s)=>n.check(VS(i,s)),n.int=i=>n.check(RA(i)),n.safe=i=>n.check(RA(i)),n.positive=i=>n.check(EA(0,i)),n.nonnegative=i=>n.check(HS(0,i)),n.negative=i=>n.check(TA(0,i)),n.nonpositive=i=>n.check(VS(0,i)),n.multipleOf=(i,s)=>n.check(AA(i,s)),n.step=(i,s)=>n.check(AA(i,s)),n.finite=()=>n;const t=n._zod.bag;n.minValue=Math.max(t.minimum??Number.NEGATIVE_INFINITY,t.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,n.maxValue=Math.min(t.maximum??Number.POSITIVE_INFINITY,t.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,n.isInt=(t.format??"").includes("int")||Number.isSafeInteger(t.multipleOf??.5),n.isFinite=!0,n.format=t.format??null});function Ey(n){return Uk(XN,n)}const rF=ze("ZodNumberFormat",(n,e)=>{H4.init(n,e),XN.init(n,e)});function RA(n){return Ok(rF,n)}const aF=ze("ZodUnknown",(n,e)=>{j4.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(t,i,s)=>r5()});function NA(){return zk(aF)}const oF=ze("ZodNever",(n,e)=>{G4.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(t,i,s)=>s5(n,t,i)});function lF(n){return kk(oF,n)}const cF=ze("ZodArray",(n,e)=>{W4.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(t,i,s)=>c5(n,t,i,s),n.element=e.element,n.min=(t,i)=>n.check(Wx(t,i)),n.nonempty=t=>n.check(Wx(1,t)),n.max=(t,i)=>n.check(FN(t,i)),n.length=(t,i)=>n.check(BN(t,i)),n.unwrap=()=>n.element});function uF(n,e){return $k(cF,n,e)}const fF=ze("ZodObject",(n,e)=>{q4.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(t,i,s)=>u5(n,t,i,s),Hn(n,"shape",()=>e.shape),n.keyof=()=>gF(Object.keys(n._zod.def.shape)),n.catchall=t=>n.clone({...n._zod.def,catchall:t}),n.passthrough=()=>n.clone({...n._zod.def,catchall:NA()}),n.loose=()=>n.clone({...n._zod.def,catchall:NA()}),n.strict=()=>n.clone({...n._zod.def,catchall:lF()}),n.strip=()=>n.clone({...n._zod.def,catchall:void 0}),n.extend=t=>mz(n,t),n.safeExtend=t=>gz(n,t),n.merge=t=>vz(n,t),n.pick=t=>dz(n,t),n.omit=t=>pz(n,t),n.partial=(...t)=>yz(qN,n,t[0]),n.required=(...t)=>xz(ZN,n,t[0])});function Ay(n,e){const t={type:"object",shape:n??{},...zt(e)};return new fF(t)}const hF=ze("ZodUnion",(n,e)=>{Z4.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(t,i,s)=>f5(n,t,i,s),n.options=e.options});function dF(n,e){return new hF({type:"union",options:n,...zt(e)})}const pF=ze("ZodIntersection",(n,e)=>{Y4.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(t,i,s)=>h5(n,t,i,s)});function mF(n,e){return new pF({type:"intersection",left:n,right:e})}const yM=ze("ZodEnum",(n,e)=>{$4.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(i,s,a)=>a5(n,i,s),n.enum=e.entries,n.options=Object.values(e.entries);const t=new Set(Object.keys(e.entries));n.extract=(i,s)=>{const a={};for(const l of i)if(t.has(l))a[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new yM({...e,checks:[],...zt(s),entries:a})},n.exclude=(i,s)=>{const a={...e.entries};for(const l of i)if(t.has(l))delete a[l];else throw new Error(`Key ${l} not found in enum`);return new yM({...e,checks:[],...zt(s),entries:a})}});function gF(n,e){const t=Array.isArray(n)?Object.fromEntries(n.map(i=>[i,i])):n;return new yM({type:"enum",entries:t,...zt(e)})}const vF=ze("ZodTransform",(n,e)=>{K4.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(t,i,s)=>l5(n,t),n._zod.parse=(t,i)=>{if(i.direction==="backward")throw new xN(n.constructor.name);t.addIssue=a=>{if(typeof a=="string")t.issues.push(qg(a,t.value,e));else{const l=a;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=t.value),l.inst??(l.inst=n),t.issues.push(qg(l))}};const s=e.transform(t.value,t);return s instanceof Promise?s.then(a=>(t.value=a,t)):(t.value=s,t)}});function yF(n){return new vF({type:"transform",transform:n})}const qN=ze("ZodOptional",(n,e)=>{kN.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(t,i,s)=>GN(n,t,i,s),n.unwrap=()=>n._zod.def.innerType});function DA(n){return new qN({type:"optional",innerType:n})}const xF=ze("ZodExactOptional",(n,e)=>{J4.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(t,i,s)=>GN(n,t,i,s),n.unwrap=()=>n._zod.def.innerType});function _F(n){return new xF({type:"optional",innerType:n})}const bF=ze("ZodNullable",(n,e)=>{Q4.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(t,i,s)=>d5(n,t,i,s),n.unwrap=()=>n._zod.def.innerType});function IA(n){return new bF({type:"nullable",innerType:n})}const SF=ze("ZodDefault",(n,e)=>{ek.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(t,i,s)=>m5(n,t,i,s),n.unwrap=()=>n._zod.def.innerType,n.removeDefault=n.unwrap});function MF(n,e){return new SF({type:"default",innerType:n,get defaultValue(){return typeof e=="function"?e():MN(e)}})}const wF=ze("ZodPrefault",(n,e)=>{tk.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(t,i,s)=>g5(n,t,i,s),n.unwrap=()=>n._zod.def.innerType});function TF(n,e){return new wF({type:"prefault",innerType:n,get defaultValue(){return typeof e=="function"?e():MN(e)}})}const ZN=ze("ZodNonOptional",(n,e)=>{nk.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(t,i,s)=>p5(n,t,i,s),n.unwrap=()=>n._zod.def.innerType});function EF(n,e){return new ZN({type:"nonoptional",innerType:n,...zt(e)})}const AF=ze("ZodCatch",(n,e)=>{ik.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(t,i,s)=>v5(n,t,i,s),n.unwrap=()=>n._zod.def.innerType,n.removeCatch=n.unwrap});function CF(n,e){return new AF({type:"catch",innerType:n,catchValue:typeof e=="function"?e:()=>e})}const RF=ze("ZodPipe",(n,e)=>{sk.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(t,i,s)=>y5(n,t,i,s),n.in=e.in,n.out=e.out});function LA(n,e){return new RF({type:"pipe",in:n,out:e})}const NF=ze("ZodReadonly",(n,e)=>{rk.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(t,i,s)=>x5(n,t,i,s),n.unwrap=()=>n._zod.def.innerType});function DF(n){return new NF({type:"readonly",innerType:n})}const IF=ze("ZodCustom",(n,e)=>{ak.init(n,e),ss.init(n,e),n._zod.processJSONSchema=(t,i,s)=>o5(n,t)});function LF(n,e={}){return Kk(IF,n,e)}function PF(n){return Jk(n)}Ay({timestamp:ig(),entropy:Ey().min(0).max(100),orchestrator:ig(),bio:Ay({stress:Ey().min(0).max(1),action:ig()}),market:Ay({stress:Ey().min(0).max(1),action:ig()}),energy:Ay({stress:Ey().min(0).max(1),action:ig()})});const UF=az(n=>({isConnected:!1,lastPing:0,latency:0,metrics:{entropy:0,bioStress:0,marketStress:0,energyStress:0,orchestratorMsg:"INITIALIZING..."},ledger:[],updateMetrics:e=>n(t=>({lastPing:Date.now(),latency:Math.random()*10+5,metrics:{entropy:e.entropy,bioStress:e.bio.stress,marketStress:e.market.stress,energyStress:e.energy.stress,orchestratorMsg:e.orchestrator}})),setConnected:e=>n({isConnected:e}),addLedgerEntry:e=>n(t=>({ledger:[e,...t.ledger].slice(0,50)}))})),sg="http://localhost:8890/api",OF=()=>({fetchStatus:async()=>await(await fetch(`${sg}/status`)).json(),runRefactor:async()=>await(await fetch(`${sg}/scribe/refactor`,{method:"POST"})).json(),askOracle:async a=>await(await fetch(`${sg}/ask`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a})})).json(),generateAssets:async()=>await(await fetch(`${sg}/scribe/generate`,{method:"POST"})).json(),createCheckoutSession:async a=>await(await fetch(`${sg}/market/checkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:a})})).json()}),Cw=pe.createContext({});function Rw(n){const e=pe.useRef(null);return e.current===null&&(e.current=n()),e.current}const YN=typeof window<"u",$N=YN?pe.useLayoutEffect:pe.useEffect,cb=pe.createContext(null);function Nw(n,e){n.indexOf(e)===-1&&n.push(e)}function Dw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const yl=(n,e,t)=>t>e?e:t<n?n:t;let Iw=()=>{};const gc={},KN=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function JN(n){return typeof n=="object"&&n!==null}const QN=n=>/^0[^.\s]+$/u.test(n);function Lw(n){let e;return()=>(e===void 0&&(e=n()),e)}const Ga=n=>n,zF=(n,e)=>t=>e(n(t)),w0=(...n)=>n.reduce(zF),Zg=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class Pw{constructor(){this.subscriptions=[]}add(e){return Nw(this.subscriptions,e),()=>Dw(this.subscriptions,e)}notify(e,t,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,i);else for(let a=0;a<s;a++){const l=this.subscriptions[a];l&&l(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pc=n=>n*1e3,ja=n=>n/1e3;function eD(n,e){return e?n*(1e3/e):0}const tD=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,kF=1e-7,FF=12;function BF(n,e,t,i,s){let a,l,u=0;do l=e+(t-e)/2,a=tD(l,i,s)-n,a>0?t=l:e=l;while(Math.abs(a)>kF&&++u<FF);return l}function T0(n,e,t,i){if(n===e&&t===i)return Ga;const s=a=>BF(a,0,1,n,t);return a=>a===0||a===1?a:tD(s(a),e,i)}const nD=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,iD=n=>e=>1-n(1-e),sD=T0(.33,1.53,.69,.99),Uw=iD(sD),rD=nD(Uw),aD=n=>(n*=2)<1?.5*Uw(n):.5*(2-Math.pow(2,-10*(n-1))),Ow=n=>1-Math.sin(Math.acos(n)),oD=iD(Ow),lD=nD(Ow),VF=T0(.42,0,1,1),HF=T0(0,0,.58,1),cD=T0(.42,0,.58,1),jF=n=>Array.isArray(n)&&typeof n[0]!="number",uD=n=>Array.isArray(n)&&typeof n[0]=="number",GF={linear:Ga,easeIn:VF,easeInOut:cD,easeOut:HF,circIn:Ow,circInOut:lD,circOut:oD,backIn:Uw,backInOut:rD,backOut:sD,anticipate:aD},WF=n=>typeof n=="string",PA=n=>{if(uD(n)){Iw(n.length===4);const[e,t,i,s]=n;return T0(e,t,i,s)}else if(WF(n))return GF[n];return n},Cy=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function XF(n,e){let t=new Set,i=new Set,s=!1,a=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(g){l.has(g)&&(p.schedule(g),n()),g(u)}const p={schedule:(g,y=!1,x=!1)=>{const w=x&&s?t:i;return y&&l.add(g),w.has(g)||w.add(g),g},cancel:g=>{i.delete(g),l.delete(g)},process:g=>{if(u=g,s){a=!0;return}s=!0,[t,i]=[i,t],t.forEach(d),t.clear(),s=!1,a&&(a=!1,p.process(g))}};return p}const qF=40;function fD(n,e){let t=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,l=Cy.reduce((L,N)=>(L[N]=XF(a),L),{}),{setup:u,read:d,resolveKeyframes:p,preUpdate:g,update:y,preRender:x,render:_,postRender:w}=l,A=()=>{const L=gc.useManualTiming?s.timestamp:performance.now();t=!1,gc.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(L-s.timestamp,qF),1)),s.timestamp=L,s.isProcessing=!0,u.process(s),d.process(s),p.process(s),g.process(s),y.process(s),x.process(s),_.process(s),w.process(s),s.isProcessing=!1,t&&e&&(i=!1,n(A))},E=()=>{t=!0,i=!0,s.isProcessing||n(A)};return{schedule:Cy.reduce((L,N)=>{const P=l[N];return L[N]=(z,B=!1,V=!1)=>(t||E(),P.schedule(z,B,V)),L},{}),cancel:L=>{for(let N=0;N<Cy.length;N++)l[Cy[N]].cancel(L)},state:s,steps:l}}const{schedule:fi,cancel:Eu,state:Is,steps:jS}=fD(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ga,!0);let Rx;function ZF(){Rx=void 0}const Sr={now:()=>(Rx===void 0&&Sr.set(Is.isProcessing||gc.useManualTiming?Is.timestamp:performance.now()),Rx),set:n=>{Rx=n,queueMicrotask(ZF)}},hD=n=>e=>typeof e=="string"&&e.startsWith(n),dD=hD("--"),YF=hD("var(--"),zw=n=>YF(n)?$F.test(n.split("/*")[0].trim()):!1,$F=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function UA(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const bp={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Yg={...bp,transform:n=>yl(0,1,n)},Ry={...bp,default:1},Ig=n=>Math.round(n*1e5)/1e5,kw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function KF(n){return n==null}const JF=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Fw=(n,e)=>t=>!!(typeof t=="string"&&JF.test(t)&&t.startsWith(n)||e&&!KF(t)&&Object.prototype.hasOwnProperty.call(t,e)),pD=(n,e,t)=>i=>{if(typeof i!="string")return i;const[s,a,l,u]=i.match(kw);return{[n]:parseFloat(s),[e]:parseFloat(a),[t]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},QF=n=>yl(0,255,n),GS={...bp,transform:n=>Math.round(QF(n))},Gf={test:Fw("rgb","red"),parse:pD("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+GS.transform(n)+", "+GS.transform(e)+", "+GS.transform(t)+", "+Ig(Yg.transform(i))+")"};function eB(n){let e="",t="",i="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const xM={test:Fw("#"),parse:eB,transform:Gf.transform},E0=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),gu=E0("deg"),ml=E0("%"),_t=E0("px"),tB=E0("vh"),nB=E0("vw"),OA={...ml,parse:n=>ml.parse(n)/100,transform:n=>ml.transform(n*100)},qd={test:Fw("hsl","hue"),parse:pD("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+ml.transform(Ig(e))+", "+ml.transform(Ig(t))+", "+Ig(Yg.transform(i))+")"},ts={test:n=>Gf.test(n)||xM.test(n)||qd.test(n),parse:n=>Gf.test(n)?Gf.parse(n):qd.test(n)?qd.parse(n):xM.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Gf.transform(n):qd.transform(n),getAnimatableNone:n=>{const e=ts.parse(n);return e.alpha=0,ts.transform(e)}},iB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function sB(n){return isNaN(n)&&typeof n=="string"&&(n.match(kw)?.length||0)+(n.match(iB)?.length||0)>0}const mD="number",gD="color",rB="var",aB="var(",zA="${}",oB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $g(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},s=[];let a=0;const u=e.replace(oB,d=>(ts.test(d)?(i.color.push(a),s.push(gD),t.push(ts.parse(d))):d.startsWith(aB)?(i.var.push(a),s.push(rB),t.push(d)):(i.number.push(a),s.push(mD),t.push(parseFloat(d))),++a,zA)).split(zA);return{values:t,split:u,indexes:i,types:s}}function vD(n){return $g(n).values}function yD(n){const{split:e,types:t}=$g(n),i=e.length;return s=>{let a="";for(let l=0;l<i;l++)if(a+=e[l],s[l]!==void 0){const u=t[l];u===mD?a+=Ig(s[l]):u===gD?a+=ts.transform(s[l]):a+=s[l]}return a}}const lB=n=>typeof n=="number"?0:ts.test(n)?ts.getAnimatableNone(n):n;function cB(n){const e=vD(n);return yD(n)(e.map(lB))}const Au={test:sB,parse:vD,createTransformer:yD,getAnimatableNone:cB};function WS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function uB({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let s=0,a=0,l=0;if(!e)s=a=l=t;else{const u=t<.5?t*(1+e):t+e-t*e,d=2*t-u;s=WS(d,u,n+1/3),a=WS(d,u,n),l=WS(d,u,n-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:i}}function qx(n,e){return t=>t>0?e:n}const Ti=(n,e,t)=>n+(e-n)*t,XS=(n,e,t)=>{const i=n*n,s=t*(e*e-i)+i;return s<0?0:Math.sqrt(s)},fB=[xM,Gf,qd],hB=n=>fB.find(e=>e.test(n));function kA(n){const e=hB(n);if(!e)return!1;let t=e.parse(n);return e===qd&&(t=uB(t)),t}const FA=(n,e)=>{const t=kA(n),i=kA(e);if(!t||!i)return qx(n,e);const s={...t};return a=>(s.red=XS(t.red,i.red,a),s.green=XS(t.green,i.green,a),s.blue=XS(t.blue,i.blue,a),s.alpha=Ti(t.alpha,i.alpha,a),Gf.transform(s))},_M=new Set(["none","hidden"]);function dB(n,e){return _M.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function pB(n,e){return t=>Ti(n,e,t)}function Bw(n){return typeof n=="number"?pB:typeof n=="string"?zw(n)?qx:ts.test(n)?FA:vB:Array.isArray(n)?xD:typeof n=="object"?ts.test(n)?FA:mB:qx}function xD(n,e){const t=[...n],i=t.length,s=n.map((a,l)=>Bw(a)(a,e[l]));return a=>{for(let l=0;l<i;l++)t[l]=s[l](a);return t}}function mB(n,e){const t={...n,...e},i={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(i[s]=Bw(n[s])(n[s],e[s]));return s=>{for(const a in i)t[a]=i[a](s);return t}}function gB(n,e){const t=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],l=n.indexes[a][i[a]],u=n.values[l]??0;t[s]=u,i[a]++}return t}const vB=(n,e)=>{const t=Au.createTransformer(e),i=$g(n),s=$g(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?_M.has(n)&&!s.values.length||_M.has(e)&&!i.values.length?dB(n,e):w0(xD(gB(i,s),s.values),t):qx(n,e)};function _D(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Ti(n,e,t):Bw(n)(n,e)}const yB=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>fi.update(e,t),stop:()=>Eu(e),now:()=>Is.isProcessing?Is.timestamp:Sr.now()}},bD=(n,e,t=10)=>{let i="";const s=Math.max(Math.round(e/t),2);for(let a=0;a<s;a++)i+=Math.round(n(a/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Zx=2e4;function Vw(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<Zx;)e+=t,i=n.next(e);return e>=Zx?1/0:e}function xB(n,e=100,t){const i=t({...n,keyframes:[0,e]}),s=Math.min(Vw(i),Zx);return{type:"keyframes",ease:a=>i.next(s*a).value/e,duration:ja(s)}}const _B=5;function SD(n,e,t){const i=Math.max(e-_B,0);return eD(t-n(i),e-i)}const Ui={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},qS=.001;function bB({duration:n=Ui.duration,bounce:e=Ui.bounce,velocity:t=Ui.velocity,mass:i=Ui.mass}){let s,a,l=1-e;l=yl(Ui.minDamping,Ui.maxDamping,l),n=yl(Ui.minDuration,Ui.maxDuration,ja(n)),l<1?(s=p=>{const g=p*l,y=g*n,x=g-t,_=bM(p,l),w=Math.exp(-y);return qS-x/_*w},a=p=>{const y=p*l*n,x=y*t+t,_=Math.pow(l,2)*Math.pow(p,2)*n,w=Math.exp(-y),A=bM(Math.pow(p,2),l);return(-s(p)+qS>0?-1:1)*((x-_)*w)/A}):(s=p=>{const g=Math.exp(-p*n),y=(p-t)*n+1;return-qS+g*y},a=p=>{const g=Math.exp(-p*n),y=(t-p)*(n*n);return g*y});const u=5/n,d=MB(s,a,u);if(n=pc(n),isNaN(d))return{stiffness:Ui.stiffness,damping:Ui.damping,duration:n};{const p=Math.pow(d,2)*i;return{stiffness:p,damping:l*2*Math.sqrt(i*p),duration:n}}}const SB=12;function MB(n,e,t){let i=t;for(let s=1;s<SB;s++)i=i-n(i)/e(i);return i}function bM(n,e){return n*Math.sqrt(1-e*e)}const wB=["duration","bounce"],TB=["stiffness","damping","mass"];function BA(n,e){return e.some(t=>n[t]!==void 0)}function EB(n){let e={velocity:Ui.velocity,stiffness:Ui.stiffness,damping:Ui.damping,mass:Ui.mass,isResolvedFromDuration:!1,...n};if(!BA(n,TB)&&BA(n,wB))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),s=i*i,a=2*yl(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:Ui.mass,stiffness:s,damping:a}}else{const t=bB(n);e={...e,...t,mass:Ui.mass},e.isResolvedFromDuration=!0}return e}function Yx(n=Ui.visualDuration,e=Ui.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:s}=t;const a=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],u={done:!1,value:a},{stiffness:d,damping:p,mass:g,duration:y,velocity:x,isResolvedFromDuration:_}=EB({...t,velocity:-ja(t.velocity||0)}),w=x||0,A=p/(2*Math.sqrt(d*g)),E=l-a,M=ja(Math.sqrt(d/g)),D=Math.abs(E)<5;i||(i=D?Ui.restSpeed.granular:Ui.restSpeed.default),s||(s=D?Ui.restDelta.granular:Ui.restDelta.default);let L;if(A<1){const P=bM(M,A);L=z=>{const B=Math.exp(-A*M*z);return l-B*((w+A*M*E)/P*Math.sin(P*z)+E*Math.cos(P*z))}}else if(A===1)L=P=>l-Math.exp(-M*P)*(E+(w+M*E)*P);else{const P=M*Math.sqrt(A*A-1);L=z=>{const B=Math.exp(-A*M*z),V=Math.min(P*z,300);return l-B*((w+A*M*E)*Math.sinh(V)+P*E*Math.cosh(V))/P}}const N={calculatedDuration:_&&y||null,next:P=>{const z=L(P);if(_)u.done=P>=y;else{let B=P===0?w:0;A<1&&(B=P===0?pc(w):SD(L,P,z));const V=Math.abs(B)<=i,O=Math.abs(l-z)<=s;u.done=V&&O}return u.value=u.done?l:z,u},toString:()=>{const P=Math.min(Vw(N),Zx),z=bD(B=>N.next(P*B).value,P,30);return P+"ms "+z},toTransition:()=>{}};return N}Yx.applyToOptions=n=>{const e=xB(n,100,Yx);return n.ease=e.ease,n.duration=pc(e.duration),n.type="keyframes",n};function SM({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:l,min:u,max:d,restDelta:p=.5,restSpeed:g}){const y=n[0],x={done:!1,value:y},_=V=>u!==void 0&&V<u||d!==void 0&&V>d,w=V=>u===void 0?d:d===void 0||Math.abs(u-V)<Math.abs(d-V)?u:d;let A=t*e;const E=y+A,M=l===void 0?E:l(E);M!==E&&(A=M-y);const D=V=>-A*Math.exp(-V/i),L=V=>M+D(V),N=V=>{const O=D(V),F=L(V);x.done=Math.abs(O)<=p,x.value=x.done?M:F};let P,z;const B=V=>{_(x.value)&&(P=V,z=Yx({keyframes:[x.value,w(x.value)],velocity:SD(L,V,x.value),damping:s,stiffness:a,restDelta:p,restSpeed:g}))};return B(0),{calculatedDuration:null,next:V=>{let O=!1;return!z&&P===void 0&&(O=!0,N(V),B(V)),P!==void 0&&V>=P?z.next(V-P):(!O&&N(V),x)}}}function AB(n,e,t){const i=[],s=t||gc.mix||_D,a=n.length-1;for(let l=0;l<a;l++){let u=s(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||Ga:e;u=w0(d,u)}i.push(u)}return i}function CB(n,e,{clamp:t=!0,ease:i,mixer:s}={}){const a=n.length;if(Iw(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=AB(e,i,s),d=u.length,p=g=>{if(l&&g<n[0])return e[0];let y=0;if(d>1)for(;y<n.length-2&&!(g<n[y+1]);y++);const x=Zg(n[y],n[y+1],g);return u[y](x)};return t?g=>p(yl(n[0],n[a-1],g)):p}function RB(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const s=Zg(0,e,i);n.push(Ti(t,1,s))}}function NB(n){const e=[0];return RB(e,n.length-1),e}function DB(n,e){return n.map(t=>t*e)}function IB(n,e){return n.map(()=>e||cD).splice(0,n.length-1)}function Lg({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const s=jF(i)?i.map(PA):PA(i),a={done:!1,value:e[0]},l=DB(t&&t.length===e.length?t:NB(e),n),u=CB(l,e,{ease:Array.isArray(s)?s:IB(e,s)});return{calculatedDuration:n,next:d=>(a.value=u(d),a.done=d>=n,a)}}const LB=n=>n!==null;function Hw(n,{repeat:e,repeatType:t="loop"},i,s=1){const a=n.filter(LB),u=s<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!u||i===void 0?a[u]:i}const PB={decay:SM,inertia:SM,tween:Lg,keyframes:Lg,spring:Yx};function MD(n){typeof n.type=="string"&&(n.type=PB[n.type])}class jw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const UB=n=>n/100;class Gw extends jw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Sr.now()&&this.tick(Sr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;MD(e);const{type:t=Lg,repeat:i=0,repeatDelay:s=0,repeatType:a,velocity:l=0}=e;let{keyframes:u}=e;const d=t||Lg;d!==Lg&&typeof u[0]!="number"&&(this.mixKeyframes=w0(UB,_D(u[0],u[1])),u=[0,100]);const p=d({...e,keyframes:u});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...u].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=Vw(p));const{calculatedDuration:g}=p;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=p}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:s,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return i.next(0);const{delay:p=0,keyframes:g,repeat:y,repeatType:x,repeatDelay:_,type:w,onUpdate:A,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const M=this.currentTime-p*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?M<0:M>s;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let L=this.currentTime,N=i;if(y){const V=Math.min(this.currentTime,s)/u;let O=Math.floor(V),F=V%1;!F&&V>=1&&(F=1),F===1&&O--,O=Math.min(O,y+1),O%2&&(x==="reverse"?(F=1-F,_&&(F-=_/u)):x==="mirror"&&(N=l)),L=yl(0,1,F)*u}const P=D?{done:!1,value:g[0]}:N.next(L);a&&(P.value=a(P.value));let{done:z}=P;!D&&d!==null&&(z=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const B=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return B&&w!==SM&&(P.value=Hw(g,this.options,E,this.speed)),A&&A(P.value),B&&this.finish(),P}then(e,t){return this.finished.then(e,t)}get duration(){return ja(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ja(e)}get time(){return ja(this.currentTime)}set time(e){e=pc(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Sr.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ja(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=yB,startTime:t}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Sr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function OB(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Wf=n=>n*180/Math.PI,MM=n=>{const e=Wf(Math.atan2(n[1],n[0]));return wM(e)},zB={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:MM,rotateZ:MM,skewX:n=>Wf(Math.atan(n[1])),skewY:n=>Wf(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},wM=n=>(n=n%360,n<0&&(n+=360),n),VA=MM,HA=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),jA=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),kB={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:HA,scaleY:jA,scale:n=>(HA(n)+jA(n))/2,rotateX:n=>wM(Wf(Math.atan2(n[6],n[5]))),rotateY:n=>wM(Wf(Math.atan2(-n[2],n[0]))),rotateZ:VA,rotate:VA,skewX:n=>Wf(Math.atan(n[4])),skewY:n=>Wf(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function TM(n){return n.includes("scale")?1:0}function EM(n,e){if(!n||n==="none")return TM(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(t)i=kB,s=t;else{const u=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=zB,s=u}if(!s)return TM(e);const a=i[e],l=s[1].split(",").map(BB);return typeof a=="function"?a(l):l[a]}const FB=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return EM(t,e)};function BB(n){return parseFloat(n.trim())}const Sp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Mp=new Set(Sp),GA=n=>n===bp||n===_t,VB=new Set(["x","y","z"]),HB=Sp.filter(n=>!VB.has(n));function jB(n){const e=[];return HB.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const bu={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>EM(e,"x"),y:(n,{transform:e})=>EM(e,"y")};bu.translateX=bu.x;bu.translateY=bu.y;const Kf=new Set;let AM=!1,CM=!1,RM=!1;function wD(){if(CM){const n=Array.from(Kf).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const s=jB(i);s.length&&(t.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=t.get(i);s&&s.forEach(([a,l])=>{i.getValue(a)?.set(l)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}CM=!1,AM=!1,Kf.forEach(n=>n.complete(RM)),Kf.clear()}function TD(){Kf.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(CM=!0)})}function GB(){RM=!0,TD(),wD(),RM=!1}class Ww{constructor(e,t,i,s,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=s,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Kf.add(this),AM||(AM=!0,fi.read(TD),fi.resolveKeyframes(wD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:s}=this;if(e[0]===null){const a=s?.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&t){const u=i.readValue(t,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),s&&a===void 0&&s.set(e[0])}OB(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Kf.delete(this)}cancel(){this.state==="scheduled"&&(Kf.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const WB=n=>n.startsWith("--");function XB(n,e,t){WB(e)?n.style.setProperty(e,t):n.style[e]=t}const qB=Lw(()=>window.ScrollTimeline!==void 0),ZB={};function YB(n,e){const t=Lw(n);return()=>ZB[e]??t()}const ED=YB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),wg=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,WA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wg([0,.65,.55,1]),circOut:wg([.55,0,1,.45]),backIn:wg([.31,.01,.66,-.59]),backOut:wg([.33,1.53,.69,.99])};function AD(n,e){if(n)return typeof n=="function"?ED()?bD(n,e):"ease-out":uD(n)?wg(n):Array.isArray(n)?n.map(t=>AD(t,e)||WA.easeOut):WA[n]}function $B(n,e,t,{delay:i=0,duration:s=300,repeat:a=0,repeatType:l="loop",ease:u="easeOut",times:d}={},p=void 0){const g={[e]:t};d&&(g.offset=d);const y=AD(u,s);Array.isArray(y)&&(g.easing=y);const x={delay:i,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return p&&(x.pseudoElement=p),n.animate(g,x)}function CD(n){return typeof n=="function"&&"applyToOptions"in n}function KB({type:n,...e}){return CD(n)&&ED()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class JB extends jw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:i,keyframes:s,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:u,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,Iw(typeof e.type!="string");const p=KB(e);this.animation=$B(t,i,s,p,a),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=Hw(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(g):XB(t,i,g),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return ja(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ja(e)}get time(){return ja(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=pc(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&qB()?(this.animation.timeline=e,Ga):t(this)}}const RD={anticipate:aD,backInOut:rD,circInOut:lD};function QB(n){return n in RD}function e6(n){typeof n.ease=="string"&&QB(n.ease)&&(n.ease=RD[n.ease])}const ZS=10;class t6 extends JB{constructor(e){e6(e),MD(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:s,element:a,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const u=new Gw({...l,autoplay:!1}),d=Math.max(ZS,Sr.now()-this.startTime),p=yl(0,ZS,d-ZS);t.setWithVelocity(u.sample(Math.max(0,d-p)).value,u.sample(d).value,p),u.stop()}}const XA=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Au.test(n)||n==="0")&&!n.startsWith("url("));function n6(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function i6(n,e,t,i){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],l=XA(s,e),u=XA(a,e);return!l||!u?!1:n6(n)||(t==="spring"||CD(t))&&i}function NM(n){n.duration=0,n.type="keyframes"}const s6=new Set(["opacity","clipPath","filter","transform"]),r6=Lw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function a6(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:s,damping:a,type:l}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:p}=e.owner.getProps();return r6()&&t&&s6.has(t)&&(t!=="transform"||!p)&&!d&&!i&&s!=="mirror"&&a!==0&&l!=="inertia"}const o6=40;class l6 extends jw{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:l="loop",keyframes:u,name:d,motionValue:p,element:g,...y}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Sr.now();const x={autoplay:e,delay:t,type:i,repeat:s,repeatDelay:a,repeatType:l,name:d,motionValue:p,element:g,...y},_=g?.KeyframeResolver||Ww;this.keyframeResolver=new _(u,(w,A,E)=>this.onKeyframesResolved(w,A,x,!E),d,p,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,s){this.keyframeResolver=void 0;const{name:a,type:l,velocity:u,delay:d,isHandoff:p,onUpdate:g}=i;this.resolvedAt=Sr.now(),i6(e,a,l,u)||((gc.instantAnimations||!d)&&g?.(Hw(e,i,t)),e[0]=e[e.length-1],NM(i),i.repeat=0);const x={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>o6?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},_=!p&&a6(x),w=x.motionValue?.owner?.current,A=_?new t6({...x,element:w}):new Gw(x);A.finished.then(()=>{this.notifyFinished()}).catch(Ga),this.pendingTimeline&&(this.stopTimeline=A.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=A}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),GB()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function ND(n,e,t,i=0,s=1){const a=Array.from(n).sort((p,g)=>p.sortNodePosition(g)).indexOf(e),l=n.size,u=(l-1)*i;return typeof t=="function"?t(a,l):s===1?a*i:u-a*i}const c6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function u6(n){const e=c6.exec(n);if(!e)return[,];const[,t,i,s]=e;return[`--${t??i}`,s]}function DD(n,e,t=1){const[i,s]=u6(n);if(!i)return;const a=window.getComputedStyle(e).getPropertyValue(i);if(a){const l=a.trim();return KN(l)?parseFloat(l):l}return zw(s)?DD(s,e,t+1):s}const f6={type:"spring",stiffness:500,damping:25,restSpeed:10},h6=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),d6={type:"keyframes",duration:.8},p6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},m6=(n,{keyframes:e})=>e.length>2?d6:Mp.has(n)?n.startsWith("scale")?h6(e[1]):f6:p6,g6=n=>n!==null;function v6(n,{repeat:e,repeatType:t="loop"},i){const s=n.filter(g6),a=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[a]}function Xw(n,e){return n?.[e]??n?.default??n}function y6({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:s,repeat:a,repeatType:l,repeatDelay:u,from:d,elapsed:p,...g}){return!!Object.keys(g).length}const qw=(n,e,t,i={},s,a)=>l=>{const u=Xw(i,n)||{},d=u.delay||i.delay||0;let{elapsed:p=0}=i;p=p-pc(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-p,onUpdate:x=>{e.set(x),u.onUpdate&&u.onUpdate(x)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:n,motionValue:e,element:a?void 0:s};y6(u)||Object.assign(g,m6(n,g)),g.duration&&(g.duration=pc(g.duration)),g.repeatDelay&&(g.repeatDelay=pc(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(NM(g),g.delay===0&&(y=!0)),(gc.instantAnimations||gc.skipAnimations)&&(y=!0,NM(g),g.delay=0),g.allowFlatten=!u.type&&!u.ease,y&&!a&&e.get()!==void 0){const x=v6(g.keyframes,u);if(x!==void 0){fi.update(()=>{g.onUpdate(x),g.onComplete()});return}}return u.isSync?new Gw(g):new l6(g)};function qA(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function Zw(n,e,t,i){if(typeof e=="function"){const[s,a]=qA(i);e=e(t!==void 0?t:n.custom,s,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,a]=qA(i);e=e(t!==void 0?t:n.custom,s,a)}return e}function tp(n,e,t){const i=n.getProps();return Zw(i,e,t!==void 0?t:i.custom,n)}const ID=new Set(["width","height","top","left","right","bottom",...Sp]),ZA=30,x6=n=>!isNaN(parseFloat(n));class _6{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const s=Sr.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Sr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=x6(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Pw);const i=this.events[e].add(t);return e==="change"?()=>{i(),fi.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Sr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ZA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,ZA);return eD(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ap(n,e){return new _6(n,e)}const DM=n=>Array.isArray(n);function b6(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,ap(t))}function S6(n){return DM(n)?n[n.length-1]||0:n}function M6(n,e){const t=tp(n,e);let{transitionEnd:i={},transition:s={},...a}=t||{};a={...a,...i};for(const l in a){const u=S6(a[l]);b6(n,l,u)}}const Ks=n=>!!(n&&n.getVelocity);function w6(n){return!!(Ks(n)&&n.add)}function IM(n,e){const t=n.getValue("willChange");if(w6(t))return t.add(e);if(!t&&gc.WillChange){const i=new gc.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function Yw(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const T6="framerAppearId",LD="data-"+Yw(T6);function PD(n){return n.props[LD]}function E6({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function UD(n,e,{delay:t=0,transitionOverride:i,type:s}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:l,...u}=e;i&&(a=i);const d=[],p=s&&n.animationState&&n.animationState.getState()[s];for(const g in u){const y=n.getValue(g,n.latestValues[g]??null),x=u[g];if(x===void 0||p&&E6(p,g))continue;const _={delay:t,...Xw(a||{},g)},w=y.get();if(w!==void 0&&!y.isAnimating&&!Array.isArray(x)&&x===w&&!_.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const M=PD(n);if(M){const D=window.MotionHandoffAnimation(M,g,fi);D!==null&&(_.startTime=D,A=!0)}}IM(n,g),y.start(qw(g,y,x,n.shouldReduceMotion&&ID.has(g)?{type:!1}:_,n,A));const E=y.animation;E&&d.push(E)}return l&&Promise.all(d).then(()=>{fi.update(()=>{l&&M6(n,l)})}),d}function LM(n,e,t={}){const i=tp(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const a=i?()=>Promise.all(UD(n,i,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:y}=s;return A6(n,e,d,p,g,y,t)}:()=>Promise.resolve(),{when:u}=s;if(u){const[d,p]=u==="beforeChildren"?[a,l]:[l,a];return d().then(()=>p())}else return Promise.all([a(),l(t.delay)])}function A6(n,e,t=0,i=0,s=0,a=1,l){const u=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),u.push(LM(d,e,{...l,delay:t+(typeof i=="function"?0:i)+ND(n.variantChildren,d,i,s,a)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(u)}function C6(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(a=>LM(n,a,t));i=Promise.all(s)}else if(typeof e=="string")i=LM(n,e,t);else{const s=typeof e=="function"?tp(n,e,t.custom):e;i=Promise.all(UD(n,s,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const R6={test:n=>n==="auto",parse:n=>n},OD=n=>e=>e.test(n),zD=[bp,_t,ml,gu,nB,tB,R6],YA=n=>zD.find(OD(n));function N6(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||QN(n):!0}const D6=new Set(["brightness","contrast","saturate","opacity"]);function I6(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(kw)||[];if(!i)return n;const s=t.replace(i,"");let a=D6.has(e)?1:0;return i!==t&&(a*=100),e+"("+a+s+")"}const L6=/\b([a-z-]*)\(.*?\)/gu,PM={...Au,getAnimatableNone:n=>{const e=n.match(L6);return e?e.map(I6).join(" "):n}},$A={...bp,transform:Math.round},P6={rotate:gu,rotateX:gu,rotateY:gu,rotateZ:gu,scale:Ry,scaleX:Ry,scaleY:Ry,scaleZ:Ry,skew:gu,skewX:gu,skewY:gu,distance:_t,translateX:_t,translateY:_t,translateZ:_t,x:_t,y:_t,z:_t,perspective:_t,transformPerspective:_t,opacity:Yg,originX:OA,originY:OA,originZ:_t},$w={borderWidth:_t,borderTopWidth:_t,borderRightWidth:_t,borderBottomWidth:_t,borderLeftWidth:_t,borderRadius:_t,radius:_t,borderTopLeftRadius:_t,borderTopRightRadius:_t,borderBottomRightRadius:_t,borderBottomLeftRadius:_t,width:_t,maxWidth:_t,height:_t,maxHeight:_t,top:_t,right:_t,bottom:_t,left:_t,inset:_t,insetBlock:_t,insetBlockStart:_t,insetBlockEnd:_t,insetInline:_t,insetInlineStart:_t,insetInlineEnd:_t,padding:_t,paddingTop:_t,paddingRight:_t,paddingBottom:_t,paddingLeft:_t,paddingBlock:_t,paddingBlockStart:_t,paddingBlockEnd:_t,paddingInline:_t,paddingInlineStart:_t,paddingInlineEnd:_t,margin:_t,marginTop:_t,marginRight:_t,marginBottom:_t,marginLeft:_t,marginBlock:_t,marginBlockStart:_t,marginBlockEnd:_t,marginInline:_t,marginInlineStart:_t,marginInlineEnd:_t,backgroundPositionX:_t,backgroundPositionY:_t,...P6,zIndex:$A,fillOpacity:Yg,strokeOpacity:Yg,numOctaves:$A},U6={...$w,color:ts,backgroundColor:ts,outlineColor:ts,fill:ts,stroke:ts,borderColor:ts,borderTopColor:ts,borderRightColor:ts,borderBottomColor:ts,borderLeftColor:ts,filter:PM,WebkitFilter:PM},kD=n=>U6[n];function FD(n,e){let t=kD(n);return t!==PM&&(t=Au),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const O6=new Set(["auto","none","0"]);function z6(n,e,t){let i=0,s;for(;i<n.length&&!s;){const a=n[i];typeof a=="string"&&!O6.has(a)&&$g(a).values.length&&(s=n[i]),i++}if(s&&t)for(const a of e)n[a]=FD(t,s)}class k6 extends Ww{constructor(e,t,i,s,a){super(e,t,i,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let g=0;g<e.length;g++){let y=e[g];if(typeof y=="string"&&(y=y.trim(),zw(y))){const x=DD(y,t.current);x!==void 0&&(e[g]=x),g===e.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!ID.has(i)||e.length!==2)return;const[s,a]=e,l=YA(s),u=YA(a),d=UA(s),p=UA(a);if(d!==p&&bu[i]){this.needsMeasurement=!0;return}if(l!==u)if(GA(l)&&GA(u))for(let g=0;g<e.length;g++){const y=e[g];typeof y=="string"&&(e[g]=parseFloat(y))}else bu[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||N6(e[s]))&&i.push(s);i.length&&z6(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bu[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,l=i[a];i[a]=bu[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function F6(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const s=t?.[n]??i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const BD=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function VD(n){return JN(n)&&"offsetHeight"in n}const{schedule:Kw}=fD(queueMicrotask,!1),Mo={x:!1,y:!1};function HD(){return Mo.x||Mo.y}function B6(n){return n==="x"||n==="y"?Mo[n]?null:(Mo[n]=!0,()=>{Mo[n]=!1}):Mo.x||Mo.y?null:(Mo.x=Mo.y=!0,()=>{Mo.x=Mo.y=!1})}function jD(n,e){const t=F6(n),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[t,s,()=>i.abort()]}function KA(n){return!(n.pointerType==="touch"||HD())}function V6(n,e,t={}){const[i,s,a]=jD(n,t),l=u=>{if(!KA(u))return;const{target:d}=u,p=e(d,u);if(typeof p!="function"||!d)return;const g=y=>{KA(y)&&(p(y),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return i.forEach(u=>{u.addEventListener("pointerenter",l,s)}),a}const GD=(n,e)=>e?n===e?!0:GD(n,e.parentElement):!1,Jw=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,H6=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function WD(n){return H6.has(n.tagName)||n.isContentEditable===!0}const Nx=new WeakSet;function JA(n){return e=>{e.key==="Enter"&&n(e)}}function YS(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const j6=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=JA(()=>{if(Nx.has(t))return;YS(t,"down");const s=JA(()=>{YS(t,"up")}),a=()=>YS(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function QA(n){return Jw(n)&&!HD()}function G6(n,e,t={}){const[i,s,a]=jD(n,t),l=u=>{const d=u.currentTarget;if(!QA(u))return;Nx.add(d);const p=e(d,u),g=(_,w)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",x),Nx.has(d)&&Nx.delete(d),QA(_)&&typeof p=="function"&&p(_,{success:w})},y=_=>{g(_,d===window||d===document||t.useGlobalTarget||GD(d,_.target))},x=_=>{g(_,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",x,s)};return i.forEach(u=>{(t.useGlobalTarget?window:u).addEventListener("pointerdown",l,s),VD(u)&&(u.addEventListener("focus",p=>j6(p,s)),!WD(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),a}function XD(n){return JN(n)&&"ownerSVGElement"in n}function W6(n){return XD(n)&&n.tagName==="svg"}const X6=[...zD,ts,Au],q6=n=>X6.find(OD(n)),eC=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zd=()=>({x:eC(),y:eC()}),tC=()=>({min:0,max:0}),fs=()=>({x:tC(),y:tC()}),UM={current:null},qD={current:!1},Z6=typeof window<"u";function Y6(){if(qD.current=!0,!!Z6)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>UM.current=n.matches;n.addEventListener("change",e),e()}else UM.current=!1}const $6=new WeakMap;function ub(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Kg(n){return typeof n=="string"||Array.isArray(n)}const Qw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],eT=["initial",...Qw];function fb(n){return ub(n.animate)||eT.some(e=>Kg(n[e]))}function ZD(n){return!!(fb(n)||n.variants)}function K6(n,e,t){for(const i in e){const s=e[i],a=t[i];if(Ks(s))n.addValue(i,s);else if(Ks(a))n.addValue(i,ap(s,{owner:n}));else if(a!==s)if(n.hasValue(i)){const l=n.getValue(i);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(i);n.addValue(i,ap(l!==void 0?l:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const nC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let $x={};function YD(n){$x=n}function J6(){return $x}class Q6{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:a,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ww,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Sr.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,fi.render(this.render,!1,!0))};const{latestValues:d,renderState:p}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=p,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!a,this.isControllingVariants=fb(t),this.isVariantNode=ZD(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in y){const _=y[x];d[x]!==void 0&&Ks(_)&&_.set(d[x])}}mount(e){this.current=e,$6.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(qD.current||Y6(),this.shouldReduceMotion=UM.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Eu(this.notifyUpdate),Eu(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Mp.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&fi.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in $x){const t=$x[e];if(!t)continue;const{isEnabled:i,Feature:s}=t;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):fs()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<nC.length;i++){const s=nC[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,l=e[a];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=K6(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=ap(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(KN(i)||QN(i))?i=parseFloat(i):!q6(i)&&Au.test(t)&&(i=FD(e,t)),this.setBaseTarget(e,Ks(i)?i.get():i)),Ks(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const a=Zw(this.props,t,this.presenceContext?.custom);a&&(i=a[e])}if(t&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ks(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Pw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Kw.render(this.render)}}class $D extends Q6{constructor(){super(...arguments),this.KeyframeResolver=k6}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const i=e.style;return i?i[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ks(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class Pu{constructor(e){this.isMounted=!1,this.node=e}update(){}}function KD({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function eV({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function tV(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function $S(n){return n===void 0||n===1}function OM({scale:n,scaleX:e,scaleY:t}){return!$S(n)||!$S(e)||!$S(t)}function Bf(n){return OM(n)||JD(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function JD(n){return iC(n.x)||iC(n.y)}function iC(n){return n&&n!=="0%"}function Kx(n,e,t){const i=n-t,s=e*i;return t+s}function sC(n,e,t,i,s){return s!==void 0&&(n=Kx(n,s,i)),Kx(n,t,i)+e}function zM(n,e=0,t=1,i,s){n.min=sC(n.min,e,t,i,s),n.max=sC(n.max,e,t,i,s)}function QD(n,{x:e,y:t}){zM(n.x,e.translate,e.scale,e.originPoint),zM(n.y,t.translate,t.scale,t.originPoint)}const rC=.999999999999,aC=1.0000000000001;function nV(n,e,t,i=!1){const s=t.length;if(!s)return;e.x=e.y=1;let a,l;for(let u=0;u<s;u++){a=t[u],l=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&$d(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,QD(n,l)),i&&Bf(a.latestValues)&&$d(n,a.latestValues))}e.x<aC&&e.x>rC&&(e.x=1),e.y<aC&&e.y>rC&&(e.y=1)}function Yd(n,e){n.min=n.min+e,n.max=n.max+e}function oC(n,e,t,i,s=.5){const a=Ti(n.min,n.max,s);zM(n,e,t,a,i)}function $d(n,e){oC(n.x,e.x,e.scaleX,e.scale,e.originX),oC(n.y,e.y,e.scaleY,e.scale,e.originY)}function eI(n,e){return KD(tV(n.getBoundingClientRect(),e))}function iV(n,e,t){const i=eI(n,t),{scroll:s}=e;return s&&(Yd(i.x,s.offset.x),Yd(i.y,s.offset.y)),i}const sV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rV=Sp.length;function aV(n,e,t){let i="",s=!0;for(let a=0;a<rV;a++){const l=Sp[a],u=n[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||t){const p=BD(u,$w[l]);if(!d){s=!1;const g=sV[l]||l;i+=`${g}(${p}) `}t&&(e[l]=p)}}return i=i.trim(),t?i=t(e,s?"":i):s&&(i="none"),i}function tT(n,e,t){const{style:i,vars:s,transformOrigin:a}=n;let l=!1,u=!1;for(const d in e){const p=e[d];if(Mp.has(d)){l=!0;continue}else if(dD(d)){s[d]=p;continue}else{const g=BD(p,$w[d]);d.startsWith("origin")?(u=!0,a[d]=g):i[d]=g}}if(e.transform||(l||t?i.transform=aV(e,n.transform,t):i.transform&&(i.transform="none")),u){const{originX:d="50%",originY:p="50%",originZ:g=0}=a;i.transformOrigin=`${d} ${p} ${g}`}}function tI(n,{style:e,vars:t},i,s){const a=n.style;let l;for(l in e)a[l]=e[l];s?.applyProjectionStyles(a,i);for(l in t)a.setProperty(l,t[l])}function lC(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const rg={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(_t.test(n))n=parseFloat(n);else return n;const t=lC(n,e.target.x),i=lC(n,e.target.y);return`${t}% ${i}%`}},oV={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,s=Au.parse(n);if(s.length>5)return i;const a=Au.createTransformer(n),l=typeof s[0]!="number"?1:0,u=t.x.scale*e.x,d=t.y.scale*e.y;s[0+l]/=u,s[1+l]/=d;const p=Ti(u,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=p),typeof s[3+l]=="number"&&(s[3+l]/=p),a(s)}},kM={borderRadius:{...rg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rg,borderTopRightRadius:rg,borderBottomLeftRadius:rg,borderBottomRightRadius:rg,boxShadow:oV};function nI(n,{layout:e,layoutId:t}){return Mp.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!kM[n]||n==="opacity")}function nT(n,e,t){const i=n.style,s=e?.style,a={};if(!i)return a;for(const l in i)(Ks(i[l])||s&&Ks(s[l])||nI(l,n)||t?.getValue(l)?.liveStyle!==void 0)&&(a[l]=i[l]);return a}function lV(n){return window.getComputedStyle(n)}class cV extends $D{constructor(){super(...arguments),this.type="html",this.renderInstance=tI}readValueFromInstance(e,t){if(Mp.has(t))return this.projection?.isProjecting?TM(t):FB(e,t);{const i=lV(e),s=(dD(t)?i.getPropertyValue(t):i[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return eI(e,t)}build(e,t,i){tT(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return nT(e,t,i)}}const uV={offset:"stroke-dashoffset",array:"stroke-dasharray"},fV={offset:"strokeDashoffset",array:"strokeDasharray"};function hV(n,e,t=1,i=0,s=!0){n.pathLength=1;const a=s?uV:fV;n[a.offset]=_t.transform(-i);const l=_t.transform(e),u=_t.transform(t);n[a.array]=`${l} ${u}`}const dV=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function iI(n,{attrX:e,attrY:t,attrScale:i,pathLength:s,pathSpacing:a=1,pathOffset:l=0,...u},d,p,g){if(tT(n,u,p),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:x}=n;y.transform&&(x.transform=y.transform,delete y.transform),(x.transform||y.transformOrigin)&&(x.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),x.transform&&(x.transformBox=g?.transformBox??"fill-box",delete y.transformBox);for(const _ of dV)y[_]!==void 0&&(x[_]=y[_],delete y[_]);e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),i!==void 0&&(y.scale=i),s!==void 0&&hV(y,s,a,l,!1)}const sI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),rI=n=>typeof n=="string"&&n.toLowerCase()==="svg";function pV(n,e,t,i){tI(n,e,void 0,i);for(const s in e.attrs)n.setAttribute(sI.has(s)?s:Yw(s),e.attrs[s])}function aI(n,e,t){const i=nT(n,e,t);for(const s in n)if(Ks(n[s])||Ks(e[s])){const a=Sp.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[a]=n[s]}return i}class mV extends $D{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=fs}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Mp.has(t)){const i=kD(t);return i&&i.default||0}return t=sI.has(t)?t:Yw(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return aI(e,t,i)}build(e,t,i){iI(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,s){pV(e,t,i,s)}mount(e){this.isSVGTag=rI(e.tagName),super.mount(e)}}const gV=eT.length;function oI(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?oI(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<gV;t++){const i=eT[t],s=n.props[i];(Kg(s)||s===!1)&&(e[i]=s)}return e}function lI(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const vV=[...Qw].reverse(),yV=Qw.length;function xV(n){return e=>Promise.all(e.map(({animation:t,options:i})=>C6(n,t,i)))}function _V(n){let e=xV(n),t=cC(),i=!0;const s=d=>(p,g)=>{const y=tp(n,g,d==="exit"?n.presenceContext?.custom:void 0);if(y){const{transition:x,transitionEnd:_,...w}=y;p={...p,...w,..._}}return p};function a(d){e=d(n)}function l(d){const{props:p}=n,g=oI(n.parent)||{},y=[],x=new Set;let _={},w=1/0;for(let E=0;E<yV;E++){const M=vV[E],D=t[M],L=p[M]!==void 0?p[M]:g[M],N=Kg(L),P=M===d?D.isActive:null;P===!1&&(w=E);let z=L===g[M]&&L!==p[M]&&N;if(z&&i&&n.manuallyAnimateOnMount&&(z=!1),D.protectedKeys={..._},!D.isActive&&P===null||!L&&!D.prevProp||ub(L)||typeof L=="boolean")continue;const B=bV(D.prevProp,L);let V=B||M===d&&D.isActive&&!z&&N||E>w&&N,O=!1;const F=Array.isArray(L)?L:[L];let W=F.reduce(s(M),{});P===!1&&(W={});const{prevResolvedValues:ee={}}=D,J={...ee,...W},ae=K=>{V=!0,x.has(K)&&(O=!0,x.delete(K)),D.needsAnimating[K]=!0;const le=n.getValue(K);le&&(le.liveStyle=!1)};for(const K in J){const le=W[K],Ee=ee[K];if(_.hasOwnProperty(K))continue;let Re=!1;DM(le)&&DM(Ee)?Re=!lI(le,Ee):Re=le!==Ee,Re?le!=null?ae(K):x.add(K):le!==void 0&&x.has(K)?ae(K):D.protectedKeys[K]=!0}D.prevProp=L,D.prevResolvedValues=W,D.isActive&&(_={..._,...W}),i&&n.blockInitialAnimation&&(V=!1);const he=z&&B;V&&(!he||O)&&y.push(...F.map(K=>{const le={type:M};if(typeof K=="string"&&i&&!he&&n.manuallyAnimateOnMount&&n.parent){const{parent:Ee}=n,Re=tp(Ee,K);if(Ee.enteringChildren&&Re){const{delayChildren:q}=Re.transition||{};le.delay=ND(Ee.enteringChildren,n,q)}}return{animation:K,options:le}}))}if(x.size){const E={};if(typeof p.initial!="boolean"){const M=tp(n,Array.isArray(p.initial)?p.initial[0]:p.initial);M&&M.transition&&(E.transition=M.transition)}x.forEach(M=>{const D=n.getBaseTarget(M),L=n.getValue(M);L&&(L.liveStyle=!0),E[M]=D??null}),y.push({animation:E})}let A=!!y.length;return i&&(p.initial===!1||p.initial===p.animate)&&!n.manuallyAnimateOnMount&&(A=!1),i=!1,A?e(y):Promise.resolve()}function u(d,p){if(t[d].isActive===p)return Promise.resolve();n.variantChildren?.forEach(y=>y.animationState?.setActive(d,p)),t[d].isActive=p;const g=l(d);for(const y in t)t[y].protectedKeys={};return g}return{animateChanges:l,setActive:u,setAnimateFunction:a,getState:()=>t,reset:()=>{t=cC()}}}function bV(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!lI(e,n):!1}function Tf(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function cC(){return{animate:Tf(!0),whileInView:Tf(),whileHover:Tf(),whileTap:Tf(),whileDrag:Tf(),whileFocus:Tf(),exit:Tf()}}function uC(n,e){n.min=e.min,n.max=e.max}function xo(n,e){uC(n.x,e.x),uC(n.y,e.y)}function fC(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const cI=1e-4,SV=1-cI,MV=1+cI,uI=.01,wV=0-uI,TV=0+uI;function Mr(n){return n.max-n.min}function EV(n,e,t){return Math.abs(n-e)<=t}function hC(n,e,t,i=.5){n.origin=i,n.originPoint=Ti(e.min,e.max,n.origin),n.scale=Mr(t)/Mr(e),n.translate=Ti(t.min,t.max,n.origin)-n.originPoint,(n.scale>=SV&&n.scale<=MV||isNaN(n.scale))&&(n.scale=1),(n.translate>=wV&&n.translate<=TV||isNaN(n.translate))&&(n.translate=0)}function Pg(n,e,t,i){hC(n.x,e.x,t.x,i?i.originX:void 0),hC(n.y,e.y,t.y,i?i.originY:void 0)}function dC(n,e,t){n.min=t.min+e.min,n.max=n.min+Mr(e)}function AV(n,e,t){dC(n.x,e.x,t.x),dC(n.y,e.y,t.y)}function pC(n,e,t){n.min=e.min-t.min,n.max=n.min+Mr(e)}function Jx(n,e,t){pC(n.x,e.x,t.x),pC(n.y,e.y,t.y)}function mC(n,e,t,i,s){return n-=e,n=Kx(n,1/t,i),s!==void 0&&(n=Kx(n,1/s,i)),n}function CV(n,e=0,t=1,i=.5,s,a=n,l=n){if(ml.test(e)&&(e=parseFloat(e),e=Ti(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=Ti(a.min,a.max,i);n===a&&(u-=e),n.min=mC(n.min,e,t,u,s),n.max=mC(n.max,e,t,u,s)}function gC(n,e,[t,i,s],a,l){CV(n,e[t],e[i],e[s],e.scale,a,l)}const RV=["x","scaleX","originX"],NV=["y","scaleY","originY"];function vC(n,e,t,i){gC(n.x,e,RV,t?t.x:void 0,i?i.x:void 0),gC(n.y,e,NV,t?t.y:void 0,i?i.y:void 0)}function yC(n){return n.translate===0&&n.scale===1}function fI(n){return yC(n.x)&&yC(n.y)}function xC(n,e){return n.min===e.min&&n.max===e.max}function DV(n,e){return xC(n.x,e.x)&&xC(n.y,e.y)}function _C(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function hI(n,e){return _C(n.x,e.x)&&_C(n.y,e.y)}function bC(n){return Mr(n.x)/Mr(n.y)}function SC(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function Ha(n){return[n("x"),n("y")]}function IV(n,e,t){let i="";const s=n.x.translate/e.x,a=n.y.translate/e.y,l=t?.z||0;if((s||a||l)&&(i=`translate3d(${s}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:p,rotate:g,rotateX:y,rotateY:x,skewX:_,skewY:w}=t;p&&(i=`perspective(${p}px) ${i}`),g&&(i+=`rotate(${g}deg) `),y&&(i+=`rotateX(${y}deg) `),x&&(i+=`rotateY(${x}deg) `),_&&(i+=`skewX(${_}deg) `),w&&(i+=`skewY(${w}deg) `)}const u=n.x.scale*e.x,d=n.y.scale*e.y;return(u!==1||d!==1)&&(i+=`scale(${u}, ${d})`),i||"none"}const dI=["TopLeft","TopRight","BottomLeft","BottomRight"],LV=dI.length,MC=n=>typeof n=="string"?parseFloat(n):n,wC=n=>typeof n=="number"||_t.test(n);function PV(n,e,t,i,s,a){s?(n.opacity=Ti(0,t.opacity??1,UV(i)),n.opacityExit=Ti(e.opacity??1,0,OV(i))):a&&(n.opacity=Ti(e.opacity??1,t.opacity??1,i));for(let l=0;l<LV;l++){const u=`border${dI[l]}Radius`;let d=TC(e,u),p=TC(t,u);if(d===void 0&&p===void 0)continue;d||(d=0),p||(p=0),d===0||p===0||wC(d)===wC(p)?(n[u]=Math.max(Ti(MC(d),MC(p),i),0),(ml.test(p)||ml.test(d))&&(n[u]+="%")):n[u]=p}(e.rotate||t.rotate)&&(n.rotate=Ti(e.rotate||0,t.rotate||0,i))}function TC(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const UV=pI(0,.5,oD),OV=pI(.5,.95,Ga);function pI(n,e,t){return i=>i<n?0:i>e?1:t(Zg(n,e,i))}function zV(n,e,t){const i=Ks(n)?n:ap(n);return i.start(qw("",i,e,t)),i.animation}function Jg(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const kV=(n,e)=>n.depth-e.depth;class FV{constructor(){this.children=[],this.isDirty=!1}add(e){Nw(this.children,e),this.isDirty=!0}remove(e){Dw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(kV),this.isDirty=!1,this.children.forEach(e)}}function BV(n,e){const t=Sr.now(),i=({timestamp:s})=>{const a=s-t;a>=e&&(Eu(i),n(a-e))};return fi.setup(i,!0),()=>Eu(i)}function Dx(n){return Ks(n)?n.get():n}class VV{constructor(){this.members=[]}add(e){Nw(this.members,e),e.scheduleRender()}remove(e){if(Dw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let i;for(let s=t;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Ix={hasAnimatedSinceResize:!0,hasEverUpdated:!1},KS=["","X","Y","Z"],HV=1e3;let jV=0;function JS(n,e,t,i){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),i&&(i[n]=0))}function mI(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=PD(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",fi,!(s||a))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&mI(i)}function gI({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(l={},u=e?.()){this.id=jV++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(XV),this.nodes.forEach($V),this.nodes.forEach(KV),this.nodes.forEach(qV)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new FV)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Pw),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=XD(l)&&!W6(l),this.instance=l;const{layoutId:u,layout:d,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),n){let g,y=0;const x=()=>this.root.updateBlockedByResize=!1;fi.read(()=>{y=window.innerWidth}),n(l,()=>{const _=window.innerWidth;_!==y&&(y=_,this.root.updateBlockedByResize=!0,g&&g(),g=BV(x,250),Ix.hasAnimatedSinceResize&&(Ix.hasAnimatedSinceResize=!1,this.nodes.forEach(CC)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&p&&(u||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:x,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||p.getDefaultTransition()||n8,{onLayoutAnimationStart:A,onLayoutAnimationComplete:E}=p.getProps(),M=!this.targetLayout||!hI(this.targetLayout,_),D=!y&&x;if(this.options.layoutRoot||this.resumeFrom||D||y&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const L={...Xw(w,"layout"),onPlay:A,onComplete:E};(p.shouldReduceMotion||this.options.layoutRoot)&&(L.delay=0,L.type=!1),this.startAnimation(L),this.setAnimationOrigin(g,D)}else y||CC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Eu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(JV),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&mI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(EC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(AC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(YV),this.nodes.forEach(GV),this.nodes.forEach(WV)):this.nodes.forEach(AC),this.clearAllSnapshots();const u=Sr.now();Is.delta=yl(0,1e3/60,u-Is.timestamp),Is.timestamp=u,Is.isProcessing=!0,jS.update.process(Is),jS.preRender.process(Is),jS.render.process(Is),Is.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Kw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ZV),this.sharedNodes.forEach(QV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,fi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){fi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Mr(this.snapshot.measuredBox.x)&&!Mr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=fs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!fI(this.projectionDelta),d=this.getTransformTemplate(),p=d?d(this.latestValues,""):void 0,g=p!==this.prevTransformTemplateValue;l&&this.instance&&(u||Bf(this.latestValues)||g)&&(s(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),i8(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return fs();const u=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(s8))){const{scroll:p}=this.root;p&&(Yd(u.x,p.offset.x),Yd(u.y,p.offset.y))}return u}removeElementScroll(l){const u=fs();if(xo(u,l),this.scroll?.wasRoot)return u;for(let d=0;d<this.path.length;d++){const p=this.path[d],{scroll:g,options:y}=p;p!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&xo(u,l),Yd(u.x,g.offset.x),Yd(u.y,g.offset.y))}return u}applyTransform(l,u=!1){const d=fs();xo(d,l);for(let p=0;p<this.path.length;p++){const g=this.path[p];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&$d(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Bf(g.latestValues)&&$d(d,g.latestValues)}return Bf(this.latestValues)&&$d(d,this.latestValues),d}removeTransform(l){const u=fs();xo(u,l);for(let d=0;d<this.path.length;d++){const p=this.path[d];if(!p.instance||!Bf(p.latestValues))continue;OM(p.latestValues)&&p.updateSnapshot();const g=fs(),y=p.measurePageBox();xo(g,y),vC(u,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,g)}return Bf(this.latestValues)&&vC(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Is.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!this.layout||!(g||y))return;this.resolvedRelativeTargetAt=Is.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=fs(),this.targetWithTransforms=fs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),AV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xo(this.target,this.layout.layoutBox),QD(this.target,this.targetDelta)):xo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||OM(this.parent.latestValues)||JD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,u,d){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fs(),this.relativeTargetOrigin=fs(),Jx(this.relativeTargetOrigin,u,d),xo(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Is.timestamp&&(d=!1),d)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;xo(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,x=this.treeScale.y;nV(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=fs());const{target:_}=l;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(fC(this.prevProjectionDelta.x,this.projectionDelta.x),fC(this.prevProjectionDelta.y,this.projectionDelta.y)),Pg(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==x||!SC(this.projectionDelta.x,this.prevProjectionDelta.x)||!SC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zd(),this.projectionDelta=Zd(),this.projectionDeltaWithTransform=Zd()}setAnimationOrigin(l,u=!1){const d=this.snapshot,p=d?d.latestValues:{},g={...this.latestValues},y=Zd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const x=fs(),_=d?d.source:void 0,w=this.layout?this.layout.source:void 0,A=_!==w,E=this.getStack(),M=!E||E.members.length<=1,D=!!(A&&!M&&this.options.crossfade===!0&&!this.path.some(t8));this.animationProgress=0;let L;this.mixTargetDelta=N=>{const P=N/1e3;RC(y.x,l.x,P),RC(y.y,l.y,P),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jx(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),e8(this.relativeTarget,this.relativeTargetOrigin,x,P),L&&DV(this.relativeTarget,L)&&(this.isProjectionDirty=!1),L||(L=fs()),xo(L,this.relativeTarget)),A&&(this.animationValues=g,PV(g,p,this.latestValues,P,D,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Eu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=fi.update(()=>{Ix.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ap(0)),this.currentAnimation=zV(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(HV),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:p,latestValues:g}=l;if(!(!u||!d||!p)){if(this!==l&&this.layout&&p&&vI(this.options.animationType,this.layout.layoutBox,p.layoutBox)){d=this.target||fs();const y=Mr(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+y;const x=Mr(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+x}xo(u,d),$d(u,g),Pg(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new VV),this.sharedNodes.get(l).add(u);const p=u.options.initialPromotionConfig;u.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const p=this.getStack();p&&p.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const p={};d.z&&JS("z",l,p,this.animationValues);for(let g=0;g<KS.length;g++)JS(`rotate${KS[g]}`,l,p,this.animationValues),JS(`skew${KS[g]}`,l,p,this.animationValues);l.render();for(const g in p)l.setStaticValue(g,p[g]),this.animationValues&&(this.animationValues[g]=p[g]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Dx(u?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Dx(u?.pointerEvents)||""),this.hasProjected&&!Bf(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=p.animationValues||p.latestValues;this.applyTransformsToTarget();let y=IV(this.projectionDeltaWithTransform,this.treeScale,g);d&&(y=d(g,y)),l.transform=y;const{x,y:_}=this.projectionDelta;l.transformOrigin=`${x.origin*100}% ${_.origin*100}% 0`,p.animationValues?l.opacity=p===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const w in kM){if(g[w]===void 0)continue;const{correct:A,applyTo:E,isCSSVariable:M}=kM[w],D=y==="none"?g[w]:A(g[w],p);if(E){const L=E.length;for(let N=0;N<L;N++)l[E[N]]=D}else M?this.options.visualElement.renderState.vars[w]=D:l[w]=D}this.options.layoutId&&(l.pointerEvents=p===this?Dx(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(EC),this.root.sharedNodes.clear()}}}function GV(n){n.updateLayout()}function WV(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:s}=n.options,a=e.source!==n.layout.source;s==="size"?Ha(g=>{const y=a?e.measuredBox[g]:e.layoutBox[g],x=Mr(y);y.min=t[g].min,y.max=y.min+x}):vI(s,e.layoutBox,t)&&Ha(g=>{const y=a?e.measuredBox[g]:e.layoutBox[g],x=Mr(t[g]);y.max=y.min+x,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+x)});const l=Zd();Pg(l,t,e.layoutBox);const u=Zd();a?Pg(u,n.applyTransform(i,!0),e.measuredBox):Pg(u,t,e.layoutBox);const d=!fI(l);let p=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:x}=g;if(y&&x){const _=fs();Jx(_,e.layoutBox,y.layoutBox);const w=fs();Jx(w,t,x.layoutBox),hI(_,w)||(p=!0),g.options.layoutRoot&&(n.relativeTarget=w,n.relativeTargetOrigin=_,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:p})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function XV(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function qV(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function ZV(n){n.clearSnapshot()}function EC(n){n.clearMeasurements()}function AC(n){n.isLayoutDirty=!1}function YV(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function CC(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function $V(n){n.resolveTargetDelta()}function KV(n){n.calcProjection()}function JV(n){n.resetSkewAndRotation()}function QV(n){n.removeLeadSnapshot()}function RC(n,e,t){n.translate=Ti(e.translate,0,t),n.scale=Ti(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function NC(n,e,t,i){n.min=Ti(e.min,t.min,i),n.max=Ti(e.max,t.max,i)}function e8(n,e,t,i){NC(n.x,e.x,t.x,i),NC(n.y,e.y,t.y,i)}function t8(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const n8={duration:.45,ease:[.4,0,.1,1]},DC=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),IC=DC("applewebkit/")&&!DC("chrome/")?Math.round:Ga;function LC(n){n.min=IC(n.min),n.max=IC(n.max)}function i8(n){LC(n.x),LC(n.y)}function vI(n,e,t){return n==="position"||n==="preserve-aspect"&&!EV(bC(e),bC(t),.2)}function s8(n){return n!==n.root&&n.scroll?.wasRoot}const r8=gI({attachResizeListener:(n,e)=>Jg(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),QS={current:void 0},yI=gI({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!QS.current){const n=new r8({});n.mount(window),n.setOptions({layoutScroll:!0}),QS.current=n}return QS.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),iT=pe.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function PC(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function a8(...n){return e=>{let t=!1;const i=n.map(s=>{const a=PC(s,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let s=0;s<i.length;s++){const a=i[s];typeof a=="function"?a():PC(n[s],null)}}}}function o8(...n){return pe.useCallback(a8(...n),n)}class l8 extends pe.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,s=VD(i)&&i.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function c8({children:n,isPresent:e,anchorX:t,root:i}){const s=pe.useId(),a=pe.useRef(null),l=pe.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=pe.useContext(iT),d=n.props?.ref??n?.ref,p=o8(a,d);return pe.useInsertionEffect(()=>{const{width:g,height:y,top:x,left:_,right:w}=l.current;if(e||!a.current||!g||!y)return;const A=t==="left"?`left: ${_}`:`right: ${w}`;a.current.dataset.motionPopId=s;const E=document.createElement("style");u&&(E.nonce=u);const M=i??document.head;return M.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${y}px !important;
            ${A}px !important;
            top: ${x}px !important;
          }
        `),()=>{M.contains(E)&&M.removeChild(E)}},[e]),R.jsx(l8,{isPresent:e,childRef:a,sizeRef:l,children:pe.cloneElement(n,{ref:p})})}const u8=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:s,presenceAffectsLayout:a,mode:l,anchorX:u,root:d})=>{const p=Rw(f8),g=pe.useId();let y=!0,x=pe.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:t,custom:s,onExitComplete:_=>{p.set(_,!0);for(const w of p.values())if(!w)return;i&&i()},register:_=>(p.set(_,!1),()=>p.delete(_))}),[t,p,i]);return a&&y&&(x={...x}),pe.useMemo(()=>{p.forEach((_,w)=>p.set(w,!1))},[t]),pe.useEffect(()=>{!t&&!p.size&&i&&i()},[t]),l==="popLayout"&&(n=R.jsx(c8,{isPresent:t,anchorX:u,root:d,children:n})),R.jsx(cb.Provider,{value:x,children:n})};function f8(){return new Map}function xI(n=!0){const e=pe.useContext(cb);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:s}=e,a=pe.useId();pe.useEffect(()=>{if(n)return s(a)},[n]);const l=pe.useCallback(()=>n&&i&&i(a),[a,i,n]);return!t&&i?[!1,l]:[!0]}const Ny=n=>n.key||"";function UC(n){const e=[];return pe.Children.forEach(n,t=>{pe.isValidElement(t)&&e.push(t)}),e}const Qx=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:a="sync",propagate:l=!1,anchorX:u="left",root:d})=>{const[p,g]=xI(l),y=pe.useMemo(()=>UC(n),[n]),x=l&&!p?[]:y.map(Ny),_=pe.useRef(!0),w=pe.useRef(y),A=Rw(()=>new Map),E=pe.useRef(new Set),[M,D]=pe.useState(y),[L,N]=pe.useState(y);$N(()=>{_.current=!1,w.current=y;for(let B=0;B<L.length;B++){const V=Ny(L[B]);x.includes(V)?(A.delete(V),E.current.delete(V)):A.get(V)!==!0&&A.set(V,!1)}},[L,x.length,x.join("-")]);const P=[];if(y!==M){let B=[...y];for(let V=0;V<L.length;V++){const O=L[V],F=Ny(O);x.includes(F)||(B.splice(V,0,O),P.push(O))}return a==="wait"&&P.length&&(B=P),N(UC(B)),D(y),null}const{forceRender:z}=pe.useContext(Cw);return R.jsx(R.Fragment,{children:L.map(B=>{const V=Ny(B),O=l&&!p?!1:y===L||x.includes(V),F=()=>{if(E.current.has(V))return;if(E.current.add(V),A.has(V))A.set(V,!0);else return;let W=!0;A.forEach(ee=>{ee||(W=!1)}),W&&(z?.(),N(w.current),l&&g?.(),i&&i())};return R.jsx(u8,{isPresent:O,initial:!_.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:a,root:d,onExitComplete:O?void 0:F,anchorX:u,children:B},V)})})},_I=pe.createContext({strict:!1}),OC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let zC=!1;function h8(){if(zC)return;const n={};for(const e in OC)n[e]={isEnabled:t=>OC[e].some(i=>!!t[i])};YD(n),zC=!0}function bI(){return h8(),J6()}function d8(n){const e=bI();for(const t in n)e[t]={...e[t],...n[t]};YD(e)}const p8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function e_(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||p8.has(n)}let SI=n=>!e_(n);function m8(n){typeof n=="function"&&(SI=e=>e.startsWith("on")?!e_(e):n(e))}try{m8(require("@emotion/is-prop-valid").default)}catch{}function g8(n,e,t){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(SI(s)||t===!0&&e_(s)||!e&&!e_(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}const hb=pe.createContext({});function v8(n,e){if(fb(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Kg(t)?t:void 0,animate:Kg(i)?i:void 0}}return n.inherit!==!1?e:{}}function y8(n){const{initial:e,animate:t}=v8(n,pe.useContext(hb));return pe.useMemo(()=>({initial:e,animate:t}),[kC(e),kC(t)])}function kC(n){return Array.isArray(n)?n.join(" "):n}const sT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function MI(n,e,t){for(const i in e)!Ks(e[i])&&!nI(i,t)&&(n[i]=e[i])}function x8({transformTemplate:n},e){return pe.useMemo(()=>{const t=sT();return tT(t,e,n),Object.assign({},t.vars,t.style)},[e])}function _8(n,e){const t=n.style||{},i={};return MI(i,t,n),Object.assign(i,x8(n,e)),i}function b8(n,e){const t={},i=_8(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const wI=()=>({...sT(),attrs:{}});function S8(n,e,t,i){const s=pe.useMemo(()=>{const a=wI();return iI(a,e,rI(i),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};MI(a,n.style,n),s.style={...a,...s.style}}return s}const M8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rT(n){return typeof n!="string"||n.includes("-")?!1:!!(M8.indexOf(n)>-1||/[A-Z]/u.test(n))}function w8(n,e,t,{latestValues:i},s,a=!1,l){const d=(l??rT(n)?S8:b8)(e,i,s,n),p=g8(e,typeof n=="string",a),g=n!==pe.Fragment?{...p,...d,ref:t}:{},{children:y}=e,x=pe.useMemo(()=>Ks(y)?y.get():y,[y]);return pe.createElement(n,{...g,children:x})}function T8({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,s){return{latestValues:E8(t,i,s,n),renderState:e()}}function E8(n,e,t,i){const s={},a=i(n,{});for(const x in a)s[x]=Dx(a[x]);let{initial:l,animate:u}=n;const d=fb(n),p=ZD(n);e&&p&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const y=g?u:l;if(y&&typeof y!="boolean"&&!ub(y)){const x=Array.isArray(y)?y:[y];for(let _=0;_<x.length;_++){const w=Zw(n,x[_]);if(w){const{transitionEnd:A,transition:E,...M}=w;for(const D in M){let L=M[D];if(Array.isArray(L)){const N=g?L.length-1:0;L=L[N]}L!==null&&(s[D]=L)}for(const D in A)s[D]=A[D]}}}return s}const TI=n=>(e,t)=>{const i=pe.useContext(hb),s=pe.useContext(cb),a=()=>T8(n,e,i,s);return t?a():Rw(a)},A8=TI({scrapeMotionValuesFromProps:nT,createRenderState:sT}),C8=TI({scrapeMotionValuesFromProps:aI,createRenderState:wI}),R8=Symbol.for("motionComponentSymbol");function N8(n,e,t){const i=pe.useRef(t);pe.useInsertionEffect(()=>{i.current=t});const s=pe.useRef(null);return pe.useCallback(a=>{a&&n.onMount?.(a),e&&(a?e.mount(a):e.unmount());const l=i.current;if(typeof l=="function")if(a){const u=l(a);typeof u=="function"&&(s.current=u)}else s.current?(s.current(),s.current=null):l(a);else l&&(l.current=a)},[e])}const EI=pe.createContext({});function Tg(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function D8(n,e,t,i,s,a){const{visualElement:l}=pe.useContext(hb),u=pe.useContext(_I),d=pe.useContext(cb),p=pe.useContext(iT).reducedMotion,g=pe.useRef(null);i=i||u.renderer,!g.current&&i&&(g.current=i(n,{visualState:e,parent:l,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:p,isSVG:a}));const y=g.current,x=pe.useContext(EI);y&&!y.projection&&s&&(y.type==="html"||y.type==="svg")&&I8(g.current,t,s,x);const _=pe.useRef(!1);pe.useInsertionEffect(()=>{y&&_.current&&y.update(t,d)});const w=t[LD],A=pe.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return $N(()=>{y&&(_.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),A.current&&y.animationState&&y.animationState.animateChanges())}),pe.useEffect(()=>{y&&(!A.current&&y.animationState&&y.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),A.current=!1),y.enteringChildren=void 0)}),y}function I8(n,e,t,i){const{layoutId:s,layout:a,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:p,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:AI(n.parent)),n.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!l||u&&Tg(u),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:d,layoutRoot:p})}function AI(n){if(n)return n.options.allowProjection!==!1?n.projection:AI(n.parent)}function e1(n,{forwardMotionProps:e=!1,type:t}={},i,s){i&&d8(i);const a=t?t==="svg":rT(n),l=a?C8:A8;function u(p,g){let y;const x={...pe.useContext(iT),...p,layoutId:L8(p)},{isStatic:_}=x,w=y8(p),A=l(p,_);if(!_&&YN){P8();const E=U8(x);y=E.MeasureLayout,w.visualElement=D8(n,A,x,s,E.ProjectionNode,a)}return R.jsxs(hb.Provider,{value:w,children:[y&&w.visualElement?R.jsx(y,{visualElement:w.visualElement,...x}):null,w8(n,p,N8(A,w.visualElement,g),A,_,e,a)]})}u.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const d=pe.forwardRef(u);return d[R8]=n,d}function L8({layoutId:n}){const e=pe.useContext(Cw).id;return e&&n!==void 0?e+"-"+n:n}function P8(n,e){pe.useContext(_I).strict}function U8(n){const e=bI(),{drag:t,layout:i}=e;if(!t&&!i)return{};const s={...t,...i};return{MeasureLayout:t?.isEnabled(n)||i?.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function O8(n,e){if(typeof Proxy>"u")return e1;const t=new Map,i=(a,l)=>e1(a,l,n,e),s=(a,l)=>i(a,l);return new Proxy(s,{get:(a,l)=>l==="create"?i:(t.has(l)||t.set(l,e1(l,void 0,n,e)),t.get(l))})}const z8=(n,e)=>e.isSVG??rT(n)?new mV(e):new cV(e,{allowProjection:n!==pe.Fragment});class k8 extends Pu{constructor(e){super(e),e.animationState||(e.animationState=_V(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ub(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let F8=0;class B8 extends Pu{constructor(){super(...arguments),this.id=F8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const V8={animation:{Feature:k8},exit:{Feature:B8}};function A0(n){return{point:{x:n.pageX,y:n.pageY}}}const H8=n=>e=>Jw(e)&&n(e,A0(e));function Ug(n,e,t,i){return Jg(n,e,H8(t),i)}const CI=({current:n})=>n?n.ownerDocument.defaultView:null,FC=(n,e)=>Math.abs(n-e);function j8(n,e){const t=FC(n.x,e.x),i=FC(n.y,e.y);return Math.sqrt(t**2+i**2)}const BC=new Set(["auto","scroll"]);class RI{constructor(e,t,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3,element:u}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=_=>{this.handleScroll(_.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=n1(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,A=j8(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!A)return;const{point:E}=_,{timestamp:M}=Is;this.history.push({...E,timestamp:M});const{onStart:D,onMove:L}=this.handlers;w||(D&&D(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),L&&L(this.lastMoveEvent,_)},this.handlePointerMove=(_,w)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=t1(w,this.transformPagePoint),fi.update(this.updatePoint,!0)},this.handlePointerUp=(_,w)=>{this.end();const{onEnd:A,onSessionEnd:E,resumeAnimation:M}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=n1(_.type==="pointercancel"?this.lastMoveEventInfo:t1(w,this.transformPagePoint),this.history);this.startEvent&&A&&A(_,D),E&&E(_,D)},!Jw(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=l,this.contextWindow=s||window;const d=A0(e),p=t1(d,this.transformPagePoint),{point:g}=p,{timestamp:y}=Is;this.history=[{...g,timestamp:y}];const{onSessionStart:x}=t;x&&x(e,n1(p,this.history)),this.removeListeners=w0(Ug(this.contextWindow,"pointermove",this.handlePointerMove),Ug(this.contextWindow,"pointerup",this.handlePointerUp),Ug(this.contextWindow,"pointercancel",this.handlePointerUp)),u&&this.startScrollTracking(u)}startScrollTracking(e){let t=e.parentElement;for(;t;){const i=getComputedStyle(t);(BC.has(i.overflowX)||BC.has(i.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const i=e===window,s=i?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:s.x-t.x,y:s.y-t.y};a.x===0&&a.y===0||(i?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,s),fi.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Eu(this.updatePoint)}}function t1(n,e){return e?{point:e(n.point)}:n}function VC(n,e){return{x:n.x-e.x,y:n.y-e.y}}function n1({point:n},e){return{point:n,delta:VC(n,NI(e)),offset:VC(n,G8(e)),velocity:W8(e,.1)}}function G8(n){return n[0]}function NI(n){return n[n.length-1]}function W8(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const s=NI(n);for(;t>=0&&(i=n[t],!(s.timestamp-i.timestamp>pc(e)));)t--;if(!i)return{x:0,y:0};const a=ja(s.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const l={x:(s.x-i.x)/a,y:(s.y-i.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function X8(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Ti(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Ti(t,n,i.max):Math.min(n,t)),n}function HC(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function q8(n,{top:e,left:t,bottom:i,right:s}){return{x:HC(n.x,t,s),y:HC(n.y,e,i)}}function jC(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function Z8(n,e){return{x:jC(n.x,e.x),y:jC(n.y,e.y)}}function Y8(n,e){let t=.5;const i=Mr(n),s=Mr(e);return s>i?t=Zg(e.min,e.max-i,n.min):i>s&&(t=Zg(n.min,n.max-s,e.min)),yl(0,1,t)}function $8(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const FM=.35;function K8(n=FM){return n===!1?n=0:n===!0&&(n=FM),{x:GC(n,"left","right"),y:GC(n,"top","bottom")}}function GC(n,e,t){return{min:WC(n,e),max:WC(n,t)}}function WC(n,e){return typeof n=="number"?n:n[e]||0}const J8=new WeakMap;class Q8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=fs(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=y=>{t?(this.stopAnimation(),this.snapToCursor(A0(y).point)):this.pauseAnimation()},l=(y,x)=>{this.stopAnimation();const{drag:_,dragPropagation:w,onDragStart:A}=this.getProps();if(_&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=B6(_),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ha(M=>{let D=this.getAxisMotionValue(M).get()||0;if(ml.test(D)){const{projection:L}=this.visualElement;if(L&&L.layout){const N=L.layout.layoutBox[M];N&&(D=Mr(N)*(parseFloat(D)/100))}}this.originPoint[M]=D}),A&&fi.postRender(()=>A(y,x)),IM(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},u=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x;const{dragPropagation:_,dragDirectionLock:w,onDirectionLock:A,onDrag:E}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:M}=x;if(w&&this.currentDirection===null){this.currentDirection=e2(M),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",x.point,M),this.updateAxis("y",x.point,M),this.visualElement.render(),E&&E(y,x)},d=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x,this.stop(y,x),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>Ha(y=>this.getAnimationState(y)==="paused"&&this.getAxisMotionValue(y).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new RI(e,{onSessionStart:a,onStart:l,onMove:u,onSessionEnd:d,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:CI(this.visualElement),element:this.visualElement.current})}stop(e,t){const i=e||this.latestPointerEvent,s=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!i)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&fi.postRender(()=>u(i,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:s}=this.getProps();if(!i||!Dy(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=X8(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Tg(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=q8(i.layoutBox,e):this.constraints=!1,this.elastic=K8(t),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ha(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=$8(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Tg(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=iV(i,s.root,this.visualElement.getTransformPagePoint());let l=Z8(s.layout.layoutBox,a);if(t){const u=t(eV(l));this.hasMutatedConstraints=!!u,u&&(l=KD(u))}return l}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:s,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},p=Ha(g=>{if(!Dy(g,t,this.currentDirection))return;let y=d&&d[g]||{};l&&(y={min:0,max:0});const x=s?200:1e6,_=s?40:1e7,w={type:"inertia",velocity:i?e[g]:0,bounceStiffness:x,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...a,...y};return this.startAxisValueAnimation(g,w)});return Promise.all(p).then(u)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return IM(this.visualElement,e),i.start(qw(e,i,0,t,this.visualElement,!1))}stopAnimation(){Ha(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ha(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[t];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Ha(t=>{const{drag:i}=this.getProps();if(!Dy(t,i,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[t],d=a.get()||0;a.set(e[t]-Ti(l,u,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Tg(t)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ha(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();s[l]=Y8({min:d,max:d},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ha(l=>{if(!Dy(l,e,null))return;const u=this.getAxisMotionValue(l),{min:d,max:p}=this.constraints[l];u.set(Ti(d,p,s[l]))})}addListeners(){if(!this.visualElement.current)return;J8.set(this.visualElement,this);const e=this.visualElement.current,t=Ug(e,"pointerdown",d=>{const{drag:p,dragListener:g=!0}=this.getProps();p&&g&&!WD(d.target)&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();Tg(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),fi.read(i);const l=Jg(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:p})=>{this.isDragging&&p&&(Ha(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=d[g].translate,y.set(y.get()+d[g].translate))}),this.visualElement.render())}));return()=>{l(),t(),a(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:l=FM,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:s,dragConstraints:a,dragElastic:l,dragMomentum:u}}}function Dy(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function e2(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class t2 extends Pu{constructor(e){super(e),this.removeGroupControls=Ga,this.removeListeners=Ga,this.controls=new Q8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ga}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const XC=n=>(e,t)=>{n&&fi.postRender(()=>n(e,t))};class n2 extends Pu{constructor(){super(...arguments),this.removePointerDownListener=Ga}onPointerDown(e){this.session=new RI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:CI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:XC(e),onStart:XC(t),onMove:i,onEnd:(a,l)=>{delete this.session,s&&fi.postRender(()=>s(a,l))}}}mount(){this.removePointerDownListener=Ug(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let i1=!1;class i2 extends pe.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:s}=this.props,{projection:a}=e;a&&(t.group&&t.group.add(a),i&&i.register&&s&&i.register(a),i1&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Ix.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:s,isPresent:a}=this.props,{projection:l}=i;return l&&(l.isPresent=a,i1=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||fi.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Kw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:s}=e;i1=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function DI(n){const[e,t]=xI(),i=pe.useContext(Cw);return R.jsx(i2,{...n,layoutGroup:i,switchLayoutGroup:pe.useContext(EI),isPresent:e,safeToRemove:t})}const s2={pan:{Feature:n2},drag:{Feature:t2,ProjectionNode:yI,MeasureLayout:DI}};function qC(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,a=i[s];a&&fi.postRender(()=>a(e,A0(e)))}class r2 extends Pu{mount(){const{current:e}=this.node;e&&(this.unmount=V6(e,(t,i)=>(qC(this.node,i,"Start"),s=>qC(this.node,s,"End"))))}unmount(){}}class a2 extends Pu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=w0(Jg(this.node.current,"focus",()=>this.onFocus()),Jg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ZC(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),a=i[s];a&&fi.postRender(()=>a(e,A0(e)))}class o2 extends Pu{mount(){const{current:e}=this.node;e&&(this.unmount=G6(e,(t,i)=>(ZC(this.node,i,"Start"),(s,{success:a})=>ZC(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const BM=new WeakMap,s1=new WeakMap,l2=n=>{const e=BM.get(n.target);e&&e(n)},c2=n=>{n.forEach(l2)};function u2({root:n,...e}){const t=n||document;s1.has(t)||s1.set(t,{});const i=s1.get(t),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(c2,{root:n,...e})),i[s]}function f2(n,e,t){const i=u2(e);return BM.set(n,t),i.observe(n),()=>{BM.delete(n),i.unobserve(n)}}const h2={some:0,all:1};class d2 extends Pu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:s="some",once:a}=e,l={root:t?t.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:h2[s]},u=d=>{const{isIntersecting:p}=d;if(this.isInView===p||(this.isInView=p,a&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),x=p?g:y;x&&x(d)};return f2(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(p2(e,t))&&this.startObserver()}unmount(){}}function p2({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const m2={inView:{Feature:d2},tap:{Feature:o2},focus:{Feature:a2},hover:{Feature:r2}},g2={layout:{ProjectionNode:yI,MeasureLayout:DI}},v2={...V8,...m2,...s2,...g2},Vn=O8(v2,z8);function y2(n,e=!1){return window.__TAURI_INTERNALS__.transformCallback(n,e)}async function Qg(n,e={},t){return window.__TAURI_INTERNALS__.invoke(n,e,t)}var YC;(function(n){n.WINDOW_RESIZED="tauri://resize",n.WINDOW_MOVED="tauri://move",n.WINDOW_CLOSE_REQUESTED="tauri://close-requested",n.WINDOW_DESTROYED="tauri://destroyed",n.WINDOW_FOCUS="tauri://focus",n.WINDOW_BLUR="tauri://blur",n.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",n.WINDOW_THEME_CHANGED="tauri://theme-changed",n.WINDOW_CREATED="tauri://window-created",n.WEBVIEW_CREATED="tauri://webview-created",n.DRAG_ENTER="tauri://drag-enter",n.DRAG_OVER="tauri://drag-over",n.DRAG_DROP="tauri://drag-drop",n.DRAG_LEAVE="tauri://drag-leave"})(YC||(YC={}));async function x2(n,e){window.__TAURI_EVENT_PLUGIN_INTERNALS__.unregisterListener(n,e),await Qg("plugin:event|unlisten",{event:n,eventId:e})}async function II(n,e,t){var i;const s=(i=void 0)!==null&&i!==void 0?i:{kind:"Any"};return Qg("plugin:event|listen",{event:n,target:s,handler:y2(e)}).then(a=>async()=>x2(n,a))}const _2=()=>{const[n,e]=pe.useState({total_ram:"0 GB",used_ram:"0 GB",cpu_usage:"0%",ram_percentage:0,cpu_percentage:0});return pe.useEffect(()=>{const t=setInterval(async()=>{try{const i=await Qg("get_hardware_metrics");e(i)}catch(i){console.error("Telemetry Link Failed:",i)}},1e3);return()=>clearInterval(t)},[]),R.jsxs("div",{className:"space-y-6 p-2",children:[R.jsxs("div",{className:"group",children:[R.jsxs("div",{className:"flex justify-between items-end mb-1",children:[R.jsx("p",{className:"text-[10px] uppercase tracking-widest opacity-50",children:"Physical Memory"}),R.jsx("p",{className:"text-[10px] text-cyan-500 animate-pulse",children:"LIVE"})]}),R.jsxs("p",{className:"text-2xl font-bold text-white tracking-tight",children:[n.used_ram," ",R.jsxs("span",{className:"text-sm opacity-50 font-normal",children:["/ ",n.total_ram]})]}),R.jsx("div",{className:"w-full h-1 bg-cyan-900/30 mt-2 overflow-hidden rounded-full",children:R.jsx("div",{className:"h-full bg-cyan-400 transition-all duration-500 ease-out shadow-[0_0_10px_#00f3ff]",style:{width:`${n.ram_percentage}%`}})})]}),R.jsxs("div",{className:"group",children:[R.jsx("p",{className:"text-[10px] uppercase tracking-widest opacity-50",children:"Neural Load (CPU)"}),R.jsx("p",{className:"text-2xl font-bold text-magenta-400 tracking-tight",children:n.cpu_usage}),R.jsx("div",{className:"w-full h-1 bg-magenta-900/30 mt-2 overflow-hidden rounded-full",children:R.jsx("div",{className:"h-full bg-magenta-500 transition-all duration-500 ease-out shadow-[0_0_10px_#ff00ff]",style:{width:`${n.cpu_percentage}%`}})})]})]})};const db="182",b2={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},S2={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},LI=0,VM=1,PI=2,M2=3,UI=0,np=1,Og=2,Xf=3,vc=0,Tr=1,hl=2,gl=0,Jf=1,t_=2,HM=3,jM=4,OI=5,xu=100,zI=101,kI=102,FI=103,BI=104,VI=200,HI=201,jI=202,GI=203,n_=204,i_=205,WI=206,XI=207,qI=208,ZI=209,YI=210,$I=211,KI=212,JI=213,QI=214,s_=0,r_=1,a_=2,rh=3,o_=4,l_=5,c_=6,u_=7,C0=0,eL=1,tL=2,Wa=0,aT=1,oT=2,lT=3,pb=4,cT=5,uT=6,fT=7,GM="attached",nL="detached",mb=300,xl=301,Cu=302,e0=303,t0=304,wp=306,n0=1e3,Kr=1001,i0=1002,Wi=1003,hT=1004,w2=1004,Kd=1005,T2=1005,hi=1006,zg=1007,E2=1007,dl=1008,A2=1008,xr=1009,dT=1010,pT=1011,op=1012,gb=1013,Xa=1014,wr=1015,_l=1016,vb=1017,yb=1018,lp=1020,mT=35902,gT=35899,vT=1021,yT=1022,Js=1023,bl=1026,Su=1027,xb=1028,R0=1029,ah=1030,_b=1031,C2=1032,bb=1033,kg=33776,Fg=33777,Bg=33778,Vg=33779,f_=35840,h_=35841,d_=35842,p_=35843,m_=36196,g_=37492,v_=37496,y_=37488,x_=37489,__=37490,b_=37491,S_=37808,M_=37809,w_=37810,T_=37811,E_=37812,A_=37813,C_=37814,R_=37815,N_=37816,D_=37817,I_=37818,L_=37819,P_=37820,U_=37821,O_=36492,z_=36494,k_=36495,F_=36283,B_=36284,V_=36285,H_=36286,iL=2200,sL=2201,rL=2202,s0=2300,j_=2301,Lx=2302,qf=2400,Zf=2401,r0=2402,Sb=2500,xT=2501,R2=0,N2=1,D2=2,aL=3200,I2=3201,L2=3202,P2=3203,Uu=0,oL=1,fc="",$s="srgb",Ru="srgb-linear",a0="linear",Bn="srgb",U2="",O2="rg",z2="ga",k2=0,Vf=7680,F2=7681,B2=7682,V2=7683,H2=34055,j2=34056,G2=5386,W2=512,X2=513,q2=514,Z2=515,Y2=516,$2=517,K2=518,WM=519,lL=512,cL=513,uL=514,Mb=515,fL=516,hL=517,wb=518,dL=519,o0=35044,J2=35048,Q2=35040,e9=35045,t9=35049,n9=35041,i9=35046,s9=35050,r9=35042,a9="100",XM="300 es",fa=2e3,cp=2001,o9={COMPUTE:"compute",RENDER:"render"},l9={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},c9={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function pL(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const u9={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Jd(n,e){return new u9[n](e)}function mL(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function l0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function gL(){const n=l0("canvas");return n.style.display="block",n}const $C={};let Nu=null;function f9(n){Nu=n}function h9(){return Nu}function c0(...n){const e="THREE."+n.shift();Nu?Nu("log",e,...n):console.log(e,...n)}function ct(...n){const e="THREE."+n.shift();Nu?Nu("warn",e,...n):console.warn(e,...n)}function Rt(...n){const e="THREE."+n.shift();Nu?Nu("error",e,...n):console.error(e,...n)}function up(...n){const e=n.join(" ");e in $C||($C[e]=!0,ct(...n))}function d9(n,e,t){return new Promise(function(i,s){function a(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:s();break;case n.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:i()}}setTimeout(a,t)})}class Sl{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const s=i[e];if(s!==void 0){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let a=0,l=s.length;a<l;a++)s[a].call(this,e);e.target=null}}}const qs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let KC=1234567;const Qf=Math.PI/180,fp=180/Math.PI;function ha(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(qs[n&255]+qs[n>>8&255]+qs[n>>16&255]+qs[n>>24&255]+"-"+qs[e&255]+qs[e>>8&255]+"-"+qs[e>>16&15|64]+qs[e>>24&255]+"-"+qs[t&63|128]+qs[t>>8&255]+"-"+qs[t>>16&255]+qs[t>>24&255]+qs[i&255]+qs[i>>8&255]+qs[i>>16&255]+qs[i>>24&255]).toLowerCase()}function jt(n,e,t){return Math.max(e,Math.min(t,n))}function _T(n,e){return(n%e+e)%e}function p9(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function m9(n,e,t){return n!==e?(t-n)/(e-n):0}function Hg(n,e,t){return(1-t)*n+t*e}function g9(n,e,t,i){return Hg(n,e,1-Math.exp(-t*i))}function v9(n,e=1){return e-Math.abs(_T(n,e*2)-e)}function y9(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function x9(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function _9(n,e){return n+Math.floor(Math.random()*(e-n+1))}function b9(n,e){return n+Math.random()*(e-n)}function S9(n){return n*(.5-Math.random())}function M9(n){n!==void 0&&(KC=n);let e=KC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function w9(n){return n*Qf}function T9(n){return n*fp}function E9(n){return(n&n-1)===0&&n!==0}function A9(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function C9(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function R9(n,e,t,i,s){const a=Math.cos,l=Math.sin,u=a(t/2),d=l(t/2),p=a((e+i)/2),g=l((e+i)/2),y=a((e-i)/2),x=l((e-i)/2),_=a((i-e)/2),w=l((i-e)/2);switch(s){case"XYX":n.set(u*g,d*y,d*x,u*p);break;case"YZY":n.set(d*x,u*g,d*y,u*p);break;case"ZXZ":n.set(d*y,d*x,u*g,u*p);break;case"XZX":n.set(u*g,d*w,d*_,u*p);break;case"YXY":n.set(d*_,u*g,d*w,u*p);break;case"ZYZ":n.set(d*w,d*_,u*g,u*p);break;default:ct("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function _r(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function an(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const vL={DEG2RAD:Qf,RAD2DEG:fp,generateUUID:ha,clamp:jt,euclideanModulo:_T,mapLinear:p9,inverseLerp:m9,lerp:Hg,damp:g9,pingpong:v9,smoothstep:y9,smootherstep:x9,randInt:_9,randFloat:b9,randFloatSpread:S9,seededRandom:M9,degToRad:w9,radToDeg:T9,isPowerOfTwo:E9,ceilPowerOfTwo:A9,floorPowerOfTwo:C9,setQuaternionFromProperEuler:R9,normalize:an,denormalize:_r};class Be{constructor(e=0,t=0){Be.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=jt(this.x,e.x,t.x),this.y=jt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=jt(this.x,e,t),this.y=jt(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(jt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(jt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),a=this.x-e.x,l=this.y-e.y;return this.x=a*i-l*s+e.x,this.y=a*s+l*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Qr{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,a,l,u){let d=i[s+0],p=i[s+1],g=i[s+2],y=i[s+3],x=a[l+0],_=a[l+1],w=a[l+2],A=a[l+3];if(u<=0){e[t+0]=d,e[t+1]=p,e[t+2]=g,e[t+3]=y;return}if(u>=1){e[t+0]=x,e[t+1]=_,e[t+2]=w,e[t+3]=A;return}if(y!==A||d!==x||p!==_||g!==w){let E=d*x+p*_+g*w+y*A;E<0&&(x=-x,_=-_,w=-w,A=-A,E=-E);let M=1-u;if(E<.9995){const D=Math.acos(E),L=Math.sin(D);M=Math.sin(M*D)/L,u=Math.sin(u*D)/L,d=d*M+x*u,p=p*M+_*u,g=g*M+w*u,y=y*M+A*u}else{d=d*M+x*u,p=p*M+_*u,g=g*M+w*u,y=y*M+A*u;const D=1/Math.sqrt(d*d+p*p+g*g+y*y);d*=D,p*=D,g*=D,y*=D}}e[t]=d,e[t+1]=p,e[t+2]=g,e[t+3]=y}static multiplyQuaternionsFlat(e,t,i,s,a,l){const u=i[s],d=i[s+1],p=i[s+2],g=i[s+3],y=a[l],x=a[l+1],_=a[l+2],w=a[l+3];return e[t]=u*w+g*y+d*_-p*x,e[t+1]=d*w+g*x+p*y-u*_,e[t+2]=p*w+g*_+u*x-d*y,e[t+3]=g*w-u*y-d*x-p*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,s=e._y,a=e._z,l=e._order,u=Math.cos,d=Math.sin,p=u(i/2),g=u(s/2),y=u(a/2),x=d(i/2),_=d(s/2),w=d(a/2);switch(l){case"XYZ":this._x=x*g*y+p*_*w,this._y=p*_*y-x*g*w,this._z=p*g*w+x*_*y,this._w=p*g*y-x*_*w;break;case"YXZ":this._x=x*g*y+p*_*w,this._y=p*_*y-x*g*w,this._z=p*g*w-x*_*y,this._w=p*g*y+x*_*w;break;case"ZXY":this._x=x*g*y-p*_*w,this._y=p*_*y+x*g*w,this._z=p*g*w+x*_*y,this._w=p*g*y-x*_*w;break;case"ZYX":this._x=x*g*y-p*_*w,this._y=p*_*y+x*g*w,this._z=p*g*w-x*_*y,this._w=p*g*y+x*_*w;break;case"YZX":this._x=x*g*y+p*_*w,this._y=p*_*y+x*g*w,this._z=p*g*w-x*_*y,this._w=p*g*y-x*_*w;break;case"XZY":this._x=x*g*y-p*_*w,this._y=p*_*y-x*g*w,this._z=p*g*w+x*_*y,this._w=p*g*y+x*_*w;break;default:ct("Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],a=t[8],l=t[1],u=t[5],d=t[9],p=t[2],g=t[6],y=t[10],x=i+u+y;if(x>0){const _=.5/Math.sqrt(x+1);this._w=.25/_,this._x=(g-d)*_,this._y=(a-p)*_,this._z=(l-s)*_}else if(i>u&&i>y){const _=2*Math.sqrt(1+i-u-y);this._w=(g-d)/_,this._x=.25*_,this._y=(s+l)/_,this._z=(a+p)/_}else if(u>y){const _=2*Math.sqrt(1+u-i-y);this._w=(a-p)/_,this._x=(s+l)/_,this._y=.25*_,this._z=(d+g)/_}else{const _=2*Math.sqrt(1+y-i-u);this._w=(l-s)/_,this._x=(a+p)/_,this._y=(d+g)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(jt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,a=e._z,l=e._w,u=t._x,d=t._y,p=t._z,g=t._w;return this._x=i*g+l*u+s*p-a*d,this._y=s*g+l*d+a*u-i*p,this._z=a*g+l*p+i*d-s*u,this._w=l*g-i*u-s*d-a*p,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let i=e._x,s=e._y,a=e._z,l=e._w,u=this.dot(e);u<0&&(i=-i,s=-s,a=-a,l=-l,u=-u);let d=1-t;if(u<.9995){const p=Math.acos(u),g=Math.sin(p);d=Math.sin(d*p)/g,t=Math.sin(t*p)/g,this._x=this._x*d+i*t,this._y=this._y*d+s*t,this._z=this._z*d+a*t,this._w=this._w*d+l*t,this._onChangeCallback()}else this._x=this._x*d+i*t,this._y=this._y*d+s*t,this._z=this._z*d+a*t,this._w=this._w*d+l*t,this.normalize();return this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Y{constructor(e=0,t=0,i=0){Y.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(JC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(JC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6]*s,this.y=a[1]*t+a[4]*i+a[7]*s,this.z=a[2]*t+a[5]*i+a[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,a=e.elements,l=1/(a[3]*t+a[7]*i+a[11]*s+a[15]);return this.x=(a[0]*t+a[4]*i+a[8]*s+a[12])*l,this.y=(a[1]*t+a[5]*i+a[9]*s+a[13])*l,this.z=(a[2]*t+a[6]*i+a[10]*s+a[14])*l,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,a=e.x,l=e.y,u=e.z,d=e.w,p=2*(l*s-u*i),g=2*(u*t-a*s),y=2*(a*i-l*t);return this.x=t+d*p+l*y-u*g,this.y=i+d*g+u*p-a*y,this.z=s+d*y+a*g-l*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*s,this.y=a[1]*t+a[5]*i+a[9]*s,this.z=a[2]*t+a[6]*i+a[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=jt(this.x,e.x,t.x),this.y=jt(this.y,e.y,t.y),this.z=jt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=jt(this.x,e,t),this.y=jt(this.y,e,t),this.z=jt(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(jt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,a=e.z,l=t.x,u=t.y,d=t.z;return this.x=s*d-a*u,this.y=a*l-i*d,this.z=i*u-s*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return r1.copy(this).projectOnVector(e),this.sub(r1)}reflect(e){return this.sub(r1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(jt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const r1=new Y,JC=new Qr;class en{constructor(e,t,i,s,a,l,u,d,p){en.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,s,a,l,u,d,p)}set(e,t,i,s,a,l,u,d,p){const g=this.elements;return g[0]=e,g[1]=s,g[2]=u,g[3]=t,g[4]=a,g[5]=d,g[6]=i,g[7]=l,g[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,a=this.elements,l=i[0],u=i[3],d=i[6],p=i[1],g=i[4],y=i[7],x=i[2],_=i[5],w=i[8],A=s[0],E=s[3],M=s[6],D=s[1],L=s[4],N=s[7],P=s[2],z=s[5],B=s[8];return a[0]=l*A+u*D+d*P,a[3]=l*E+u*L+d*z,a[6]=l*M+u*N+d*B,a[1]=p*A+g*D+y*P,a[4]=p*E+g*L+y*z,a[7]=p*M+g*N+y*B,a[2]=x*A+_*D+w*P,a[5]=x*E+_*L+w*z,a[8]=x*M+_*N+w*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],a=e[3],l=e[4],u=e[5],d=e[6],p=e[7],g=e[8];return t*l*g-t*u*p-i*a*g+i*u*d+s*a*p-s*l*d}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],a=e[3],l=e[4],u=e[5],d=e[6],p=e[7],g=e[8],y=g*l-u*p,x=u*d-g*a,_=p*a-l*d,w=t*y+i*x+s*_;if(w===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/w;return e[0]=y*A,e[1]=(s*p-g*i)*A,e[2]=(u*i-s*l)*A,e[3]=x*A,e[4]=(g*t-s*d)*A,e[5]=(s*a-u*t)*A,e[6]=_*A,e[7]=(i*d-p*t)*A,e[8]=(l*t-i*a)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,a,l,u){const d=Math.cos(a),p=Math.sin(a);return this.set(i*d,i*p,-i*(d*l+p*u)+l+e,-s*p,s*d,-s*(-p*l+d*u)+u+t,0,0,1),this}scale(e,t){return this.premultiply(a1.makeScale(e,t)),this}rotate(e){return this.premultiply(a1.makeRotation(-e)),this}translate(e,t){return this.premultiply(a1.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const a1=new en,QC=new en().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),e3=new en().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function N9(){const n={enabled:!0,workingColorSpace:Ru,spaces:{},convert:function(s,a,l){return this.enabled===!1||a===l||!a||!l||(this.spaces[a].transfer===Bn&&(s.r=mc(s.r),s.g=mc(s.g),s.b=mc(s.b)),this.spaces[a].primaries!==this.spaces[l].primaries&&(s.applyMatrix3(this.spaces[a].toXYZ),s.applyMatrix3(this.spaces[l].fromXYZ)),this.spaces[l].transfer===Bn&&(s.r=ip(s.r),s.g=ip(s.g),s.b=ip(s.b))),s},workingToColorSpace:function(s,a){return this.convert(s,this.workingColorSpace,a)},colorSpaceToWorking:function(s,a){return this.convert(s,a,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===fc?a0:this.spaces[s].transfer},getToneMappingMode:function(s){return this.spaces[s].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(s,a=this.workingColorSpace){return s.fromArray(this.spaces[a].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,a,l){return s.copy(this.spaces[a].toXYZ).multiply(this.spaces[l].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(s,a){return up("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(s,a)},toWorkingColorSpace:function(s,a){return up("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(s,a)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Ru]:{primaries:e,whitePoint:i,transfer:a0,toXYZ:QC,fromXYZ:e3,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:$s},outputColorSpaceConfig:{drawingBufferColorSpace:$s}},[$s]:{primaries:e,whitePoint:i,transfer:Bn,toXYZ:QC,fromXYZ:e3,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:$s}}}),n}const Tn=N9();function mc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function ip(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let bd;class yL{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{bd===void 0&&(bd=l0("canvas")),bd.width=e.width,bd.height=e.height;const s=bd.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),i=bd}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=l0("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),a=s.data;for(let l=0;l<a.length;l++)a[l]=mc(a[l]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(mc(t[i]/255)*255):t[i]=mc(t[i]);return{data:t,width:e.width,height:e.height}}else return ct("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let D9=0;class Mu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:D9++}),this.uuid=ha(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let a;if(Array.isArray(s)){a=[];for(let l=0,u=s.length;l<u;l++)s[l].isDataTexture?a.push(o1(s[l].image)):a.push(o1(s[l]))}else a=o1(s);i.url=a}return t||(e.images[this.uuid]=i),i}}function o1(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?yL.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(ct("Texture: Unable to serialize Texture."),{})}let I9=0;const l1=new Y;class Oi extends Sl{constructor(e=Oi.DEFAULT_IMAGE,t=Oi.DEFAULT_MAPPING,i=Kr,s=Kr,a=hi,l=dl,u=Js,d=xr,p=Oi.DEFAULT_ANISOTROPY,g=fc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:I9++}),this.uuid=ha(),this.name="",this.source=new Mu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=a,this.minFilter=l,this.anisotropy=p,this.format=u,this.internalFormat=null,this.type=d,this.offset=new Be(0,0),this.repeat=new Be(1,1),this.center=new Be(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new en,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=g,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(l1).x}get height(){return this.source.getSize(l1).y}get depth(){return this.source.getSize(l1).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){ct(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){ct(`Texture.setValues(): property '${t}' does not exist.`);continue}s&&i&&s.isVector2&&i.isVector2||s&&i&&s.isVector3&&i.isVector3||s&&i&&s.isMatrix3&&i.isMatrix3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==mb)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case n0:e.x=e.x-Math.floor(e.x);break;case Kr:e.x=e.x<0?0:1;break;case i0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case n0:e.y=e.y-Math.floor(e.y);break;case Kr:e.y=e.y<0?0:1;break;case i0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Oi.DEFAULT_IMAGE=null;Oi.DEFAULT_MAPPING=mb;Oi.DEFAULT_ANISOTROPY=1;class Jn{constructor(e=0,t=0,i=0,s=1){Jn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,a=this.w,l=e.elements;return this.x=l[0]*t+l[4]*i+l[8]*s+l[12]*a,this.y=l[1]*t+l[5]*i+l[9]*s+l[13]*a,this.z=l[2]*t+l[6]*i+l[10]*s+l[14]*a,this.w=l[3]*t+l[7]*i+l[11]*s+l[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,a;const d=e.elements,p=d[0],g=d[4],y=d[8],x=d[1],_=d[5],w=d[9],A=d[2],E=d[6],M=d[10];if(Math.abs(g-x)<.01&&Math.abs(y-A)<.01&&Math.abs(w-E)<.01){if(Math.abs(g+x)<.1&&Math.abs(y+A)<.1&&Math.abs(w+E)<.1&&Math.abs(p+_+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const L=(p+1)/2,N=(_+1)/2,P=(M+1)/2,z=(g+x)/4,B=(y+A)/4,V=(w+E)/4;return L>N&&L>P?L<.01?(i=0,s=.707106781,a=.707106781):(i=Math.sqrt(L),s=z/i,a=B/i):N>P?N<.01?(i=.707106781,s=0,a=.707106781):(s=Math.sqrt(N),i=z/s,a=V/s):P<.01?(i=.707106781,s=.707106781,a=0):(a=Math.sqrt(P),i=B/a,s=V/a),this.set(i,s,a,t),this}let D=Math.sqrt((E-w)*(E-w)+(y-A)*(y-A)+(x-g)*(x-g));return Math.abs(D)<.001&&(D=1),this.x=(E-w)/D,this.y=(y-A)/D,this.z=(x-g)/D,this.w=Math.acos((p+_+M-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=jt(this.x,e.x,t.x),this.y=jt(this.y,e.y,t.y),this.z=jt(this.z,e.z,t.z),this.w=jt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=jt(this.x,e,t),this.y=jt(this.y,e,t),this.z=jt(this.z,e,t),this.w=jt(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(jt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class bT extends Sl{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:hi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new Jn(0,0,e,t),this.scissorTest=!1,this.viewport=new Jn(0,0,e,t);const s={width:e,height:t,depth:i.depth},a=new Oi(s);this.textures=[];const l=i.count;for(let u=0;u<l;u++)this.textures[u]=a.clone(),this.textures[u].isRenderTargetTexture=!0,this.textures[u].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:hi,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let s=0,a=this.textures.length;s<a;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=i,this.textures[s].isData3DTexture!==!0&&(this.textures[s].isArrayTexture=this.textures[s].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const s=Object.assign({},e.textures[t].image);this.textures[t].source=new Mu(s)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class da extends bT{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Tb extends Oi{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=Wi,this.minFilter=Wi,this.wrapR=Kr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class L9 extends da{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Tb(null,e,t,i),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class Eb extends Oi{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=Wi,this.minFilter=Wi,this.wrapR=Kr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class P9 extends da{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Eb(null,e,t,i),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class Qs{constructor(e=new Y(1/0,1/0,1/0),t=new Y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(_o.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(_o.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=_o.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let l=0,u=a.count;l<u;l++)e.isMesh===!0?e.getVertexPosition(l,_o):_o.fromBufferAttribute(a,l),_o.applyMatrix4(e.matrixWorld),this.expandByPoint(_o);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Iy.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Iy.copy(i.boundingBox)),Iy.applyMatrix4(e.matrixWorld),this.union(Iy)}const s=e.children;for(let a=0,l=s.length;a<l;a++)this.expandByObject(s[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,_o),_o.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ag),Ly.subVectors(this.max,ag),Sd.subVectors(e.a,ag),Md.subVectors(e.b,ag),wd.subVectors(e.c,ag),cu.subVectors(Md,Sd),uu.subVectors(wd,Md),Ef.subVectors(Sd,wd);let t=[0,-cu.z,cu.y,0,-uu.z,uu.y,0,-Ef.z,Ef.y,cu.z,0,-cu.x,uu.z,0,-uu.x,Ef.z,0,-Ef.x,-cu.y,cu.x,0,-uu.y,uu.x,0,-Ef.y,Ef.x,0];return!c1(t,Sd,Md,wd,Ly)||(t=[1,0,0,0,1,0,0,0,1],!c1(t,Sd,Md,wd,Ly))?!1:(Py.crossVectors(cu,uu),t=[Py.x,Py.y,Py.z],c1(t,Sd,Md,wd,Ly))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,_o).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(_o).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(sc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),sc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),sc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),sc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),sc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),sc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),sc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),sc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(sc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const sc=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],_o=new Y,Iy=new Qs,Sd=new Y,Md=new Y,wd=new Y,cu=new Y,uu=new Y,Ef=new Y,ag=new Y,Ly=new Y,Py=new Y,Af=new Y;function c1(n,e,t,i,s){for(let a=0,l=n.length-3;a<=l;a+=3){Af.fromArray(n,a);const u=s.x*Math.abs(Af.x)+s.y*Math.abs(Af.y)+s.z*Math.abs(Af.z),d=e.dot(Af),p=t.dot(Af),g=i.dot(Af);if(Math.max(-Math.max(d,p,g),Math.min(d,p,g))>u)return!1}return!0}const U9=new Qs,og=new Y,u1=new Y;class Ls{constructor(e=new Y,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):U9.setFromPoints(e).getCenter(i);let s=0;for(let a=0,l=e.length;a<l;a++)s=Math.max(s,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;og.subVectors(e,this.center);const t=og.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.addScaledVector(og,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(u1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(og.copy(e.center).add(u1)),this.expandByPoint(og.copy(e.center).sub(u1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const rc=new Y,f1=new Y,Uy=new Y,fu=new Y,h1=new Y,Oy=new Y,d1=new Y;class Tp{constructor(e=new Y,t=new Y(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,rc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=rc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(rc.copy(this.origin).addScaledVector(this.direction,t),rc.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){f1.copy(e).add(t).multiplyScalar(.5),Uy.copy(t).sub(e).normalize(),fu.copy(this.origin).sub(f1);const a=e.distanceTo(t)*.5,l=-this.direction.dot(Uy),u=fu.dot(this.direction),d=-fu.dot(Uy),p=fu.lengthSq(),g=Math.abs(1-l*l);let y,x,_,w;if(g>0)if(y=l*d-u,x=l*u-d,w=a*g,y>=0)if(x>=-w)if(x<=w){const A=1/g;y*=A,x*=A,_=y*(y+l*x+2*u)+x*(l*y+x+2*d)+p}else x=a,y=Math.max(0,-(l*x+u)),_=-y*y+x*(x+2*d)+p;else x=-a,y=Math.max(0,-(l*x+u)),_=-y*y+x*(x+2*d)+p;else x<=-w?(y=Math.max(0,-(-l*a+u)),x=y>0?-a:Math.min(Math.max(-a,-d),a),_=-y*y+x*(x+2*d)+p):x<=w?(y=0,x=Math.min(Math.max(-a,-d),a),_=x*(x+2*d)+p):(y=Math.max(0,-(l*a+u)),x=y>0?a:Math.min(Math.max(-a,-d),a),_=-y*y+x*(x+2*d)+p);else x=l>0?-a:a,y=Math.max(0,-(l*x+u)),_=-y*y+x*(x+2*d)+p;return i&&i.copy(this.origin).addScaledVector(this.direction,y),s&&s.copy(f1).addScaledVector(Uy,x),_}intersectSphere(e,t){rc.subVectors(e.center,this.origin);const i=rc.dot(this.direction),s=rc.dot(rc)-i*i,a=e.radius*e.radius;if(s>a)return null;const l=Math.sqrt(a-s),u=i-l,d=i+l;return d<0?null:u<0?this.at(d,t):this.at(u,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,a,l,u,d;const p=1/this.direction.x,g=1/this.direction.y,y=1/this.direction.z,x=this.origin;return p>=0?(i=(e.min.x-x.x)*p,s=(e.max.x-x.x)*p):(i=(e.max.x-x.x)*p,s=(e.min.x-x.x)*p),g>=0?(a=(e.min.y-x.y)*g,l=(e.max.y-x.y)*g):(a=(e.max.y-x.y)*g,l=(e.min.y-x.y)*g),i>l||a>s||((a>i||isNaN(i))&&(i=a),(l<s||isNaN(s))&&(s=l),y>=0?(u=(e.min.z-x.z)*y,d=(e.max.z-x.z)*y):(u=(e.max.z-x.z)*y,d=(e.min.z-x.z)*y),i>d||u>s)||((u>i||i!==i)&&(i=u),(d<s||s!==s)&&(s=d),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,rc)!==null}intersectTriangle(e,t,i,s,a){h1.subVectors(t,e),Oy.subVectors(i,e),d1.crossVectors(h1,Oy);let l=this.direction.dot(d1),u;if(l>0){if(s)return null;u=1}else if(l<0)u=-1,l=-l;else return null;fu.subVectors(this.origin,e);const d=u*this.direction.dot(Oy.crossVectors(fu,Oy));if(d<0)return null;const p=u*this.direction.dot(h1.cross(fu));if(p<0||d+p>l)return null;const g=-u*fu.dot(d1);return g<0?null:this.at(g/l,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Wt{constructor(e,t,i,s,a,l,u,d,p,g,y,x,_,w,A,E){Wt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,s,a,l,u,d,p,g,y,x,_,w,A,E)}set(e,t,i,s,a,l,u,d,p,g,y,x,_,w,A,E){const M=this.elements;return M[0]=e,M[4]=t,M[8]=i,M[12]=s,M[1]=a,M[5]=l,M[9]=u,M[13]=d,M[2]=p,M[6]=g,M[10]=y,M[14]=x,M[3]=_,M[7]=w,M[11]=A,M[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Wt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),i.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,i=e.elements,s=1/Td.setFromMatrixColumn(e,0).length(),a=1/Td.setFromMatrixColumn(e,1).length(),l=1/Td.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*a,t[5]=i[5]*a,t[6]=i[6]*a,t[7]=0,t[8]=i[8]*l,t[9]=i[9]*l,t[10]=i[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,a=e.z,l=Math.cos(i),u=Math.sin(i),d=Math.cos(s),p=Math.sin(s),g=Math.cos(a),y=Math.sin(a);if(e.order==="XYZ"){const x=l*g,_=l*y,w=u*g,A=u*y;t[0]=d*g,t[4]=-d*y,t[8]=p,t[1]=_+w*p,t[5]=x-A*p,t[9]=-u*d,t[2]=A-x*p,t[6]=w+_*p,t[10]=l*d}else if(e.order==="YXZ"){const x=d*g,_=d*y,w=p*g,A=p*y;t[0]=x+A*u,t[4]=w*u-_,t[8]=l*p,t[1]=l*y,t[5]=l*g,t[9]=-u,t[2]=_*u-w,t[6]=A+x*u,t[10]=l*d}else if(e.order==="ZXY"){const x=d*g,_=d*y,w=p*g,A=p*y;t[0]=x-A*u,t[4]=-l*y,t[8]=w+_*u,t[1]=_+w*u,t[5]=l*g,t[9]=A-x*u,t[2]=-l*p,t[6]=u,t[10]=l*d}else if(e.order==="ZYX"){const x=l*g,_=l*y,w=u*g,A=u*y;t[0]=d*g,t[4]=w*p-_,t[8]=x*p+A,t[1]=d*y,t[5]=A*p+x,t[9]=_*p-w,t[2]=-p,t[6]=u*d,t[10]=l*d}else if(e.order==="YZX"){const x=l*d,_=l*p,w=u*d,A=u*p;t[0]=d*g,t[4]=A-x*y,t[8]=w*y+_,t[1]=y,t[5]=l*g,t[9]=-u*g,t[2]=-p*g,t[6]=_*y+w,t[10]=x-A*y}else if(e.order==="XZY"){const x=l*d,_=l*p,w=u*d,A=u*p;t[0]=d*g,t[4]=-y,t[8]=p*g,t[1]=x*y+A,t[5]=l*g,t[9]=_*y-w,t[2]=w*y-_,t[6]=u*g,t[10]=A*y+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(O9,e,z9)}lookAt(e,t,i){const s=this.elements;return ca.subVectors(e,t),ca.lengthSq()===0&&(ca.z=1),ca.normalize(),hu.crossVectors(i,ca),hu.lengthSq()===0&&(Math.abs(i.z)===1?ca.x+=1e-4:ca.z+=1e-4,ca.normalize(),hu.crossVectors(i,ca)),hu.normalize(),zy.crossVectors(ca,hu),s[0]=hu.x,s[4]=zy.x,s[8]=ca.x,s[1]=hu.y,s[5]=zy.y,s[9]=ca.y,s[2]=hu.z,s[6]=zy.z,s[10]=ca.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,a=this.elements,l=i[0],u=i[4],d=i[8],p=i[12],g=i[1],y=i[5],x=i[9],_=i[13],w=i[2],A=i[6],E=i[10],M=i[14],D=i[3],L=i[7],N=i[11],P=i[15],z=s[0],B=s[4],V=s[8],O=s[12],F=s[1],W=s[5],ee=s[9],J=s[13],ae=s[2],he=s[6],Z=s[10],K=s[14],le=s[3],Ee=s[7],Re=s[11],q=s[15];return a[0]=l*z+u*F+d*ae+p*le,a[4]=l*B+u*W+d*he+p*Ee,a[8]=l*V+u*ee+d*Z+p*Re,a[12]=l*O+u*J+d*K+p*q,a[1]=g*z+y*F+x*ae+_*le,a[5]=g*B+y*W+x*he+_*Ee,a[9]=g*V+y*ee+x*Z+_*Re,a[13]=g*O+y*J+x*K+_*q,a[2]=w*z+A*F+E*ae+M*le,a[6]=w*B+A*W+E*he+M*Ee,a[10]=w*V+A*ee+E*Z+M*Re,a[14]=w*O+A*J+E*K+M*q,a[3]=D*z+L*F+N*ae+P*le,a[7]=D*B+L*W+N*he+P*Ee,a[11]=D*V+L*ee+N*Z+P*Re,a[15]=D*O+L*J+N*K+P*q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],a=e[12],l=e[1],u=e[5],d=e[9],p=e[13],g=e[2],y=e[6],x=e[10],_=e[14],w=e[3],A=e[7],E=e[11],M=e[15],D=d*_-p*x,L=u*_-p*y,N=u*x-d*y,P=l*_-p*g,z=l*x-d*g,B=l*y-u*g;return t*(A*D-E*L+M*N)-i*(w*D-E*P+M*z)+s*(w*L-A*P+M*B)-a*(w*N-A*z+E*B)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],a=e[3],l=e[4],u=e[5],d=e[6],p=e[7],g=e[8],y=e[9],x=e[10],_=e[11],w=e[12],A=e[13],E=e[14],M=e[15],D=y*E*p-A*x*p+A*d*_-u*E*_-y*d*M+u*x*M,L=w*x*p-g*E*p-w*d*_+l*E*_+g*d*M-l*x*M,N=g*A*p-w*y*p+w*u*_-l*A*_-g*u*M+l*y*M,P=w*y*d-g*A*d-w*u*x+l*A*x+g*u*E-l*y*E,z=t*D+i*L+s*N+a*P;if(z===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/z;return e[0]=D*B,e[1]=(A*x*a-y*E*a-A*s*_+i*E*_+y*s*M-i*x*M)*B,e[2]=(u*E*a-A*d*a+A*s*p-i*E*p-u*s*M+i*d*M)*B,e[3]=(y*d*a-u*x*a-y*s*p+i*x*p+u*s*_-i*d*_)*B,e[4]=L*B,e[5]=(g*E*a-w*x*a+w*s*_-t*E*_-g*s*M+t*x*M)*B,e[6]=(w*d*a-l*E*a-w*s*p+t*E*p+l*s*M-t*d*M)*B,e[7]=(l*x*a-g*d*a+g*s*p-t*x*p-l*s*_+t*d*_)*B,e[8]=N*B,e[9]=(w*y*a-g*A*a-w*i*_+t*A*_+g*i*M-t*y*M)*B,e[10]=(l*A*a-w*u*a+w*i*p-t*A*p-l*i*M+t*u*M)*B,e[11]=(g*u*a-l*y*a-g*i*p+t*y*p+l*i*_-t*u*_)*B,e[12]=P*B,e[13]=(g*A*s-w*y*s+w*i*x-t*A*x-g*i*E+t*y*E)*B,e[14]=(w*u*s-l*A*s-w*i*d+t*A*d+l*i*E-t*u*E)*B,e[15]=(l*y*s-g*u*s+g*i*d-t*y*d-l*i*x+t*u*x)*B,this}scale(e){const t=this.elements,i=e.x,s=e.y,a=e.z;return t[0]*=i,t[4]*=s,t[8]*=a,t[1]*=i,t[5]*=s,t[9]*=a,t[2]*=i,t[6]*=s,t[10]*=a,t[3]*=i,t[7]*=s,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),a=1-i,l=e.x,u=e.y,d=e.z,p=a*l,g=a*u;return this.set(p*l+i,p*u-s*d,p*d+s*u,0,p*u+s*d,g*u+i,g*d-s*l,0,p*d-s*u,g*d+s*l,a*d*d+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,a,l){return this.set(1,i,a,0,e,1,l,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,a=t._x,l=t._y,u=t._z,d=t._w,p=a+a,g=l+l,y=u+u,x=a*p,_=a*g,w=a*y,A=l*g,E=l*y,M=u*y,D=d*p,L=d*g,N=d*y,P=i.x,z=i.y,B=i.z;return s[0]=(1-(A+M))*P,s[1]=(_+N)*P,s[2]=(w-L)*P,s[3]=0,s[4]=(_-N)*z,s[5]=(1-(x+M))*z,s[6]=(E+D)*z,s[7]=0,s[8]=(w+L)*B,s[9]=(E-D)*B,s[10]=(1-(x+A))*B,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;if(e.x=s[12],e.y=s[13],e.z=s[14],this.determinant()===0)return i.set(1,1,1),t.identity(),this;let a=Td.set(s[0],s[1],s[2]).length();const l=Td.set(s[4],s[5],s[6]).length(),u=Td.set(s[8],s[9],s[10]).length();this.determinant()<0&&(a=-a),bo.copy(this);const p=1/a,g=1/l,y=1/u;return bo.elements[0]*=p,bo.elements[1]*=p,bo.elements[2]*=p,bo.elements[4]*=g,bo.elements[5]*=g,bo.elements[6]*=g,bo.elements[8]*=y,bo.elements[9]*=y,bo.elements[10]*=y,t.setFromRotationMatrix(bo),i.x=a,i.y=l,i.z=u,this}makePerspective(e,t,i,s,a,l,u=fa,d=!1){const p=this.elements,g=2*a/(t-e),y=2*a/(i-s),x=(t+e)/(t-e),_=(i+s)/(i-s);let w,A;if(d)w=a/(l-a),A=l*a/(l-a);else if(u===fa)w=-(l+a)/(l-a),A=-2*l*a/(l-a);else if(u===cp)w=-l/(l-a),A=-l*a/(l-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return p[0]=g,p[4]=0,p[8]=x,p[12]=0,p[1]=0,p[5]=y,p[9]=_,p[13]=0,p[2]=0,p[6]=0,p[10]=w,p[14]=A,p[3]=0,p[7]=0,p[11]=-1,p[15]=0,this}makeOrthographic(e,t,i,s,a,l,u=fa,d=!1){const p=this.elements,g=2/(t-e),y=2/(i-s),x=-(t+e)/(t-e),_=-(i+s)/(i-s);let w,A;if(d)w=1/(l-a),A=l/(l-a);else if(u===fa)w=-2/(l-a),A=-(l+a)/(l-a);else if(u===cp)w=-1/(l-a),A=-a/(l-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return p[0]=g,p[4]=0,p[8]=0,p[12]=x,p[1]=0,p[5]=y,p[9]=0,p[13]=_,p[2]=0,p[6]=0,p[10]=w,p[14]=A,p[3]=0,p[7]=0,p[11]=0,p[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Td=new Y,bo=new Wt,O9=new Y(0,0,0),z9=new Y(1,1,1),hu=new Y,zy=new Y,ca=new Y,t3=new Wt,n3=new Qr;class pa{constructor(e=0,t=0,i=0,s=pa.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,a=s[0],l=s[4],u=s[8],d=s[1],p=s[5],g=s[9],y=s[2],x=s[6],_=s[10];switch(t){case"XYZ":this._y=Math.asin(jt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-g,_),this._z=Math.atan2(-l,a)):(this._x=Math.atan2(x,p),this._z=0);break;case"YXZ":this._x=Math.asin(-jt(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(u,_),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-y,a),this._z=0);break;case"ZXY":this._x=Math.asin(jt(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-y,_),this._z=Math.atan2(-l,p)):(this._y=0,this._z=Math.atan2(d,a));break;case"ZYX":this._y=Math.asin(-jt(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(x,_),this._z=Math.atan2(d,a)):(this._x=0,this._z=Math.atan2(-l,p));break;case"YZX":this._z=Math.asin(jt(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-g,p),this._y=Math.atan2(-y,a)):(this._x=0,this._y=Math.atan2(u,_));break;case"XZY":this._z=Math.asin(-jt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(x,p),this._y=Math.atan2(u,a)):(this._x=Math.atan2(-g,_),this._y=0);break;default:ct("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return t3.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t3,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return n3.setFromEuler(this),this.setFromQuaternion(n3,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}pa.DEFAULT_ORDER="XYZ";class hp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let k9=0;const i3=new Y,Ed=new Qr,ac=new Wt,ky=new Y,lg=new Y,F9=new Y,B9=new Qr,s3=new Y(1,0,0),r3=new Y(0,1,0),a3=new Y(0,0,1),o3={type:"added"},V9={type:"removed"},Ad={type:"childadded",child:null},p1={type:"childremoved",child:null};class Dn extends Sl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:k9++}),this.uuid=ha(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Dn.DEFAULT_UP.clone();const e=new Y,t=new pa,i=new Qr,s=new Y(1,1,1);function a(){i.setFromEuler(t,!1)}function l(){t.setFromQuaternion(i,void 0,!1)}t._onChange(a),i._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Wt},normalMatrix:{value:new en}}),this.matrix=new Wt,this.matrixWorld=new Wt,this.matrixAutoUpdate=Dn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new hp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ed.setFromAxisAngle(e,t),this.quaternion.multiply(Ed),this}rotateOnWorldAxis(e,t){return Ed.setFromAxisAngle(e,t),this.quaternion.premultiply(Ed),this}rotateX(e){return this.rotateOnAxis(s3,e)}rotateY(e){return this.rotateOnAxis(r3,e)}rotateZ(e){return this.rotateOnAxis(a3,e)}translateOnAxis(e,t){return i3.copy(e).applyQuaternion(this.quaternion),this.position.add(i3.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(s3,e)}translateY(e){return this.translateOnAxis(r3,e)}translateZ(e){return this.translateOnAxis(a3,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ac.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?ky.copy(e):ky.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),lg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ac.lookAt(lg,ky,this.up):ac.lookAt(ky,lg,this.up),this.quaternion.setFromRotationMatrix(ac),s&&(ac.extractRotation(s.matrixWorld),Ed.setFromRotationMatrix(ac),this.quaternion.premultiply(Ed.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(Rt("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(o3),Ad.child=e,this.dispatchEvent(Ad),Ad.child=null):Rt("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(V9),p1.child=e,this.dispatchEvent(p1),p1.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ac.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ac.multiply(e.parent.matrixWorld)),e.applyMatrix4(ac),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(o3),Ad.child=e,this.dispatchEvent(Ad),Ad.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const l=this.children[i].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const s=this.children;for(let a=0,l=s.length;a<l;a++)s[a].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(lg,e,F9),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(lg,B9,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let a=0,l=s.length;a<l;a++)s[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(u=>({...u,boundingBox:u.boundingBox?u.boundingBox.toJSON():void 0,boundingSphere:u.boundingSphere?u.boundingSphere.toJSON():void 0})),s.instanceInfo=this._instanceInfo.map(u=>({...u})),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(e),s.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(s.boundingBox=this.boundingBox.toJSON()));function a(u,d){return u[d.uuid]===void 0&&(u[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=a(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const d=u.shapes;if(Array.isArray(d))for(let p=0,g=d.length;p<g;p++){const y=d[p];a(e.shapes,y)}else a(e.shapes,d)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let d=0,p=this.material.length;d<p;d++)u.push(a(e.materials,this.material[d]));s.material=u}else s.material=a(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const d=this.animations[u];s.animations.push(a(e.animations,d))}}if(t){const u=l(e.geometries),d=l(e.materials),p=l(e.textures),g=l(e.images),y=l(e.shapes),x=l(e.skeletons),_=l(e.animations),w=l(e.nodes);u.length>0&&(i.geometries=u),d.length>0&&(i.materials=d),p.length>0&&(i.textures=p),g.length>0&&(i.images=g),y.length>0&&(i.shapes=y),x.length>0&&(i.skeletons=x),_.length>0&&(i.animations=_),w.length>0&&(i.nodes=w)}return i.object=s,i;function l(u){const d=[];for(const p in u){const g=u[p];delete g.metadata,d.push(g)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}Dn.DEFAULT_UP=new Y(0,1,0);Dn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const So=new Y,oc=new Y,m1=new Y,lc=new Y,Cd=new Y,Rd=new Y,l3=new Y,g1=new Y,v1=new Y,y1=new Y,x1=new Jn,_1=new Jn,b1=new Jn;class $r{constructor(e=new Y,t=new Y,i=new Y){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),So.subVectors(e,t),s.cross(So);const a=s.lengthSq();return a>0?s.multiplyScalar(1/Math.sqrt(a)):s.set(0,0,0)}static getBarycoord(e,t,i,s,a){So.subVectors(s,t),oc.subVectors(i,t),m1.subVectors(e,t);const l=So.dot(So),u=So.dot(oc),d=So.dot(m1),p=oc.dot(oc),g=oc.dot(m1),y=l*p-u*u;if(y===0)return a.set(0,0,0),null;const x=1/y,_=(p*d-u*g)*x,w=(l*g-u*d)*x;return a.set(1-_-w,w,_)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,lc)===null?!1:lc.x>=0&&lc.y>=0&&lc.x+lc.y<=1}static getInterpolation(e,t,i,s,a,l,u,d){return this.getBarycoord(e,t,i,s,lc)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(a,lc.x),d.addScaledVector(l,lc.y),d.addScaledVector(u,lc.z),d)}static getInterpolatedAttribute(e,t,i,s,a,l){return x1.setScalar(0),_1.setScalar(0),b1.setScalar(0),x1.fromBufferAttribute(e,t),_1.fromBufferAttribute(e,i),b1.fromBufferAttribute(e,s),l.setScalar(0),l.addScaledVector(x1,a.x),l.addScaledVector(_1,a.y),l.addScaledVector(b1,a.z),l}static isFrontFacing(e,t,i,s){return So.subVectors(i,t),oc.subVectors(e,t),So.cross(oc).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return So.subVectors(this.c,this.b),oc.subVectors(this.a,this.b),So.cross(oc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return $r.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return $r.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,s,a){return $r.getInterpolation(e,this.a,this.b,this.c,t,i,s,a)}containsPoint(e){return $r.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return $r.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,a=this.c;let l,u;Cd.subVectors(s,i),Rd.subVectors(a,i),g1.subVectors(e,i);const d=Cd.dot(g1),p=Rd.dot(g1);if(d<=0&&p<=0)return t.copy(i);v1.subVectors(e,s);const g=Cd.dot(v1),y=Rd.dot(v1);if(g>=0&&y<=g)return t.copy(s);const x=d*y-g*p;if(x<=0&&d>=0&&g<=0)return l=d/(d-g),t.copy(i).addScaledVector(Cd,l);y1.subVectors(e,a);const _=Cd.dot(y1),w=Rd.dot(y1);if(w>=0&&_<=w)return t.copy(a);const A=_*p-d*w;if(A<=0&&p>=0&&w<=0)return u=p/(p-w),t.copy(i).addScaledVector(Rd,u);const E=g*w-_*y;if(E<=0&&y-g>=0&&_-w>=0)return l3.subVectors(a,s),u=(y-g)/(y-g+(_-w)),t.copy(s).addScaledVector(l3,u);const M=1/(E+A+x);return l=A*M,u=x*M,t.copy(i).addScaledVector(Cd,l).addScaledVector(Rd,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const xL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},du={h:0,s:0,l:0},Fy={h:0,s:0,l:0};function S1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let vt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=$s){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Tn.colorSpaceToWorking(this,t),this}setRGB(e,t,i,s=Tn.workingColorSpace){return this.r=e,this.g=t,this.b=i,Tn.colorSpaceToWorking(this,s),this}setHSL(e,t,i,s=Tn.workingColorSpace){if(e=_T(e,1),t=jt(t,0,1),i=jt(i,0,1),t===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+t):i+t-i*t,l=2*i-a;this.r=S1(l,a,e+1/3),this.g=S1(l,a,e),this.b=S1(l,a,e-1/3)}return Tn.colorSpaceToWorking(this,s),this}setStyle(e,t=$s){function i(a){a!==void 0&&parseFloat(a)<1&&ct("Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const l=s[1],u=s[2];switch(l){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:ct("Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=s[1],l=a.length;if(l===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(a,16),t);ct("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=$s){const i=xL[e.toLowerCase()];return i!==void 0?this.setHex(i,t):ct("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=mc(e.r),this.g=mc(e.g),this.b=mc(e.b),this}copyLinearToSRGB(e){return this.r=ip(e.r),this.g=ip(e.g),this.b=ip(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=$s){return Tn.workingToColorSpace(Zs.copy(this),e),Math.round(jt(Zs.r*255,0,255))*65536+Math.round(jt(Zs.g*255,0,255))*256+Math.round(jt(Zs.b*255,0,255))}getHexString(e=$s){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Tn.workingColorSpace){Tn.workingToColorSpace(Zs.copy(this),t);const i=Zs.r,s=Zs.g,a=Zs.b,l=Math.max(i,s,a),u=Math.min(i,s,a);let d,p;const g=(u+l)/2;if(u===l)d=0,p=0;else{const y=l-u;switch(p=g<=.5?y/(l+u):y/(2-l-u),l){case i:d=(s-a)/y+(s<a?6:0);break;case s:d=(a-i)/y+2;break;case a:d=(i-s)/y+4;break}d/=6}return e.h=d,e.s=p,e.l=g,e}getRGB(e,t=Tn.workingColorSpace){return Tn.workingToColorSpace(Zs.copy(this),t),e.r=Zs.r,e.g=Zs.g,e.b=Zs.b,e}getStyle(e=$s){Tn.workingToColorSpace(Zs.copy(this),e);const t=Zs.r,i=Zs.g,s=Zs.b;return e!==$s?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,t,i){return this.getHSL(du),this.setHSL(du.h+e,du.s+t,du.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(du),e.getHSL(Fy);const i=Hg(du.h,Fy.h,t),s=Hg(du.s,Fy.s,t),a=Hg(du.l,Fy.l,t);return this.setHSL(i,s,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,a=e.elements;return this.r=a[0]*t+a[3]*i+a[6]*s,this.g=a[1]*t+a[4]*i+a[7]*s,this.b=a[2]*t+a[5]*i+a[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Zs=new vt;vt.NAMES=xL;let H9=0;class er extends Sl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:H9++}),this.uuid=ha(),this.name="",this.type="Material",this.blending=Jf,this.side=vc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=n_,this.blendDst=i_,this.blendEquation=xu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new vt(0,0,0),this.blendAlpha=0,this.depthFunc=rh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=WM,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Vf,this.stencilZFail=Vf,this.stencilZPass=Vf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){ct(`Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){ct(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Jf&&(i.blending=this.blending),this.side!==vc&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==n_&&(i.blendSrc=this.blendSrc),this.blendDst!==i_&&(i.blendDst=this.blendDst),this.blendEquation!==xu&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==rh&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==WM&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Vf&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Vf&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Vf&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.allowOverride===!1&&(i.allowOverride=!1),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(a){const l=[];for(const u in a){const d=a[u];delete d.metadata,l.push(d)}return l}if(t){const a=s(e.textures),l=s(e.images);a.length>0&&(i.textures=a),l.length>0&&(i.images=l)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let a=0;a!==s;++a)i[a]=t[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Ou extends er{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new pa,this.combine=C0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const hc=j9();function j9(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),s=new Uint32Array(512);for(let d=0;d<256;++d){const p=d-127;p<-27?(i[d]=0,i[d|256]=32768,s[d]=24,s[d|256]=24):p<-14?(i[d]=1024>>-p-14,i[d|256]=1024>>-p-14|32768,s[d]=-p-1,s[d|256]=-p-1):p<=15?(i[d]=p+15<<10,i[d|256]=p+15<<10|32768,s[d]=13,s[d|256]=13):p<128?(i[d]=31744,i[d|256]=64512,s[d]=24,s[d|256]=24):(i[d]=31744,i[d|256]=64512,s[d]=13,s[d|256]=13)}const a=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64);for(let d=1;d<1024;++d){let p=d<<13,g=0;for(;(p&8388608)===0;)p<<=1,g-=8388608;p&=-8388609,g+=947912704,a[d]=p|g}for(let d=1024;d<2048;++d)a[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)l[d]=d<<23;l[31]=1199570944,l[32]=2147483648;for(let d=33;d<63;++d)l[d]=2147483648+(d-32<<23);l[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(u[d]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:s,mantissaTable:a,exponentTable:l,offsetTable:u}}function Zr(n){Math.abs(n)>65504&&ct("DataUtils.toHalfFloat(): Value out of range."),n=jt(n,-65504,65504),hc.floatView[0]=n;const e=hc.uint32View[0],t=e>>23&511;return hc.baseTable[t]+((e&8388607)>>hc.shiftTable[t])}function Eg(n){const e=n>>10;return hc.uint32View[0]=hc.mantissaTable[hc.offsetTable[e]+(n&1023)]+hc.exponentTable[e],hc.floatView[0]}class G9{static toHalfFloat(e){return Zr(e)}static fromHalfFloat(e){return Eg(e)}}const es=new Y,By=new Be;let W9=0;class Yn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:W9++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=o0,this.updateRanges=[],this.gpuType=wr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,a=this.itemSize;s<a;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)By.fromBufferAttribute(this,t),By.applyMatrix3(e),this.setXY(t,By.x,By.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)es.fromBufferAttribute(this,t),es.applyMatrix3(e),this.setXYZ(t,es.x,es.y,es.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)es.fromBufferAttribute(this,t),es.applyMatrix4(e),this.setXYZ(t,es.x,es.y,es.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)es.fromBufferAttribute(this,t),es.applyNormalMatrix(e),this.setXYZ(t,es.x,es.y,es.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)es.fromBufferAttribute(this,t),es.transformDirection(e),this.setXYZ(t,es.x,es.y,es.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=_r(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=an(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=_r(t,this.array)),t}setX(e,t){return this.normalized&&(t=an(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=_r(t,this.array)),t}setY(e,t){return this.normalized&&(t=an(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=_r(t,this.array)),t}setZ(e,t){return this.normalized&&(t=an(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=_r(t,this.array)),t}setW(e,t){return this.normalized&&(t=an(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=an(t,this.array),i=an(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=an(t,this.array),i=an(i,this.array),s=an(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,a){return e*=this.itemSize,this.normalized&&(t=an(t,this.array),i=an(i,this.array),s=an(s,this.array),a=an(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==o0&&(e.usage=this.usage),e}}class X9 extends Yn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class q9 extends Yn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class Z9 extends Yn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class Y9 extends Yn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class ST extends Yn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class $9 extends Yn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class MT extends Yn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class K9 extends Yn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Eg(this.array[e*this.itemSize]);return this.normalized&&(t=_r(t,this.array)),t}setX(e,t){return this.normalized&&(t=an(t,this.array)),this.array[e*this.itemSize]=Zr(t),this}getY(e){let t=Eg(this.array[e*this.itemSize+1]);return this.normalized&&(t=_r(t,this.array)),t}setY(e,t){return this.normalized&&(t=an(t,this.array)),this.array[e*this.itemSize+1]=Zr(t),this}getZ(e){let t=Eg(this.array[e*this.itemSize+2]);return this.normalized&&(t=_r(t,this.array)),t}setZ(e,t){return this.normalized&&(t=an(t,this.array)),this.array[e*this.itemSize+2]=Zr(t),this}getW(e){let t=Eg(this.array[e*this.itemSize+3]);return this.normalized&&(t=_r(t,this.array)),t}setW(e,t){return this.normalized&&(t=an(t,this.array)),this.array[e*this.itemSize+3]=Zr(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=an(t,this.array),i=an(i,this.array)),this.array[e+0]=Zr(t),this.array[e+1]=Zr(i),this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=an(t,this.array),i=an(i,this.array),s=an(s,this.array)),this.array[e+0]=Zr(t),this.array[e+1]=Zr(i),this.array[e+2]=Zr(s),this}setXYZW(e,t,i,s,a){return e*=this.itemSize,this.normalized&&(t=an(t,this.array),i=an(i,this.array),s=an(s,this.array),a=an(a,this.array)),this.array[e+0]=Zr(t),this.array[e+1]=Zr(i),this.array[e+2]=Zr(s),this.array[e+3]=Zr(a),this}}class St extends Yn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let J9=0;const Va=new Wt,M1=new Dn,Nd=new Y,ua=new Qs,cg=new Qs,xs=new Y;class Kt extends Sl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:J9++}),this.uuid=ha(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(pL(e)?MT:ST)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new en().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Va.makeRotationFromQuaternion(e),this.applyMatrix4(Va),this}rotateX(e){return Va.makeRotationX(e),this.applyMatrix4(Va),this}rotateY(e){return Va.makeRotationY(e),this.applyMatrix4(Va),this}rotateZ(e){return Va.makeRotationZ(e),this.applyMatrix4(Va),this}translate(e,t,i){return Va.makeTranslation(e,t,i),this.applyMatrix4(Va),this}scale(e,t,i){return Va.makeScale(e,t,i),this.applyMatrix4(Va),this}lookAt(e){return M1.lookAt(e),M1.updateMatrix(),this.applyMatrix4(M1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Nd).negate(),this.translate(Nd.x,Nd.y,Nd.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let s=0,a=e.length;s<a;s++){const l=e[s];i.push(l.x,l.y,l.z||0)}this.setAttribute("position",new St(i,3))}else{const i=Math.min(e.length,t.count);for(let s=0;s<i;s++){const a=e[s];t.setXYZ(s,a.x,a.y,a.z||0)}e.length>t.count&&ct("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Rt("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const a=t[i];ua.setFromBufferAttribute(a),this.morphTargetsRelative?(xs.addVectors(this.boundingBox.min,ua.min),this.boundingBox.expandByPoint(xs),xs.addVectors(this.boundingBox.max,ua.max),this.boundingBox.expandByPoint(xs)):(this.boundingBox.expandByPoint(ua.min),this.boundingBox.expandByPoint(ua.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Rt('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ls);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Rt("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Y,1/0);return}if(e){const i=this.boundingSphere.center;if(ua.setFromBufferAttribute(e),t)for(let a=0,l=t.length;a<l;a++){const u=t[a];cg.setFromBufferAttribute(u),this.morphTargetsRelative?(xs.addVectors(ua.min,cg.min),ua.expandByPoint(xs),xs.addVectors(ua.max,cg.max),ua.expandByPoint(xs)):(ua.expandByPoint(cg.min),ua.expandByPoint(cg.max))}ua.getCenter(i);let s=0;for(let a=0,l=e.count;a<l;a++)xs.fromBufferAttribute(e,a),s=Math.max(s,i.distanceToSquared(xs));if(t)for(let a=0,l=t.length;a<l;a++){const u=t[a],d=this.morphTargetsRelative;for(let p=0,g=u.count;p<g;p++)xs.fromBufferAttribute(u,p),d&&(Nd.fromBufferAttribute(e,p),xs.add(Nd)),s=Math.max(s,i.distanceToSquared(xs))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&Rt('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){Rt("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,s=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Yn(new Float32Array(4*i.count),4));const l=this.getAttribute("tangent"),u=[],d=[];for(let V=0;V<i.count;V++)u[V]=new Y,d[V]=new Y;const p=new Y,g=new Y,y=new Y,x=new Be,_=new Be,w=new Be,A=new Y,E=new Y;function M(V,O,F){p.fromBufferAttribute(i,V),g.fromBufferAttribute(i,O),y.fromBufferAttribute(i,F),x.fromBufferAttribute(a,V),_.fromBufferAttribute(a,O),w.fromBufferAttribute(a,F),g.sub(p),y.sub(p),_.sub(x),w.sub(x);const W=1/(_.x*w.y-w.x*_.y);isFinite(W)&&(A.copy(g).multiplyScalar(w.y).addScaledVector(y,-_.y).multiplyScalar(W),E.copy(y).multiplyScalar(_.x).addScaledVector(g,-w.x).multiplyScalar(W),u[V].add(A),u[O].add(A),u[F].add(A),d[V].add(E),d[O].add(E),d[F].add(E))}let D=this.groups;D.length===0&&(D=[{start:0,count:e.count}]);for(let V=0,O=D.length;V<O;++V){const F=D[V],W=F.start,ee=F.count;for(let J=W,ae=W+ee;J<ae;J+=3)M(e.getX(J+0),e.getX(J+1),e.getX(J+2))}const L=new Y,N=new Y,P=new Y,z=new Y;function B(V){P.fromBufferAttribute(s,V),z.copy(P);const O=u[V];L.copy(O),L.sub(P.multiplyScalar(P.dot(O))).normalize(),N.crossVectors(z,O);const W=N.dot(d[V])<0?-1:1;l.setXYZW(V,L.x,L.y,L.z,W)}for(let V=0,O=D.length;V<O;++V){const F=D[V],W=F.start,ee=F.count;for(let J=W,ae=W+ee;J<ae;J+=3)B(e.getX(J+0)),B(e.getX(J+1)),B(e.getX(J+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Yn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let x=0,_=i.count;x<_;x++)i.setXYZ(x,0,0,0);const s=new Y,a=new Y,l=new Y,u=new Y,d=new Y,p=new Y,g=new Y,y=new Y;if(e)for(let x=0,_=e.count;x<_;x+=3){const w=e.getX(x+0),A=e.getX(x+1),E=e.getX(x+2);s.fromBufferAttribute(t,w),a.fromBufferAttribute(t,A),l.fromBufferAttribute(t,E),g.subVectors(l,a),y.subVectors(s,a),g.cross(y),u.fromBufferAttribute(i,w),d.fromBufferAttribute(i,A),p.fromBufferAttribute(i,E),u.add(g),d.add(g),p.add(g),i.setXYZ(w,u.x,u.y,u.z),i.setXYZ(A,d.x,d.y,d.z),i.setXYZ(E,p.x,p.y,p.z)}else for(let x=0,_=t.count;x<_;x+=3)s.fromBufferAttribute(t,x+0),a.fromBufferAttribute(t,x+1),l.fromBufferAttribute(t,x+2),g.subVectors(l,a),y.subVectors(s,a),g.cross(y),i.setXYZ(x+0,g.x,g.y,g.z),i.setXYZ(x+1,g.x,g.y,g.z),i.setXYZ(x+2,g.x,g.y,g.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)xs.fromBufferAttribute(e,t),xs.normalize(),e.setXYZ(t,xs.x,xs.y,xs.z)}toNonIndexed(){function e(u,d){const p=u.array,g=u.itemSize,y=u.normalized,x=new p.constructor(d.length*g);let _=0,w=0;for(let A=0,E=d.length;A<E;A++){u.isInterleavedBufferAttribute?_=d[A]*u.data.stride+u.offset:_=d[A]*g;for(let M=0;M<g;M++)x[w++]=p[_++]}return new Yn(x,g,y)}if(this.index===null)return ct("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Kt,i=this.index.array,s=this.attributes;for(const u in s){const d=s[u],p=e(d,i);t.setAttribute(u,p)}const a=this.morphAttributes;for(const u in a){const d=[],p=a[u];for(let g=0,y=p.length;g<y;g++){const x=p[g],_=e(x,i);d.push(_)}t.morphAttributes[u]=d}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,d=l.length;u<d;u++){const p=l[u];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(e[p]=d[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const d in i){const p=i[d];e.data.attributes[d]=p.toJSON(e.data)}const s={};let a=!1;for(const d in this.morphAttributes){const p=this.morphAttributes[d],g=[];for(let y=0,x=p.length;y<x;y++){const _=p[y];g.push(_.toJSON(e.data))}g.length>0&&(s[d]=g,a=!0)}a&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere=u.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const s=e.attributes;for(const p in s){const g=s[p];this.setAttribute(p,g.clone(t))}const a=e.morphAttributes;for(const p in a){const g=[],y=a[p];for(let x=0,_=y.length;x<_;x++)g.push(y[x].clone(t));this.morphAttributes[p]=g}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let p=0,g=l.length;p<g;p++){const y=l[p];this.addGroup(y.start,y.count,y.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const c3=new Wt,Cf=new Tp,Vy=new Ls,u3=new Y,Hy=new Y,jy=new Y,Gy=new Y,w1=new Y,Wy=new Y,f3=new Y,Xy=new Y;class ns extends Dn{constructor(e=new Kt,t=new Ou){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=s.length;a<l;a++){const u=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=a}}}}getVertexPosition(e,t){const i=this.geometry,s=i.attributes.position,a=i.morphAttributes.position,l=i.morphTargetsRelative;t.fromBufferAttribute(s,e);const u=this.morphTargetInfluences;if(a&&u){Wy.set(0,0,0);for(let d=0,p=a.length;d<p;d++){const g=u[d],y=a[d];g!==0&&(w1.fromBufferAttribute(y,e),l?Wy.addScaledVector(w1,g):Wy.addScaledVector(w1.sub(t),g))}t.add(Wy)}return t}raycast(e,t){const i=this.geometry,s=this.material,a=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Vy.copy(i.boundingSphere),Vy.applyMatrix4(a),Cf.copy(e.ray).recast(e.near),!(Vy.containsPoint(Cf.origin)===!1&&(Cf.intersectSphere(Vy,u3)===null||Cf.origin.distanceToSquared(u3)>(e.far-e.near)**2))&&(c3.copy(a).invert(),Cf.copy(e.ray).applyMatrix4(c3),!(i.boundingBox!==null&&Cf.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Cf)))}_computeIntersections(e,t,i){let s;const a=this.geometry,l=this.material,u=a.index,d=a.attributes.position,p=a.attributes.uv,g=a.attributes.uv1,y=a.attributes.normal,x=a.groups,_=a.drawRange;if(u!==null)if(Array.isArray(l))for(let w=0,A=x.length;w<A;w++){const E=x[w],M=l[E.materialIndex],D=Math.max(E.start,_.start),L=Math.min(u.count,Math.min(E.start+E.count,_.start+_.count));for(let N=D,P=L;N<P;N+=3){const z=u.getX(N),B=u.getX(N+1),V=u.getX(N+2);s=qy(this,M,e,i,p,g,y,z,B,V),s&&(s.faceIndex=Math.floor(N/3),s.face.materialIndex=E.materialIndex,t.push(s))}}else{const w=Math.max(0,_.start),A=Math.min(u.count,_.start+_.count);for(let E=w,M=A;E<M;E+=3){const D=u.getX(E),L=u.getX(E+1),N=u.getX(E+2);s=qy(this,l,e,i,p,g,y,D,L,N),s&&(s.faceIndex=Math.floor(E/3),t.push(s))}}else if(d!==void 0)if(Array.isArray(l))for(let w=0,A=x.length;w<A;w++){const E=x[w],M=l[E.materialIndex],D=Math.max(E.start,_.start),L=Math.min(d.count,Math.min(E.start+E.count,_.start+_.count));for(let N=D,P=L;N<P;N+=3){const z=N,B=N+1,V=N+2;s=qy(this,M,e,i,p,g,y,z,B,V),s&&(s.faceIndex=Math.floor(N/3),s.face.materialIndex=E.materialIndex,t.push(s))}}else{const w=Math.max(0,_.start),A=Math.min(d.count,_.start+_.count);for(let E=w,M=A;E<M;E+=3){const D=E,L=E+1,N=E+2;s=qy(this,l,e,i,p,g,y,D,L,N),s&&(s.faceIndex=Math.floor(E/3),t.push(s))}}}}function Q9(n,e,t,i,s,a,l,u){let d;if(e.side===Tr?d=i.intersectTriangle(l,a,s,!0,u):d=i.intersectTriangle(s,a,l,e.side===vc,u),d===null)return null;Xy.copy(u),Xy.applyMatrix4(n.matrixWorld);const p=t.ray.origin.distanceTo(Xy);return p<t.near||p>t.far?null:{distance:p,point:Xy.clone(),object:n}}function qy(n,e,t,i,s,a,l,u,d,p){n.getVertexPosition(u,Hy),n.getVertexPosition(d,jy),n.getVertexPosition(p,Gy);const g=Q9(n,e,t,i,Hy,jy,Gy,f3);if(g){const y=new Y;$r.getBarycoord(f3,Hy,jy,Gy,y),s&&(g.uv=$r.getInterpolatedAttribute(s,u,d,p,y,new Be)),a&&(g.uv1=$r.getInterpolatedAttribute(a,u,d,p,y,new Be)),l&&(g.normal=$r.getInterpolatedAttribute(l,u,d,p,y,new Y),g.normal.dot(i.direction)>0&&g.normal.multiplyScalar(-1));const x={a:u,b:d,c:p,normal:new Y,materialIndex:0};$r.getNormal(Hy,jy,Gy,x.normal),g.face=x,g.barycoord=y}return g}class hh extends Kt{constructor(e=1,t=1,i=1,s=1,a=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:a,depthSegments:l};const u=this;s=Math.floor(s),a=Math.floor(a),l=Math.floor(l);const d=[],p=[],g=[],y=[];let x=0,_=0;w("z","y","x",-1,-1,i,t,e,l,a,0),w("z","y","x",1,-1,i,t,-e,l,a,1),w("x","z","y",1,1,e,i,t,s,l,2),w("x","z","y",1,-1,e,i,-t,s,l,3),w("x","y","z",1,-1,e,t,i,s,a,4),w("x","y","z",-1,-1,e,t,-i,s,a,5),this.setIndex(d),this.setAttribute("position",new St(p,3)),this.setAttribute("normal",new St(g,3)),this.setAttribute("uv",new St(y,2));function w(A,E,M,D,L,N,P,z,B,V,O){const F=N/B,W=P/V,ee=N/2,J=P/2,ae=z/2,he=B+1,Z=V+1;let K=0,le=0;const Ee=new Y;for(let Re=0;Re<Z;Re++){const q=Re*W-J;for(let oe=0;oe<he;oe++){const Ae=oe*F-ee;Ee[A]=Ae*D,Ee[E]=q*L,Ee[M]=ae,p.push(Ee.x,Ee.y,Ee.z),Ee[A]=0,Ee[E]=0,Ee[M]=z>0?1:-1,g.push(Ee.x,Ee.y,Ee.z),y.push(oe/B),y.push(1-Re/V),K+=1}}for(let Re=0;Re<V;Re++)for(let q=0;q<B;q++){const oe=x+q+he*Re,Ae=x+q+he*(Re+1),ke=x+(q+1)+he*(Re+1),rt=x+(q+1)+he*Re;d.push(oe,Ae,rt),d.push(Ae,ke,rt),le+=6}u.addGroup(_,le,O),_+=le,x+=K}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function dp(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const s=n[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(ct("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=s.clone():Array.isArray(s)?e[t][i]=s.slice():e[t][i]=s}}return e}function yr(n){const e={};for(let t=0;t<n.length;t++){const i=dp(n[t]);for(const s in i)e[s]=i[s]}return e}function eH(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function _L(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Tn.workingColorSpace}const bL={clone:dp,merge:yr};var tH=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,nH=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class qa extends er{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=tH,this.fragmentShader=nH,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=dp(e.uniforms),this.uniformsGroups=eH(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const l=this.uniforms[s].value;l&&l.isTexture?t.uniforms[s]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?t.uniforms[s]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[s]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[s]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[s]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[s]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[s]={type:"m4",value:l.toArray()}:t.uniforms[s]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Ab extends Dn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Wt,this.projectionMatrix=new Wt,this.projectionMatrixInverse=new Wt,this.coordinateSystem=fa,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const pu=new Y,h3=new Be,d3=new Be;class _s extends Ab{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=fp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Qf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return fp*2*Math.atan(Math.tan(Qf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){pu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(pu.x,pu.y).multiplyScalar(-e/pu.z),pu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(pu.x,pu.y).multiplyScalar(-e/pu.z)}getViewSize(e,t){return this.getViewBounds(e,h3,d3),t.subVectors(d3,h3)}setViewOffset(e,t,i,s,a,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Qf*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,a=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const d=l.fullWidth,p=l.fullHeight;a+=l.offsetX*s/d,t-=l.offsetY*i/p,s*=l.width/d,i*=l.height/p}const u=this.filmOffset;u!==0&&(a+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+s,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Dd=-90,Id=1;class SL extends Dn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new _s(Dd,Id,e,t);s.layers=this.layers,this.add(s);const a=new _s(Dd,Id,e,t);a.layers=this.layers,this.add(a);const l=new _s(Dd,Id,e,t);l.layers=this.layers,this.add(l);const u=new _s(Dd,Id,e,t);u.layers=this.layers,this.add(u);const d=new _s(Dd,Id,e,t);d.layers=this.layers,this.add(d);const p=new _s(Dd,Id,e,t);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,s,a,l,u,d]=t;for(const p of t)this.remove(p);if(e===fa)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(e===cp)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const p of t)this.add(p),p.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,l,u,d,p,g]=this.children,y=e.getRenderTarget(),x=e.getActiveCubeFace(),_=e.getActiveMipmapLevel(),w=e.xr.enabled;e.xr.enabled=!1;const A=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,s),e.render(t,a),e.setRenderTarget(i,1,s),e.render(t,l),e.setRenderTarget(i,2,s),e.render(t,u),e.setRenderTarget(i,3,s),e.render(t,d),e.setRenderTarget(i,4,s),e.render(t,p),i.texture.generateMipmaps=A,e.setRenderTarget(i,5,s),e.render(t,g),e.setRenderTarget(y,x,_),e.xr.enabled=w,i.texture.needsPMREMUpdate=!0}}class N0 extends Oi{constructor(e=[],t=xl,i,s,a,l,u,d,p,g){super(e,t,i,s,a,l,u,d,p,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class wT extends da{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new N0(s),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new hh(5,5,5),a=new qa({name:"CubemapFromEquirect",uniforms:dp(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Tr,blending:gl});a.uniforms.tEquirect.value=t;const l=new ns(s,a),u=t.minFilter;return t.minFilter===dl&&(t.minFilter=hi),new SL(1,10,this).update(e,l),t.minFilter=u,l.geometry.dispose(),l.material.dispose(),this}clear(e,t=!0,i=!0,s=!0){const a=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,i,s);e.setRenderTarget(a)}}class Qd extends Dn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const iH={type:"move"};class Px{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Qd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Qd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Qd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let s=null,a=null,l=null;const u=this._targetRay,d=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){l=!0;for(const A of e.hand.values()){const E=t.getJointPose(A,i),M=this._getHandJoint(p,A);E!==null&&(M.matrix.fromArray(E.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=E.radius),M.visible=E!==null}const g=p.joints["index-finger-tip"],y=p.joints["thumb-tip"],x=g.position.distanceTo(y.position),_=.02,w=.005;p.inputState.pinching&&x>_+w?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&x<=_-w&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else d!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,i),a!==null&&(d.matrix.fromArray(a.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,a.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(a.linearVelocity)):d.hasLinearVelocity=!1,a.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(a.angularVelocity)):d.hasAngularVelocity=!1));u!==null&&(s=t.getPose(e.targetRaySpace,i),s===null&&a!==null&&(s=a),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(iH)))}return u!==null&&(u.visible=s!==null),d!==null&&(d.visible=a!==null),p!==null&&(p.visible=l!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Qd;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Cb{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new vt(e),this.density=t}clone(){return new Cb(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Rb{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new vt(e),this.near=t,this.far=i}clone(){return new Rb(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class TT extends Dn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new pa,this.environmentIntensity=1,this.environmentRotation=new pa,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Nb{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=o0,this.updateRanges=[],this.version=0,this.uuid=ha()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,a=this.stride;s<a;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ha()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ha()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const mr=new Y;class oh{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)mr.fromBufferAttribute(this,t),mr.applyMatrix4(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)mr.fromBufferAttribute(this,t),mr.applyNormalMatrix(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)mr.fromBufferAttribute(this,t),mr.transformDirection(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=_r(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=an(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=an(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=an(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=an(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=an(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=_r(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=_r(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=_r(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=_r(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=an(t,this.array),i=an(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=an(t,this.array),i=an(i,this.array),s=an(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=an(t,this.array),i=an(i,this.array),s=an(s,this.array),a=an(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=a,this}clone(e){if(e===void 0){c0("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[s+a])}return new Yn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new oh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){c0("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[s+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ET extends er{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Ld;const ug=new Y,Pd=new Y,Ud=new Y,Od=new Be,fg=new Be,ML=new Wt,Zy=new Y,hg=new Y,Yy=new Y,p3=new Be,T1=new Be,m3=new Be;class wL extends Dn{constructor(e=new ET){if(super(),this.isSprite=!0,this.type="Sprite",Ld===void 0){Ld=new Kt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Nb(t,5);Ld.setIndex([0,1,2,0,2,3]),Ld.setAttribute("position",new oh(i,3,0,!1)),Ld.setAttribute("uv",new oh(i,2,3,!1))}this.geometry=Ld,this.material=e,this.center=new Be(.5,.5),this.count=1}raycast(e,t){e.camera===null&&Rt('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Pd.setFromMatrixScale(this.matrixWorld),ML.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ud.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Pd.multiplyScalar(-Ud.z);const i=this.material.rotation;let s,a;i!==0&&(a=Math.cos(i),s=Math.sin(i));const l=this.center;$y(Zy.set(-.5,-.5,0),Ud,l,Pd,s,a),$y(hg.set(.5,-.5,0),Ud,l,Pd,s,a),$y(Yy.set(.5,.5,0),Ud,l,Pd,s,a),p3.set(0,0),T1.set(1,0),m3.set(1,1);let u=e.ray.intersectTriangle(Zy,hg,Yy,!1,ug);if(u===null&&($y(hg.set(-.5,.5,0),Ud,l,Pd,s,a),T1.set(0,1),u=e.ray.intersectTriangle(Zy,Yy,hg,!1,ug),u===null))return;const d=e.ray.origin.distanceTo(ug);d<e.near||d>e.far||t.push({distance:d,point:ug.clone(),uv:$r.getInterpolation(ug,Zy,hg,Yy,p3,T1,m3,new Be),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function $y(n,e,t,i,s,a){Od.subVectors(n,t).addScalar(.5).multiply(i),s!==void 0?(fg.x=a*Od.x-s*Od.y,fg.y=s*Od.x+a*Od.y):fg.copy(Od),n.copy(e),n.x+=fg.x,n.y+=fg.y,n.applyMatrix4(ML)}const Ky=new Y,g3=new Y;class TL extends Dn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,s=t.length;i<s;i++){const a=t[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const s=this.levels;let a;for(a=0;a<s.length&&!(t<s[a].distance);a++);return s.splice(a,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const s=t.splice(i,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,s;for(i=1,s=t.length;i<s;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),e<a)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Ky.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(Ky);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Ky.setFromMatrixPosition(e.matrixWorld),g3.setFromMatrixPosition(this.matrixWorld);const i=Ky.distanceTo(g3)/e.zoom;t[0].object.visible=!0;let s,a;for(s=1,a=t.length;s<a;s++){let l=t[s].distance;if(t[s].object.visible&&(l-=l*t[s].hysteresis),i>=l)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<a;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let s=0,a=i.length;s<a;s++){const l=i[s];t.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return t}}const v3=new Y,y3=new Jn,x3=new Jn,sH=new Y,_3=new Wt,Jy=new Y,E1=new Ls,b3=new Wt,A1=new Tp;class EL extends ns{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=GM,this.bindMatrix=new Wt,this.bindMatrixInverse=new Wt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Qs),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Jy),this.boundingBox.expandByPoint(Jy)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ls),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Jy),this.boundingSphere.expandByPoint(Jy)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),E1.copy(this.boundingSphere),E1.applyMatrix4(s),e.ray.intersectsSphere(E1)!==!1&&(b3.copy(s).invert(),A1.copy(e.ray).applyMatrix4(b3),!(this.boundingBox!==null&&A1.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,A1)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Jn,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===GM?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===nL?this.bindMatrixInverse.copy(this.bindMatrix).invert():ct("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,s=this.geometry;y3.fromBufferAttribute(s.attributes.skinIndex,e),x3.fromBufferAttribute(s.attributes.skinWeight,e),v3.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const l=x3.getComponent(a);if(l!==0){const u=y3.getComponent(a);_3.multiplyMatrices(i.bones[u].matrixWorld,i.boneInverses[u]),t.addScaledVector(sH.copy(v3).applyMatrix4(_3),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class AT extends Dn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ao extends Oi{constructor(e=null,t=1,i=1,s,a,l,u,d,p=Wi,g=Wi,y,x){super(null,l,u,d,p,g,s,a,y,x),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const S3=new Wt,rH=new Wt;class Db{constructor(e=[],t=[]){this.uuid=ha(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){ct("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new Wt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Wt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let a=0,l=e.length;a<l;a++){const u=e[a]?e[a].matrixWorld:rH;S3.multiplyMatrices(u,t[a]),S3.toArray(i,a*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new Db(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Ao(t,e,e,Js,wr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const a=e.bones[i];let l=t[a];l===void 0&&(ct("Skeleton: No bone found with UUID:",a),l=new AT),this.bones.push(l),this.boneInverses.push(new Wt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,a=t.length;s<a;s++){const l=t[s];e.bones.push(l.uuid);const u=i[s];e.boneInverses.push(u.toArray())}return e}}class pp extends Yn{constructor(e,t,i,s=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const zd=new Wt,M3=new Wt,Qy=[],w3=new Qs,aH=new Wt,dg=new ns,pg=new Ls;class AL extends ns{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new pp(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,aH)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Qs),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,zd),w3.copy(e.boundingBox).applyMatrix4(zd),this.boundingBox.union(w3)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ls),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,zd),pg.copy(e.boundingSphere).applyMatrix4(zd),this.boundingSphere.union(pg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,s=this.morphTexture.source.data.data,a=i.length+1,l=e*a+1;for(let u=0;u<i.length;u++)i[u]=s[l+u]}raycast(e,t){const i=this.matrixWorld,s=this.count;if(dg.geometry=this.geometry,dg.material=this.material,dg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),pg.copy(this.boundingSphere),pg.applyMatrix4(i),e.ray.intersectsSphere(pg)!==!1))for(let a=0;a<s;a++){this.getMatrixAt(a,zd),M3.multiplyMatrices(i,zd),dg.matrixWorld=M3,dg.raycast(e,Qy);for(let l=0,u=Qy.length;l<u;l++){const d=Qy[l];d.instanceId=a,d.object=this,t.push(d)}Qy.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new pp(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,s=i.length+1;this.morphTexture===null&&(this.morphTexture=new Ao(new Float32Array(s*this.count),s,this.count,xb,wr));const a=this.morphTexture.source.data.data;let l=0;for(let p=0;p<i.length;p++)l+=i[p];const u=this.geometry.morphTargetsRelative?1:1-l,d=s*e;a[d]=u,a.set(i,d+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const C1=new Y,oH=new Y,lH=new en;class vu{constructor(e=new Y(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=C1.subVectors(i,t).cross(oH.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(C1),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/s;return a<0||a>1?null:t.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||lH.getNormalMatrix(e),s=this.coplanarPoint(C1).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Rf=new Ls,cH=new Be(.5,.5),ex=new Y;class Ep{constructor(e=new vu,t=new vu,i=new vu,s=new vu,a=new vu,l=new vu){this.planes=[e,t,i,s,a,l]}set(e,t,i,s,a,l){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(i),u[3].copy(s),u[4].copy(a),u[5].copy(l),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=fa,i=!1){const s=this.planes,a=e.elements,l=a[0],u=a[1],d=a[2],p=a[3],g=a[4],y=a[5],x=a[6],_=a[7],w=a[8],A=a[9],E=a[10],M=a[11],D=a[12],L=a[13],N=a[14],P=a[15];if(s[0].setComponents(p-l,_-g,M-w,P-D).normalize(),s[1].setComponents(p+l,_+g,M+w,P+D).normalize(),s[2].setComponents(p+u,_+y,M+A,P+L).normalize(),s[3].setComponents(p-u,_-y,M-A,P-L).normalize(),i)s[4].setComponents(d,x,E,N).normalize(),s[5].setComponents(p-d,_-x,M-E,P-N).normalize();else if(s[4].setComponents(p-d,_-x,M-E,P-N).normalize(),t===fa)s[5].setComponents(p+d,_+x,M+E,P+N).normalize();else if(t===cp)s[5].setComponents(d,x,E,N).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Rf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Rf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Rf)}intersectsSprite(e){Rf.center.set(0,0,0);const t=cH.distanceTo(e.center);return Rf.radius=.7071067811865476+t,Rf.applyMatrix4(e.matrixWorld),this.intersectsSphere(Rf)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(ex.x=s.normal.x>0?e.max.x:e.min.x,ex.y=s.normal.y>0?e.max.y:e.min.y,ex.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(ex)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const cl=new Wt,ul=new Ep;class Ib{constructor(){this.coordinateSystem=fa}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const s=t.cameras[i];if(cl.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),ul.setFromProjectionMatrix(cl,s.coordinateSystem,s.reversedDepth),ul.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const s=t.cameras[i];if(cl.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),ul.setFromProjectionMatrix(cl,s.coordinateSystem,s.reversedDepth),ul.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const s=t.cameras[i];if(cl.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),ul.setFromProjectionMatrix(cl,s.coordinateSystem,s.reversedDepth),ul.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const s=t.cameras[i];if(cl.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),ul.setFromProjectionMatrix(cl,s.coordinateSystem,s.reversedDepth),ul.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const s=t.cameras[i];if(cl.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),ul.setFromProjectionMatrix(cl,s.coordinateSystem,s.reversedDepth),ul.containsPoint(e))return!0}return!1}clone(){return new Ib}}function R1(n,e){return n-e}function uH(n,e){return n.z-e.z}function fH(n,e){return e.z-n.z}class hH{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,s){const a=this.pool,l=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const u=a[this.index];l.push(u),this.index++,u.start=e,u.count=t,u.z=i,u.index=s}reset(){this.list.length=0,this.index=0}}const qr=new Wt,dH=new vt(1,1,1),T3=new Ep,pH=new Ib,tx=new Qs,Nf=new Ls,mg=new Y,E3=new Y,mH=new Y,N1=new hH,Ys=new ns,nx=[];function gH(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const s=n.count;for(let a=0;a<s;a++)for(let l=0;l<i;l++)e.setComponent(a+t,l,n.getComponent(a,l))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function Df(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class CL extends ns{constructor(e,t,i=t*2,s){super(new Kt,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Ao(t,e,e,Js,wr);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Ao(t,e,e,R0,Xa);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Ao(t,e,e,Js,wr);i.colorSpace=Tn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:u,itemSize:d,normalized:p}=l,g=new u.constructor(i*d),y=new Yn(g,d,p);t.setAttribute(a,y)}if(e.getIndex()!==null){const a=i>65535?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Yn(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const s=e.getAttribute(i),a=t.getAttribute(i);if(s.itemSize!==a.itemSize||s.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qs);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,s=t.length;i<s;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,qr),this.getBoundingBoxAt(a,tx).applyMatrix4(qr),e.union(tx)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ls);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,s=t.length;i<s;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,qr),this.getBoundingSphereAt(a,Nf).applyMatrix4(qr),e.union(Nf)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(R1),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=i):(s=this._instanceInfo.length,this._instanceInfo.push(i));const a=this._matricesTexture;qr.identity().toArray(a.image.data,s*16),a.needsUpdate=!0;const l=this._colorsTexture;return l&&(dH.toArray(l.image.data,s*4),l.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const l=e.getIndex();if(l!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=i===-1?l.count:i),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(R1),d=this._availableGeometryIds.shift(),a[d]=s):(d=this._geometryCount,this._geometryCount++,a.push(s)),this.setGeometryAt(d,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,d}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,s=i.getIndex()!==null,a=i.getIndex(),l=t.getIndex(),u=this._geometryInfo[e];if(s&&l.count>u.reservedIndexCount||t.attributes.position.count>u.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=u.vertexStart,p=u.reservedVertexCount;u.vertexCount=t.getAttribute("position").count;for(const g in i.attributes){const y=t.getAttribute(g),x=i.getAttribute(g);gH(y,x,d);const _=y.itemSize;for(let w=y.count,A=p;w<A;w++){const E=d+w;for(let M=0;M<_;M++)x.setComponent(E,M,0)}x.needsUpdate=!0,x.addUpdateRange(d*_,p*_)}if(s){const g=u.indexStart,y=u.reservedIndexCount;u.indexCount=t.getIndex().count;for(let x=0;x<l.count;x++)a.setX(g+x,d+l.getX(x));for(let x=l.count,_=y;x<_;x++)a.setX(g+x,d);a.needsUpdate=!0,a.addUpdateRange(g,u.reservedIndexCount)}return u.start=s?u.indexStart:u.vertexStart,u.count=s?u.indexCount:u.vertexCount,u.boundingBox=null,t.boundingBox!==null&&(u.boundingBox=t.boundingBox.clone()),u.boundingSphere=null,t.boundingSphere!==null&&(u.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let s=0,a=i.length;s<a;s++)i[s].active&&i[s].geometryIndex===e&&this.deleteInstance(s);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,s=i.map((l,u)=>u).sort((l,u)=>i[l].vertexStart-i[u].vertexStart),a=this.geometry;for(let l=0,u=i.length;l<u;l++){const d=s[l],p=i[d];if(p.active!==!1){if(a.index!==null){if(p.indexStart!==t){const{indexStart:g,vertexStart:y,reservedIndexCount:x}=p,_=a.index,w=_.array,A=e-y;for(let E=g;E<g+x;E++)w[E]=w[E]+A;_.array.copyWithin(t,g,g+x),_.addUpdateRange(t,x),_.needsUpdate=!0,p.indexStart=t}t+=p.reservedIndexCount}if(p.vertexStart!==e){const{vertexStart:g,reservedVertexCount:y}=p,x=a.attributes;for(const _ in x){const w=x[_],{array:A,itemSize:E}=w;A.copyWithin(e*E,g*E,(g+y)*E),w.addUpdateRange(e*E,y*E),w.needsUpdate=!0}p.vertexStart=e}e+=p.reservedVertexCount,p.start=a.index?p.indexStart:p.vertexStart,this._nextIndexStart=a.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const a=new Qs,l=i.index,u=i.attributes.position;for(let d=s.start,p=s.start+s.count;d<p;d++){let g=d;l&&(g=l.getX(g)),a.expandByPoint(mg.fromBufferAttribute(u,g))}s.boundingBox=a}return t.copy(s.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const a=new Ls;this.getBoundingBoxAt(e,tx),tx.getCenter(a.center);const l=i.index,u=i.attributes.position;let d=0;for(let p=s.start,g=s.start+s.count;p<g;p++){let y=p;l&&(y=l.getX(y)),mg.fromBufferAttribute(u,y),d=Math.max(d,a.center.distanceToSquared(mg))}a.radius=Math.sqrt(d),s.boundingSphere=a}return t.copy(s.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,s=this._matricesTexture.image.data;return t.toArray(s,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(R1);t[t.length-1]===i.length-1;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const s=new Int32Array(e),a=new Int32Array(e);Df(this._multiDrawCounts,s),Df(this._multiDrawStarts,a),this._multiDrawCounts=s,this._multiDrawStarts=a,this._maxInstanceCount=e;const l=this._indirectTexture,u=this._matricesTexture,d=this._colorsTexture;l.dispose(),this._initIndirectTexture(),Df(l.image.data,this._indirectTexture.image.data),u.dispose(),this._initMatricesTexture(),Df(u.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),Df(d.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(u=>u.active);if(Math.max(...i.map(u=>u.vertexStart+u.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(d=>d.indexStart+d.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Kt,this._initializeGeometry(a));const l=this.geometry;a.index&&Df(a.index.array,l.index.array);for(const u in a.attributes)Df(a.attributes[u].array,l.attributes[u].array)}raycast(e,t){const i=this._instanceInfo,s=this._geometryInfo,a=this.matrixWorld,l=this.geometry;Ys.material=this.material,Ys.geometry.index=l.index,Ys.geometry.attributes=l.attributes,Ys.geometry.boundingBox===null&&(Ys.geometry.boundingBox=new Qs),Ys.geometry.boundingSphere===null&&(Ys.geometry.boundingSphere=new Ls);for(let u=0,d=i.length;u<d;u++){if(!i[u].visible||!i[u].active)continue;const p=i[u].geometryIndex,g=s[p];Ys.geometry.setDrawRange(g.start,g.count),this.getMatrixAt(u,Ys.matrixWorld).premultiply(a),this.getBoundingBoxAt(p,Ys.geometry.boundingBox),this.getBoundingSphereAt(p,Ys.geometry.boundingSphere),Ys.raycast(e,nx);for(let y=0,x=nx.length;y<x;y++){const _=nx[y];_.object=this,_.batchId=u,t.push(_)}nx.length=0}Ys.material=null,Ys.geometry.index=null,Ys.geometry.attributes={},Ys.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,s,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const l=s.getIndex(),u=l===null?1:l.array.BYTES_PER_ELEMENT,d=this._instanceInfo,p=this._multiDrawStarts,g=this._multiDrawCounts,y=this._geometryInfo,x=this.perObjectFrustumCulled,_=this._indirectTexture,w=_.image.data,A=i.isArrayCamera?pH:T3;x&&!i.isArrayCamera&&(qr.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),T3.setFromProjectionMatrix(qr,i.coordinateSystem,i.reversedDepth));let E=0;if(this.sortObjects){qr.copy(this.matrixWorld).invert(),mg.setFromMatrixPosition(i.matrixWorld).applyMatrix4(qr),E3.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(qr);for(let L=0,N=d.length;L<N;L++)if(d[L].visible&&d[L].active){const P=d[L].geometryIndex;this.getMatrixAt(L,qr),this.getBoundingSphereAt(P,Nf).applyMatrix4(qr);let z=!1;if(x&&(z=!A.intersectsSphere(Nf,i)),!z){const B=y[P],V=mH.subVectors(Nf.center,mg).dot(E3);N1.push(B.start,B.count,V,L)}}const M=N1.list,D=this.customSort;D===null?M.sort(a.transparent?fH:uH):D.call(this,M,i);for(let L=0,N=M.length;L<N;L++){const P=M[L];p[E]=P.start*u,g[E]=P.count,w[E]=P.index,E++}N1.reset()}else for(let M=0,D=d.length;M<D;M++)if(d[M].visible&&d[M].active){const L=d[M].geometryIndex;let N=!1;if(x&&(this.getMatrixAt(M,qr),this.getBoundingSphereAt(L,Nf).applyMatrix4(qr),N=!A.intersectsSphere(Nf,i)),!N){const P=y[L];p[E]=P.start*u,g[E]=P.count,w[E]=M,E++}}_.needsUpdate=!0,this._multiDrawCount=E,this._visibilityChanged=!1}onBeforeShadow(e,t,i,s,a,l){this.onBeforeRender(e,null,s,a,l)}}class Er extends er{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new vt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const G_=new Y,W_=new Y,A3=new Wt,gg=new Tp,ix=new Ls,D1=new Y,C3=new Y;class Du extends Dn{constructor(e=new Kt,t=new Er){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,a=t.count;s<a;s++)G_.fromBufferAttribute(t,s-1),W_.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=G_.distanceTo(W_);e.setAttribute("lineDistance",new St(i,1))}else ct("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,a=e.params.Line.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ix.copy(i.boundingSphere),ix.applyMatrix4(s),ix.radius+=a,e.ray.intersectsSphere(ix)===!1)return;A3.copy(s).invert(),gg.copy(e.ray).applyMatrix4(A3);const u=a/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=this.isLineSegments?2:1,g=i.index,x=i.attributes.position;if(g!==null){const _=Math.max(0,l.start),w=Math.min(g.count,l.start+l.count);for(let A=_,E=w-1;A<E;A+=p){const M=g.getX(A),D=g.getX(A+1),L=sx(this,e,gg,d,M,D,A);L&&t.push(L)}if(this.isLineLoop){const A=g.getX(w-1),E=g.getX(_),M=sx(this,e,gg,d,A,E,w-1);M&&t.push(M)}}else{const _=Math.max(0,l.start),w=Math.min(x.count,l.start+l.count);for(let A=_,E=w-1;A<E;A+=p){const M=sx(this,e,gg,d,A,A+1,A);M&&t.push(M)}if(this.isLineLoop){const A=sx(this,e,gg,d,w-1,_,w-1);A&&t.push(A)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=s.length;a<l;a++){const u=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=a}}}}}function sx(n,e,t,i,s,a,l){const u=n.geometry.attributes.position;if(G_.fromBufferAttribute(u,s),W_.fromBufferAttribute(u,a),t.distanceSqToSegment(G_,W_,D1,C3)>i)return;D1.applyMatrix4(n.matrixWorld);const p=e.ray.origin.distanceTo(D1);if(!(p<e.near||p>e.far))return{distance:p,point:C3.clone().applyMatrix4(n.matrixWorld),index:l,face:null,faceIndex:null,barycoord:null,object:n}}const R3=new Y,N3=new Y;class Ml extends Du{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,a=t.count;s<a;s+=2)R3.fromBufferAttribute(t,s),N3.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+R3.distanceTo(N3);e.setAttribute("lineDistance",new St(i,1))}else ct("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class RL extends Du{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class CT extends er{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const D3=new Wt,qM=new Tp,rx=new Ls,ax=new Y;class NL extends Dn{constructor(e=new Kt,t=new CT){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,a=e.params.Points.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),rx.copy(i.boundingSphere),rx.applyMatrix4(s),rx.radius+=a,e.ray.intersectsSphere(rx)===!1)return;D3.copy(s).invert(),qM.copy(e.ray).applyMatrix4(D3);const u=a/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=i.index,y=i.attributes.position;if(p!==null){const x=Math.max(0,l.start),_=Math.min(p.count,l.start+l.count);for(let w=x,A=_;w<A;w++){const E=p.getX(w);ax.fromBufferAttribute(y,E),I3(ax,E,d,s,e,t,this)}}else{const x=Math.max(0,l.start),_=Math.min(y.count,l.start+l.count);for(let w=x,A=_;w<A;w++)ax.fromBufferAttribute(y,w),I3(ax,w,d,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=s.length;a<l;a++){const u=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=a}}}}}function I3(n,e,t,i,s,a,l){const u=qM.distanceSqToPoint(n);if(u<t){const d=new Y;qM.closestPointToPoint(n,d),d.applyMatrix4(i);const p=s.ray.origin.distanceTo(d);if(p<s.near||p>s.far)return;a.push({distance:p,distanceToRay:Math.sqrt(u),point:d,index:e,face:null,faceIndex:null,barycoord:null,object:l})}}class DL extends Oi{constructor(e,t,i,s,a=hi,l=hi,u,d,p){super(e,t,i,s,a,l,u,d,p),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const g=this;function y(){g.needsUpdate=!0,g._requestVideoFrameCallbackId=e.requestVideoFrameCallback(y)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(y))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class vH extends DL{constructor(e,t,i,s,a,l,u,d){super({},e,t,i,s,a,l,u,d),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class yH extends Oi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Wi,this.minFilter=Wi,this.generateMipmaps=!1,this.needsUpdate=!0}}class Lb extends Oi{constructor(e,t,i,s,a,l,u,d,p,g,y,x){super(null,l,u,d,p,g,s,a,y,x),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class xH extends Lb{constructor(e,t,i,s,a,l){super(e,t,i,a,l),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=Kr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class _H extends Lb{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,xl),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class bH extends Oi{constructor(e,t,i,s,a,l,u,d,p){super(e,t,i,s,a,l,u,d,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class mp extends Oi{constructor(e,t,i=Xa,s,a,l,u=Wi,d=Wi,p,g=bl,y=1){if(g!==bl&&g!==Su)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const x={width:e,height:t,depth:y};super(x,s,a,l,u,d,g,i,p),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Mu(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class IL extends mp{constructor(e,t=Xa,i=xl,s,a,l=Wi,u=Wi,d,p=bl){const g={width:e,height:e,depth:1},y=[g,g,g,g,g,g];super(e,e,t,i,s,a,l,u,d,p),this.image=y,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class RT extends Oi{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Pb extends Kt{constructor(e=1,t=1,i=4,s=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:s,heightSegments:a},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),s=Math.max(3,Math.floor(s)),a=Math.max(1,Math.floor(a));const l=[],u=[],d=[],p=[],g=t/2,y=Math.PI/2*e,x=t,_=2*y+x,w=i*2+a,A=s+1,E=new Y,M=new Y;for(let D=0;D<=w;D++){let L=0,N=0,P=0,z=0;if(D<=i){const O=D/i,F=O*Math.PI/2;N=-g-e*Math.cos(F),P=e*Math.sin(F),z=-e*Math.cos(F),L=O*y}else if(D<=i+a){const O=(D-i)/a;N=-g+O*t,P=e,z=0,L=y+O*x}else{const O=(D-i-a)/i,F=O*Math.PI/2;N=g+e*Math.sin(F),P=e*Math.cos(F),z=e*Math.sin(F),L=y+x+O*y}const B=Math.max(0,Math.min(1,L/_));let V=0;D===0?V=.5/s:D===w&&(V=-.5/s);for(let O=0;O<=s;O++){const F=O/s,W=F*Math.PI*2,ee=Math.sin(W),J=Math.cos(W);M.x=-P*J,M.y=N,M.z=P*ee,u.push(M.x,M.y,M.z),E.set(-P*J,z,P*ee),E.normalize(),d.push(E.x,E.y,E.z),p.push(F+V,B)}if(D>0){const O=(D-1)*A;for(let F=0;F<s;F++){const W=O+F,ee=O+F+1,J=D*A+F,ae=D*A+F+1;l.push(W,ee,J),l.push(ee,ae,J)}}}this.setIndex(l),this.setAttribute("position",new St(u,3)),this.setAttribute("normal",new St(d,3)),this.setAttribute("uv",new St(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pb(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Ub extends Kt{constructor(e=1,t=32,i=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:s},t=Math.max(3,t);const a=[],l=[],u=[],d=[],p=new Y,g=new Be;l.push(0,0,0),u.push(0,0,1),d.push(.5,.5);for(let y=0,x=3;y<=t;y++,x+=3){const _=i+y/t*s;p.x=e*Math.cos(_),p.y=e*Math.sin(_),l.push(p.x,p.y,p.z),u.push(0,0,1),g.x=(l[x]/e+1)/2,g.y=(l[x+1]/e+1)/2,d.push(g.x,g.y)}for(let y=1;y<=t;y++)a.push(y,y+1,0);this.setIndex(a),this.setAttribute("position",new St(l,3)),this.setAttribute("normal",new St(u,3)),this.setAttribute("uv",new St(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ub(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class D0 extends Kt{constructor(e=1,t=1,i=1,s=32,a=1,l=!1,u=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:s,heightSegments:a,openEnded:l,thetaStart:u,thetaLength:d};const p=this;s=Math.floor(s),a=Math.floor(a);const g=[],y=[],x=[],_=[];let w=0;const A=[],E=i/2;let M=0;D(),l===!1&&(e>0&&L(!0),t>0&&L(!1)),this.setIndex(g),this.setAttribute("position",new St(y,3)),this.setAttribute("normal",new St(x,3)),this.setAttribute("uv",new St(_,2));function D(){const N=new Y,P=new Y;let z=0;const B=(t-e)/i;for(let V=0;V<=a;V++){const O=[],F=V/a,W=F*(t-e)+e;for(let ee=0;ee<=s;ee++){const J=ee/s,ae=J*d+u,he=Math.sin(ae),Z=Math.cos(ae);P.x=W*he,P.y=-F*i+E,P.z=W*Z,y.push(P.x,P.y,P.z),N.set(he,B,Z).normalize(),x.push(N.x,N.y,N.z),_.push(J,1-F),O.push(w++)}A.push(O)}for(let V=0;V<s;V++)for(let O=0;O<a;O++){const F=A[O][V],W=A[O+1][V],ee=A[O+1][V+1],J=A[O][V+1];(e>0||O!==0)&&(g.push(F,W,J),z+=3),(t>0||O!==a-1)&&(g.push(W,ee,J),z+=3)}p.addGroup(M,z,0),M+=z}function L(N){const P=w,z=new Be,B=new Y;let V=0;const O=N===!0?e:t,F=N===!0?1:-1;for(let ee=1;ee<=s;ee++)y.push(0,E*F,0),x.push(0,F,0),_.push(.5,.5),w++;const W=w;for(let ee=0;ee<=s;ee++){const ae=ee/s*d+u,he=Math.cos(ae),Z=Math.sin(ae);B.x=O*Z,B.y=E*F,B.z=O*he,y.push(B.x,B.y,B.z),x.push(0,F,0),z.x=he*.5+.5,z.y=Z*.5*F+.5,_.push(z.x,z.y),w++}for(let ee=0;ee<s;ee++){const J=P+ee,ae=W+ee;N===!0?g.push(ae,ae+1,J):g.push(ae+1,ae,J),V+=3}p.addGroup(M,V,N===!0?1:2),M+=V}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new D0(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class I0 extends D0{constructor(e=1,t=1,i=32,s=1,a=!1,l=0,u=Math.PI*2){super(0,e,t,i,s,a,l,u),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:l,thetaLength:u}}static fromJSON(e){return new I0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class zu extends Kt{constructor(e=[],t=[],i=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:s};const a=[],l=[];u(s),p(i),g(),this.setAttribute("position",new St(a,3)),this.setAttribute("normal",new St(a.slice(),3)),this.setAttribute("uv",new St(l,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function u(D){const L=new Y,N=new Y,P=new Y;for(let z=0;z<t.length;z+=3)_(t[z+0],L),_(t[z+1],N),_(t[z+2],P),d(L,N,P,D)}function d(D,L,N,P){const z=P+1,B=[];for(let V=0;V<=z;V++){B[V]=[];const O=D.clone().lerp(N,V/z),F=L.clone().lerp(N,V/z),W=z-V;for(let ee=0;ee<=W;ee++)ee===0&&V===z?B[V][ee]=O:B[V][ee]=O.clone().lerp(F,ee/W)}for(let V=0;V<z;V++)for(let O=0;O<2*(z-V)-1;O++){const F=Math.floor(O/2);O%2===0?(x(B[V][F+1]),x(B[V+1][F]),x(B[V][F])):(x(B[V][F+1]),x(B[V+1][F+1]),x(B[V+1][F]))}}function p(D){const L=new Y;for(let N=0;N<a.length;N+=3)L.x=a[N+0],L.y=a[N+1],L.z=a[N+2],L.normalize().multiplyScalar(D),a[N+0]=L.x,a[N+1]=L.y,a[N+2]=L.z}function g(){const D=new Y;for(let L=0;L<a.length;L+=3){D.x=a[L+0],D.y=a[L+1],D.z=a[L+2];const N=E(D)/2/Math.PI+.5,P=M(D)/Math.PI+.5;l.push(N,1-P)}w(),y()}function y(){for(let D=0;D<l.length;D+=6){const L=l[D+0],N=l[D+2],P=l[D+4],z=Math.max(L,N,P),B=Math.min(L,N,P);z>.9&&B<.1&&(L<.2&&(l[D+0]+=1),N<.2&&(l[D+2]+=1),P<.2&&(l[D+4]+=1))}}function x(D){a.push(D.x,D.y,D.z)}function _(D,L){const N=D*3;L.x=e[N+0],L.y=e[N+1],L.z=e[N+2]}function w(){const D=new Y,L=new Y,N=new Y,P=new Y,z=new Be,B=new Be,V=new Be;for(let O=0,F=0;O<a.length;O+=9,F+=6){D.set(a[O+0],a[O+1],a[O+2]),L.set(a[O+3],a[O+4],a[O+5]),N.set(a[O+6],a[O+7],a[O+8]),z.set(l[F+0],l[F+1]),B.set(l[F+2],l[F+3]),V.set(l[F+4],l[F+5]),P.copy(D).add(L).add(N).divideScalar(3);const W=E(P);A(z,F+0,D,W),A(B,F+2,L,W),A(V,F+4,N,W)}}function A(D,L,N,P){P<0&&D.x===1&&(l[L]=D.x-1),N.x===0&&N.z===0&&(l[L]=P/2/Math.PI+.5)}function E(D){return Math.atan2(D.z,-D.x)}function M(D){return Math.atan2(-D.y,Math.sqrt(D.x*D.x+D.z*D.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zu(e.vertices,e.indices,e.radius,e.detail)}}class Ob extends zu{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ob(e.radius,e.detail)}}const ox=new Y,lx=new Y,I1=new Y,cx=new $r;class LL extends Kt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),a=Math.cos(Qf*t),l=e.getIndex(),u=e.getAttribute("position"),d=l?l.count:u.count,p=[0,0,0],g=["a","b","c"],y=new Array(3),x={},_=[];for(let w=0;w<d;w+=3){l?(p[0]=l.getX(w),p[1]=l.getX(w+1),p[2]=l.getX(w+2)):(p[0]=w,p[1]=w+1,p[2]=w+2);const{a:A,b:E,c:M}=cx;if(A.fromBufferAttribute(u,p[0]),E.fromBufferAttribute(u,p[1]),M.fromBufferAttribute(u,p[2]),cx.getNormal(I1),y[0]=`${Math.round(A.x*s)},${Math.round(A.y*s)},${Math.round(A.z*s)}`,y[1]=`${Math.round(E.x*s)},${Math.round(E.y*s)},${Math.round(E.z*s)}`,y[2]=`${Math.round(M.x*s)},${Math.round(M.y*s)},${Math.round(M.z*s)}`,!(y[0]===y[1]||y[1]===y[2]||y[2]===y[0]))for(let D=0;D<3;D++){const L=(D+1)%3,N=y[D],P=y[L],z=cx[g[D]],B=cx[g[L]],V=`${N}_${P}`,O=`${P}_${N}`;O in x&&x[O]?(I1.dot(x[O].normal)<=a&&(_.push(z.x,z.y,z.z),_.push(B.x,B.y,B.z)),x[O]=null):V in x||(x[V]={index0:p[D],index1:p[L],normal:I1.clone()})}}for(const w in x)if(x[w]){const{index0:A,index1:E}=x[w];ox.fromBufferAttribute(u,A),lx.fromBufferAttribute(u,E),_.push(ox.x,ox.y,ox.z),_.push(lx.x,lx.y,lx.z)}this.setAttribute("position",new St(_,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Co{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){ct("Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,s=this.getPoint(0),a=0;t.push(0);for(let l=1;l<=e;l++)i=this.getPoint(l/e),a+=i.distanceTo(s),t.push(a),s=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let s=0;const a=i.length;let l;t?l=t:l=e*i[a-1];let u=0,d=a-1,p;for(;u<=d;)if(s=Math.floor(u+(d-u)/2),p=i[s]-l,p<0)u=s+1;else if(p>0)d=s-1;else{d=s;break}if(s=d,i[s]===l)return s/(a-1);const g=i[s],x=i[s+1]-g,_=(l-g)/x;return(s+_)/(a-1)}getTangent(e,t){let s=e-1e-4,a=e+1e-4;s<0&&(s=0),a>1&&(a=1);const l=this.getPoint(s),u=this.getPoint(a),d=t||(l.isVector2?new Be:new Y);return d.copy(u).sub(l).normalize(),d}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new Y,s=[],a=[],l=[],u=new Y,d=new Wt;for(let _=0;_<=e;_++){const w=_/e;s[_]=this.getTangentAt(w,new Y)}a[0]=new Y,l[0]=new Y;let p=Number.MAX_VALUE;const g=Math.abs(s[0].x),y=Math.abs(s[0].y),x=Math.abs(s[0].z);g<=p&&(p=g,i.set(1,0,0)),y<=p&&(p=y,i.set(0,1,0)),x<=p&&i.set(0,0,1),u.crossVectors(s[0],i).normalize(),a[0].crossVectors(s[0],u),l[0].crossVectors(s[0],a[0]);for(let _=1;_<=e;_++){if(a[_]=a[_-1].clone(),l[_]=l[_-1].clone(),u.crossVectors(s[_-1],s[_]),u.length()>Number.EPSILON){u.normalize();const w=Math.acos(jt(s[_-1].dot(s[_]),-1,1));a[_].applyMatrix4(d.makeRotationAxis(u,w))}l[_].crossVectors(s[_],a[_])}if(t===!0){let _=Math.acos(jt(a[0].dot(a[e]),-1,1));_/=e,s[0].dot(u.crossVectors(a[0],a[e]))>0&&(_=-_);for(let w=1;w<=e;w++)a[w].applyMatrix4(d.makeRotationAxis(s[w],_*w)),l[w].crossVectors(s[w],a[w])}return{tangents:s,normals:a,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class zb extends Co{constructor(e=0,t=0,i=1,s=1,a=0,l=Math.PI*2,u=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=s,this.aStartAngle=a,this.aEndAngle=l,this.aClockwise=u,this.aRotation=d}getPoint(e,t=new Be){const i=t,s=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const l=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=s;for(;a>s;)a-=s;a<Number.EPSILON&&(l?a=0:a=s),this.aClockwise===!0&&!l&&(a===s?a=-s:a=a-s);const u=this.aStartAngle+e*a;let d=this.aX+this.xRadius*Math.cos(u),p=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const g=Math.cos(this.aRotation),y=Math.sin(this.aRotation),x=d-this.aX,_=p-this.aY;d=x*g-_*y+this.aX,p=x*y+_*g+this.aY}return i.set(d,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class PL extends zb{constructor(e,t,i,s,a,l){super(e,t,i,i,s,a,l),this.isArcCurve=!0,this.type="ArcCurve"}}function NT(){let n=0,e=0,t=0,i=0;function s(a,l,u,d){n=a,e=u,t=-3*a+3*l-2*u-d,i=2*a-2*l+u+d}return{initCatmullRom:function(a,l,u,d,p){s(l,u,p*(u-a),p*(d-l))},initNonuniformCatmullRom:function(a,l,u,d,p,g,y){let x=(l-a)/p-(u-a)/(p+g)+(u-l)/g,_=(u-l)/g-(d-l)/(g+y)+(d-u)/y;x*=g,_*=g,s(l,u,x,_)},calc:function(a){const l=a*a,u=l*a;return n+e*a+t*l+i*u}}}const ux=new Y,L1=new NT,P1=new NT,U1=new NT;class UL extends Co{constructor(e=[],t=!1,i="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=s}getPoint(e,t=new Y){const i=t,s=this.points,a=s.length,l=(a-(this.closed?0:1))*e;let u=Math.floor(l),d=l-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/a)+1)*a:d===0&&u===a-1&&(u=a-2,d=1);let p,g;this.closed||u>0?p=s[(u-1)%a]:(ux.subVectors(s[0],s[1]).add(s[0]),p=ux);const y=s[u%a],x=s[(u+1)%a];if(this.closed||u+2<a?g=s[(u+2)%a]:(ux.subVectors(s[a-1],s[a-2]).add(s[a-1]),g=ux),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let w=Math.pow(p.distanceToSquared(y),_),A=Math.pow(y.distanceToSquared(x),_),E=Math.pow(x.distanceToSquared(g),_);A<1e-4&&(A=1),w<1e-4&&(w=A),E<1e-4&&(E=A),L1.initNonuniformCatmullRom(p.x,y.x,x.x,g.x,w,A,E),P1.initNonuniformCatmullRom(p.y,y.y,x.y,g.y,w,A,E),U1.initNonuniformCatmullRom(p.z,y.z,x.z,g.z,w,A,E)}else this.curveType==="catmullrom"&&(L1.initCatmullRom(p.x,y.x,x.x,g.x,this.tension),P1.initCatmullRom(p.y,y.y,x.y,g.y,this.tension),U1.initCatmullRom(p.z,y.z,x.z,g.z,this.tension));return i.set(L1.calc(d),P1.calc(d),U1.calc(d)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new Y().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function L3(n,e,t,i,s){const a=(i-e)*.5,l=(s-t)*.5,u=n*n,d=n*u;return(2*t-2*i+a+l)*d+(-3*t+3*i-2*a-l)*u+a*n+t}function SH(n,e){const t=1-n;return t*t*e}function MH(n,e){return 2*(1-n)*n*e}function wH(n,e){return n*n*e}function jg(n,e,t,i){return SH(n,e)+MH(n,t)+wH(n,i)}function TH(n,e){const t=1-n;return t*t*t*e}function EH(n,e){const t=1-n;return 3*t*t*n*e}function AH(n,e){return 3*(1-n)*n*n*e}function CH(n,e){return n*n*n*e}function Gg(n,e,t,i,s){return TH(n,e)+EH(n,t)+AH(n,i)+CH(n,s)}class DT extends Co{constructor(e=new Be,t=new Be,i=new Be,s=new Be){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new Be){const i=t,s=this.v0,a=this.v1,l=this.v2,u=this.v3;return i.set(Gg(e,s.x,a.x,l.x,u.x),Gg(e,s.y,a.y,l.y,u.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class OL extends Co{constructor(e=new Y,t=new Y,i=new Y,s=new Y){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new Y){const i=t,s=this.v0,a=this.v1,l=this.v2,u=this.v3;return i.set(Gg(e,s.x,a.x,l.x,u.x),Gg(e,s.y,a.y,l.y,u.y),Gg(e,s.z,a.z,l.z,u.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class IT extends Co{constructor(e=new Be,t=new Be){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Be){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Be){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zL extends Co{constructor(e=new Y,t=new Y){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Y){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Y){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LT extends Co{constructor(e=new Be,t=new Be,i=new Be){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Be){const i=t,s=this.v0,a=this.v1,l=this.v2;return i.set(jg(e,s.x,a.x,l.x),jg(e,s.y,a.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class PT extends Co{constructor(e=new Y,t=new Y,i=new Y){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Y){const i=t,s=this.v0,a=this.v1,l=this.v2;return i.set(jg(e,s.x,a.x,l.x),jg(e,s.y,a.y,l.y),jg(e,s.z,a.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class UT extends Co{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Be){const i=t,s=this.points,a=(s.length-1)*e,l=Math.floor(a),u=a-l,d=s[l===0?l:l-1],p=s[l],g=s[l>s.length-2?s.length-1:l+1],y=s[l>s.length-3?s.length-1:l+2];return i.set(L3(u,d.x,p.x,g.x,y.x),L3(u,d.y,p.y,g.y,y.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new Be().fromArray(s))}return this}}var X_=Object.freeze({__proto__:null,ArcCurve:PL,CatmullRomCurve3:UL,CubicBezierCurve:DT,CubicBezierCurve3:OL,EllipseCurve:zb,LineCurve:IT,LineCurve3:zL,QuadraticBezierCurve:LT,QuadraticBezierCurve3:PT,SplineCurve:UT});class kL extends Co{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new X_[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),s=this.getCurveLengths();let a=0;for(;a<s.length;){if(s[a]>=i){const l=s[a]-i,u=this.curves[a],d=u.getLength(),p=d===0?0:1-l/d;return u.getPointAt(p,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,s=this.curves.length;i<s;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let s=0,a=this.curves;s<a.length;s++){const l=a[s],u=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,d=l.getPoints(u);for(let p=0;p<d.length;p++){const g=d[p];i&&i.equals(g)||(t.push(g),i=g)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(new X_[s.type]().fromJSON(s))}return this}}class q_ extends kL{constructor(e){super(),this.type="Path",this.currentPoint=new Be,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new IT(this.currentPoint.clone(),new Be(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,s){const a=new LT(this.currentPoint.clone(),new Be(e,t),new Be(i,s));return this.curves.push(a),this.currentPoint.set(i,s),this}bezierCurveTo(e,t,i,s,a,l){const u=new DT(this.currentPoint.clone(),new Be(e,t),new Be(i,s),new Be(a,l));return this.curves.push(u),this.currentPoint.set(a,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new UT(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,s,a,l){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(e+u,t+d,i,s,a,l),this}absarc(e,t,i,s,a,l){return this.absellipse(e,t,i,i,s,a,l),this}ellipse(e,t,i,s,a,l,u,d){const p=this.currentPoint.x,g=this.currentPoint.y;return this.absellipse(e+p,t+g,i,s,a,l,u,d),this}absellipse(e,t,i,s,a,l,u,d){const p=new zb(e,t,i,s,a,l,u,d);if(this.curves.length>0){const y=p.getPoint(0);y.equals(this.currentPoint)||this.lineTo(y.x,y.y)}this.curves.push(p);const g=p.getPoint(1);return this.currentPoint.copy(g),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class eh extends q_{constructor(e){super(e),this.uuid=ha(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,s=this.holes.length;i<s;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(new q_().fromJSON(s))}return this}}function RH(n,e,t=2){const i=e&&e.length,s=i?e[0]*t:n.length;let a=FL(n,0,s,t,!0);const l=[];if(!a||a.next===a.prev)return l;let u,d,p;if(i&&(a=PH(n,e,a,t)),n.length>80*t){u=n[0],d=n[1];let g=u,y=d;for(let x=t;x<s;x+=t){const _=n[x],w=n[x+1];_<u&&(u=_),w<d&&(d=w),_>g&&(g=_),w>y&&(y=w)}p=Math.max(g-u,y-d),p=p!==0?32767/p:0}return u0(a,l,t,u,d,p,0),l}function FL(n,e,t,i,s){let a;if(s===WH(n,e,t,i)>0)for(let l=e;l<t;l+=i)a=P3(l/i|0,n[l],n[l+1],a);else for(let l=t-i;l>=e;l-=i)a=P3(l/i|0,n[l],n[l+1],a);return a&&gp(a,a.next)&&(h0(a),a=a.next),a}function lh(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(gp(t,t.next)||Ei(t.prev,t,t.next)===0)){if(h0(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function u0(n,e,t,i,s,a,l){if(!n)return;!l&&a&&FH(n,i,s,a);let u=n;for(;n.prev!==n.next;){const d=n.prev,p=n.next;if(a?DH(n,i,s,a):NH(n)){e.push(d.i,n.i,p.i),h0(n),n=p.next,u=p.next;continue}if(n=p,n===u){l?l===1?(n=IH(lh(n),e),u0(n,e,t,i,s,a,2)):l===2&&LH(n,e,t,i,s,a):u0(lh(n),e,t,i,s,a,1);break}}}function NH(n){const e=n.prev,t=n,i=n.next;if(Ei(e,t,i)>=0)return!1;const s=e.x,a=t.x,l=i.x,u=e.y,d=t.y,p=i.y,g=Math.min(s,a,l),y=Math.min(u,d,p),x=Math.max(s,a,l),_=Math.max(u,d,p);let w=i.next;for(;w!==e;){if(w.x>=g&&w.x<=x&&w.y>=y&&w.y<=_&&Ag(s,u,a,d,l,p,w.x,w.y)&&Ei(w.prev,w,w.next)>=0)return!1;w=w.next}return!0}function DH(n,e,t,i){const s=n.prev,a=n,l=n.next;if(Ei(s,a,l)>=0)return!1;const u=s.x,d=a.x,p=l.x,g=s.y,y=a.y,x=l.y,_=Math.min(u,d,p),w=Math.min(g,y,x),A=Math.max(u,d,p),E=Math.max(g,y,x),M=ZM(_,w,e,t,i),D=ZM(A,E,e,t,i);let L=n.prevZ,N=n.nextZ;for(;L&&L.z>=M&&N&&N.z<=D;){if(L.x>=_&&L.x<=A&&L.y>=w&&L.y<=E&&L!==s&&L!==l&&Ag(u,g,d,y,p,x,L.x,L.y)&&Ei(L.prev,L,L.next)>=0||(L=L.prevZ,N.x>=_&&N.x<=A&&N.y>=w&&N.y<=E&&N!==s&&N!==l&&Ag(u,g,d,y,p,x,N.x,N.y)&&Ei(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;L&&L.z>=M;){if(L.x>=_&&L.x<=A&&L.y>=w&&L.y<=E&&L!==s&&L!==l&&Ag(u,g,d,y,p,x,L.x,L.y)&&Ei(L.prev,L,L.next)>=0)return!1;L=L.prevZ}for(;N&&N.z<=D;){if(N.x>=_&&N.x<=A&&N.y>=w&&N.y<=E&&N!==s&&N!==l&&Ag(u,g,d,y,p,x,N.x,N.y)&&Ei(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function IH(n,e){let t=n;do{const i=t.prev,s=t.next.next;!gp(i,s)&&VL(i,t,t.next,s)&&f0(i,s)&&f0(s,i)&&(e.push(i.i,t.i,s.i),h0(t),h0(t.next),t=n=s),t=t.next}while(t!==n);return lh(t)}function LH(n,e,t,i,s,a){let l=n;do{let u=l.next.next;for(;u!==l.prev;){if(l.i!==u.i&&HH(l,u)){let d=HL(l,u);l=lh(l,l.next),d=lh(d,d.next),u0(l,e,t,i,s,a,0),u0(d,e,t,i,s,a,0);return}u=u.next}l=l.next}while(l!==n)}function PH(n,e,t,i){const s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a]*i,d=a<l-1?e[a+1]*i:n.length,p=FL(n,u,d,i,!1);p===p.next&&(p.steiner=!0),s.push(VH(p))}s.sort(UH);for(let a=0;a<s.length;a++)t=OH(s[a],t);return t}function UH(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),s=(e.next.y-e.y)/(e.next.x-e.x);t=i-s}return t}function OH(n,e){const t=zH(n,e);if(!t)return e;const i=HL(t,n);return lh(i,i.next),lh(t,t.next)}function zH(n,e){let t=e;const i=n.x,s=n.y;let a=-1/0,l;if(gp(n,t))return t;do{if(gp(n,t.next))return t.next;if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const y=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=i&&y>a&&(a=y,l=t.x<t.next.x?t:t.next,y===i))return l}t=t.next}while(t!==e);if(!l)return null;const u=l,d=l.x,p=l.y;let g=1/0;t=l;do{if(i>=t.x&&t.x>=d&&i!==t.x&&BL(s<p?i:a,s,d,p,s<p?a:i,s,t.x,t.y)){const y=Math.abs(s-t.y)/(i-t.x);f0(t,n)&&(y<g||y===g&&(t.x>l.x||t.x===l.x&&kH(l,t)))&&(l=t,g=y)}t=t.next}while(t!==u);return l}function kH(n,e){return Ei(n.prev,n,e.prev)<0&&Ei(e.next,n,n.next)<0}function FH(n,e,t,i){let s=n;do s.z===0&&(s.z=ZM(s.x,s.y,e,t,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,BH(s)}function BH(n){let e,t=1;do{let i=n,s;n=null;let a=null;for(e=0;i;){e++;let l=i,u=0;for(let p=0;p<t&&(u++,l=l.nextZ,!!l);p++);let d=t;for(;u>0||d>0&&l;)u!==0&&(d===0||!l||i.z<=l.z)?(s=i,i=i.nextZ,u--):(s=l,l=l.nextZ,d--),a?a.nextZ=s:n=s,s.prevZ=a,a=s;i=l}a.nextZ=null,t*=2}while(e>1);return n}function ZM(n,e,t,i,s){return n=(n-t)*s|0,e=(e-i)*s|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function VH(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function BL(n,e,t,i,s,a,l,u){return(s-l)*(e-u)>=(n-l)*(a-u)&&(n-l)*(i-u)>=(t-l)*(e-u)&&(t-l)*(a-u)>=(s-l)*(i-u)}function Ag(n,e,t,i,s,a,l,u){return!(n===l&&e===u)&&BL(n,e,t,i,s,a,l,u)}function HH(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!jH(n,e)&&(f0(n,e)&&f0(e,n)&&GH(n,e)&&(Ei(n.prev,n,e.prev)||Ei(n,e.prev,e))||gp(n,e)&&Ei(n.prev,n,n.next)>0&&Ei(e.prev,e,e.next)>0)}function Ei(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function gp(n,e){return n.x===e.x&&n.y===e.y}function VL(n,e,t,i){const s=hx(Ei(n,e,t)),a=hx(Ei(n,e,i)),l=hx(Ei(t,i,n)),u=hx(Ei(t,i,e));return!!(s!==a&&l!==u||s===0&&fx(n,t,e)||a===0&&fx(n,i,e)||l===0&&fx(t,n,i)||u===0&&fx(t,e,i))}function fx(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function hx(n){return n>0?1:n<0?-1:0}function jH(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&VL(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function f0(n,e){return Ei(n.prev,n,n.next)<0?Ei(n,e,n.next)>=0&&Ei(n,n.prev,e)>=0:Ei(n,e,n.prev)<0||Ei(n,n.next,e)<0}function GH(n,e){let t=n,i=!1;const s=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&s<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function HL(n,e){const t=YM(n.i,n.x,n.y),i=YM(e.i,e.x,e.y),s=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=s,s.prev=t,i.next=t,t.prev=i,a.next=i,i.prev=a,i}function P3(n,e,t,i){const s=YM(n,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function h0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function YM(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function WH(n,e,t,i){let s=0;for(let a=e,l=t-i;a<t;a+=i)s+=(n[l]-n[a])*(n[a+1]+n[l+1]),l=a;return s}class XH{static triangulate(e,t,i=2){return RH(e,t,i)}}class Eo{static area(e){const t=e.length;let i=0;for(let s=t-1,a=0;a<t;s=a++)i+=e[s].x*e[a].y-e[a].x*e[s].y;return i*.5}static isClockWise(e){return Eo.area(e)<0}static triangulateShape(e,t){const i=[],s=[],a=[];U3(e),O3(i,e);let l=e.length;t.forEach(U3);for(let d=0;d<t.length;d++)s.push(l),l+=t[d].length,O3(i,t[d]);const u=XH.triangulate(i,s);for(let d=0;d<u.length;d+=3)a.push(u.slice(d,d+3));return a}}function U3(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function O3(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class kb extends Kt{constructor(e=new eh([new Be(.5,.5),new Be(-.5,.5),new Be(-.5,-.5),new Be(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,s=[],a=[];for(let u=0,d=e.length;u<d;u++){const p=e[u];l(p)}this.setAttribute("position",new St(s,3)),this.setAttribute("uv",new St(a,2)),this.computeVertexNormals();function l(u){const d=[],p=t.curveSegments!==void 0?t.curveSegments:12,g=t.steps!==void 0?t.steps:1,y=t.depth!==void 0?t.depth:1;let x=t.bevelEnabled!==void 0?t.bevelEnabled:!0,_=t.bevelThickness!==void 0?t.bevelThickness:.2,w=t.bevelSize!==void 0?t.bevelSize:_-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,E=t.bevelSegments!==void 0?t.bevelSegments:3;const M=t.extrudePath,D=t.UVGenerator!==void 0?t.UVGenerator:qH;let L,N=!1,P,z,B,V;if(M){L=M.getSpacedPoints(g),N=!0,x=!1;const De=M.isCatmullRomCurve3?M.closed:!1;P=M.computeFrenetFrames(g,De),z=new Y,B=new Y,V=new Y}x||(E=0,_=0,w=0,A=0);const O=u.extractPoints(p);let F=O.shape;const W=O.holes;if(!Eo.isClockWise(F)){F=F.reverse();for(let De=0,je=W.length;De<je;De++){const Pe=W[De];Eo.isClockWise(Pe)&&(W[De]=Pe.reverse())}}function J(De){const Pe=10000000000000001e-36;let tt=De[0];for(let $=1;$<=De.length;$++){const Tt=$%De.length,st=De[Tt],At=st.x-tt.x,Ze=st.y-tt.y,X=At*At+Ze*Ze,k=Math.max(Math.abs(st.x),Math.abs(st.y),Math.abs(tt.x),Math.abs(tt.y)),se=Pe*k*k;if(X<=se){De.splice(Tt,1),$--;continue}tt=st}}J(F),W.forEach(J);const ae=W.length,he=F;for(let De=0;De<ae;De++){const je=W[De];F=F.concat(je)}function Z(De,je,Pe){return je||Rt("ExtrudeGeometry: vec does not exist"),De.clone().addScaledVector(je,Pe)}const K=F.length;function le(De,je,Pe){let tt,$,Tt;const st=De.x-je.x,At=De.y-je.y,Ze=Pe.x-De.x,X=Pe.y-De.y,k=st*st+At*At,se=st*X-At*Ze;if(Math.abs(se)>Number.EPSILON){const Me=Math.sqrt(k),Ue=Math.sqrt(Ze*Ze+X*X),we=je.x-At/Me,dt=je.y+st/Me,Ke=Pe.x-X/Ue,xt=Pe.y+Ze/Ue,Dt=((Ke-we)*X-(xt-dt)*Ze)/(st*X-At*Ze);tt=we+st*Dt-De.x,$=dt+At*Dt-De.y;const Ve=tt*tt+$*$;if(Ve<=2)return new Be(tt,$);Tt=Math.sqrt(Ve/2)}else{let Me=!1;st>Number.EPSILON?Ze>Number.EPSILON&&(Me=!0):st<-Number.EPSILON?Ze<-Number.EPSILON&&(Me=!0):Math.sign(At)===Math.sign(X)&&(Me=!0),Me?(tt=-At,$=st,Tt=Math.sqrt(k)):(tt=st,$=At,Tt=Math.sqrt(k/2))}return new Be(tt/Tt,$/Tt)}const Ee=[];for(let De=0,je=he.length,Pe=je-1,tt=De+1;De<je;De++,Pe++,tt++)Pe===je&&(Pe=0),tt===je&&(tt=0),Ee[De]=le(he[De],he[Pe],he[tt]);const Re=[];let q,oe=Ee.concat();for(let De=0,je=ae;De<je;De++){const Pe=W[De];q=[];for(let tt=0,$=Pe.length,Tt=$-1,st=tt+1;tt<$;tt++,Tt++,st++)Tt===$&&(Tt=0),st===$&&(st=0),q[tt]=le(Pe[tt],Pe[Tt],Pe[st]);Re.push(q),oe=oe.concat(q)}let Ae;if(E===0)Ae=Eo.triangulateShape(he,W);else{const De=[],je=[];for(let Pe=0;Pe<E;Pe++){const tt=Pe/E,$=_*Math.cos(tt*Math.PI/2),Tt=w*Math.sin(tt*Math.PI/2)+A;for(let st=0,At=he.length;st<At;st++){const Ze=Z(he[st],Ee[st],Tt);it(Ze.x,Ze.y,-$),tt===0&&De.push(Ze)}for(let st=0,At=ae;st<At;st++){const Ze=W[st];q=Re[st];const X=[];for(let k=0,se=Ze.length;k<se;k++){const Me=Z(Ze[k],q[k],Tt);it(Me.x,Me.y,-$),tt===0&&X.push(Me)}tt===0&&je.push(X)}}Ae=Eo.triangulateShape(De,je)}const ke=Ae.length,rt=w+A;for(let De=0;De<K;De++){const je=x?Z(F[De],oe[De],rt):F[De];N?(B.copy(P.normals[0]).multiplyScalar(je.x),z.copy(P.binormals[0]).multiplyScalar(je.y),V.copy(L[0]).add(B).add(z),it(V.x,V.y,V.z)):it(je.x,je.y,0)}for(let De=1;De<=g;De++)for(let je=0;je<K;je++){const Pe=x?Z(F[je],oe[je],rt):F[je];N?(B.copy(P.normals[De]).multiplyScalar(Pe.x),z.copy(P.binormals[De]).multiplyScalar(Pe.y),V.copy(L[De]).add(B).add(z),it(V.x,V.y,V.z)):it(Pe.x,Pe.y,y/g*De)}for(let De=E-1;De>=0;De--){const je=De/E,Pe=_*Math.cos(je*Math.PI/2),tt=w*Math.sin(je*Math.PI/2)+A;for(let $=0,Tt=he.length;$<Tt;$++){const st=Z(he[$],Ee[$],tt);it(st.x,st.y,y+Pe)}for(let $=0,Tt=W.length;$<Tt;$++){const st=W[$];q=Re[$];for(let At=0,Ze=st.length;At<Ze;At++){const X=Z(st[At],q[At],tt);N?it(X.x,X.y+L[g-1].y,L[g-1].x+Pe):it(X.x,X.y,y+Pe)}}}de(),Ce();function de(){const De=s.length/3;if(x){let je=0,Pe=K*je;for(let tt=0;tt<ke;tt++){const $=Ae[tt];ht($[2]+Pe,$[1]+Pe,$[0]+Pe)}je=g+E*2,Pe=K*je;for(let tt=0;tt<ke;tt++){const $=Ae[tt];ht($[0]+Pe,$[1]+Pe,$[2]+Pe)}}else{for(let je=0;je<ke;je++){const Pe=Ae[je];ht(Pe[2],Pe[1],Pe[0])}for(let je=0;je<ke;je++){const Pe=Ae[je];ht(Pe[0]+K*g,Pe[1]+K*g,Pe[2]+K*g)}}i.addGroup(De,s.length/3-De,0)}function Ce(){const De=s.length/3;let je=0;et(he,je),je+=he.length;for(let Pe=0,tt=W.length;Pe<tt;Pe++){const $=W[Pe];et($,je),je+=$.length}i.addGroup(De,s.length/3-De,1)}function et(De,je){let Pe=De.length;for(;--Pe>=0;){const tt=Pe;let $=Pe-1;$<0&&($=De.length-1);for(let Tt=0,st=g+E*2;Tt<st;Tt++){const At=K*Tt,Ze=K*(Tt+1),X=je+tt+At,k=je+$+At,se=je+$+Ze,Me=je+tt+Ze;tn(X,k,se,Me)}}}function it(De,je,Pe){d.push(De),d.push(je),d.push(Pe)}function ht(De,je,Pe){fn(De),fn(je),fn(Pe);const tt=s.length/3,$=D.generateTopUV(i,s,tt-3,tt-2,tt-1);Pt($[0]),Pt($[1]),Pt($[2])}function tn(De,je,Pe,tt){fn(De),fn(je),fn(tt),fn(je),fn(Pe),fn(tt);const $=s.length/3,Tt=D.generateSideWallUV(i,s,$-6,$-3,$-2,$-1);Pt(Tt[0]),Pt(Tt[1]),Pt(Tt[3]),Pt(Tt[1]),Pt(Tt[2]),Pt(Tt[3])}function fn(De){s.push(d[De*3+0]),s.push(d[De*3+1]),s.push(d[De*3+2])}function Pt(De){a.push(De.x),a.push(De.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return ZH(t,i,e)}static fromJSON(e,t){const i=[];for(let a=0,l=e.shapes.length;a<l;a++){const u=t[e.shapes[a]];i.push(u)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new X_[s.type]().fromJSON(s)),new kb(i,e.options)}}const qH={generateTopUV:function(n,e,t,i,s){const a=e[t*3],l=e[t*3+1],u=e[i*3],d=e[i*3+1],p=e[s*3],g=e[s*3+1];return[new Be(a,l),new Be(u,d),new Be(p,g)]},generateSideWallUV:function(n,e,t,i,s,a){const l=e[t*3],u=e[t*3+1],d=e[t*3+2],p=e[i*3],g=e[i*3+1],y=e[i*3+2],x=e[s*3],_=e[s*3+1],w=e[s*3+2],A=e[a*3],E=e[a*3+1],M=e[a*3+2];return Math.abs(u-g)<Math.abs(l-p)?[new Be(l,1-d),new Be(p,1-y),new Be(x,1-w),new Be(A,1-M)]:[new Be(u,1-d),new Be(g,1-y),new Be(_,1-w),new Be(E,1-M)]}};function ZH(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,s=n.length;i<s;i++){const a=n[i];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Fb extends zu{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Fb(e.radius,e.detail)}}class Bb extends Kt{constructor(e=[new Be(0,-.5),new Be(.5,0),new Be(0,.5)],t=12,i=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:s},t=Math.floor(t),s=jt(s,0,Math.PI*2);const a=[],l=[],u=[],d=[],p=[],g=1/t,y=new Y,x=new Be,_=new Y,w=new Y,A=new Y;let E=0,M=0;for(let D=0;D<=e.length-1;D++)switch(D){case 0:E=e[D+1].x-e[D].x,M=e[D+1].y-e[D].y,_.x=M*1,_.y=-E,_.z=M*0,A.copy(_),_.normalize(),d.push(_.x,_.y,_.z);break;case e.length-1:d.push(A.x,A.y,A.z);break;default:E=e[D+1].x-e[D].x,M=e[D+1].y-e[D].y,_.x=M*1,_.y=-E,_.z=M*0,w.copy(_),_.x+=A.x,_.y+=A.y,_.z+=A.z,_.normalize(),d.push(_.x,_.y,_.z),A.copy(w)}for(let D=0;D<=t;D++){const L=i+D*g*s,N=Math.sin(L),P=Math.cos(L);for(let z=0;z<=e.length-1;z++){y.x=e[z].x*N,y.y=e[z].y,y.z=e[z].x*P,l.push(y.x,y.y,y.z),x.x=D/t,x.y=z/(e.length-1),u.push(x.x,x.y);const B=d[3*z+0]*N,V=d[3*z+1],O=d[3*z+0]*P;p.push(B,V,O)}}for(let D=0;D<t;D++)for(let L=0;L<e.length-1;L++){const N=L+D*e.length,P=N,z=N+e.length,B=N+e.length+1,V=N+1;a.push(P,z,V),a.push(B,V,z)}this.setIndex(a),this.setAttribute("position",new St(l,3)),this.setAttribute("uv",new St(u,2)),this.setAttribute("normal",new St(p,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bb(e.points,e.segments,e.phiStart,e.phiLength)}}class L0 extends zu{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new L0(e.radius,e.detail)}}class Ap extends Kt{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const a=e/2,l=t/2,u=Math.floor(i),d=Math.floor(s),p=u+1,g=d+1,y=e/u,x=t/d,_=[],w=[],A=[],E=[];for(let M=0;M<g;M++){const D=M*x-l;for(let L=0;L<p;L++){const N=L*y-a;w.push(N,-D,0),A.push(0,0,1),E.push(L/u),E.push(1-M/d)}}for(let M=0;M<d;M++)for(let D=0;D<u;D++){const L=D+p*M,N=D+p*(M+1),P=D+1+p*(M+1),z=D+1+p*M;_.push(L,N,z),_.push(N,P,z)}this.setIndex(_),this.setAttribute("position",new St(w,3)),this.setAttribute("normal",new St(A,3)),this.setAttribute("uv",new St(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ap(e.width,e.height,e.widthSegments,e.heightSegments)}}class Vb extends Kt{constructor(e=.5,t=1,i=32,s=1,a=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:s,thetaStart:a,thetaLength:l},i=Math.max(3,i),s=Math.max(1,s);const u=[],d=[],p=[],g=[];let y=e;const x=(t-e)/s,_=new Y,w=new Be;for(let A=0;A<=s;A++){for(let E=0;E<=i;E++){const M=a+E/i*l;_.x=y*Math.cos(M),_.y=y*Math.sin(M),d.push(_.x,_.y,_.z),p.push(0,0,1),w.x=(_.x/t+1)/2,w.y=(_.y/t+1)/2,g.push(w.x,w.y)}y+=x}for(let A=0;A<s;A++){const E=A*(i+1);for(let M=0;M<i;M++){const D=M+E,L=D,N=D+i+1,P=D+i+2,z=D+1;u.push(L,N,z),u.push(N,P,z)}}this.setIndex(u),this.setAttribute("position",new St(d,3)),this.setAttribute("normal",new St(p,3)),this.setAttribute("uv",new St(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vb(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Hb extends Kt{constructor(e=new eh([new Be(0,.5),new Be(-.5,-.5),new Be(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],s=[],a=[],l=[];let u=0,d=0;if(Array.isArray(e)===!1)p(e);else for(let g=0;g<e.length;g++)p(e[g]),this.addGroup(u,d,g),u+=d,d=0;this.setIndex(i),this.setAttribute("position",new St(s,3)),this.setAttribute("normal",new St(a,3)),this.setAttribute("uv",new St(l,2));function p(g){const y=s.length/3,x=g.extractPoints(t);let _=x.shape;const w=x.holes;Eo.isClockWise(_)===!1&&(_=_.reverse());for(let E=0,M=w.length;E<M;E++){const D=w[E];Eo.isClockWise(D)===!0&&(w[E]=D.reverse())}const A=Eo.triangulateShape(_,w);for(let E=0,M=w.length;E<M;E++){const D=w[E];_=_.concat(D)}for(let E=0,M=_.length;E<M;E++){const D=_[E];s.push(D.x,D.y,0),a.push(0,0,1),l.push(D.x,D.y)}for(let E=0,M=A.length;E<M;E++){const D=A[E],L=D[0]+y,N=D[1]+y,P=D[2]+y;i.push(L,N,P),d+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return YH(t,e)}static fromJSON(e,t){const i=[];for(let s=0,a=e.shapes.length;s<a;s++){const l=t[e.shapes[s]];i.push(l)}return new Hb(i,e.curveSegments)}}function YH(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const s=n[t];e.shapes.push(s.uuid)}else e.shapes.push(n.uuid);return e}class P0 extends Kt{constructor(e=1,t=32,i=16,s=0,a=Math.PI*2,l=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:s,phiLength:a,thetaStart:l,thetaLength:u},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const d=Math.min(l+u,Math.PI);let p=0;const g=[],y=new Y,x=new Y,_=[],w=[],A=[],E=[];for(let M=0;M<=i;M++){const D=[],L=M/i;let N=0;M===0&&l===0?N=.5/t:M===i&&d===Math.PI&&(N=-.5/t);for(let P=0;P<=t;P++){const z=P/t;y.x=-e*Math.cos(s+z*a)*Math.sin(l+L*u),y.y=e*Math.cos(l+L*u),y.z=e*Math.sin(s+z*a)*Math.sin(l+L*u),w.push(y.x,y.y,y.z),x.copy(y).normalize(),A.push(x.x,x.y,x.z),E.push(z+N,1-L),D.push(p++)}g.push(D)}for(let M=0;M<i;M++)for(let D=0;D<t;D++){const L=g[M][D+1],N=g[M][D],P=g[M+1][D],z=g[M+1][D+1];(M!==0||l>0)&&_.push(L,N,z),(M!==i-1||d<Math.PI)&&_.push(N,P,z)}this.setIndex(_),this.setAttribute("position",new St(w,3)),this.setAttribute("normal",new St(A,3)),this.setAttribute("uv",new St(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new P0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class jb extends zu{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new jb(e.radius,e.detail)}}class Gb extends Kt{constructor(e=1,t=.4,i=12,s=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:s,arc:a},i=Math.floor(i),s=Math.floor(s);const l=[],u=[],d=[],p=[],g=new Y,y=new Y,x=new Y;for(let _=0;_<=i;_++)for(let w=0;w<=s;w++){const A=w/s*a,E=_/i*Math.PI*2;y.x=(e+t*Math.cos(E))*Math.cos(A),y.y=(e+t*Math.cos(E))*Math.sin(A),y.z=t*Math.sin(E),u.push(y.x,y.y,y.z),g.x=e*Math.cos(A),g.y=e*Math.sin(A),x.subVectors(y,g).normalize(),d.push(x.x,x.y,x.z),p.push(w/s),p.push(_/i)}for(let _=1;_<=i;_++)for(let w=1;w<=s;w++){const A=(s+1)*_+w-1,E=(s+1)*(_-1)+w-1,M=(s+1)*(_-1)+w,D=(s+1)*_+w;l.push(A,E,D),l.push(E,M,D)}this.setIndex(l),this.setAttribute("position",new St(u,3)),this.setAttribute("normal",new St(d,3)),this.setAttribute("uv",new St(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gb(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Wb extends Kt{constructor(e=1,t=.4,i=64,s=8,a=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:s,p:a,q:l},i=Math.floor(i),s=Math.floor(s);const u=[],d=[],p=[],g=[],y=new Y,x=new Y,_=new Y,w=new Y,A=new Y,E=new Y,M=new Y;for(let L=0;L<=i;++L){const N=L/i*a*Math.PI*2;D(N,a,l,e,_),D(N+.01,a,l,e,w),E.subVectors(w,_),M.addVectors(w,_),A.crossVectors(E,M),M.crossVectors(A,E),A.normalize(),M.normalize();for(let P=0;P<=s;++P){const z=P/s*Math.PI*2,B=-t*Math.cos(z),V=t*Math.sin(z);y.x=_.x+(B*M.x+V*A.x),y.y=_.y+(B*M.y+V*A.y),y.z=_.z+(B*M.z+V*A.z),d.push(y.x,y.y,y.z),x.subVectors(y,_).normalize(),p.push(x.x,x.y,x.z),g.push(L/i),g.push(P/s)}}for(let L=1;L<=i;L++)for(let N=1;N<=s;N++){const P=(s+1)*(L-1)+(N-1),z=(s+1)*L+(N-1),B=(s+1)*L+N,V=(s+1)*(L-1)+N;u.push(P,z,V),u.push(z,B,V)}this.setIndex(u),this.setAttribute("position",new St(d,3)),this.setAttribute("normal",new St(p,3)),this.setAttribute("uv",new St(g,2));function D(L,N,P,z,B){const V=Math.cos(L),O=Math.sin(L),F=P/N*L,W=Math.cos(F);B.x=z*(2+W)*.5*V,B.y=z*(2+W)*O*.5,B.z=z*Math.sin(F)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wb(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Xb extends Kt{constructor(e=new PT(new Y(-1,-1,0),new Y(-1,1,0),new Y(1,1,0)),t=64,i=1,s=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:s,closed:a};const l=e.computeFrenetFrames(t,a);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const u=new Y,d=new Y,p=new Be;let g=new Y;const y=[],x=[],_=[],w=[];A(),this.setIndex(w),this.setAttribute("position",new St(y,3)),this.setAttribute("normal",new St(x,3)),this.setAttribute("uv",new St(_,2));function A(){for(let L=0;L<t;L++)E(L);E(a===!1?t:0),D(),M()}function E(L){g=e.getPointAt(L/t,g);const N=l.normals[L],P=l.binormals[L];for(let z=0;z<=s;z++){const B=z/s*Math.PI*2,V=Math.sin(B),O=-Math.cos(B);d.x=O*N.x+V*P.x,d.y=O*N.y+V*P.y,d.z=O*N.z+V*P.z,d.normalize(),x.push(d.x,d.y,d.z),u.x=g.x+i*d.x,u.y=g.y+i*d.y,u.z=g.z+i*d.z,y.push(u.x,u.y,u.z)}}function M(){for(let L=1;L<=t;L++)for(let N=1;N<=s;N++){const P=(s+1)*(L-1)+(N-1),z=(s+1)*L+(N-1),B=(s+1)*L+N,V=(s+1)*(L-1)+N;w.push(P,z,V),w.push(z,B,V)}}function D(){for(let L=0;L<=t;L++)for(let N=0;N<=s;N++)p.x=L/t,p.y=N/s,_.push(p.x,p.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Xb(new X_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class jL extends Kt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,s=new Y,a=new Y;if(e.index!==null){const l=e.attributes.position,u=e.index;let d=e.groups;d.length===0&&(d=[{start:0,count:u.count,materialIndex:0}]);for(let p=0,g=d.length;p<g;++p){const y=d[p],x=y.start,_=y.count;for(let w=x,A=x+_;w<A;w+=3)for(let E=0;E<3;E++){const M=u.getX(w+E),D=u.getX(w+(E+1)%3);s.fromBufferAttribute(l,M),a.fromBufferAttribute(l,D),z3(s,a,i)===!0&&(t.push(s.x,s.y,s.z),t.push(a.x,a.y,a.z))}}}else{const l=e.attributes.position;for(let u=0,d=l.count/3;u<d;u++)for(let p=0;p<3;p++){const g=3*u+p,y=3*u+(p+1)%3;s.fromBufferAttribute(l,g),a.fromBufferAttribute(l,y),z3(s,a,i)===!0&&(t.push(s.x,s.y,s.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new St(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function z3(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(s)===!0?!1:(t.add(i),t.add(s),!0)}var k3=Object.freeze({__proto__:null,BoxGeometry:hh,CapsuleGeometry:Pb,CircleGeometry:Ub,ConeGeometry:I0,CylinderGeometry:D0,DodecahedronGeometry:Ob,EdgesGeometry:LL,ExtrudeGeometry:kb,IcosahedronGeometry:Fb,LatheGeometry:Bb,OctahedronGeometry:L0,PlaneGeometry:Ap,PolyhedronGeometry:zu,RingGeometry:Vb,ShapeGeometry:Hb,SphereGeometry:P0,TetrahedronGeometry:jb,TorusGeometry:Gb,TorusKnotGeometry:Wb,TubeGeometry:Xb,WireframeGeometry:jL});class GL extends er{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new vt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class OT extends qa{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class zT extends er{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new vt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uu,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new pa,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class WL extends zT{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Be(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return jt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new vt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new vt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new vt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class XL extends er{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new vt(16777215),this.specular=new vt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uu,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new pa,this.combine=C0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qL extends er{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new vt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uu,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class ZL extends er{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uu,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class YL extends er{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uu,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new pa,this.combine=C0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kT extends er{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=aL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class FT extends er{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class $L extends er{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new vt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uu,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class KL extends Er{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Yf(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function JL(n){function e(s,a){return n[s]-n[a]}const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function $M(n,e,t){const i=n.length,s=new n.constructor(i);for(let a=0,l=0;l!==i;++a){const u=t[a]*e;for(let d=0;d!==e;++d)s[l++]=n[u+d]}return s}function BT(n,e,t,i){let s=1,a=n[0];for(;a!==void 0&&a[i]===void 0;)a=n[s++];if(a===void 0)return;let l=a[i];if(l!==void 0)if(Array.isArray(l))do l=a[i],l!==void 0&&(e.push(a.time),t.push(...l)),a=n[s++];while(a!==void 0);else if(l.toArray!==void 0)do l=a[i],l!==void 0&&(e.push(a.time),l.toArray(t,t.length)),a=n[s++];while(a!==void 0);else do l=a[i],l!==void 0&&(e.push(a.time),t.push(l)),a=n[s++];while(a!==void 0)}function $H(n,e,t,i,s=30){const a=n.clone();a.name=e;const l=[];for(let d=0;d<a.tracks.length;++d){const p=a.tracks[d],g=p.getValueSize(),y=[],x=[];for(let _=0;_<p.times.length;++_){const w=p.times[_]*s;if(!(w<t||w>=i)){y.push(p.times[_]);for(let A=0;A<g;++A)x.push(p.values[_*g+A])}}y.length!==0&&(p.times=Yf(y,p.times.constructor),p.values=Yf(x,p.values.constructor),l.push(p))}a.tracks=l;let u=1/0;for(let d=0;d<a.tracks.length;++d)u>a.tracks[d].times[0]&&(u=a.tracks[d].times[0]);for(let d=0;d<a.tracks.length;++d)a.tracks[d].shift(-1*u);return a.resetDuration(),a}function KH(n,e=0,t=n,i=30){i<=0&&(i=30);const s=t.tracks.length,a=e/i;for(let l=0;l<s;++l){const u=t.tracks[l],d=u.ValueTypeName;if(d==="bool"||d==="string")continue;const p=n.tracks.find(function(M){return M.name===u.name&&M.ValueTypeName===d});if(p===void 0)continue;let g=0;const y=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=y/3);let x=0;const _=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(x=_/3);const w=u.times.length-1;let A;if(a<=u.times[0]){const M=g,D=y-g;A=u.values.slice(M,D)}else if(a>=u.times[w]){const M=w*y+g,D=M+y-g;A=u.values.slice(M,D)}else{const M=u.createInterpolant(),D=g,L=y-g;M.evaluate(a),A=M.resultBuffer.slice(D,L)}d==="quaternion"&&new Qr().fromArray(A).normalize().conjugate().toArray(A);const E=p.times.length;for(let M=0;M<E;++M){const D=M*_+x;if(d==="quaternion")Qr.multiplyQuaternionsFlat(p.values,D,A,0,p.values,D);else{const L=_-x*2;for(let N=0;N<L;++N)p.values[D+N]-=A[N]}}}return n.blendMode=xT,n}class JH{static convertArray(e,t){return Yf(e,t)}static isTypedArray(e){return mL(e)}static getKeyframeOrder(e){return JL(e)}static sortedArray(e,t,i){return $M(e,t,i)}static flattenJSON(e,t,i,s){BT(e,t,i,s)}static subclip(e,t,i,s,a=30){return $H(e,t,i,s,a)}static makeClipAdditive(e,t=0,i=e,s=30){return KH(e,t,i,s)}}class U0{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],a=t[i-1];e:{t:{let l;n:{i:if(!(e<s)){for(let u=i+2;;){if(s===void 0){if(e<a)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===u)break;if(a=s,s=t[++i],e<s)break t}l=t.length;break n}if(!(e>=a)){const u=t[1];e<u&&(i=2,a=u);for(let d=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===d)break;if(s=a,a=t[--i-1],e>=a)break t}l=i,i=0;break n}break e}for(;i<l;){const u=i+l>>>1;e<t[u]?l=u:i=u+1}if(s=t[i],a=t[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,s)}return this.interpolate_(i,a,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,a=e*s;for(let l=0;l!==s;++l)t[l]=i[a+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class QL extends U0{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:qf,endingEnd:qf}}intervalChanged_(e,t,i){const s=this.parameterPositions;let a=e-2,l=e+1,u=s[a],d=s[l];if(u===void 0)switch(this.getSettings_().endingStart){case Zf:a=e,u=2*t-i;break;case r0:a=s.length-2,u=t+s[a]-s[a+1];break;default:a=e,u=i}if(d===void 0)switch(this.getSettings_().endingEnd){case Zf:l=e,d=2*i-t;break;case r0:l=1,d=i+s[1]-s[0];break;default:l=e-1,d=t}const p=(i-t)*.5,g=this.valueSize;this._weightPrev=p/(t-u),this._weightNext=p/(d-i),this._offsetPrev=a*g,this._offsetNext=l*g}interpolate_(e,t,i,s){const a=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=e*u,p=d-u,g=this._offsetPrev,y=this._offsetNext,x=this._weightPrev,_=this._weightNext,w=(i-t)/(s-t),A=w*w,E=A*w,M=-x*E+2*x*A-x*w,D=(1+x)*E+(-1.5-2*x)*A+(-.5+x)*w+1,L=(-1-_)*E+(1.5+_)*A+.5*w,N=_*E-_*A;for(let P=0;P!==u;++P)a[P]=M*l[g+P]+D*l[p+P]+L*l[d+P]+N*l[y+P];return a}}class VT extends U0{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const a=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=e*u,p=d-u,g=(i-t)/(s-t),y=1-g;for(let x=0;x!==u;++x)a[x]=l[p+x]*y+l[d+x]*g;return a}}class eP extends U0{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ya{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Yf(t,this.TimeBufferType),this.values=Yf(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Yf(e.times,Array),values:Yf(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new eP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new VT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new QL(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case s0:t=this.InterpolantFactoryMethodDiscrete;break;case j_:t=this.InterpolantFactoryMethodLinear;break;case Lx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return ct("KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return s0;case this.InterpolantFactoryMethodLinear:return j_;case this.InterpolantFactoryMethodSmooth:return Lx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let a=0,l=s-1;for(;a!==s&&i[a]<e;)++a;for(;l!==-1&&i[l]>t;)--l;if(++l,a!==0||l!==s){a>=l&&(l=Math.max(l,1),a=l-1);const u=this.getValueSize();this.times=i.slice(a,l),this.values=this.values.slice(a*u,l*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(Rt("KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,a=i.length;a===0&&(Rt("KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let u=0;u!==a;u++){const d=i[u];if(typeof d=="number"&&isNaN(d)){Rt("KeyframeTrack: Time is not a valid number.",this,u,d),e=!1;break}if(l!==null&&l>d){Rt("KeyframeTrack: Out of order keys.",this,u,d,l),e=!1;break}l=d}if(s!==void 0&&mL(s))for(let u=0,d=s.length;u!==d;++u){const p=s[u];if(isNaN(p)){Rt("KeyframeTrack: Value is not a valid number.",this,u,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===Lx,a=e.length-1;let l=1;for(let u=1;u<a;++u){let d=!1;const p=e[u],g=e[u+1];if(p!==g&&(u!==1||p!==e[0]))if(s)d=!0;else{const y=u*i,x=y-i,_=y+i;for(let w=0;w!==i;++w){const A=t[y+w];if(A!==t[x+w]||A!==t[_+w]){d=!0;break}}}if(d){if(u!==l){e[l]=e[u];const y=u*i,x=l*i;for(let _=0;_!==i;++_)t[x+_]=t[y+_]}++l}}if(a>0){e[l]=e[a];for(let u=a*i,d=l*i,p=0;p!==i;++p)t[d+p]=t[u+p];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}Ya.prototype.ValueTypeName="";Ya.prototype.TimeBufferType=Float32Array;Ya.prototype.ValueBufferType=Float32Array;Ya.prototype.DefaultInterpolation=j_;class dh extends Ya{constructor(e,t,i){super(e,t,i)}}dh.prototype.ValueTypeName="bool";dh.prototype.ValueBufferType=Array;dh.prototype.DefaultInterpolation=s0;dh.prototype.InterpolantFactoryMethodLinear=void 0;dh.prototype.InterpolantFactoryMethodSmooth=void 0;class HT extends Ya{constructor(e,t,i,s){super(e,t,i,s)}}HT.prototype.ValueTypeName="color";class d0 extends Ya{constructor(e,t,i,s){super(e,t,i,s)}}d0.prototype.ValueTypeName="number";class tP extends U0{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const a=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=(i-t)/(s-t);let p=e*u;for(let g=p+u;p!==g;p+=4)Qr.slerpFlat(a,0,l,p-u,l,p,d);return a}}class O0 extends Ya{constructor(e,t,i,s){super(e,t,i,s)}InterpolantFactoryMethodLinear(e){return new tP(this.times,this.values,this.getValueSize(),e)}}O0.prototype.ValueTypeName="quaternion";O0.prototype.InterpolantFactoryMethodSmooth=void 0;class ph extends Ya{constructor(e,t,i){super(e,t,i)}}ph.prototype.ValueTypeName="string";ph.prototype.ValueBufferType=Array;ph.prototype.DefaultInterpolation=s0;ph.prototype.InterpolantFactoryMethodLinear=void 0;ph.prototype.InterpolantFactoryMethodSmooth=void 0;class p0 extends Ya{constructor(e,t,i,s){super(e,t,i,s)}}p0.prototype.ValueTypeName="vector";class m0{constructor(e="",t=-1,i=[],s=Sb){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=ha(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let l=0,u=i.length;l!==u;++l)t.push(ej(i[l]).scale(s));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a.userData=JSON.parse(e.userData||"{}"),a}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let a=0,l=i.length;a!==l;++a)t.push(Ya.toJSON(i[a]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const a=t.length,l=[];for(let u=0;u<a;u++){let d=[],p=[];d.push((u+a-1)%a,u,(u+1)%a),p.push(0,1,0);const g=JL(d);d=$M(d,1,g),p=$M(p,1,g),!s&&d[0]===0&&(d.push(a),p.push(p[0])),l.push(new d0(".morphTargetInfluences["+t[u].name+"]",d,p).scale(1/i))}return new this(e,-1,l)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},a=/^([\w-]*?)([\d]+)$/;for(let u=0,d=e.length;u<d;u++){const p=e[u],g=p.name.match(a);if(g&&g.length>1){const y=g[1];let x=s[y];x||(s[y]=x=[]),x.push(p)}}const l=[];for(const u in s)l.push(this.CreateFromMorphTargetSequence(u,s[u],t,i));return l}static parseAnimation(e,t){if(ct("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return Rt("AnimationClip: No animation in JSONLoader data."),null;const i=function(y,x,_,w,A){if(_.length!==0){const E=[],M=[];BT(_,E,M,w),E.length!==0&&A.push(new y(x,E,M))}},s=[],a=e.name||"default",l=e.fps||30,u=e.blendMode;let d=e.length||-1;const p=e.hierarchy||[];for(let y=0;y<p.length;y++){const x=p[y].keys;if(!(!x||x.length===0))if(x[0].morphTargets){const _={};let w;for(w=0;w<x.length;w++)if(x[w].morphTargets)for(let A=0;A<x[w].morphTargets.length;A++)_[x[w].morphTargets[A]]=-1;for(const A in _){const E=[],M=[];for(let D=0;D!==x[w].morphTargets.length;++D){const L=x[w];E.push(L.time),M.push(L.morphTarget===A?1:0)}s.push(new d0(".morphTargetInfluence["+A+"]",E,M))}d=_.length*l}else{const _=".bones["+t[y].name+"]";i(p0,_+".position",x,"pos",s),i(O0,_+".quaternion",x,"rot",s),i(p0,_+".scale",x,"scl",s)}}return s.length===0?null:new this(a,d,s,u)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const a=this.tracks[i];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function QH(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return d0;case"vector":case"vector2":case"vector3":case"vector4":return p0;case"color":return HT;case"quaternion":return O0;case"bool":case"boolean":return dh;case"string":return ph}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function ej(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=QH(n.type);if(n.times===void 0){const t=[],i=[];BT(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const pl={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class jT{constructor(e,t,i){const s=this;let a=!1,l=0,u=0,d;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this._abortController=null,this.itemStart=function(g){u++,a===!1&&s.onStart!==void 0&&s.onStart(g,l,u),a=!0},this.itemEnd=function(g){l++,s.onProgress!==void 0&&s.onProgress(g,l,u),l===u&&(a=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(g){s.onError!==void 0&&s.onError(g)},this.resolveURL=function(g){return d?d(g):g},this.setURLModifier=function(g){return d=g,this},this.addHandler=function(g,y){return p.push(g,y),this},this.removeHandler=function(g){const y=p.indexOf(g);return y!==-1&&p.splice(y,2),this},this.getHandler=function(g){for(let y=0,x=p.length;y<x;y+=2){const _=p[y],w=p[y+1];if(_.global&&(_.lastIndex=0),_.test(g))return w}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const nP=new jT;class ta{constructor(e){this.manager=e!==void 0?e:nP,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,a){i.load(e,s,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}ta.DEFAULT_MATERIAL_NAME="__DEFAULT";const cc={};class tj extends Error{constructor(e,t){super(e),this.response=t}}class yc extends ta{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=pl.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(cc[e]!==void 0){cc[e].push({onLoad:t,onProgress:i,onError:s});return}cc[e]=[],cc[e].push({onLoad:t,onProgress:i,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),u=this.mimeType,d=this.responseType;fetch(l).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&ct("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const g=cc[e],y=p.body.getReader(),x=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),_=x?parseInt(x):0,w=_!==0;let A=0;const E=new ReadableStream({start(M){D();function D(){y.read().then(({done:L,value:N})=>{if(L)M.close();else{A+=N.byteLength;const P=new ProgressEvent("progress",{lengthComputable:w,loaded:A,total:_});for(let z=0,B=g.length;z<B;z++){const V=g[z];V.onProgress&&V.onProgress(P)}M.enqueue(N),D()}},L=>{M.error(L)})}}});return new Response(E)}else throw new tj(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(d){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(g=>new DOMParser().parseFromString(g,u));case"json":return p.json();default:if(u==="")return p.text();{const y=/charset="?([^;"\s]*)"?/i.exec(u),x=y&&y[1]?y[1].toLowerCase():void 0,_=new TextDecoder(x);return p.arrayBuffer().then(w=>_.decode(w))}}}).then(p=>{pl.add(`file:${e}`,p);const g=cc[e];delete cc[e];for(let y=0,x=g.length;y<x;y++){const _=g[y];_.onLoad&&_.onLoad(p)}}).catch(p=>{const g=cc[e];if(g===void 0)throw this.manager.itemError(e),p;delete cc[e];for(let y=0,x=g.length;y<x;y++){const _=g[y];_.onError&&_.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class nj extends ta{constructor(e){super(e)}load(e,t,i,s){const a=this,l=new yc(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{t(a.parse(JSON.parse(u)))}catch(d){s?s(d):Rt(d),a.manager.itemError(e)}},i,s)}parse(e){const t=[];for(let i=0;i<e.length;i++){const s=m0.parse(e[i]);t.push(s)}return t}}class ij extends ta{constructor(e){super(e)}load(e,t,i,s){const a=this,l=[],u=new Lb,d=new yc(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(a.withCredentials);let p=0;function g(y){d.load(e[y],function(x){const _=a.parse(x,!0);l[y]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},p+=1,p===6&&(_.mipmapCount===1&&(u.minFilter=hi),u.image=l,u.format=_.format,u.needsUpdate=!0,t&&t(u))},i,s)}if(Array.isArray(e))for(let y=0,x=e.length;y<x;++y)g(y);else d.load(e,function(y){const x=a.parse(y,!0);if(x.isCubemap){const _=x.mipmaps.length/x.mipmapCount;for(let w=0;w<_;w++){l[w]={mipmaps:[]};for(let A=0;A<x.mipmapCount;A++)l[w].mipmaps.push(x.mipmaps[w*x.mipmapCount+A]),l[w].format=x.format,l[w].width=x.width,l[w].height=x.height}u.image=l}else u.image.width=x.width,u.image.height=x.height,u.mipmaps=x.mipmaps;x.mipmapCount===1&&(u.minFilter=hi),u.format=x.format,u.needsUpdate=!0,t&&t(u)},i,s);return u}}const kd=new WeakMap;class g0 extends ta{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,l=pl.get(`image:${e}`);if(l!==void 0){if(l.complete===!0)a.manager.itemStart(e),setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0);else{let y=kd.get(l);y===void 0&&(y=[],kd.set(l,y)),y.push({onLoad:t,onError:s})}return l}const u=l0("img");function d(){g(),t&&t(this);const y=kd.get(this)||[];for(let x=0;x<y.length;x++){const _=y[x];_.onLoad&&_.onLoad(this)}kd.delete(this),a.manager.itemEnd(e)}function p(y){g(),s&&s(y),pl.remove(`image:${e}`);const x=kd.get(this)||[];for(let _=0;_<x.length;_++){const w=x[_];w.onError&&w.onError(y)}kd.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function g(){u.removeEventListener("load",d,!1),u.removeEventListener("error",p,!1)}return u.addEventListener("load",d,!1),u.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),pl.add(`image:${e}`,u),a.manager.itemStart(e),u.src=e,u}}class sj extends ta{constructor(e){super(e)}load(e,t,i,s){const a=new N0;a.colorSpace=$s;const l=new g0(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let u=0;function d(p){l.load(e[p],function(g){a.images[p]=g,u++,u===6&&(a.needsUpdate=!0,t&&t(a))},void 0,s)}for(let p=0;p<e.length;++p)d(p);return a}}class rj extends ta{constructor(e){super(e)}load(e,t,i,s){const a=this,l=new Ao,u=new yc(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(a.withCredentials),u.load(e,function(d){let p;try{p=a.parse(d)}catch(g){if(s!==void 0)s(g);else{g(g);return}}p.image!==void 0?l.image=p.image:p.data!==void 0&&(l.image.width=p.width,l.image.height=p.height,l.image.data=p.data),l.wrapS=p.wrapS!==void 0?p.wrapS:Kr,l.wrapT=p.wrapT!==void 0?p.wrapT:Kr,l.magFilter=p.magFilter!==void 0?p.magFilter:hi,l.minFilter=p.minFilter!==void 0?p.minFilter:hi,l.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(l.colorSpace=p.colorSpace),p.flipY!==void 0&&(l.flipY=p.flipY),p.format!==void 0&&(l.format=p.format),p.type!==void 0&&(l.type=p.type),p.mipmaps!==void 0&&(l.mipmaps=p.mipmaps,l.minFilter=dl),p.mipmapCount===1&&(l.minFilter=hi),p.generateMipmaps!==void 0&&(l.generateMipmaps=p.generateMipmaps),l.needsUpdate=!0,t&&t(l,p)},i,s),l}}class aj extends ta{constructor(e){super(e)}load(e,t,i,s){const a=new Oi,l=new g0(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(u){a.image=u,a.needsUpdate=!0,t!==void 0&&t(a)},i,s),a}}class ku extends Dn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new vt(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class iP extends ku{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Dn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new vt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const O1=new Wt,F3=new Y,B3=new Y;class GT{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Be(512,512),this.mapType=xr,this.map=null,this.mapPass=null,this.matrix=new Wt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ep,this._frameExtents=new Be(1,1),this._viewportCount=1,this._viewports=[new Jn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;F3.setFromMatrixPosition(e.matrixWorld),t.position.copy(F3),B3.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(B3),t.updateMatrixWorld(),O1.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(O1,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(O1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class oj extends GT{constructor(){super(new _s(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=fp*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||t.far;(i!==t.fov||s!==t.aspect||a!==t.far)&&(t.fov=i,t.aspect=s,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class sP extends ku{constructor(e,t,i=0,s=Math.PI/3,a=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Dn.DEFAULT_UP),this.updateMatrix(),this.target=new Dn,this.distance=i,this.angle=s,this.penumbra=a,this.decay=l,this.map=null,this.shadow=new oj}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class lj extends GT{constructor(){super(new _s(90,1,.5,500)),this.isPointLightShadow=!0}}class rP extends ku{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new lj}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class Cp extends Ab{constructor(e=-1,t=1,i=1,s=-1,a=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=a,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,a,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let a=i-e,l=i+e,u=s+t,d=s-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=p*this.view.offsetX,l=a+p*this.view.width,u-=g*this.view.offsetY,d=u-g*this.view.height}this.projectionMatrix.makeOrthographic(a,l,u,d,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class cj extends GT{constructor(){super(new Cp(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class aP extends ku{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Dn.DEFAULT_UP),this.updateMatrix(),this.target=new Dn,this.shadow=new cj}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class oP extends ku{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class lP extends ku{constructor(e,t,i=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class WT{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Y)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,s=e.y,a=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*s),t.addScaledVector(l[2],.488603*a),t.addScaledVector(l[3],.488603*i),t.addScaledVector(l[4],1.092548*(i*s)),t.addScaledVector(l[5],1.092548*(s*a)),t.addScaledVector(l[6],.315392*(3*a*a-1)),t.addScaledVector(l[7],1.092548*(i*a)),t.addScaledVector(l[8],.546274*(i*i-s*s)),t}getIrradianceAt(e,t){const i=e.x,s=e.y,a=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*s),t.addScaledVector(l[2],2*.511664*a),t.addScaledVector(l[3],2*.511664*i),t.addScaledVector(l[4],2*.429043*i*s),t.addScaledVector(l[5],2*.429043*s*a),t.addScaledVector(l[6],.743125*a*a-.247708),t.addScaledVector(l[7],2*.429043*i*a),t.addScaledVector(l[8],.429043*(i*i-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const i=e.x,s=e.y,a=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*a,t[3]=.488603*i,t[4]=1.092548*i*s,t[5]=1.092548*s*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*i*a,t[8]=.546274*(i*i-s*s)}}class cP extends ku{constructor(e=new WT,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class qb extends ta{constructor(e){super(e),this.textures={}}load(e,t,i,s){const a=this,l=new yc(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(u){try{t(a.parse(JSON.parse(u)))}catch(d){s?s(d):Rt(d),a.manager.itemError(e)}},i,s)}parse(e){const t=this.textures;function i(a){return t[a]===void 0&&ct("MaterialLoader: Undefined texture",a),t[a]}const s=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new vt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(s.allowOverride=e.allowOverride),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const l=e.uniforms[a];switch(s.uniforms[a]={},l.type){case"t":s.uniforms[a].value=i(l.value);break;case"c":s.uniforms[a].value=new vt().setHex(l.value);break;case"v2":s.uniforms[a].value=new Be().fromArray(l.value);break;case"v3":s.uniforms[a].value=new Y().fromArray(l.value);break;case"v4":s.uniforms[a].value=new Jn().fromArray(l.value);break;case"m3":s.uniforms[a].value=new en().fromArray(l.value);break;case"m4":s.uniforms[a].value=new Wt().fromArray(l.value);break;default:s.uniforms[a].value=l.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)s.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=i(e.map)),e.matcap!==void 0&&(s.matcap=i(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),s.normalScale=new Be().fromArray(a)}return e.displacementMap!==void 0&&(s.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=i(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Be().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=i(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return qb.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:GL,SpriteMaterial:ET,RawShaderMaterial:OT,ShaderMaterial:qa,PointsMaterial:CT,MeshPhysicalMaterial:WL,MeshStandardMaterial:zT,MeshPhongMaterial:XL,MeshToonMaterial:qL,MeshNormalMaterial:ZL,MeshLambertMaterial:YL,MeshDepthMaterial:kT,MeshDistanceMaterial:FT,MeshBasicMaterial:Ou,MeshMatcapMaterial:$L,LineDashedMaterial:KL,LineBasicMaterial:Er,Material:er};return new t[e]}}class KM{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class uP extends Kt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class fP extends ta{constructor(e){super(e)}load(e,t,i,s){const a=this,l=new yc(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(u){try{t(a.parse(JSON.parse(u)))}catch(d){s?s(d):Rt(d),a.manager.itemError(e)}},i,s)}parse(e){const t={},i={};function s(_,w){if(t[w]!==void 0)return t[w];const E=_.interleavedBuffers[w],M=a(_,E.buffer),D=Jd(E.type,M),L=new Nb(D,E.stride);return L.uuid=E.uuid,t[w]=L,L}function a(_,w){if(i[w]!==void 0)return i[w];const E=_.arrayBuffers[w],M=new Uint32Array(E).buffer;return i[w]=M,M}const l=e.isInstancedBufferGeometry?new uP:new Kt,u=e.data.index;if(u!==void 0){const _=Jd(u.type,u.array);l.setIndex(new Yn(_,1))}const d=e.data.attributes;for(const _ in d){const w=d[_];let A;if(w.isInterleavedBufferAttribute){const E=s(e.data,w.data);A=new oh(E,w.itemSize,w.offset,w.normalized)}else{const E=Jd(w.type,w.array),M=w.isInstancedBufferAttribute?pp:Yn;A=new M(E,w.itemSize,w.normalized)}w.name!==void 0&&(A.name=w.name),w.usage!==void 0&&A.setUsage(w.usage),l.setAttribute(_,A)}const p=e.data.morphAttributes;if(p)for(const _ in p){const w=p[_],A=[];for(let E=0,M=w.length;E<M;E++){const D=w[E];let L;if(D.isInterleavedBufferAttribute){const N=s(e.data,D.data);L=new oh(N,D.itemSize,D.offset,D.normalized)}else{const N=Jd(D.type,D.array);L=new Yn(N,D.itemSize,D.normalized)}D.name!==void 0&&(L.name=D.name),A.push(L)}l.morphAttributes[_]=A}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const y=e.data.groups||e.data.drawcalls||e.data.offsets;if(y!==void 0)for(let _=0,w=y.length;_!==w;++_){const A=y[_];l.addGroup(A.start,A.count,A.materialIndex)}const x=e.data.boundingSphere;return x!==void 0&&(l.boundingSphere=new Ls().fromJSON(x)),e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class uj extends ta{constructor(e){super(e)}load(e,t,i,s){const a=this,l=this.path===""?KM.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const u=new yc(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(d){let p=null;try{p=JSON.parse(d)}catch(y){s!==void 0&&s(y),y("ObjectLoader: Can't parse "+e+".",y.message);return}const g=p.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),Rt("ObjectLoader: Can't load "+e);return}a.parse(p,t)},i,s)}async loadAsync(e,t){const i=this,s=this.path===""?KM.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new yc(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const l=await a.loadAsync(e,t),u=JSON.parse(l),d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(u)}parse(e,t){const i=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,s),l=this.parseImages(e.images,function(){t!==void 0&&t(p)}),u=this.parseTextures(e.textures,l),d=this.parseMaterials(e.materials,u),p=this.parseObject(e.object,a,d,u,i),g=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,g),this.bindLightTargets(p),t!==void 0){let y=!1;for(const x in l)if(l[x].data instanceof HTMLImageElement){y=!0;break}y===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),a=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,a),u=this.parseMaterials(e.materials,l),d=this.parseObject(e.object,s,u,l,t),p=this.parseSkeletons(e.skeletons,d);return this.bindSkeletons(d,p),this.bindLightTargets(d),d}parseShapes(e){const t={};if(e!==void 0)for(let i=0,s=e.length;i<s;i++){const a=new eh().fromJSON(e[i]);t[a.uuid]=a}return t}parseSkeletons(e,t){const i={},s={};if(t.traverse(function(a){a.isBone&&(s[a.uuid]=a)}),e!==void 0)for(let a=0,l=e.length;a<l;a++){const u=new Db().fromJSON(e[a],s);i[u.uuid]=u}return i}parseGeometries(e,t){const i={};if(e!==void 0){const s=new fP;for(let a=0,l=e.length;a<l;a++){let u;const d=e[a];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":u=s.parse(d);break;default:d.type in k3?u=k3[d.type].fromJSON(d,t):ct(`ObjectLoader: Unsupported geometry type "${d.type}"`)}u.uuid=d.uuid,d.name!==void 0&&(u.name=d.name),d.userData!==void 0&&(u.userData=d.userData),i[d.uuid]=u}}return i}parseMaterials(e,t){const i={},s={};if(e!==void 0){const a=new qb;a.setTextures(t);for(let l=0,u=e.length;l<u;l++){const d=e[l];i[d.uuid]===void 0&&(i[d.uuid]=a.parse(d)),s[d.uuid]=i[d.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const s=e[i],a=m0.parse(s);t[a.uuid]=a}return t}parseImages(e,t){const i=this,s={};let a;function l(d){return i.manager.itemStart(d),a.load(d,function(){i.manager.itemEnd(d)},void 0,function(){i.manager.itemError(d),i.manager.itemEnd(d)})}function u(d){if(typeof d=="string"){const p=d,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:i.resourcePath+p;return l(g)}else return d.data?{data:Jd(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){const d=new jT(t);a=new g0(d),a.setCrossOrigin(this.crossOrigin);for(let p=0,g=e.length;p<g;p++){const y=e[p],x=y.url;if(Array.isArray(x)){const _=[];for(let w=0,A=x.length;w<A;w++){const E=x[w],M=u(E);M!==null&&(M instanceof HTMLImageElement?_.push(M):_.push(new Ao(M.data,M.width,M.height)))}s[y.uuid]=new Mu(_)}else{const _=u(y.url);s[y.uuid]=new Mu(_)}}}return s}async parseImagesAsync(e){const t=this,i={};let s;async function a(l){if(typeof l=="string"){const u=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:t.resourcePath+u;return await s.loadAsync(d)}else return l.data?{data:Jd(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){s=new g0(this.manager),s.setCrossOrigin(this.crossOrigin);for(let l=0,u=e.length;l<u;l++){const d=e[l],p=d.url;if(Array.isArray(p)){const g=[];for(let y=0,x=p.length;y<x;y++){const _=p[y],w=await a(_);w!==null&&(w instanceof HTMLImageElement?g.push(w):g.push(new Ao(w.data,w.width,w.height)))}i[d.uuid]=new Mu(g)}else{const g=await a(d.url);i[d.uuid]=new Mu(g)}}}return i}parseTextures(e,t){function i(a,l){return typeof a=="number"?a:(ct("ObjectLoader.parseTexture: Constant should be in numeric form.",a),l[a])}const s={};if(e!==void 0)for(let a=0,l=e.length;a<l;a++){const u=e[a];u.image===void 0&&ct('ObjectLoader: No "image" specified for',u.uuid),t[u.image]===void 0&&ct("ObjectLoader: Undefined image",u.image);const d=t[u.image],p=d.data;let g;Array.isArray(p)?(g=new N0,p.length===6&&(g.needsUpdate=!0)):(p&&p.data?g=new Ao:g=new Oi,p&&(g.needsUpdate=!0)),g.source=d,g.uuid=u.uuid,u.name!==void 0&&(g.name=u.name),u.mapping!==void 0&&(g.mapping=i(u.mapping,fj)),u.channel!==void 0&&(g.channel=u.channel),u.offset!==void 0&&g.offset.fromArray(u.offset),u.repeat!==void 0&&g.repeat.fromArray(u.repeat),u.center!==void 0&&g.center.fromArray(u.center),u.rotation!==void 0&&(g.rotation=u.rotation),u.wrap!==void 0&&(g.wrapS=i(u.wrap[0],V3),g.wrapT=i(u.wrap[1],V3)),u.format!==void 0&&(g.format=u.format),u.internalFormat!==void 0&&(g.internalFormat=u.internalFormat),u.type!==void 0&&(g.type=u.type),u.colorSpace!==void 0&&(g.colorSpace=u.colorSpace),u.minFilter!==void 0&&(g.minFilter=i(u.minFilter,H3)),u.magFilter!==void 0&&(g.magFilter=i(u.magFilter,H3)),u.anisotropy!==void 0&&(g.anisotropy=u.anisotropy),u.flipY!==void 0&&(g.flipY=u.flipY),u.generateMipmaps!==void 0&&(g.generateMipmaps=u.generateMipmaps),u.premultiplyAlpha!==void 0&&(g.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&&(g.unpackAlignment=u.unpackAlignment),u.compareFunction!==void 0&&(g.compareFunction=u.compareFunction),u.userData!==void 0&&(g.userData=u.userData),s[u.uuid]=g}return s}parseObject(e,t,i,s,a){let l;function u(x){return t[x]===void 0&&ct("ObjectLoader: Undefined geometry",x),t[x]}function d(x){if(x!==void 0){if(Array.isArray(x)){const _=[];for(let w=0,A=x.length;w<A;w++){const E=x[w];i[E]===void 0&&ct("ObjectLoader: Undefined material",E),_.push(i[E])}return _}return i[x]===void 0&&ct("ObjectLoader: Undefined material",x),i[x]}}function p(x){return s[x]===void 0&&ct("ObjectLoader: Undefined texture",x),s[x]}let g,y;switch(e.type){case"Scene":l=new TT,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new vt(e.background):l.background=p(e.background)),e.environment!==void 0&&(l.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new Rb(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new Cb(e.fog.color,e.fog.density)),e.fog.name!==""&&(l.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(l.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&l.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(l.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&l.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":l=new _s(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new Cp(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new oP(e.color,e.intensity);break;case"DirectionalLight":l=new aP(e.color,e.intensity),l.target=e.target||"";break;case"PointLight":l=new rP(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new lP(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new sP(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),l.target=e.target||"";break;case"HemisphereLight":l=new iP(e.color,e.groundColor,e.intensity);break;case"LightProbe":const x=new WT().fromArray(e.sh);l=new cP(x,e.intensity);break;case"SkinnedMesh":g=u(e.geometry),y=d(e.material),l=new EL(g,y),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":g=u(e.geometry),y=d(e.material),l=new ns(g,y);break;case"InstancedMesh":g=u(e.geometry),y=d(e.material);const _=e.count,w=e.instanceMatrix,A=e.instanceColor;l=new AL(g,y,_),l.instanceMatrix=new pp(new Float32Array(w.array),16),A!==void 0&&(l.instanceColor=new pp(new Float32Array(A.array),A.itemSize));break;case"BatchedMesh":g=u(e.geometry),y=d(e.material),l=new CL(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,y),l.geometry=g,l.perObjectFrustumCulled=e.perObjectFrustumCulled,l.sortObjects=e.sortObjects,l._drawRanges=e.drawRanges,l._reservedRanges=e.reservedRanges,l._geometryInfo=e.geometryInfo.map(E=>{let M=null,D=null;return E.boundingBox!==void 0&&(M=new Qs().fromJSON(E.boundingBox)),E.boundingSphere!==void 0&&(D=new Ls().fromJSON(E.boundingSphere)),{...E,boundingBox:M,boundingSphere:D}}),l._instanceInfo=e.instanceInfo,l._availableInstanceIds=e._availableInstanceIds,l._availableGeometryIds=e._availableGeometryIds,l._nextIndexStart=e.nextIndexStart,l._nextVertexStart=e.nextVertexStart,l._geometryCount=e.geometryCount,l._maxInstanceCount=e.maxInstanceCount,l._maxVertexCount=e.maxVertexCount,l._maxIndexCount=e.maxIndexCount,l._geometryInitialized=e.geometryInitialized,l._matricesTexture=p(e.matricesTexture.uuid),l._indirectTexture=p(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(l._colorsTexture=p(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(l.boundingSphere=new Ls().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(l.boundingBox=new Qs().fromJSON(e.boundingBox));break;case"LOD":l=new TL;break;case"Line":l=new Du(u(e.geometry),d(e.material));break;case"LineLoop":l=new RL(u(e.geometry),d(e.material));break;case"LineSegments":l=new Ml(u(e.geometry),d(e.material));break;case"PointCloud":case"Points":l=new NL(u(e.geometry),d(e.material));break;case"Sprite":l=new wL(d(e.material));break;case"Group":l=new Qd;break;case"Bone":l=new AT;break;default:l=new Dn}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.up!==void 0&&l.up.fromArray(e.up),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(l.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const x=e.children;for(let _=0;_<x.length;_++)l.add(this.parseObject(x[_],t,i,s,a))}if(e.animations!==void 0){const x=e.animations;for(let _=0;_<x.length;_++){const w=x[_];l.animations.push(a[w])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const x=e.levels;for(let _=0;_<x.length;_++){const w=x[_],A=l.getObjectByProperty("uuid",w.object);A!==void 0&&l.addLevel(A,w.distance,w.hysteresis)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const s=t[i.skeleton];s===void 0?ct("ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(s,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,s=e.getObjectByProperty("uuid",i);s!==void 0?t.target=s:t.target=new Dn}})}}const fj={UVMapping:mb,CubeReflectionMapping:xl,CubeRefractionMapping:Cu,EquirectangularReflectionMapping:e0,EquirectangularRefractionMapping:t0,CubeUVReflectionMapping:wp},V3={RepeatWrapping:n0,ClampToEdgeWrapping:Kr,MirroredRepeatWrapping:i0},H3={NearestFilter:Wi,NearestMipmapNearestFilter:hT,NearestMipmapLinearFilter:Kd,LinearFilter:hi,LinearMipmapNearestFilter:zg,LinearMipmapLinearFilter:dl},z1=new WeakMap;class hj extends ta{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&ct("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&ct("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,l=pl.get(`image-bitmap:${e}`);if(l!==void 0){if(a.manager.itemStart(e),l.then){l.then(p=>{if(z1.has(l)===!0)s&&s(z1.get(l)),a.manager.itemError(e),a.manager.itemEnd(e);else return t&&t(p),a.manager.itemEnd(e),p});return}return setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0),l}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader,u.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const d=fetch(e,u).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(p){return pl.add(`image-bitmap:${e}`,p),t&&t(p),a.manager.itemEnd(e),p}).catch(function(p){s&&s(p),z1.set(d,p),pl.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});pl.add(`image-bitmap:${e}`,d),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let dx;class XT{static getContext(){return dx===void 0&&(dx=new(window.AudioContext||window.webkitAudioContext)),dx}static setContext(e){dx=e}}class dj extends ta{constructor(e){super(e)}load(e,t,i,s){const a=this,l=new yc(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(d){try{const p=d.slice(0);XT.getContext().decodeAudioData(p,function(y){t(y)}).catch(u)}catch(p){u(p)}},i,s);function u(d){s?s(d):Rt(d),a.manager.itemError(e)}}}const j3=new Wt,G3=new Wt,If=new Wt;class pj{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new _s,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new _s,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,If.copy(e.projectionMatrix);const s=t.eyeSep/2,a=s*t.near/t.focus,l=t.near*Math.tan(Qf*t.fov*.5)/t.zoom;let u,d;G3.elements[12]=-s,j3.elements[12]=s,u=-l*t.aspect+a,d=l*t.aspect+a,If.elements[0]=2*t.near/(d-u),If.elements[8]=(d+u)/(d-u),this.cameraL.projectionMatrix.copy(If),u=-l*t.aspect-a,d=l*t.aspect-a,If.elements[0]=2*t.near/(d-u),If.elements[8]=(d+u)/(d-u),this.cameraR.projectionMatrix.copy(If)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(G3),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(j3)}}class hP extends _s{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class qT{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Lf=new Y,k1=new Qr,mj=new Y,Pf=new Y,Uf=new Y;class gj extends Dn{constructor(){super(),this.type="AudioListener",this.context=XT.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new qT}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Lf,k1,mj),Pf.set(0,0,-1).applyQuaternion(k1),Uf.set(0,1,0).applyQuaternion(k1),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Lf.x,i),t.positionY.linearRampToValueAtTime(Lf.y,i),t.positionZ.linearRampToValueAtTime(Lf.z,i),t.forwardX.linearRampToValueAtTime(Pf.x,i),t.forwardY.linearRampToValueAtTime(Pf.y,i),t.forwardZ.linearRampToValueAtTime(Pf.z,i),t.upX.linearRampToValueAtTime(Uf.x,i),t.upY.linearRampToValueAtTime(Uf.y,i),t.upZ.linearRampToValueAtTime(Uf.z,i)}else t.setPosition(Lf.x,Lf.y,Lf.z),t.setOrientation(Pf.x,Pf.y,Pf.z,Uf.x,Uf.y,Uf.z)}}class dP extends Dn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){ct("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){ct("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){ct("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){ct("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){ct("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(ct("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){ct("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(ct("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Of=new Y,W3=new Qr,vj=new Y,zf=new Y;class yj extends dP{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Of,W3,vj),zf.set(0,0,1).applyQuaternion(W3);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Of.x,i),t.positionY.linearRampToValueAtTime(Of.y,i),t.positionZ.linearRampToValueAtTime(Of.z,i),t.orientationX.linearRampToValueAtTime(zf.x,i),t.orientationY.linearRampToValueAtTime(zf.y,i),t.orientationZ.linearRampToValueAtTime(zf.z,i)}else t.setPosition(Of.x,Of.y,Of.z),t.setOrientation(zf.x,zf.y,zf.z)}}class xj{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class pP{constructor(e,t,i){this.binding=e,this.valueSize=i;let s,a,l;switch(t){case"quaternion":s=this._slerp,a=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":s=this._select,a=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:s=this._lerp,a=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=a,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,s=this.valueSize,a=e*s+s;let l=this.cumulativeWeight;if(l===0){for(let u=0;u!==s;++u)i[a+u]=i[u];l=t}else{l+=t;const u=t/l;this._mixBufferRegion(i,a,0,u,s)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,s=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,s=e*t+t,a=this.cumulativeWeight,l=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const d=t*this._origIndex;this._mixBufferRegion(i,s,d,1-a,t)}l>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*t,1,t);for(let d=t,p=t+t;d!==p;++d)if(i[d]!==i[d+t]){u.setValue(i,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,s=i*this._origIndex;e.getValue(t,s);for(let a=i,l=s;a!==l;++a)t[a]=t[s+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,s,a){if(s>=.5)for(let l=0;l!==a;++l)e[t+l]=e[i+l]}_slerp(e,t,i,s){Qr.slerpFlat(e,t,e,t,e,i,s)}_slerpAdditive(e,t,i,s,a){const l=this._workIndex*a;Qr.multiplyQuaternionsFlat(e,l,e,t,e,i),Qr.slerpFlat(e,t,e,t,e,l,s)}_lerp(e,t,i,s,a){const l=1-s;for(let u=0;u!==a;++u){const d=t+u;e[d]=e[d]*l+e[i+u]*s}}_lerpAdditive(e,t,i,s,a){for(let l=0;l!==a;++l){const u=t+l;e[u]=e[u]+e[i+l]*s}}}const ZT="\\[\\]\\.:\\/",_j=new RegExp("["+ZT+"]","g"),YT="[^"+ZT+"]",bj="[^"+ZT.replace("\\.","")+"]",Sj=/((?:WC+[\/:])*)/.source.replace("WC",YT),Mj=/(WCOD+)?/.source.replace("WCOD",bj),wj=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",YT),Tj=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",YT),Ej=new RegExp("^"+Sj+Mj+wj+Tj+"$"),Aj=["material","materials","bones","map"];class Cj{constructor(e,t,i){const s=i||Nn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,a=i.length;s!==a;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Nn{constructor(e,t,i){this.path=t,this.parsedPath=i||Nn.parseTrackName(t),this.node=Nn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Nn.Composite(e,t,i):new Nn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(_j,"")}static parseTrackName(e){const t=Ej.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const a=i.nodeName.substring(s+1);Aj.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(a){for(let l=0;l<a.length;l++){const u=a[l];if(u.name===t||u.uuid===t)return u;const d=i(u.children);if(d)return d}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,a=i.length;s!==a;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,a=i.length;s!==a;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,a=i.length;s!==a;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,a=i.length;s!==a;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let a=t.propertyIndex;if(e||(e=Nn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){ct("PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let p=t.objectIndex;switch(i){case"materials":if(!e.material){Rt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){Rt("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){Rt("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let g=0;g<e.length;g++)if(e[g].name===p){p=g;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){Rt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){Rt("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){Rt("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(p!==void 0){if(e[p]===void 0){Rt("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const l=e[s];if(l===void 0){const p=t.nodeName;Rt("PropertyBinding: Trying to update property for track: "+p+"."+s+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?u=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(a!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){Rt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){Rt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}d=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else l.fromArray!==void 0&&l.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(d=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Nn.Composite=Cj;Nn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Nn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Nn.prototype.GetterByBindingType=[Nn.prototype._getValue_direct,Nn.prototype._getValue_array,Nn.prototype._getValue_arrayElement,Nn.prototype._getValue_toArray];Nn.prototype.SetterByBindingTypeAndVersioning=[[Nn.prototype._setValue_direct,Nn.prototype._setValue_direct_setNeedsUpdate,Nn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Nn.prototype._setValue_array,Nn.prototype._setValue_array_setNeedsUpdate,Nn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Nn.prototype._setValue_arrayElement,Nn.prototype._setValue_arrayElement_setNeedsUpdate,Nn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Nn.prototype._setValue_fromArray,Nn.prototype._setValue_fromArray_setNeedsUpdate,Nn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Rj{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ha(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,s=arguments.length;i!==s;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,s=this._parsedPaths,a=this._bindings,l=a.length;let u,d=e.length,p=this.nCachedObjects_;for(let g=0,y=arguments.length;g!==y;++g){const x=arguments[g],_=x.uuid;let w=t[_];if(w===void 0){w=d++,t[_]=w,e.push(x);for(let A=0,E=l;A!==E;++A)a[A].push(new Nn(x,i[A],s[A]))}else if(w<p){u=e[w];const A=--p,E=e[A];t[E.uuid]=w,e[w]=E,t[_]=A,e[A]=x;for(let M=0,D=l;M!==D;++M){const L=a[M],N=L[A];let P=L[w];L[w]=N,P===void 0&&(P=new Nn(x,i[M],s[M])),L[A]=P}}else e[w]!==u&&Rt("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let a=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const d=arguments[l],p=d.uuid,g=t[p];if(g!==void 0&&g>=a){const y=a++,x=e[y];t[x.uuid]=g,e[g]=x,t[p]=y,e[y]=d;for(let _=0,w=s;_!==w;++_){const A=i[_],E=A[y],M=A[g];A[g]=E,A[y]=M}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let a=this.nCachedObjects_,l=e.length;for(let u=0,d=arguments.length;u!==d;++u){const p=arguments[u],g=p.uuid,y=t[g];if(y!==void 0)if(delete t[g],y<a){const x=--a,_=e[x],w=--l,A=e[w];t[_.uuid]=y,e[y]=_,t[A.uuid]=x,e[x]=A,e.pop();for(let E=0,M=s;E!==M;++E){const D=i[E],L=D[x],N=D[w];D[y]=L,D[x]=N,D.pop()}}else{const x=--l,_=e[x];x>0&&(t[_.uuid]=y),e[y]=_,e.pop();for(let w=0,A=s;w!==A;++w){const E=i[w];E[y]=E[x],E.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const i=this._bindingsIndicesByPath;let s=i[e];const a=this._bindings;if(s!==void 0)return a[s];const l=this._paths,u=this._parsedPaths,d=this._objects,p=d.length,g=this.nCachedObjects_,y=new Array(p);s=a.length,i[e]=s,l.push(e),u.push(t),a.push(y);for(let x=g,_=d.length;x!==_;++x){const w=d[x];y[x]=new Nn(w,e,t)}return y}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const s=this._paths,a=this._parsedPaths,l=this._bindings,u=l.length-1,d=l[u],p=e[u];t[p]=i,l[i]=d,l.pop(),a[i]=a[u],a.pop(),s[i]=s[u],s.pop()}}}class mP{constructor(e,t,i=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=s;const a=t.tracks,l=a.length,u=new Array(l),d={endingStart:qf,endingEnd:qf};for(let p=0;p!==l;++p){const g=a[p].createInterpolant(null);u[p]=g,g.settings=d}this._interpolantSettings=d,this._interpolants=u,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=sL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const s=this._clip.duration,a=e._clip.duration,l=a/s,u=s/a;e.warp(1,l,t),this.warp(u,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const s=this._mixer,a=s.time,l=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=s._lendControlInterpolant(),this._timeScaleInterpolant=u);const d=u.parameterPositions,p=u.sampleValues;return d[0]=a,d[1]=a+i,p[0]=e/l,p[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,s){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const d=(e-a)*i;d<0||i===0?t=0:(this._startTime=null,t=i*d)}t*=this._updateTimeScale(e);const l=this._updateTime(t),u=this._updateWeight(e);if(u>0){const d=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case xT:for(let g=0,y=d.length;g!==y;++g)d[g].evaluate(l),p[g].accumulateAdditive(u);break;case Sb:default:for(let g=0,y=d.length;g!==y;++g)d[g].evaluate(l),p[g].accumulate(s,u)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let s=this.time+e,a=this._loopCount;const l=i===rL;if(e===0)return a===-1?s:l&&(a&1)===1?t-s:s;if(i===iL){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),s>=t||s<0){const u=Math.floor(s/t);s-=t*u,a+=Math.abs(u);const d=this.repetitions-a;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(d===1){const p=e<0;this._setEndings(p,!p,l)}else this._setEndings(!1,!1,l);this._loopCount=a,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=s;if(l&&(a&1)===1)return t-s}return s}_setEndings(e,t,i){const s=this._interpolantSettings;i?(s.endingStart=Zf,s.endingEnd=Zf):(e?s.endingStart=this.zeroSlopeAtStart?Zf:qf:s.endingStart=r0,t?s.endingEnd=this.zeroSlopeAtEnd?Zf:qf:s.endingEnd=r0)}_scheduleFading(e,t,i){const s=this._mixer,a=s.time;let l=this._weightInterpolant;l===null&&(l=s._lendControlInterpolant(),this._weightInterpolant=l);const u=l.parameterPositions,d=l.sampleValues;return u[0]=a,d[0]=t,u[1]=a+e,d[1]=i,this}}const Nj=new Float32Array(1);class Dj extends Sl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,s=e._clip.tracks,a=s.length,l=e._propertyBindings,u=e._interpolants,d=i.uuid,p=this._bindingsByRootAndName;let g=p[d];g===void 0&&(g={},p[d]=g);for(let y=0;y!==a;++y){const x=s[y],_=x.name;let w=g[_];if(w!==void 0)++w.referenceCount,l[y]=w;else{if(w=l[y],w!==void 0){w._cacheIndex===null&&(++w.referenceCount,this._addInactiveBinding(w,d,_));continue}const A=t&&t._propertyBindings[y].binding.parsedPath;w=new pP(Nn.create(i,_,A),x.ValueTypeName,x.getValueSize()),++w.referenceCount,this._addInactiveBinding(w,d,_),l[y]=w}u[y].resultBuffer=w.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,s=e._clip.uuid,a=this._actionsByClip[s];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,s,i)}const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const a=t[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const a=t[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const s=this._actions,a=this._actionsByClip;let l=a[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=l;else{const u=l.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=s.length,s.push(e),l.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],s=e._cacheIndex;i._cacheIndex=s,t[s]=i,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,l=this._actionsByClip,u=l[a],d=u.knownActions,p=d[d.length-1],g=e._byClipCacheIndex;p._byClipCacheIndex=g,d[g]=p,d.pop(),e._byClipCacheIndex=null;const y=u.actionByRoot,x=(e._localRoot||this._root).uuid;delete y[x],d.length===0&&delete l[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const a=t[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,s=this._nActiveActions++,a=t[s];e._cacheIndex=s,t[s]=e,a._cacheIndex=i,t[i]=a}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,s=--this._nActiveActions,a=t[s];e._cacheIndex=s,t[s]=e,a._cacheIndex=i,t[i]=a}_addInactiveBinding(e,t,i){const s=this._bindingsByRootAndName,a=this._bindings;let l=s[t];l===void 0&&(l={},s[t]=l),l[i]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,s=i.rootNode.uuid,a=i.path,l=this._bindingsByRootAndName,u=l[s],d=t[t.length-1],p=e._cacheIndex;d._cacheIndex=p,t[p]=d,t.pop(),delete u[a],Object.keys(u).length===0&&delete l[s]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,s=this._nActiveBindings++,a=t[s];e._cacheIndex=s,t[s]=e,a._cacheIndex=i,t[i]=a}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,s=--this._nActiveBindings,a=t[s];e._cacheIndex=s,t[s]=e,a._cacheIndex=i,t[i]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new VT(new Float32Array(2),new Float32Array(2),1,Nj),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,s=--this._nActiveControlInterpolants,a=t[s];e.__cacheIndex=s,t[s]=e,a.__cacheIndex=i,t[i]=a}clipAction(e,t,i){const s=t||this._root,a=s.uuid;let l=typeof e=="string"?m0.findByName(s,e):e;const u=l!==null?l.uuid:e,d=this._actionsByClip[u];let p=null;if(i===void 0&&(l!==null?i=l.blendMode:i=Sb),d!==void 0){const y=d.actionByRoot[a];if(y!==void 0&&y.blendMode===i)return y;p=d.knownActions[0],l===null&&(l=p._clip)}if(l===null)return null;const g=new mP(this,l,t,i);return this._bindAction(g,p),this._addInactiveAction(g,u,a),g}existingAction(e,t){const i=t||this._root,s=i.uuid,a=typeof e=="string"?m0.findByName(i,e):e,l=a?a.uuid:e,u=this._actionsByClip[l];return u!==void 0&&u.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,s=this.time+=e,a=Math.sign(e),l=this._accuIndex^=1;for(let p=0;p!==i;++p)t[p]._update(s,e,a,l);const u=this._bindings,d=this._nActiveBindings;for(let p=0;p!==d;++p)u[p].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,s=this._actionsByClip,a=s[i];if(a!==void 0){const l=a.knownActions;for(let u=0,d=l.length;u!==d;++u){const p=l[u];this._deactivateAction(p);const g=p._cacheIndex,y=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,y._cacheIndex=g,t[g]=y,t.pop(),this._removeInactiveBindingsForAction(p)}delete s[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const l in i){const u=i[l].actionByRoot,d=u[t];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const s=this._bindingsByRootAndName,a=s[t];if(a!==void 0)for(const l in a){const u=a[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Ij extends bT{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isRenderTarget3D=!0,this.depth=i,this.texture=new Eb(null,e,t,i),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class $T{constructor(e){this.value=e}clone(){return new $T(this.value.clone===void 0?this.value:this.value.clone())}}let Lj=0;class Pj extends Sl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Lj++}),this.name="",this.usage=o0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,s=t.length;i<s;i++){const a=Array.isArray(t[i])?t[i]:[t[i]];for(let l=0;l<a.length;l++)this.uniforms.push(a[l].clone())}return this}clone(){return new this.constructor().copy(this)}}class Uj extends Nb{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Oj{constructor(e,t,i,s,a,l=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=s,this.count=a,this.normalized=l,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const X3=new Wt;class gP{constructor(e,t,i=0,s=1/0){this.ray=new Tp(e,t),this.near=i,this.far=s,this.camera=null,this.layers=new hp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):Rt("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return X3.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(X3),this}intersectObject(e,t=!0,i=[]){return JM(e,this,i,t),i.sort(q3),i}intersectObjects(e,t=!0,i=[]){for(let s=0,a=e.length;s<a;s++)JM(e[s],this,i,t);return i.sort(q3),i}}function q3(n,e){return n.distance-e.distance}function JM(n,e,t,i){let s=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(s=!1),s===!0&&i===!0){const a=n.children;for(let l=0,u=a.length;l<u;l++)JM(a[l],e,t,!0)}}let zj=class{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=kj.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}};function kj(){this._document.hidden===!1&&this.reset()}class Fj{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=jt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(jt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Bj{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class KT{constructor(e,t,i,s){KT.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,s){const a=this.elements;return a[0]=e,a[2]=t,a[1]=i,a[3]=s,this}}const Z3=new Be;class Vj{constructor(e=new Be(1/0,1/0),t=new Be(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Z3.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Z3).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Y3=new Y,px=new Y,Fd=new Y,Bd=new Y,F1=new Y,Hj=new Y,jj=new Y;class Gj{constructor(e=new Y,t=new Y){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Y3.subVectors(e,this.start),px.subVectors(this.end,this.start);const i=px.dot(px);let a=px.dot(Y3)/i;return t&&(a=jt(a,0,1)),a}closestPointToPoint(e,t,i){const s=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(s).add(this.start)}distanceSqToLine3(e,t=Hj,i=jj){const s=10000000000000001e-32;let a,l;const u=this.start,d=e.start,p=this.end,g=e.end;Fd.subVectors(p,u),Bd.subVectors(g,d),F1.subVectors(u,d);const y=Fd.dot(Fd),x=Bd.dot(Bd),_=Bd.dot(F1);if(y<=s&&x<=s)return t.copy(u),i.copy(d),t.sub(i),t.dot(t);if(y<=s)a=0,l=_/x,l=jt(l,0,1);else{const w=Fd.dot(F1);if(x<=s)l=0,a=jt(-w/y,0,1);else{const A=Fd.dot(Bd),E=y*x-A*A;E!==0?a=jt((A*_-w*x)/E,0,1):a=0,l=(A*a+_)/x,l<0?(l=0,a=jt(-w/y,0,1)):l>1&&(l=1,a=jt((A-w)/y,0,1))}}return t.copy(u).add(Fd.multiplyScalar(a)),i.copy(d).add(Bd.multiplyScalar(l)),t.sub(i),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const $3=new Y;class Wj extends Dn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Kt,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,u=1,d=32;l<d;l++,u++){const p=l/d*Math.PI*2,g=u/d*Math.PI*2;s.push(Math.cos(p),Math.sin(p),1,Math.cos(g),Math.sin(g),1)}i.setAttribute("position",new St(s,3));const a=new Er({fog:!1,toneMapped:!1});this.cone=new Ml(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt($3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const mu=new Y,mx=new Wt,B1=new Wt;class Xj extends Ml{constructor(e){const t=vP(e),i=new Kt,s=[],a=[];for(let p=0;p<t.length;p++){const g=t[p];g.parent&&g.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}i.setAttribute("position",new St(s,3)),i.setAttribute("color",new St(a,3));const l=new Er({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const u=new vt(255),d=new vt(65280);this.setColors(u,d)}updateMatrixWorld(e){const t=this.bones,i=this.geometry,s=i.getAttribute("position");B1.copy(this.root.matrixWorld).invert();for(let a=0,l=0;a<t.length;a++){const u=t[a];u.parent&&u.parent.isBone&&(mx.multiplyMatrices(B1,u.matrixWorld),mu.setFromMatrixPosition(mx),s.setXYZ(l,mu.x,mu.y,mu.z),mx.multiplyMatrices(B1,u.parent.matrixWorld),mu.setFromMatrixPosition(mx),s.setXYZ(l+1,mu.x,mu.y,mu.z),l+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const s=this.geometry.getAttribute("color");for(let a=0;a<s.count;a+=2)s.setXYZ(a,e.r,e.g,e.b),s.setXYZ(a+1,t.r,t.g,t.b);return s.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function vP(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...vP(n.children[t]));return e}class qj extends ns{constructor(e,t,i){const s=new P0(t,4,2),a=new Ou({wireframe:!0,fog:!1,toneMapped:!1});super(s,a),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Zj=new Y,K3=new vt,J3=new vt;class Yj extends Dn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const s=new L0(t);s.rotateY(Math.PI*.5),this.material=new Ou({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=s.getAttribute("position"),l=new Float32Array(a.count*3);s.setAttribute("color",new Yn(l,3)),this.add(new ns(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");K3.copy(this.light.color),J3.copy(this.light.groundColor);for(let i=0,s=t.count;i<s;i++){const a=i<s/2?K3:J3;t.setXYZ(i,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Zj.setFromMatrixPosition(this.light.matrixWorld).negate())}}class $j extends Ml{constructor(e=10,t=10,i=4473924,s=8947848){i=new vt(i),s=new vt(s);const a=t/2,l=e/t,u=e/2,d=[],p=[];for(let x=0,_=0,w=-u;x<=t;x++,w+=l){d.push(-u,0,w,u,0,w),d.push(w,0,-u,w,0,u);const A=x===a?i:s;A.toArray(p,_),_+=3,A.toArray(p,_),_+=3,A.toArray(p,_),_+=3,A.toArray(p,_),_+=3}const g=new Kt;g.setAttribute("position",new St(d,3)),g.setAttribute("color",new St(p,3));const y=new Er({vertexColors:!0,toneMapped:!1});super(g,y),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Kj extends Ml{constructor(e=10,t=16,i=8,s=64,a=4473924,l=8947848){a=new vt(a),l=new vt(l);const u=[],d=[];if(t>1)for(let y=0;y<t;y++){const x=y/t*(Math.PI*2),_=Math.sin(x)*e,w=Math.cos(x)*e;u.push(0,0,0),u.push(_,0,w);const A=y&1?a:l;d.push(A.r,A.g,A.b),d.push(A.r,A.g,A.b)}for(let y=0;y<i;y++){const x=y&1?a:l,_=e-e/i*y;for(let w=0;w<s;w++){let A=w/s*(Math.PI*2),E=Math.sin(A)*_,M=Math.cos(A)*_;u.push(E,0,M),d.push(x.r,x.g,x.b),A=(w+1)/s*(Math.PI*2),E=Math.sin(A)*_,M=Math.cos(A)*_,u.push(E,0,M),d.push(x.r,x.g,x.b)}}const p=new Kt;p.setAttribute("position",new St(u,3)),p.setAttribute("color",new St(d,3));const g=new Er({vertexColors:!0,toneMapped:!1});super(p,g),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Q3=new Y,gx=new Y,eR=new Y;class Jj extends Dn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new Kt;s.setAttribute("position",new St([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new Er({fog:!1,toneMapped:!1});this.lightPlane=new Du(s,a),this.add(this.lightPlane),s=new Kt,s.setAttribute("position",new St([0,0,0,0,0,1],3)),this.targetLine=new Du(s,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Q3.setFromMatrixPosition(this.light.matrixWorld),gx.setFromMatrixPosition(this.light.target.matrixWorld),eR.subVectors(gx,Q3),this.lightPlane.lookAt(gx),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(gx),this.targetLine.scale.z=eR.length()}}const vx=new Y,Pi=new Ab;class Qj extends Ml{constructor(e){const t=new Kt,i=new Er({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],a=[],l={};u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4");function u(w,A){d(w),d(A)}function d(w){s.push(0,0,0),a.push(0,0,0),l[w]===void 0&&(l[w]=[]),l[w].push(s.length/3-1)}t.setAttribute("position",new St(s,3)),t.setAttribute("color",new St(a,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const p=new vt(16755200),g=new vt(16711680),y=new vt(43775),x=new vt(16777215),_=new vt(3355443);this.setColors(p,g,y,x,_)}setColors(e,t,i,s,a){const u=this.geometry.getAttribute("color");return u.setXYZ(0,e.r,e.g,e.b),u.setXYZ(1,e.r,e.g,e.b),u.setXYZ(2,e.r,e.g,e.b),u.setXYZ(3,e.r,e.g,e.b),u.setXYZ(4,e.r,e.g,e.b),u.setXYZ(5,e.r,e.g,e.b),u.setXYZ(6,e.r,e.g,e.b),u.setXYZ(7,e.r,e.g,e.b),u.setXYZ(8,e.r,e.g,e.b),u.setXYZ(9,e.r,e.g,e.b),u.setXYZ(10,e.r,e.g,e.b),u.setXYZ(11,e.r,e.g,e.b),u.setXYZ(12,e.r,e.g,e.b),u.setXYZ(13,e.r,e.g,e.b),u.setXYZ(14,e.r,e.g,e.b),u.setXYZ(15,e.r,e.g,e.b),u.setXYZ(16,e.r,e.g,e.b),u.setXYZ(17,e.r,e.g,e.b),u.setXYZ(18,e.r,e.g,e.b),u.setXYZ(19,e.r,e.g,e.b),u.setXYZ(20,e.r,e.g,e.b),u.setXYZ(21,e.r,e.g,e.b),u.setXYZ(22,e.r,e.g,e.b),u.setXYZ(23,e.r,e.g,e.b),u.setXYZ(24,t.r,t.g,t.b),u.setXYZ(25,t.r,t.g,t.b),u.setXYZ(26,t.r,t.g,t.b),u.setXYZ(27,t.r,t.g,t.b),u.setXYZ(28,t.r,t.g,t.b),u.setXYZ(29,t.r,t.g,t.b),u.setXYZ(30,t.r,t.g,t.b),u.setXYZ(31,t.r,t.g,t.b),u.setXYZ(32,i.r,i.g,i.b),u.setXYZ(33,i.r,i.g,i.b),u.setXYZ(34,i.r,i.g,i.b),u.setXYZ(35,i.r,i.g,i.b),u.setXYZ(36,i.r,i.g,i.b),u.setXYZ(37,i.r,i.g,i.b),u.setXYZ(38,s.r,s.g,s.b),u.setXYZ(39,s.r,s.g,s.b),u.setXYZ(40,a.r,a.g,a.b),u.setXYZ(41,a.r,a.g,a.b),u.setXYZ(42,a.r,a.g,a.b),u.setXYZ(43,a.r,a.g,a.b),u.setXYZ(44,a.r,a.g,a.b),u.setXYZ(45,a.r,a.g,a.b),u.setXYZ(46,a.r,a.g,a.b),u.setXYZ(47,a.r,a.g,a.b),u.setXYZ(48,a.r,a.g,a.b),u.setXYZ(49,a.r,a.g,a.b),u.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,i=1,s=1;let a,l;if(Pi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,l=0;else if(this.camera.coordinateSystem===fa)a=-1,l=1;else if(this.camera.coordinateSystem===cp)a=0,l=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Gi("c",t,e,Pi,0,0,a),Gi("t",t,e,Pi,0,0,l),Gi("n1",t,e,Pi,-i,-s,a),Gi("n2",t,e,Pi,i,-s,a),Gi("n3",t,e,Pi,-i,s,a),Gi("n4",t,e,Pi,i,s,a),Gi("f1",t,e,Pi,-i,-s,l),Gi("f2",t,e,Pi,i,-s,l),Gi("f3",t,e,Pi,-i,s,l),Gi("f4",t,e,Pi,i,s,l),Gi("u1",t,e,Pi,i*.7,s*1.1,a),Gi("u2",t,e,Pi,-i*.7,s*1.1,a),Gi("u3",t,e,Pi,0,s*2,a),Gi("cf1",t,e,Pi,-i,0,l),Gi("cf2",t,e,Pi,i,0,l),Gi("cf3",t,e,Pi,0,-s,l),Gi("cf4",t,e,Pi,0,s,l),Gi("cn1",t,e,Pi,-i,0,a),Gi("cn2",t,e,Pi,i,0,a),Gi("cn3",t,e,Pi,0,-s,a),Gi("cn4",t,e,Pi,0,s,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Gi(n,e,t,i,s,a,l){vx.set(s,a,l).unproject(i);const u=e[n];if(u!==void 0){const d=t.getAttribute("position");for(let p=0,g=u.length;p<g;p++)d.setXYZ(u[p],vx.x,vx.y,vx.z)}}const yx=new Qs;class eG extends Ml{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(24),a=new Kt;a.setIndex(new Yn(i,1)),a.setAttribute("position",new Yn(s,3)),super(a,new Er({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&yx.setFromObject(this.object),yx.isEmpty())return;const e=yx.min,t=yx.max,i=this.geometry.attributes.position,s=i.array;s[0]=t.x,s[1]=t.y,s[2]=t.z,s[3]=e.x,s[4]=t.y,s[5]=t.z,s[6]=e.x,s[7]=e.y,s[8]=t.z,s[9]=t.x,s[10]=e.y,s[11]=t.z,s[12]=t.x,s[13]=t.y,s[14]=e.z,s[15]=e.x,s[16]=t.y,s[17]=e.z,s[18]=e.x,s[19]=e.y,s[20]=e.z,s[21]=t.x,s[22]=e.y,s[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class tG extends Ml{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new Kt;a.setIndex(new Yn(i,1)),a.setAttribute("position",new St(s,3)),super(a,new Er({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class nG extends Du{constructor(e,t=1,i=16776960){const s=i,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new Kt;l.setAttribute("position",new St(a,3)),l.computeBoundingSphere(),super(l,new Er({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new Kt;d.setAttribute("position",new St(u,3)),d.computeBoundingSphere(),this.add(new ns(d,new Ou({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const tR=new Y;let xx,V1;class iG extends Dn{constructor(e=new Y(0,0,1),t=new Y(0,0,0),i=1,s=16776960,a=i*.2,l=a*.2){super(),this.type="ArrowHelper",xx===void 0&&(xx=new Kt,xx.setAttribute("position",new St([0,0,0,0,1,0],3)),V1=new I0(.5,1,5,1),V1.translate(0,-.5,0)),this.position.copy(t),this.line=new Du(xx,new Er({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ns(V1,new Ou({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,a,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{tR.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(tR,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class sG extends Ml{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new Kt;s.setAttribute("position",new St(t,3)),s.setAttribute("color",new St(i,3));const a=new Er({vertexColors:!0,toneMapped:!1});super(s,a),this.type="AxesHelper"}setColors(e,t,i){const s=new vt,a=this.geometry.attributes.color.array;return s.set(e),s.toArray(a,0),s.toArray(a,3),s.set(t),s.toArray(a,6),s.toArray(a,9),s.set(i),s.toArray(a,12),s.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class rG{constructor(){this.type="ShapePath",this.color=new vt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new q_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,s){return this.currentPath.quadraticCurveTo(e,t,i,s),this}bezierCurveTo(e,t,i,s,a,l){return this.currentPath.bezierCurveTo(e,t,i,s,a,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(M){const D=[];for(let L=0,N=M.length;L<N;L++){const P=M[L],z=new eh;z.curves=P.curves,D.push(z)}return D}function i(M,D){const L=D.length;let N=!1;for(let P=L-1,z=0;z<L;P=z++){let B=D[P],V=D[z],O=V.x-B.x,F=V.y-B.y;if(Math.abs(F)>Number.EPSILON){if(F<0&&(B=D[z],O=-O,V=D[P],F=-F),M.y<B.y||M.y>V.y)continue;if(M.y===B.y){if(M.x===B.x)return!0}else{const W=F*(M.x-B.x)-O*(M.y-B.y);if(W===0)return!0;if(W<0)continue;N=!N}}else{if(M.y!==B.y)continue;if(V.x<=M.x&&M.x<=B.x||B.x<=M.x&&M.x<=V.x)return!0}}return N}const s=Eo.isClockWise,a=this.subPaths;if(a.length===0)return[];let l,u,d;const p=[];if(a.length===1)return u=a[0],d=new eh,d.curves=u.curves,p.push(d),p;let g=!s(a[0].getPoints());g=e?!g:g;const y=[],x=[];let _=[],w=0,A;x[w]=void 0,_[w]=[];for(let M=0,D=a.length;M<D;M++)u=a[M],A=u.getPoints(),l=s(A),l=e?!l:l,l?(!g&&x[w]&&w++,x[w]={s:new eh,p:A},x[w].s.curves=u.curves,g&&w++,_[w]=[]):_[w].push({h:u,p:A[0]});if(!x[0])return t(a);if(x.length>1){let M=!1,D=0;for(let L=0,N=x.length;L<N;L++)y[L]=[];for(let L=0,N=x.length;L<N;L++){const P=_[L];for(let z=0;z<P.length;z++){const B=P[z];let V=!0;for(let O=0;O<x.length;O++)i(B.p,x[O].p)&&(L!==O&&D++,V?(V=!1,y[O].push(B)):M=!0);V&&y[L].push(B)}}D>0&&M===!1&&(_=y)}let E;for(let M=0,D=x.length;M<D;M++){d=x[M].s,p.push(d),E=_[M];for(let L=0,N=E.length;L<N;L++)d.holes.push(E[L].h)}return p}}class aG extends Sl{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){ct("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function oG(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function lG(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function cG(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function QM(n,e,t,i){const s=uG(i);switch(t){case vT:return n*e;case xb:return n*e/s.components*s.byteLength;case R0:return n*e/s.components*s.byteLength;case ah:return n*e*2/s.components*s.byteLength;case _b:return n*e*2/s.components*s.byteLength;case yT:return n*e*3/s.components*s.byteLength;case Js:return n*e*4/s.components*s.byteLength;case bb:return n*e*4/s.components*s.byteLength;case kg:case Fg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Bg:case Vg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case h_:case p_:return Math.max(n,16)*Math.max(e,8)/4;case f_:case d_:return Math.max(n,8)*Math.max(e,8)/2;case m_:case g_:case y_:case x_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case v_:case __:case b_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case S_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case M_:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case w_:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case T_:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case E_:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case A_:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case C_:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case R_:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case N_:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case D_:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case I_:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case L_:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case P_:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case U_:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case O_:case z_:case k_:return Math.ceil(n/4)*Math.ceil(e/4)*16;case F_:case B_:return Math.ceil(n/4)*Math.ceil(e/4)*8;case V_:case H_:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function uG(n){switch(n){case xr:case dT:return{byteLength:1,components:1};case op:case pT:case _l:return{byteLength:2,components:1};case vb:case yb:return{byteLength:2,components:4};case Xa:case gb:case wr:return{byteLength:4,components:1};case mT:case gT:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class fG{static contain(e,t){return oG(e,t)}static cover(e,t){return lG(e,t)}static fill(e){return cG(e)}static getByteLength(e,t,i,s){return QM(e,t,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:db}}));typeof window<"u"&&(window.__THREE__?ct("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=db);function yP(){let n=null,e=!1,t=null,i=null;function s(a,l){t(a,l),i=n.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function hG(n){const e=new WeakMap;function t(u,d){const p=u.array,g=u.usage,y=p.byteLength,x=n.createBuffer();n.bindBuffer(d,x),n.bufferData(d,p,g),u.onUploadCallback();let _;if(p instanceof Float32Array)_=n.FLOAT;else if(typeof Float16Array<"u"&&p instanceof Float16Array)_=n.HALF_FLOAT;else if(p instanceof Uint16Array)u.isFloat16BufferAttribute?_=n.HALF_FLOAT:_=n.UNSIGNED_SHORT;else if(p instanceof Int16Array)_=n.SHORT;else if(p instanceof Uint32Array)_=n.UNSIGNED_INT;else if(p instanceof Int32Array)_=n.INT;else if(p instanceof Int8Array)_=n.BYTE;else if(p instanceof Uint8Array)_=n.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)_=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:x,type:_,bytesPerElement:p.BYTES_PER_ELEMENT,version:u.version,size:y}}function i(u,d,p){const g=d.array,y=d.updateRanges;if(n.bindBuffer(p,u),y.length===0)n.bufferSubData(p,0,g);else{y.sort((_,w)=>_.start-w.start);let x=0;for(let _=1;_<y.length;_++){const w=y[x],A=y[_];A.start<=w.start+w.count+1?w.count=Math.max(w.count,A.start+A.count-w.start):(++x,y[x]=A)}y.length=x+1;for(let _=0,w=y.length;_<w;_++){const A=y[_];n.bufferSubData(p,A.start*g.BYTES_PER_ELEMENT,g,A.start,A.count)}d.clearUpdateRanges()}d.onUploadCallback()}function s(u){return u.isInterleavedBufferAttribute&&(u=u.data),e.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const d=e.get(u);d&&(n.deleteBuffer(d.buffer),e.delete(u))}function l(u,d){if(u.isInterleavedBufferAttribute&&(u=u.data),u.isGLBufferAttribute){const g=e.get(u);(!g||g.version<u.version)&&e.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}const p=e.get(u);if(p===void 0)e.set(u,t(u,d));else if(p.version<u.version){if(p.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(p.buffer,u,d),p.version=u.version}}return{get:s,remove:a,update:l}}var dG=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,pG=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,mG=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,gG=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,vG=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,yG=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,xG=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,_G=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,bG=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,SG=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,MG=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,wG=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,TG=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,EG=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,AG=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,CG=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,RG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,NG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,DG=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,IG=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,LG=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,PG=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,UG=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,OG=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,zG=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,kG=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,FG=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,BG=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,VG=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,HG=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,jG="gl_FragColor = linearToOutputTexel( gl_FragColor );",GG=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,WG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,XG=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,qG=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,ZG=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,YG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,$G=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,KG=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,JG=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,QG=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,e7=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,t7=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,n7=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,i7=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,s7=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,r7=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,a7=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,o7=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,l7=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,c7=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,u7=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,f7=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,h7=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,d7=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,p7=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,m7=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,g7=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,v7=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,y7=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,x7=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,_7=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,b7=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,S7=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,M7=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,w7=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,T7=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,E7=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,A7=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,C7=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,R7=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,N7=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,D7=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,I7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,L7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,P7=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,U7=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,O7=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,z7=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,k7=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,F7=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,B7=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,V7=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,H7=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,j7=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,G7=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,W7=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,X7=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,q7=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Z7=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,Y7=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,$7=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,K7=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,J7=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Q7=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,eW=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,tW=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,nW=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,iW=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,sW=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,rW=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,aW=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,oW=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,lW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,cW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,fW=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const hW=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,dW=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,pW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,mW=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,vW=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yW=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,xW=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,_W=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,bW=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,SW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,MW=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wW=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,TW=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,EW=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,AW=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CW=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,RW=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NW=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,DW=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IW=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,LW=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,PW=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,UW=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OW=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,zW=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kW=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FW=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BW=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,VW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,HW=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jW=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,GW=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,WW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ln={alphahash_fragment:dG,alphahash_pars_fragment:pG,alphamap_fragment:mG,alphamap_pars_fragment:gG,alphatest_fragment:vG,alphatest_pars_fragment:yG,aomap_fragment:xG,aomap_pars_fragment:_G,batching_pars_vertex:bG,batching_vertex:SG,begin_vertex:MG,beginnormal_vertex:wG,bsdfs:TG,iridescence_fragment:EG,bumpmap_pars_fragment:AG,clipping_planes_fragment:CG,clipping_planes_pars_fragment:RG,clipping_planes_pars_vertex:NG,clipping_planes_vertex:DG,color_fragment:IG,color_pars_fragment:LG,color_pars_vertex:PG,color_vertex:UG,common:OG,cube_uv_reflection_fragment:zG,defaultnormal_vertex:kG,displacementmap_pars_vertex:FG,displacementmap_vertex:BG,emissivemap_fragment:VG,emissivemap_pars_fragment:HG,colorspace_fragment:jG,colorspace_pars_fragment:GG,envmap_fragment:WG,envmap_common_pars_fragment:XG,envmap_pars_fragment:qG,envmap_pars_vertex:ZG,envmap_physical_pars_fragment:r7,envmap_vertex:YG,fog_vertex:$G,fog_pars_vertex:KG,fog_fragment:JG,fog_pars_fragment:QG,gradientmap_pars_fragment:e7,lightmap_pars_fragment:t7,lights_lambert_fragment:n7,lights_lambert_pars_fragment:i7,lights_pars_begin:s7,lights_toon_fragment:a7,lights_toon_pars_fragment:o7,lights_phong_fragment:l7,lights_phong_pars_fragment:c7,lights_physical_fragment:u7,lights_physical_pars_fragment:f7,lights_fragment_begin:h7,lights_fragment_maps:d7,lights_fragment_end:p7,logdepthbuf_fragment:m7,logdepthbuf_pars_fragment:g7,logdepthbuf_pars_vertex:v7,logdepthbuf_vertex:y7,map_fragment:x7,map_pars_fragment:_7,map_particle_fragment:b7,map_particle_pars_fragment:S7,metalnessmap_fragment:M7,metalnessmap_pars_fragment:w7,morphinstance_vertex:T7,morphcolor_vertex:E7,morphnormal_vertex:A7,morphtarget_pars_vertex:C7,morphtarget_vertex:R7,normal_fragment_begin:N7,normal_fragment_maps:D7,normal_pars_fragment:I7,normal_pars_vertex:L7,normal_vertex:P7,normalmap_pars_fragment:U7,clearcoat_normal_fragment_begin:O7,clearcoat_normal_fragment_maps:z7,clearcoat_pars_fragment:k7,iridescence_pars_fragment:F7,opaque_fragment:B7,packing:V7,premultiplied_alpha_fragment:H7,project_vertex:j7,dithering_fragment:G7,dithering_pars_fragment:W7,roughnessmap_fragment:X7,roughnessmap_pars_fragment:q7,shadowmap_pars_fragment:Z7,shadowmap_pars_vertex:Y7,shadowmap_vertex:$7,shadowmask_pars_fragment:K7,skinbase_vertex:J7,skinning_pars_vertex:Q7,skinning_vertex:eW,skinnormal_vertex:tW,specularmap_fragment:nW,specularmap_pars_fragment:iW,tonemapping_fragment:sW,tonemapping_pars_fragment:rW,transmission_fragment:aW,transmission_pars_fragment:oW,uv_pars_fragment:lW,uv_pars_vertex:cW,uv_vertex:uW,worldpos_vertex:fW,background_vert:hW,background_frag:dW,backgroundCube_vert:pW,backgroundCube_frag:mW,cube_vert:gW,cube_frag:vW,depth_vert:yW,depth_frag:xW,distance_vert:_W,distance_frag:bW,equirect_vert:SW,equirect_frag:MW,linedashed_vert:wW,linedashed_frag:TW,meshbasic_vert:EW,meshbasic_frag:AW,meshlambert_vert:CW,meshlambert_frag:RW,meshmatcap_vert:NW,meshmatcap_frag:DW,meshnormal_vert:IW,meshnormal_frag:LW,meshphong_vert:PW,meshphong_frag:UW,meshphysical_vert:OW,meshphysical_frag:zW,meshtoon_vert:kW,meshtoon_frag:FW,points_vert:BW,points_frag:VW,shadow_vert:HW,shadow_frag:jW,sprite_vert:GW,sprite_frag:WW},ut={common:{diffuse:{value:new vt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new en},alphaMap:{value:null},alphaMapTransform:{value:new en},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new en}},envmap:{envMap:{value:null},envMapRotation:{value:new en},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new en}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new en}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new en},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new en},normalScale:{value:new Be(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new en},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new en}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new en}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new en}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new vt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new en},alphaTest:{value:0},uvTransform:{value:new en}},sprite:{diffuse:{value:new vt(16777215)},opacity:{value:1},center:{value:new Be(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new en},alphaMap:{value:null},alphaMapTransform:{value:new en},alphaTest:{value:0}}},wo={basic:{uniforms:yr([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.fog]),vertexShader:ln.meshbasic_vert,fragmentShader:ln.meshbasic_frag},lambert:{uniforms:yr([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,ut.lights,{emissive:{value:new vt(0)}}]),vertexShader:ln.meshlambert_vert,fragmentShader:ln.meshlambert_frag},phong:{uniforms:yr([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,ut.lights,{emissive:{value:new vt(0)},specular:{value:new vt(1118481)},shininess:{value:30}}]),vertexShader:ln.meshphong_vert,fragmentShader:ln.meshphong_frag},standard:{uniforms:yr([ut.common,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.roughnessmap,ut.metalnessmap,ut.fog,ut.lights,{emissive:{value:new vt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ln.meshphysical_vert,fragmentShader:ln.meshphysical_frag},toon:{uniforms:yr([ut.common,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.gradientmap,ut.fog,ut.lights,{emissive:{value:new vt(0)}}]),vertexShader:ln.meshtoon_vert,fragmentShader:ln.meshtoon_frag},matcap:{uniforms:yr([ut.common,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,{matcap:{value:null}}]),vertexShader:ln.meshmatcap_vert,fragmentShader:ln.meshmatcap_frag},points:{uniforms:yr([ut.points,ut.fog]),vertexShader:ln.points_vert,fragmentShader:ln.points_frag},dashed:{uniforms:yr([ut.common,ut.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ln.linedashed_vert,fragmentShader:ln.linedashed_frag},depth:{uniforms:yr([ut.common,ut.displacementmap]),vertexShader:ln.depth_vert,fragmentShader:ln.depth_frag},normal:{uniforms:yr([ut.common,ut.bumpmap,ut.normalmap,ut.displacementmap,{opacity:{value:1}}]),vertexShader:ln.meshnormal_vert,fragmentShader:ln.meshnormal_frag},sprite:{uniforms:yr([ut.sprite,ut.fog]),vertexShader:ln.sprite_vert,fragmentShader:ln.sprite_frag},background:{uniforms:{uvTransform:{value:new en},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ln.background_vert,fragmentShader:ln.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new en}},vertexShader:ln.backgroundCube_vert,fragmentShader:ln.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ln.cube_vert,fragmentShader:ln.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ln.equirect_vert,fragmentShader:ln.equirect_frag},distance:{uniforms:yr([ut.common,ut.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ln.distance_vert,fragmentShader:ln.distance_frag},shadow:{uniforms:yr([ut.lights,ut.fog,{color:{value:new vt(0)},opacity:{value:1}}]),vertexShader:ln.shadow_vert,fragmentShader:ln.shadow_frag}};wo.physical={uniforms:yr([wo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new en},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new en},clearcoatNormalScale:{value:new Be(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new en},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new en},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new en},sheen:{value:0},sheenColor:{value:new vt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new en},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new en},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new en},transmissionSamplerSize:{value:new Be},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new en},attenuationDistance:{value:0},attenuationColor:{value:new vt(0)},specularColor:{value:new vt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new en},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new en},anisotropyVector:{value:new Be},anisotropyMap:{value:null},anisotropyMapTransform:{value:new en}}]),vertexShader:ln.meshphysical_vert,fragmentShader:ln.meshphysical_frag};const _x={r:0,b:0,g:0},kf=new pa,XW=new Wt;function qW(n,e,t,i,s,a,l){const u=new vt(0);let d=a===!0?0:1,p,g,y=null,x=0,_=null;function w(L){let N=L.isScene===!0?L.background:null;return N&&N.isTexture&&(N=(L.backgroundBlurriness>0?t:e).get(N)),N}function A(L){let N=!1;const P=w(L);P===null?M(u,d):P&&P.isColor&&(M(P,1),N=!0);const z=n.xr.getEnvironmentBlendMode();z==="additive"?i.buffers.color.setClear(0,0,0,1,l):z==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,l),(n.autoClear||N)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function E(L,N){const P=w(N);P&&(P.isCubeTexture||P.mapping===wp)?(g===void 0&&(g=new ns(new hh(1,1,1),new qa({name:"BackgroundCubeMaterial",uniforms:dp(wo.backgroundCube.uniforms),vertexShader:wo.backgroundCube.vertexShader,fragmentShader:wo.backgroundCube.fragmentShader,side:Tr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(z,B,V){this.matrixWorld.copyPosition(V.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(g)),kf.copy(N.backgroundRotation),kf.x*=-1,kf.y*=-1,kf.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(kf.y*=-1,kf.z*=-1),g.material.uniforms.envMap.value=P,g.material.uniforms.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,g.material.uniforms.backgroundBlurriness.value=N.backgroundBlurriness,g.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,g.material.uniforms.backgroundRotation.value.setFromMatrix4(XW.makeRotationFromEuler(kf)),g.material.toneMapped=Tn.getTransfer(P.colorSpace)!==Bn,(y!==P||x!==P.version||_!==n.toneMapping)&&(g.material.needsUpdate=!0,y=P,x=P.version,_=n.toneMapping),g.layers.enableAll(),L.unshift(g,g.geometry,g.material,0,0,null)):P&&P.isTexture&&(p===void 0&&(p=new ns(new Ap(2,2),new qa({name:"BackgroundMaterial",uniforms:dp(wo.background.uniforms),vertexShader:wo.background.vertexShader,fragmentShader:wo.background.fragmentShader,side:vc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(p)),p.material.uniforms.t2D.value=P,p.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,p.material.toneMapped=Tn.getTransfer(P.colorSpace)!==Bn,P.matrixAutoUpdate===!0&&P.updateMatrix(),p.material.uniforms.uvTransform.value.copy(P.matrix),(y!==P||x!==P.version||_!==n.toneMapping)&&(p.material.needsUpdate=!0,y=P,x=P.version,_=n.toneMapping),p.layers.enableAll(),L.unshift(p,p.geometry,p.material,0,0,null))}function M(L,N){L.getRGB(_x,_L(n)),i.buffers.color.setClear(_x.r,_x.g,_x.b,N,l)}function D(){g!==void 0&&(g.geometry.dispose(),g.material.dispose(),g=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return u},setClearColor:function(L,N=1){u.set(L),d=N,M(u,d)},getClearAlpha:function(){return d},setClearAlpha:function(L){d=L,M(u,d)},render:A,addToRenderList:E,dispose:D}}function ZW(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},s=x(null);let a=s,l=!1;function u(F,W,ee,J,ae){let he=!1;const Z=y(J,ee,W);a!==Z&&(a=Z,p(a.object)),he=_(F,J,ee,ae),he&&w(F,J,ee,ae),ae!==null&&e.update(ae,n.ELEMENT_ARRAY_BUFFER),(he||l)&&(l=!1,N(F,W,ee,J),ae!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(ae).buffer))}function d(){return n.createVertexArray()}function p(F){return n.bindVertexArray(F)}function g(F){return n.deleteVertexArray(F)}function y(F,W,ee){const J=ee.wireframe===!0;let ae=i[F.id];ae===void 0&&(ae={},i[F.id]=ae);let he=ae[W.id];he===void 0&&(he={},ae[W.id]=he);let Z=he[J];return Z===void 0&&(Z=x(d()),he[J]=Z),Z}function x(F){const W=[],ee=[],J=[];for(let ae=0;ae<t;ae++)W[ae]=0,ee[ae]=0,J[ae]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:ee,attributeDivisors:J,object:F,attributes:{},index:null}}function _(F,W,ee,J){const ae=a.attributes,he=W.attributes;let Z=0;const K=ee.getAttributes();for(const le in K)if(K[le].location>=0){const Re=ae[le];let q=he[le];if(q===void 0&&(le==="instanceMatrix"&&F.instanceMatrix&&(q=F.instanceMatrix),le==="instanceColor"&&F.instanceColor&&(q=F.instanceColor)),Re===void 0||Re.attribute!==q||q&&Re.data!==q.data)return!0;Z++}return a.attributesNum!==Z||a.index!==J}function w(F,W,ee,J){const ae={},he=W.attributes;let Z=0;const K=ee.getAttributes();for(const le in K)if(K[le].location>=0){let Re=he[le];Re===void 0&&(le==="instanceMatrix"&&F.instanceMatrix&&(Re=F.instanceMatrix),le==="instanceColor"&&F.instanceColor&&(Re=F.instanceColor));const q={};q.attribute=Re,Re&&Re.data&&(q.data=Re.data),ae[le]=q,Z++}a.attributes=ae,a.attributesNum=Z,a.index=J}function A(){const F=a.newAttributes;for(let W=0,ee=F.length;W<ee;W++)F[W]=0}function E(F){M(F,0)}function M(F,W){const ee=a.newAttributes,J=a.enabledAttributes,ae=a.attributeDivisors;ee[F]=1,J[F]===0&&(n.enableVertexAttribArray(F),J[F]=1),ae[F]!==W&&(n.vertexAttribDivisor(F,W),ae[F]=W)}function D(){const F=a.newAttributes,W=a.enabledAttributes;for(let ee=0,J=W.length;ee<J;ee++)W[ee]!==F[ee]&&(n.disableVertexAttribArray(ee),W[ee]=0)}function L(F,W,ee,J,ae,he,Z){Z===!0?n.vertexAttribIPointer(F,W,ee,ae,he):n.vertexAttribPointer(F,W,ee,J,ae,he)}function N(F,W,ee,J){A();const ae=J.attributes,he=ee.getAttributes(),Z=W.defaultAttributeValues;for(const K in he){const le=he[K];if(le.location>=0){let Ee=ae[K];if(Ee===void 0&&(K==="instanceMatrix"&&F.instanceMatrix&&(Ee=F.instanceMatrix),K==="instanceColor"&&F.instanceColor&&(Ee=F.instanceColor)),Ee!==void 0){const Re=Ee.normalized,q=Ee.itemSize,oe=e.get(Ee);if(oe===void 0)continue;const Ae=oe.buffer,ke=oe.type,rt=oe.bytesPerElement,de=ke===n.INT||ke===n.UNSIGNED_INT||Ee.gpuType===gb;if(Ee.isInterleavedBufferAttribute){const Ce=Ee.data,et=Ce.stride,it=Ee.offset;if(Ce.isInstancedInterleavedBuffer){for(let ht=0;ht<le.locationSize;ht++)M(le.location+ht,Ce.meshPerAttribute);F.isInstancedMesh!==!0&&J._maxInstanceCount===void 0&&(J._maxInstanceCount=Ce.meshPerAttribute*Ce.count)}else for(let ht=0;ht<le.locationSize;ht++)E(le.location+ht);n.bindBuffer(n.ARRAY_BUFFER,Ae);for(let ht=0;ht<le.locationSize;ht++)L(le.location+ht,q/le.locationSize,ke,Re,et*rt,(it+q/le.locationSize*ht)*rt,de)}else{if(Ee.isInstancedBufferAttribute){for(let Ce=0;Ce<le.locationSize;Ce++)M(le.location+Ce,Ee.meshPerAttribute);F.isInstancedMesh!==!0&&J._maxInstanceCount===void 0&&(J._maxInstanceCount=Ee.meshPerAttribute*Ee.count)}else for(let Ce=0;Ce<le.locationSize;Ce++)E(le.location+Ce);n.bindBuffer(n.ARRAY_BUFFER,Ae);for(let Ce=0;Ce<le.locationSize;Ce++)L(le.location+Ce,q/le.locationSize,ke,Re,q*rt,q/le.locationSize*Ce*rt,de)}}else if(Z!==void 0){const Re=Z[K];if(Re!==void 0)switch(Re.length){case 2:n.vertexAttrib2fv(le.location,Re);break;case 3:n.vertexAttrib3fv(le.location,Re);break;case 4:n.vertexAttrib4fv(le.location,Re);break;default:n.vertexAttrib1fv(le.location,Re)}}}}D()}function P(){V();for(const F in i){const W=i[F];for(const ee in W){const J=W[ee];for(const ae in J)g(J[ae].object),delete J[ae];delete W[ee]}delete i[F]}}function z(F){if(i[F.id]===void 0)return;const W=i[F.id];for(const ee in W){const J=W[ee];for(const ae in J)g(J[ae].object),delete J[ae];delete W[ee]}delete i[F.id]}function B(F){for(const W in i){const ee=i[W];if(ee[F.id]===void 0)continue;const J=ee[F.id];for(const ae in J)g(J[ae].object),delete J[ae];delete ee[F.id]}}function V(){O(),l=!0,a!==s&&(a=s,p(a.object))}function O(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:u,reset:V,resetDefaultState:O,dispose:P,releaseStatesOfGeometry:z,releaseStatesOfProgram:B,initAttributes:A,enableAttribute:E,disableUnusedAttributes:D}}function YW(n,e,t){let i;function s(p){i=p}function a(p,g){n.drawArrays(i,p,g),t.update(g,i,1)}function l(p,g,y){y!==0&&(n.drawArraysInstanced(i,p,g,y),t.update(g,i,y))}function u(p,g,y){if(y===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,p,0,g,0,y);let _=0;for(let w=0;w<y;w++)_+=g[w];t.update(_,i,1)}function d(p,g,y,x){if(y===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let w=0;w<p.length;w++)l(p[w],g[w],x[w]);else{_.multiDrawArraysInstancedWEBGL(i,p,0,g,0,x,0,y);let w=0;for(let A=0;A<y;A++)w+=g[A]*x[A];t.update(w,i,1)}}this.setMode=s,this.render=a,this.renderInstances=l,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function $W(n,e,t,i){let s;function a(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const B=e.get("EXT_texture_filter_anisotropic");s=n.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function l(B){return!(B!==Js&&i.convert(B)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function u(B){const V=B===_l&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(B!==xr&&i.convert(B)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&B!==wr&&!V)}function d(B){if(B==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";B="mediump"}return B==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=t.precision!==void 0?t.precision:"highp";const g=d(p);g!==p&&(ct("WebGLRenderer:",p,"not supported, using",g,"instead."),p=g);const y=t.logarithmicDepthBuffer===!0,x=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),_=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),w=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),A=n.getParameter(n.MAX_TEXTURE_SIZE),E=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),M=n.getParameter(n.MAX_VERTEX_ATTRIBS),D=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),L=n.getParameter(n.MAX_VARYING_VECTORS),N=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),P=n.getParameter(n.MAX_SAMPLES),z=n.getParameter(n.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:d,textureFormatReadable:l,textureTypeReadable:u,precision:p,logarithmicDepthBuffer:y,reversedDepthBuffer:x,maxTextures:_,maxVertexTextures:w,maxTextureSize:A,maxCubemapSize:E,maxAttributes:M,maxVertexUniforms:D,maxVaryings:L,maxFragmentUniforms:N,maxSamples:P,samples:z}}function KW(n){const e=this;let t=null,i=0,s=!1,a=!1;const l=new vu,u=new en,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(y,x){const _=y.length!==0||x||i!==0||s;return s=x,i=y.length,_},this.beginShadows=function(){a=!0,g(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(y,x){t=g(y,x,0)},this.setState=function(y,x,_){const w=y.clippingPlanes,A=y.clipIntersection,E=y.clipShadows,M=n.get(y);if(!s||w===null||w.length===0||a&&!E)a?g(null):p();else{const D=a?0:i,L=D*4;let N=M.clippingState||null;d.value=N,N=g(w,x,L,_);for(let P=0;P!==L;++P)N[P]=t[P];M.clippingState=N,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=D}};function p(){d.value!==t&&(d.value=t,d.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function g(y,x,_,w){const A=y!==null?y.length:0;let E=null;if(A!==0){if(E=d.value,w!==!0||E===null){const M=_+A*4,D=x.matrixWorldInverse;u.getNormalMatrix(D),(E===null||E.length<M)&&(E=new Float32Array(M));for(let L=0,N=_;L!==A;++L,N+=4)l.copy(y[L]).applyMatrix4(D,u),l.normal.toArray(E,N),E[N+3]=l.constant}d.value=E,d.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,E}}function JW(n){let e=new WeakMap;function t(l,u){return u===e0?l.mapping=xl:u===t0&&(l.mapping=Cu),l}function i(l){if(l&&l.isTexture){const u=l.mapping;if(u===e0||u===t0)if(e.has(l)){const d=e.get(l).texture;return t(d,l.mapping)}else{const d=l.image;if(d&&d.height>0){const p=new wT(d.height);return p.fromEquirectangularTexture(n,l),e.set(l,p),l.addEventListener("dispose",s),t(p.texture,l.mapping)}else return null}}return l}function s(l){const u=l.target;u.removeEventListener("dispose",s);const d=e.get(u);d!==void 0&&(e.delete(u),d.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}const wu=4,nR=[.125,.215,.35,.446,.526,.582],Hf=20,QW=256,vg=new Cp,iR=new vt;let H1=null,j1=0,G1=0,W1=!1;const eX=new Y;class ew{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,i=.1,s=100,a={}){const{size:l=256,position:u=eX}=a;H1=this._renderer.getRenderTarget(),j1=this._renderer.getActiveCubeFace(),G1=this._renderer.getActiveMipmapLevel(),W1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(l);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(e,i,s,d,u),t>0&&this._blur(d,0,0,t),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=aR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=rR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(H1,j1,G1),this._renderer.xr.enabled=W1,e.scissorTest=!1,Vd(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===xl||e.mapping===Cu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),H1=this._renderer.getRenderTarget(),j1=this._renderer.getActiveCubeFace(),G1=this._renderer.getActiveMipmapLevel(),W1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:hi,minFilter:hi,generateMipmaps:!1,type:_l,format:Js,colorSpace:Ru,depthBuffer:!1},s=sR(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=sR(e,t,i);const{_lodMax:a}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=tX(a)),this._blurMaterial=iX(a,e,t),this._ggxMaterial=nX(a,e,t)}return s}_compileMaterial(e){const t=new ns(new Kt,e);this._renderer.compile(t,vg)}_sceneToCubeUV(e,t,i,s,a){const d=new _s(90,1,t,i),p=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],y=this._renderer,x=y.autoClear,_=y.toneMapping;y.getClearColor(iR),y.toneMapping=Wa,y.autoClear=!1,y.state.buffers.depth.getReversed()&&(y.setRenderTarget(s),y.clearDepth(),y.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new ns(new hh,new Ou({name:"PMREM.Background",side:Tr,depthWrite:!1,depthTest:!1})));const A=this._backgroundBox,E=A.material;let M=!1;const D=e.background;D?D.isColor&&(E.color.copy(D),e.background=null,M=!0):(E.color.copy(iR),M=!0);for(let L=0;L<6;L++){const N=L%3;N===0?(d.up.set(0,p[L],0),d.position.set(a.x,a.y,a.z),d.lookAt(a.x+g[L],a.y,a.z)):N===1?(d.up.set(0,0,p[L]),d.position.set(a.x,a.y,a.z),d.lookAt(a.x,a.y+g[L],a.z)):(d.up.set(0,p[L],0),d.position.set(a.x,a.y,a.z),d.lookAt(a.x,a.y,a.z+g[L]));const P=this._cubeSize;Vd(s,N*P,L>2?P:0,P,P),y.setRenderTarget(s),M&&y.render(A,d),y.render(e,d)}y.toneMapping=_,y.autoClear=x,e.background=D}_textureToCubeUV(e,t){const i=this._renderer,s=e.mapping===xl||e.mapping===Cu;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=aR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=rR());const a=s?this._cubemapMaterial:this._equirectMaterial,l=this._lodMeshes[0];l.material=a;const u=a.uniforms;u.envMap.value=e;const d=this._cubeSize;Vd(t,0,0,3*d,2*d),i.setRenderTarget(t),i.render(l,vg)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const s=this._lodMeshes.length;for(let a=1;a<s;a++)this._applyGGXFilter(e,a-1,a);t.autoClear=i}_applyGGXFilter(e,t,i){const s=this._renderer,a=this._pingPongRenderTarget,l=this._ggxMaterial,u=this._lodMeshes[i];u.material=l;const d=l.uniforms,p=i/(this._lodMeshes.length-1),g=t/(this._lodMeshes.length-1),y=Math.sqrt(p*p-g*g),x=0+p*1.25,_=y*x,{_lodMax:w}=this,A=this._sizeLods[i],E=3*A*(i>w-wu?i-w+wu:0),M=4*(this._cubeSize-A);d.envMap.value=e.texture,d.roughness.value=_,d.mipInt.value=w-t,Vd(a,E,M,3*A,2*A),s.setRenderTarget(a),s.render(u,vg),d.envMap.value=a.texture,d.roughness.value=0,d.mipInt.value=w-i,Vd(e,E,M,3*A,2*A),s.setRenderTarget(e),s.render(u,vg)}_blur(e,t,i,s,a){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,i,s,"latitudinal",a),this._halfBlur(l,e,i,i,s,"longitudinal",a)}_halfBlur(e,t,i,s,a,l,u){const d=this._renderer,p=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&Rt("blur direction must be either latitudinal or longitudinal!");const g=3,y=this._lodMeshes[s];y.material=p;const x=p.uniforms,_=this._sizeLods[i]-1,w=isFinite(a)?Math.PI/(2*_):2*Math.PI/(2*Hf-1),A=a/w,E=isFinite(a)?1+Math.floor(g*A):Hf;E>Hf&&ct(`sigmaRadians, ${a}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${Hf}`);const M=[];let D=0;for(let B=0;B<Hf;++B){const V=B/A,O=Math.exp(-V*V/2);M.push(O),B===0?D+=O:B<E&&(D+=2*O)}for(let B=0;B<M.length;B++)M[B]=M[B]/D;x.envMap.value=e.texture,x.samples.value=E,x.weights.value=M,x.latitudinal.value=l==="latitudinal",u&&(x.poleAxis.value=u);const{_lodMax:L}=this;x.dTheta.value=w,x.mipInt.value=L-i;const N=this._sizeLods[s],P=3*N*(s>L-wu?s-L+wu:0),z=4*(this._cubeSize-N);Vd(t,P,z,3*N,2*N),d.setRenderTarget(t),d.render(y,vg)}}function tX(n){const e=[],t=[],i=[];let s=n;const a=n-wu+1+nR.length;for(let l=0;l<a;l++){const u=Math.pow(2,s);e.push(u);let d=1/u;l>n-wu?d=nR[l-n+wu-1]:l===0&&(d=0),t.push(d);const p=1/(u-2),g=-p,y=1+p,x=[g,g,y,g,y,y,g,g,y,y,g,y],_=6,w=6,A=3,E=2,M=1,D=new Float32Array(A*w*_),L=new Float32Array(E*w*_),N=new Float32Array(M*w*_);for(let z=0;z<_;z++){const B=z%3*2/3-1,V=z>2?0:-1,O=[B,V,0,B+2/3,V,0,B+2/3,V+1,0,B,V,0,B+2/3,V+1,0,B,V+1,0];D.set(O,A*w*z),L.set(x,E*w*z);const F=[z,z,z,z,z,z];N.set(F,M*w*z)}const P=new Kt;P.setAttribute("position",new Yn(D,A)),P.setAttribute("uv",new Yn(L,E)),P.setAttribute("faceIndex",new Yn(N,M)),i.push(new ns(P,null)),s>wu&&s--}return{lodMeshes:i,sizeLods:e,sigmas:t}}function sR(n,e,t){const i=new da(n,e,t);return i.texture.mapping=wp,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Vd(n,e,t,i,s){n.viewport.set(e,t,i,s),n.scissor.set(e,t,i,s)}function nX(n,e,t){return new qa({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:QW,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:Zb(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:gl,depthTest:!1,depthWrite:!1})}function iX(n,e,t){const i=new Float32Array(Hf),s=new Y(0,1,0);return new qa({name:"SphericalGaussianBlur",defines:{n:Hf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:Zb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:gl,depthTest:!1,depthWrite:!1})}function rR(){return new qa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Zb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:gl,depthTest:!1,depthWrite:!1})}function aR(){return new qa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Zb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:gl,depthTest:!1,depthWrite:!1})}function Zb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function sX(n){let e=new WeakMap,t=null;function i(u){if(u&&u.isTexture){const d=u.mapping,p=d===e0||d===t0,g=d===xl||d===Cu;if(p||g){let y=e.get(u);const x=y!==void 0?y.texture.pmremVersion:0;if(u.isRenderTargetTexture&&u.pmremVersion!==x)return t===null&&(t=new ew(n)),y=p?t.fromEquirectangular(u,y):t.fromCubemap(u,y),y.texture.pmremVersion=u.pmremVersion,e.set(u,y),y.texture;if(y!==void 0)return y.texture;{const _=u.image;return p&&_&&_.height>0||g&&_&&s(_)?(t===null&&(t=new ew(n)),y=p?t.fromEquirectangular(u):t.fromCubemap(u),y.texture.pmremVersion=u.pmremVersion,e.set(u,y),u.addEventListener("dispose",a),y.texture):null}}}return u}function s(u){let d=0;const p=6;for(let g=0;g<p;g++)u[g]!==void 0&&d++;return d===p}function a(u){const d=u.target;d.removeEventListener("dispose",a);const p=e.get(d);p!==void 0&&(e.delete(d),p.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:l}}function rX(n){const e={};function t(i){if(e[i]!==void 0)return e[i];const s=n.getExtension(i);return e[i]=s,s}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const s=t(i);return s===null&&up("WebGLRenderer: "+i+" extension not supported."),s}}}function aX(n,e,t,i){const s={},a=new WeakMap;function l(y){const x=y.target;x.index!==null&&e.remove(x.index);for(const w in x.attributes)e.remove(x.attributes[w]);x.removeEventListener("dispose",l),delete s[x.id];const _=a.get(x);_&&(e.remove(_),a.delete(x)),i.releaseStatesOfGeometry(x),x.isInstancedBufferGeometry===!0&&delete x._maxInstanceCount,t.memory.geometries--}function u(y,x){return s[x.id]===!0||(x.addEventListener("dispose",l),s[x.id]=!0,t.memory.geometries++),x}function d(y){const x=y.attributes;for(const _ in x)e.update(x[_],n.ARRAY_BUFFER)}function p(y){const x=[],_=y.index,w=y.attributes.position;let A=0;if(_!==null){const D=_.array;A=_.version;for(let L=0,N=D.length;L<N;L+=3){const P=D[L+0],z=D[L+1],B=D[L+2];x.push(P,z,z,B,B,P)}}else if(w!==void 0){const D=w.array;A=w.version;for(let L=0,N=D.length/3-1;L<N;L+=3){const P=L+0,z=L+1,B=L+2;x.push(P,z,z,B,B,P)}}else return;const E=new(pL(x)?MT:ST)(x,1);E.version=A;const M=a.get(y);M&&e.remove(M),a.set(y,E)}function g(y){const x=a.get(y);if(x){const _=y.index;_!==null&&x.version<_.version&&p(y)}else p(y);return a.get(y)}return{get:u,update:d,getWireframeAttribute:g}}function oX(n,e,t){let i;function s(x){i=x}let a,l;function u(x){a=x.type,l=x.bytesPerElement}function d(x,_){n.drawElements(i,_,a,x*l),t.update(_,i,1)}function p(x,_,w){w!==0&&(n.drawElementsInstanced(i,_,a,x*l,w),t.update(_,i,w))}function g(x,_,w){if(w===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,_,0,a,x,0,w);let E=0;for(let M=0;M<w;M++)E+=_[M];t.update(E,i,1)}function y(x,_,w,A){if(w===0)return;const E=e.get("WEBGL_multi_draw");if(E===null)for(let M=0;M<x.length;M++)p(x[M]/l,_[M],A[M]);else{E.multiDrawElementsInstancedWEBGL(i,_,0,a,x,0,A,0,w);let M=0;for(let D=0;D<w;D++)M+=_[D]*A[D];t.update(M,i,1)}}this.setMode=s,this.setIndex=u,this.render=d,this.renderInstances=p,this.renderMultiDraw=g,this.renderMultiDrawInstances=y}function lX(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,l,u){switch(t.calls++,l){case n.TRIANGLES:t.triangles+=u*(a/3);break;case n.LINES:t.lines+=u*(a/2);break;case n.LINE_STRIP:t.lines+=u*(a-1);break;case n.LINE_LOOP:t.lines+=u*a;break;case n.POINTS:t.points+=u*a;break;default:Rt("WebGLInfo: Unknown draw mode:",l);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:i}}function cX(n,e,t){const i=new WeakMap,s=new Jn;function a(l,u,d){const p=l.morphTargetInfluences,g=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,y=g!==void 0?g.length:0;let x=i.get(u);if(x===void 0||x.count!==y){let F=function(){V.dispose(),i.delete(u),u.removeEventListener("dispose",F)};var _=F;x!==void 0&&x.texture.dispose();const w=u.morphAttributes.position!==void 0,A=u.morphAttributes.normal!==void 0,E=u.morphAttributes.color!==void 0,M=u.morphAttributes.position||[],D=u.morphAttributes.normal||[],L=u.morphAttributes.color||[];let N=0;w===!0&&(N=1),A===!0&&(N=2),E===!0&&(N=3);let P=u.attributes.position.count*N,z=1;P>e.maxTextureSize&&(z=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const B=new Float32Array(P*z*4*y),V=new Tb(B,P,z,y);V.type=wr,V.needsUpdate=!0;const O=N*4;for(let W=0;W<y;W++){const ee=M[W],J=D[W],ae=L[W],he=P*z*4*W;for(let Z=0;Z<ee.count;Z++){const K=Z*O;w===!0&&(s.fromBufferAttribute(ee,Z),B[he+K+0]=s.x,B[he+K+1]=s.y,B[he+K+2]=s.z,B[he+K+3]=0),A===!0&&(s.fromBufferAttribute(J,Z),B[he+K+4]=s.x,B[he+K+5]=s.y,B[he+K+6]=s.z,B[he+K+7]=0),E===!0&&(s.fromBufferAttribute(ae,Z),B[he+K+8]=s.x,B[he+K+9]=s.y,B[he+K+10]=s.z,B[he+K+11]=ae.itemSize===4?s.w:1)}}x={count:y,texture:V,size:new Be(P,z)},i.set(u,x),u.addEventListener("dispose",F)}if(l.isInstancedMesh===!0&&l.morphTexture!==null)d.getUniforms().setValue(n,"morphTexture",l.morphTexture,t);else{let w=0;for(let E=0;E<p.length;E++)w+=p[E];const A=u.morphTargetsRelative?1:1-w;d.getUniforms().setValue(n,"morphTargetBaseInfluence",A),d.getUniforms().setValue(n,"morphTargetInfluences",p)}d.getUniforms().setValue(n,"morphTargetsTexture",x.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",x.size)}return{update:a}}function uX(n,e,t,i){let s=new WeakMap;function a(d){const p=i.render.frame,g=d.geometry,y=e.get(d,g);if(s.get(y)!==p&&(e.update(y),s.set(y,p)),d.isInstancedMesh&&(d.hasEventListener("dispose",u)===!1&&d.addEventListener("dispose",u),s.get(d)!==p&&(t.update(d.instanceMatrix,n.ARRAY_BUFFER),d.instanceColor!==null&&t.update(d.instanceColor,n.ARRAY_BUFFER),s.set(d,p))),d.isSkinnedMesh){const x=d.skeleton;s.get(x)!==p&&(x.update(),s.set(x,p))}return y}function l(){s=new WeakMap}function u(d){const p=d.target;p.removeEventListener("dispose",u),t.remove(p.instanceMatrix),p.instanceColor!==null&&t.remove(p.instanceColor)}return{update:a,dispose:l}}const fX={[aT]:"LINEAR_TONE_MAPPING",[oT]:"REINHARD_TONE_MAPPING",[lT]:"CINEON_TONE_MAPPING",[pb]:"ACES_FILMIC_TONE_MAPPING",[uT]:"AGX_TONE_MAPPING",[fT]:"NEUTRAL_TONE_MAPPING",[cT]:"CUSTOM_TONE_MAPPING"};function hX(n,e,t,i,s){const a=new da(e,t,{type:n,depthBuffer:i,stencilBuffer:s}),l=new da(e,t,{type:_l,depthBuffer:!1,stencilBuffer:!1}),u=new Kt;u.setAttribute("position",new St([-1,3,0,-1,-1,0,3,-1,0],3)),u.setAttribute("uv",new St([0,2,0,0,2,0],2));const d=new OT({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),p=new ns(u,d),g=new Cp(-1,1,1,-1,0,1);let y=null,x=null,_=!1,w,A=null,E=[],M=!1;this.setSize=function(D,L){a.setSize(D,L),l.setSize(D,L);for(let N=0;N<E.length;N++){const P=E[N];P.setSize&&P.setSize(D,L)}},this.setEffects=function(D){E=D,M=E.length>0&&E[0].isRenderPass===!0;const L=a.width,N=a.height;for(let P=0;P<E.length;P++){const z=E[P];z.setSize&&z.setSize(L,N)}},this.begin=function(D,L){if(_||D.toneMapping===Wa&&E.length===0)return!1;if(A=L,L!==null){const N=L.width,P=L.height;(a.width!==N||a.height!==P)&&this.setSize(N,P)}return M===!1&&D.setRenderTarget(a),w=D.toneMapping,D.toneMapping=Wa,!0},this.hasRenderPass=function(){return M},this.end=function(D,L){D.toneMapping=w,_=!0;let N=a,P=l;for(let z=0;z<E.length;z++){const B=E[z];if(B.enabled!==!1&&(B.render(D,P,N,L),B.needsSwap!==!1)){const V=N;N=P,P=V}}if(y!==D.outputColorSpace||x!==D.toneMapping){y=D.outputColorSpace,x=D.toneMapping,d.defines={},Tn.getTransfer(y)===Bn&&(d.defines.SRGB_TRANSFER="");const z=fX[x];z&&(d.defines[z]=""),d.needsUpdate=!0}d.uniforms.tDiffuse.value=N.texture,D.setRenderTarget(A),D.render(p,g),A=null,_=!1},this.isCompositing=function(){return _},this.dispose=function(){a.dispose(),l.dispose(),u.dispose(),d.dispose()}}const xP=new Oi,tw=new mp(1,1),_P=new Tb,bP=new Eb,SP=new N0,oR=[],lR=[],cR=new Float32Array(16),uR=new Float32Array(9),fR=new Float32Array(4);function Rp(n,e,t){const i=n[0];if(i<=0||i>0)return n;const s=e*t;let a=oR[s];if(a===void 0&&(a=new Float32Array(s),oR[s]=a),e!==0){i.toArray(a,0);for(let l=1,u=0;l!==e;++l)u+=t,n[l].toArray(a,u)}return a}function hs(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ds(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Yb(n,e){let t=lR[e];t===void 0&&(t=new Int32Array(e),lR[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function dX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function pX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(hs(t,e))return;n.uniform2fv(this.addr,e),ds(t,e)}}function mX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(hs(t,e))return;n.uniform3fv(this.addr,e),ds(t,e)}}function gX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(hs(t,e))return;n.uniform4fv(this.addr,e),ds(t,e)}}function vX(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(hs(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ds(t,e)}else{if(hs(t,i))return;fR.set(i),n.uniformMatrix2fv(this.addr,!1,fR),ds(t,i)}}function yX(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(hs(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ds(t,e)}else{if(hs(t,i))return;uR.set(i),n.uniformMatrix3fv(this.addr,!1,uR),ds(t,i)}}function xX(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(hs(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ds(t,e)}else{if(hs(t,i))return;cR.set(i),n.uniformMatrix4fv(this.addr,!1,cR),ds(t,i)}}function _X(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function bX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(hs(t,e))return;n.uniform2iv(this.addr,e),ds(t,e)}}function SX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(hs(t,e))return;n.uniform3iv(this.addr,e),ds(t,e)}}function MX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(hs(t,e))return;n.uniform4iv(this.addr,e),ds(t,e)}}function wX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function TX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(hs(t,e))return;n.uniform2uiv(this.addr,e),ds(t,e)}}function EX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(hs(t,e))return;n.uniform3uiv(this.addr,e),ds(t,e)}}function AX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(hs(t,e))return;n.uniform4uiv(this.addr,e),ds(t,e)}}function CX(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s);let a;this.type===n.SAMPLER_2D_SHADOW?(tw.compareFunction=t.isReversedDepthBuffer()?wb:Mb,a=tw):a=xP,t.setTexture2D(e||a,s)}function RX(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||bP,s)}function NX(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||SP,s)}function DX(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||_P,s)}function IX(n){switch(n){case 5126:return dX;case 35664:return pX;case 35665:return mX;case 35666:return gX;case 35674:return vX;case 35675:return yX;case 35676:return xX;case 5124:case 35670:return _X;case 35667:case 35671:return bX;case 35668:case 35672:return SX;case 35669:case 35673:return MX;case 5125:return wX;case 36294:return TX;case 36295:return EX;case 36296:return AX;case 35678:case 36198:case 36298:case 36306:case 35682:return CX;case 35679:case 36299:case 36307:return RX;case 35680:case 36300:case 36308:case 36293:return NX;case 36289:case 36303:case 36311:case 36292:return DX}}function LX(n,e){n.uniform1fv(this.addr,e)}function PX(n,e){const t=Rp(e,this.size,2);n.uniform2fv(this.addr,t)}function UX(n,e){const t=Rp(e,this.size,3);n.uniform3fv(this.addr,t)}function OX(n,e){const t=Rp(e,this.size,4);n.uniform4fv(this.addr,t)}function zX(n,e){const t=Rp(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function kX(n,e){const t=Rp(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function FX(n,e){const t=Rp(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function BX(n,e){n.uniform1iv(this.addr,e)}function VX(n,e){n.uniform2iv(this.addr,e)}function HX(n,e){n.uniform3iv(this.addr,e)}function jX(n,e){n.uniform4iv(this.addr,e)}function GX(n,e){n.uniform1uiv(this.addr,e)}function WX(n,e){n.uniform2uiv(this.addr,e)}function XX(n,e){n.uniform3uiv(this.addr,e)}function qX(n,e){n.uniform4uiv(this.addr,e)}function ZX(n,e,t){const i=this.cache,s=e.length,a=Yb(t,s);hs(i,a)||(n.uniform1iv(this.addr,a),ds(i,a));let l;this.type===n.SAMPLER_2D_SHADOW?l=tw:l=xP;for(let u=0;u!==s;++u)t.setTexture2D(e[u]||l,a[u])}function YX(n,e,t){const i=this.cache,s=e.length,a=Yb(t,s);hs(i,a)||(n.uniform1iv(this.addr,a),ds(i,a));for(let l=0;l!==s;++l)t.setTexture3D(e[l]||bP,a[l])}function $X(n,e,t){const i=this.cache,s=e.length,a=Yb(t,s);hs(i,a)||(n.uniform1iv(this.addr,a),ds(i,a));for(let l=0;l!==s;++l)t.setTextureCube(e[l]||SP,a[l])}function KX(n,e,t){const i=this.cache,s=e.length,a=Yb(t,s);hs(i,a)||(n.uniform1iv(this.addr,a),ds(i,a));for(let l=0;l!==s;++l)t.setTexture2DArray(e[l]||_P,a[l])}function JX(n){switch(n){case 5126:return LX;case 35664:return PX;case 35665:return UX;case 35666:return OX;case 35674:return zX;case 35675:return kX;case 35676:return FX;case 5124:case 35670:return BX;case 35667:case 35671:return VX;case 35668:case 35672:return HX;case 35669:case 35673:return jX;case 5125:return GX;case 36294:return WX;case 36295:return XX;case 36296:return qX;case 35678:case 36198:case 36298:case 36306:case 35682:return ZX;case 35679:case 36299:case 36307:return YX;case 35680:case 36300:case 36308:case 36293:return $X;case 36289:case 36303:case 36311:case 36292:return KX}}class QX{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=IX(t.type)}}class eq{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=JX(t.type)}}class tq{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let a=0,l=s.length;a!==l;++a){const u=s[a];u.setValue(e,t[u.id],i)}}}const X1=/(\w+)(\])?(\[|\.)?/g;function hR(n,e){n.seq.push(e),n.map[e.id]=e}function nq(n,e,t){const i=n.name,s=i.length;for(X1.lastIndex=0;;){const a=X1.exec(i),l=X1.lastIndex;let u=a[1];const d=a[2]==="]",p=a[3];if(d&&(u=u|0),p===void 0||p==="["&&l+2===s){hR(t,p===void 0?new QX(u,n,e):new eq(u,n,e));break}else{let y=t.map[u];y===void 0&&(y=new tq(u),hR(t,y)),t=y}}}class Ux{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let l=0;l<i;++l){const u=e.getActiveUniform(t,l),d=e.getUniformLocation(t,u.name);nq(u,d,this)}const s=[],a=[];for(const l of this.seq)l.type===e.SAMPLER_2D_SHADOW||l.type===e.SAMPLER_CUBE_SHADOW||l.type===e.SAMPLER_2D_ARRAY_SHADOW?s.push(l):a.push(l);s.length>0&&(this.seq=s.concat(a))}setValue(e,t,i,s){const a=this.map[t];a!==void 0&&a.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let a=0,l=t.length;a!==l;++a){const u=t[a],d=i[u.id];d.needsUpdate!==!1&&u.setValue(e,d.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,a=e.length;s!==a;++s){const l=e[s];l.id in t&&i.push(l)}return i}}function dR(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const iq=37297;let sq=0;function rq(n,e){const t=n.split(`
`),i=[],s=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let l=s;l<a;l++){const u=l+1;i.push(`${u===e?">":" "} ${u}: ${t[l]}`)}return i.join(`
`)}const pR=new en;function aq(n){Tn._getMatrix(pR,Tn.workingColorSpace,n);const e=`mat3( ${pR.elements.map(t=>t.toFixed(4))} )`;switch(Tn.getTransfer(n)){case a0:return[e,"LinearTransferOETF"];case Bn:return[e,"sRGBTransferOETF"];default:return ct("WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function mR(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),a=(n.getShaderInfoLog(e)||"").trim();if(i&&a==="")return"";const l=/ERROR: 0:(\d+)/.exec(a);if(l){const u=parseInt(l[1]);return t.toUpperCase()+`

`+a+`

`+rq(n.getShaderSource(e),u)}else return a}function oq(n,e){const t=aq(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const lq={[aT]:"Linear",[oT]:"Reinhard",[lT]:"Cineon",[pb]:"ACESFilmic",[uT]:"AgX",[fT]:"Neutral",[cT]:"Custom"};function cq(n,e){const t=lq[e];return t===void 0?(ct("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+n+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const bx=new Y;function uq(){Tn.getLuminanceCoefficients(bx);const n=bx.x.toFixed(4),e=bx.y.toFixed(4),t=bx.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function fq(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Cg).join(`
`)}function hq(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function dq(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const a=n.getActiveAttrib(e,s),l=a.name;let u=1;a.type===n.FLOAT_MAT2&&(u=2),a.type===n.FLOAT_MAT3&&(u=3),a.type===n.FLOAT_MAT4&&(u=4),t[l]={type:a.type,location:n.getAttribLocation(e,l),locationSize:u}}return t}function Cg(n){return n!==""}function gR(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function vR(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const pq=/^[ \t]*#include +<([\w\d./]+)>/gm;function nw(n){return n.replace(pq,gq)}const mq=new Map;function gq(n,e){let t=ln[e];if(t===void 0){const i=mq.get(e);if(i!==void 0)t=ln[i],ct('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return nw(t)}const vq=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function yR(n){return n.replace(vq,yq)}function yq(n,e,t,i){let s="";for(let a=parseInt(e);a<parseInt(t);a++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return s}function xR(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const xq={[np]:"SHADOWMAP_TYPE_PCF",[Xf]:"SHADOWMAP_TYPE_VSM"};function _q(n){return xq[n.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const bq={[xl]:"ENVMAP_TYPE_CUBE",[Cu]:"ENVMAP_TYPE_CUBE",[wp]:"ENVMAP_TYPE_CUBE_UV"};function Sq(n){return n.envMap===!1?"ENVMAP_TYPE_CUBE":bq[n.envMapMode]||"ENVMAP_TYPE_CUBE"}const Mq={[Cu]:"ENVMAP_MODE_REFRACTION"};function wq(n){return n.envMap===!1?"ENVMAP_MODE_REFLECTION":Mq[n.envMapMode]||"ENVMAP_MODE_REFLECTION"}const Tq={[C0]:"ENVMAP_BLENDING_MULTIPLY",[eL]:"ENVMAP_BLENDING_MIX",[tL]:"ENVMAP_BLENDING_ADD"};function Eq(n){return n.envMap===!1?"ENVMAP_BLENDING_NONE":Tq[n.combine]||"ENVMAP_BLENDING_NONE"}function Aq(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function Cq(n,e,t,i){const s=n.getContext(),a=t.defines;let l=t.vertexShader,u=t.fragmentShader;const d=_q(t),p=Sq(t),g=wq(t),y=Eq(t),x=Aq(t),_=fq(t),w=hq(a),A=s.createProgram();let E,M,D=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(E=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w].filter(Cg).join(`
`),E.length>0&&(E+=`
`),M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w].filter(Cg).join(`
`),M.length>0&&(M+=`
`)):(E=[xR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Cg).join(`
`),M=[xR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",t.envMap?"#define "+y:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Wa?"#define TONE_MAPPING":"",t.toneMapping!==Wa?ln.tonemapping_pars_fragment:"",t.toneMapping!==Wa?cq("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ln.colorspace_pars_fragment,oq("linearToOutputTexel",t.outputColorSpace),uq(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Cg).join(`
`)),l=nw(l),l=gR(l,t),l=vR(l,t),u=nw(u),u=gR(u,t),u=vR(u,t),l=yR(l),u=yR(u),t.isRawShaderMaterial!==!0&&(D=`#version 300 es
`,E=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+E,M=["#define varying in",t.glslVersion===XM?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===XM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const L=D+E+l,N=D+M+u,P=dR(s,s.VERTEX_SHADER,L),z=dR(s,s.FRAGMENT_SHADER,N);s.attachShader(A,P),s.attachShader(A,z),t.index0AttributeName!==void 0?s.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(A,0,"position"),s.linkProgram(A);function B(W){if(n.debug.checkShaderErrors){const ee=s.getProgramInfoLog(A)||"",J=s.getShaderInfoLog(P)||"",ae=s.getShaderInfoLog(z)||"",he=ee.trim(),Z=J.trim(),K=ae.trim();let le=!0,Ee=!0;if(s.getProgramParameter(A,s.LINK_STATUS)===!1)if(le=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(s,A,P,z);else{const Re=mR(s,P,"vertex"),q=mR(s,z,"fragment");Rt("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(A,s.VALIDATE_STATUS)+`

Material Name: `+W.name+`
Material Type: `+W.type+`

Program Info Log: `+he+`
`+Re+`
`+q)}else he!==""?ct("WebGLProgram: Program Info Log:",he):(Z===""||K==="")&&(Ee=!1);Ee&&(W.diagnostics={runnable:le,programLog:he,vertexShader:{log:Z,prefix:E},fragmentShader:{log:K,prefix:M}})}s.deleteShader(P),s.deleteShader(z),V=new Ux(s,A),O=dq(s,A)}let V;this.getUniforms=function(){return V===void 0&&B(this),V};let O;this.getAttributes=function(){return O===void 0&&B(this),O};let F=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return F===!1&&(F=s.getProgramParameter(A,iq)),F},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=sq++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=P,this.fragmentShader=z,this}let Rq=0;class Nq{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(t),a=this._getShaderStage(i),l=this._getShaderCacheForMaterial(e);return l.has(s)===!1&&(l.add(s),s.usedTimes++),l.has(a)===!1&&(l.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new Dq(e),t.set(e,i)),i}}class Dq{constructor(e){this.id=Rq++,this.code=e,this.usedTimes=0}}function Iq(n,e,t,i,s,a,l){const u=new hp,d=new Nq,p=new Set,g=[],y=new Map,x=s.logarithmicDepthBuffer;let _=s.precision;const w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(O){return p.add(O),O===0?"uv":`uv${O}`}function E(O,F,W,ee,J){const ae=ee.fog,he=J.geometry,Z=O.isMeshStandardMaterial?ee.environment:null,K=(O.isMeshStandardMaterial?t:e).get(O.envMap||Z),le=K&&K.mapping===wp?K.image.height:null,Ee=w[O.type];O.precision!==null&&(_=s.getMaxPrecision(O.precision),_!==O.precision&&ct("WebGLProgram.getParameters:",O.precision,"not supported, using",_,"instead."));const Re=he.morphAttributes.position||he.morphAttributes.normal||he.morphAttributes.color,q=Re!==void 0?Re.length:0;let oe=0;he.morphAttributes.position!==void 0&&(oe=1),he.morphAttributes.normal!==void 0&&(oe=2),he.morphAttributes.color!==void 0&&(oe=3);let Ae,ke,rt,de;if(Ee){const bn=wo[Ee];Ae=bn.vertexShader,ke=bn.fragmentShader}else Ae=O.vertexShader,ke=O.fragmentShader,d.update(O),rt=d.getVertexShaderID(O),de=d.getFragmentShaderID(O);const Ce=n.getRenderTarget(),et=n.state.buffers.depth.getReversed(),it=J.isInstancedMesh===!0,ht=J.isBatchedMesh===!0,tn=!!O.map,fn=!!O.matcap,Pt=!!K,De=!!O.aoMap,je=!!O.lightMap,Pe=!!O.bumpMap,tt=!!O.normalMap,$=!!O.displacementMap,Tt=!!O.emissiveMap,st=!!O.metalnessMap,At=!!O.roughnessMap,Ze=O.anisotropy>0,X=O.clearcoat>0,k=O.dispersion>0,se=O.iridescence>0,Me=O.sheen>0,Ue=O.transmission>0,we=Ze&&!!O.anisotropyMap,dt=X&&!!O.clearcoatMap,Ke=X&&!!O.clearcoatNormalMap,xt=X&&!!O.clearcoatRoughnessMap,Dt=se&&!!O.iridescenceMap,Ve=se&&!!O.iridescenceThicknessMap,qe=Me&&!!O.sheenColorMap,pt=Me&&!!O.sheenRoughnessMap,ft=!!O.specularMap,nt=!!O.specularColorMap,Jt=!!O.specularIntensityMap,ie=Ue&&!!O.transmissionMap,at=Ue&&!!O.thicknessMap,Xe=!!O.gradientMap,lt=!!O.alphaMap,He=O.alphaTest>0,Le=!!O.alphaHash,Je=!!O.extensions;let Ht=Wa;O.toneMapped&&(Ce===null||Ce.isXRRenderTarget===!0)&&(Ht=n.toneMapping);const vn={shaderID:Ee,shaderType:O.type,shaderName:O.name,vertexShader:Ae,fragmentShader:ke,defines:O.defines,customVertexShaderID:rt,customFragmentShaderID:de,isRawShaderMaterial:O.isRawShaderMaterial===!0,glslVersion:O.glslVersion,precision:_,batching:ht,batchingColor:ht&&J._colorsTexture!==null,instancing:it,instancingColor:it&&J.instanceColor!==null,instancingMorph:it&&J.morphTexture!==null,outputColorSpace:Ce===null?n.outputColorSpace:Ce.isXRRenderTarget===!0?Ce.texture.colorSpace:Ru,alphaToCoverage:!!O.alphaToCoverage,map:tn,matcap:fn,envMap:Pt,envMapMode:Pt&&K.mapping,envMapCubeUVHeight:le,aoMap:De,lightMap:je,bumpMap:Pe,normalMap:tt,displacementMap:$,emissiveMap:Tt,normalMapObjectSpace:tt&&O.normalMapType===oL,normalMapTangentSpace:tt&&O.normalMapType===Uu,metalnessMap:st,roughnessMap:At,anisotropy:Ze,anisotropyMap:we,clearcoat:X,clearcoatMap:dt,clearcoatNormalMap:Ke,clearcoatRoughnessMap:xt,dispersion:k,iridescence:se,iridescenceMap:Dt,iridescenceThicknessMap:Ve,sheen:Me,sheenColorMap:qe,sheenRoughnessMap:pt,specularMap:ft,specularColorMap:nt,specularIntensityMap:Jt,transmission:Ue,transmissionMap:ie,thicknessMap:at,gradientMap:Xe,opaque:O.transparent===!1&&O.blending===Jf&&O.alphaToCoverage===!1,alphaMap:lt,alphaTest:He,alphaHash:Le,combine:O.combine,mapUv:tn&&A(O.map.channel),aoMapUv:De&&A(O.aoMap.channel),lightMapUv:je&&A(O.lightMap.channel),bumpMapUv:Pe&&A(O.bumpMap.channel),normalMapUv:tt&&A(O.normalMap.channel),displacementMapUv:$&&A(O.displacementMap.channel),emissiveMapUv:Tt&&A(O.emissiveMap.channel),metalnessMapUv:st&&A(O.metalnessMap.channel),roughnessMapUv:At&&A(O.roughnessMap.channel),anisotropyMapUv:we&&A(O.anisotropyMap.channel),clearcoatMapUv:dt&&A(O.clearcoatMap.channel),clearcoatNormalMapUv:Ke&&A(O.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:xt&&A(O.clearcoatRoughnessMap.channel),iridescenceMapUv:Dt&&A(O.iridescenceMap.channel),iridescenceThicknessMapUv:Ve&&A(O.iridescenceThicknessMap.channel),sheenColorMapUv:qe&&A(O.sheenColorMap.channel),sheenRoughnessMapUv:pt&&A(O.sheenRoughnessMap.channel),specularMapUv:ft&&A(O.specularMap.channel),specularColorMapUv:nt&&A(O.specularColorMap.channel),specularIntensityMapUv:Jt&&A(O.specularIntensityMap.channel),transmissionMapUv:ie&&A(O.transmissionMap.channel),thicknessMapUv:at&&A(O.thicknessMap.channel),alphaMapUv:lt&&A(O.alphaMap.channel),vertexTangents:!!he.attributes.tangent&&(tt||Ze),vertexColors:O.vertexColors,vertexAlphas:O.vertexColors===!0&&!!he.attributes.color&&he.attributes.color.itemSize===4,pointsUvs:J.isPoints===!0&&!!he.attributes.uv&&(tn||lt),fog:!!ae,useFog:O.fog===!0,fogExp2:!!ae&&ae.isFogExp2,flatShading:O.flatShading===!0&&O.wireframe===!1,sizeAttenuation:O.sizeAttenuation===!0,logarithmicDepthBuffer:x,reversedDepthBuffer:et,skinning:J.isSkinnedMesh===!0,morphTargets:he.morphAttributes.position!==void 0,morphNormals:he.morphAttributes.normal!==void 0,morphColors:he.morphAttributes.color!==void 0,morphTargetsCount:q,morphTextureStride:oe,numDirLights:F.directional.length,numPointLights:F.point.length,numSpotLights:F.spot.length,numSpotLightMaps:F.spotLightMap.length,numRectAreaLights:F.rectArea.length,numHemiLights:F.hemi.length,numDirLightShadows:F.directionalShadowMap.length,numPointLightShadows:F.pointShadowMap.length,numSpotLightShadows:F.spotShadowMap.length,numSpotLightShadowsWithMaps:F.numSpotLightShadowsWithMaps,numLightProbes:F.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:O.dithering,shadowMapEnabled:n.shadowMap.enabled&&W.length>0,shadowMapType:n.shadowMap.type,toneMapping:Ht,decodeVideoTexture:tn&&O.map.isVideoTexture===!0&&Tn.getTransfer(O.map.colorSpace)===Bn,decodeVideoTextureEmissive:Tt&&O.emissiveMap.isVideoTexture===!0&&Tn.getTransfer(O.emissiveMap.colorSpace)===Bn,premultipliedAlpha:O.premultipliedAlpha,doubleSided:O.side===hl,flipSided:O.side===Tr,useDepthPacking:O.depthPacking>=0,depthPacking:O.depthPacking||0,index0AttributeName:O.index0AttributeName,extensionClipCullDistance:Je&&O.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Je&&O.extensions.multiDraw===!0||ht)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:O.customProgramCacheKey()};return vn.vertexUv1s=p.has(1),vn.vertexUv2s=p.has(2),vn.vertexUv3s=p.has(3),p.clear(),vn}function M(O){const F=[];if(O.shaderID?F.push(O.shaderID):(F.push(O.customVertexShaderID),F.push(O.customFragmentShaderID)),O.defines!==void 0)for(const W in O.defines)F.push(W),F.push(O.defines[W]);return O.isRawShaderMaterial===!1&&(D(F,O),L(F,O),F.push(n.outputColorSpace)),F.push(O.customProgramCacheKey),F.join()}function D(O,F){O.push(F.precision),O.push(F.outputColorSpace),O.push(F.envMapMode),O.push(F.envMapCubeUVHeight),O.push(F.mapUv),O.push(F.alphaMapUv),O.push(F.lightMapUv),O.push(F.aoMapUv),O.push(F.bumpMapUv),O.push(F.normalMapUv),O.push(F.displacementMapUv),O.push(F.emissiveMapUv),O.push(F.metalnessMapUv),O.push(F.roughnessMapUv),O.push(F.anisotropyMapUv),O.push(F.clearcoatMapUv),O.push(F.clearcoatNormalMapUv),O.push(F.clearcoatRoughnessMapUv),O.push(F.iridescenceMapUv),O.push(F.iridescenceThicknessMapUv),O.push(F.sheenColorMapUv),O.push(F.sheenRoughnessMapUv),O.push(F.specularMapUv),O.push(F.specularColorMapUv),O.push(F.specularIntensityMapUv),O.push(F.transmissionMapUv),O.push(F.thicknessMapUv),O.push(F.combine),O.push(F.fogExp2),O.push(F.sizeAttenuation),O.push(F.morphTargetsCount),O.push(F.morphAttributeCount),O.push(F.numDirLights),O.push(F.numPointLights),O.push(F.numSpotLights),O.push(F.numSpotLightMaps),O.push(F.numHemiLights),O.push(F.numRectAreaLights),O.push(F.numDirLightShadows),O.push(F.numPointLightShadows),O.push(F.numSpotLightShadows),O.push(F.numSpotLightShadowsWithMaps),O.push(F.numLightProbes),O.push(F.shadowMapType),O.push(F.toneMapping),O.push(F.numClippingPlanes),O.push(F.numClipIntersection),O.push(F.depthPacking)}function L(O,F){u.disableAll(),F.instancing&&u.enable(0),F.instancingColor&&u.enable(1),F.instancingMorph&&u.enable(2),F.matcap&&u.enable(3),F.envMap&&u.enable(4),F.normalMapObjectSpace&&u.enable(5),F.normalMapTangentSpace&&u.enable(6),F.clearcoat&&u.enable(7),F.iridescence&&u.enable(8),F.alphaTest&&u.enable(9),F.vertexColors&&u.enable(10),F.vertexAlphas&&u.enable(11),F.vertexUv1s&&u.enable(12),F.vertexUv2s&&u.enable(13),F.vertexUv3s&&u.enable(14),F.vertexTangents&&u.enable(15),F.anisotropy&&u.enable(16),F.alphaHash&&u.enable(17),F.batching&&u.enable(18),F.dispersion&&u.enable(19),F.batchingColor&&u.enable(20),F.gradientMap&&u.enable(21),O.push(u.mask),u.disableAll(),F.fog&&u.enable(0),F.useFog&&u.enable(1),F.flatShading&&u.enable(2),F.logarithmicDepthBuffer&&u.enable(3),F.reversedDepthBuffer&&u.enable(4),F.skinning&&u.enable(5),F.morphTargets&&u.enable(6),F.morphNormals&&u.enable(7),F.morphColors&&u.enable(8),F.premultipliedAlpha&&u.enable(9),F.shadowMapEnabled&&u.enable(10),F.doubleSided&&u.enable(11),F.flipSided&&u.enable(12),F.useDepthPacking&&u.enable(13),F.dithering&&u.enable(14),F.transmission&&u.enable(15),F.sheen&&u.enable(16),F.opaque&&u.enable(17),F.pointsUvs&&u.enable(18),F.decodeVideoTexture&&u.enable(19),F.decodeVideoTextureEmissive&&u.enable(20),F.alphaToCoverage&&u.enable(21),O.push(u.mask)}function N(O){const F=w[O.type];let W;if(F){const ee=wo[F];W=bL.clone(ee.uniforms)}else W=O.uniforms;return W}function P(O,F){let W=y.get(F);return W!==void 0?++W.usedTimes:(W=new Cq(n,F,O,a),g.push(W),y.set(F,W)),W}function z(O){if(--O.usedTimes===0){const F=g.indexOf(O);g[F]=g[g.length-1],g.pop(),y.delete(O.cacheKey),O.destroy()}}function B(O){d.remove(O)}function V(){d.dispose()}return{getParameters:E,getProgramCacheKey:M,getUniforms:N,acquireProgram:P,releaseProgram:z,releaseShaderCache:B,programs:g,dispose:V}}function Lq(){let n=new WeakMap;function e(l){return n.has(l)}function t(l){let u=n.get(l);return u===void 0&&(u={},n.set(l,u)),u}function i(l){n.delete(l)}function s(l,u,d){n.get(l)[u]=d}function a(){n=new WeakMap}return{has:e,get:t,remove:i,update:s,dispose:a}}function Pq(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function _R(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function bR(){const n=[];let e=0;const t=[],i=[],s=[];function a(){e=0,t.length=0,i.length=0,s.length=0}function l(y,x,_,w,A,E){let M=n[e];return M===void 0?(M={id:y.id,object:y,geometry:x,material:_,groupOrder:w,renderOrder:y.renderOrder,z:A,group:E},n[e]=M):(M.id=y.id,M.object=y,M.geometry=x,M.material=_,M.groupOrder=w,M.renderOrder=y.renderOrder,M.z=A,M.group=E),e++,M}function u(y,x,_,w,A,E){const M=l(y,x,_,w,A,E);_.transmission>0?i.push(M):_.transparent===!0?s.push(M):t.push(M)}function d(y,x,_,w,A,E){const M=l(y,x,_,w,A,E);_.transmission>0?i.unshift(M):_.transparent===!0?s.unshift(M):t.unshift(M)}function p(y,x){t.length>1&&t.sort(y||Pq),i.length>1&&i.sort(x||_R),s.length>1&&s.sort(x||_R)}function g(){for(let y=e,x=n.length;y<x;y++){const _=n[y];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:t,transmissive:i,transparent:s,init:a,push:u,unshift:d,finish:g,sort:p}}function Uq(){let n=new WeakMap;function e(i,s){const a=n.get(i);let l;return a===void 0?(l=new bR,n.set(i,[l])):s>=a.length?(l=new bR,a.push(l)):l=a[s],l}function t(){n=new WeakMap}return{get:e,dispose:t}}function Oq(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Y,color:new vt};break;case"SpotLight":t={position:new Y,direction:new Y,color:new vt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Y,color:new vt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Y,skyColor:new vt,groundColor:new vt};break;case"RectAreaLight":t={color:new vt,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return n[e.id]=t,t}}}function zq(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Be};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Be};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Be,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let kq=0;function Fq(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Bq(n){const e=new Oq,t=zq(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)i.probe.push(new Y);const s=new Y,a=new Wt,l=new Wt;function u(p){let g=0,y=0,x=0;for(let O=0;O<9;O++)i.probe[O].set(0,0,0);let _=0,w=0,A=0,E=0,M=0,D=0,L=0,N=0,P=0,z=0,B=0;p.sort(Fq);for(let O=0,F=p.length;O<F;O++){const W=p[O],ee=W.color,J=W.intensity,ae=W.distance;let he=null;if(W.shadow&&W.shadow.map&&(W.shadow.map.texture.format===ah?he=W.shadow.map.texture:he=W.shadow.map.depthTexture||W.shadow.map.texture),W.isAmbientLight)g+=ee.r*J,y+=ee.g*J,x+=ee.b*J;else if(W.isLightProbe){for(let Z=0;Z<9;Z++)i.probe[Z].addScaledVector(W.sh.coefficients[Z],J);B++}else if(W.isDirectionalLight){const Z=e.get(W);if(Z.color.copy(W.color).multiplyScalar(W.intensity),W.castShadow){const K=W.shadow,le=t.get(W);le.shadowIntensity=K.intensity,le.shadowBias=K.bias,le.shadowNormalBias=K.normalBias,le.shadowRadius=K.radius,le.shadowMapSize=K.mapSize,i.directionalShadow[_]=le,i.directionalShadowMap[_]=he,i.directionalShadowMatrix[_]=W.shadow.matrix,D++}i.directional[_]=Z,_++}else if(W.isSpotLight){const Z=e.get(W);Z.position.setFromMatrixPosition(W.matrixWorld),Z.color.copy(ee).multiplyScalar(J),Z.distance=ae,Z.coneCos=Math.cos(W.angle),Z.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),Z.decay=W.decay,i.spot[A]=Z;const K=W.shadow;if(W.map&&(i.spotLightMap[P]=W.map,P++,K.updateMatrices(W),W.castShadow&&z++),i.spotLightMatrix[A]=K.matrix,W.castShadow){const le=t.get(W);le.shadowIntensity=K.intensity,le.shadowBias=K.bias,le.shadowNormalBias=K.normalBias,le.shadowRadius=K.radius,le.shadowMapSize=K.mapSize,i.spotShadow[A]=le,i.spotShadowMap[A]=he,N++}A++}else if(W.isRectAreaLight){const Z=e.get(W);Z.color.copy(ee).multiplyScalar(J),Z.halfWidth.set(W.width*.5,0,0),Z.halfHeight.set(0,W.height*.5,0),i.rectArea[E]=Z,E++}else if(W.isPointLight){const Z=e.get(W);if(Z.color.copy(W.color).multiplyScalar(W.intensity),Z.distance=W.distance,Z.decay=W.decay,W.castShadow){const K=W.shadow,le=t.get(W);le.shadowIntensity=K.intensity,le.shadowBias=K.bias,le.shadowNormalBias=K.normalBias,le.shadowRadius=K.radius,le.shadowMapSize=K.mapSize,le.shadowCameraNear=K.camera.near,le.shadowCameraFar=K.camera.far,i.pointShadow[w]=le,i.pointShadowMap[w]=he,i.pointShadowMatrix[w]=W.shadow.matrix,L++}i.point[w]=Z,w++}else if(W.isHemisphereLight){const Z=e.get(W);Z.skyColor.copy(W.color).multiplyScalar(J),Z.groundColor.copy(W.groundColor).multiplyScalar(J),i.hemi[M]=Z,M++}}E>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ut.LTC_FLOAT_1,i.rectAreaLTC2=ut.LTC_FLOAT_2):(i.rectAreaLTC1=ut.LTC_HALF_1,i.rectAreaLTC2=ut.LTC_HALF_2)),i.ambient[0]=g,i.ambient[1]=y,i.ambient[2]=x;const V=i.hash;(V.directionalLength!==_||V.pointLength!==w||V.spotLength!==A||V.rectAreaLength!==E||V.hemiLength!==M||V.numDirectionalShadows!==D||V.numPointShadows!==L||V.numSpotShadows!==N||V.numSpotMaps!==P||V.numLightProbes!==B)&&(i.directional.length=_,i.spot.length=A,i.rectArea.length=E,i.point.length=w,i.hemi.length=M,i.directionalShadow.length=D,i.directionalShadowMap.length=D,i.pointShadow.length=L,i.pointShadowMap.length=L,i.spotShadow.length=N,i.spotShadowMap.length=N,i.directionalShadowMatrix.length=D,i.pointShadowMatrix.length=L,i.spotLightMatrix.length=N+P-z,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=z,i.numLightProbes=B,V.directionalLength=_,V.pointLength=w,V.spotLength=A,V.rectAreaLength=E,V.hemiLength=M,V.numDirectionalShadows=D,V.numPointShadows=L,V.numSpotShadows=N,V.numSpotMaps=P,V.numLightProbes=B,i.version=kq++)}function d(p,g){let y=0,x=0,_=0,w=0,A=0;const E=g.matrixWorldInverse;for(let M=0,D=p.length;M<D;M++){const L=p[M];if(L.isDirectionalLight){const N=i.directional[y];N.direction.setFromMatrixPosition(L.matrixWorld),s.setFromMatrixPosition(L.target.matrixWorld),N.direction.sub(s),N.direction.transformDirection(E),y++}else if(L.isSpotLight){const N=i.spot[_];N.position.setFromMatrixPosition(L.matrixWorld),N.position.applyMatrix4(E),N.direction.setFromMatrixPosition(L.matrixWorld),s.setFromMatrixPosition(L.target.matrixWorld),N.direction.sub(s),N.direction.transformDirection(E),_++}else if(L.isRectAreaLight){const N=i.rectArea[w];N.position.setFromMatrixPosition(L.matrixWorld),N.position.applyMatrix4(E),l.identity(),a.copy(L.matrixWorld),a.premultiply(E),l.extractRotation(a),N.halfWidth.set(L.width*.5,0,0),N.halfHeight.set(0,L.height*.5,0),N.halfWidth.applyMatrix4(l),N.halfHeight.applyMatrix4(l),w++}else if(L.isPointLight){const N=i.point[x];N.position.setFromMatrixPosition(L.matrixWorld),N.position.applyMatrix4(E),x++}else if(L.isHemisphereLight){const N=i.hemi[A];N.direction.setFromMatrixPosition(L.matrixWorld),N.direction.transformDirection(E),A++}}}return{setup:u,setupView:d,state:i}}function SR(n){const e=new Bq(n),t=[],i=[];function s(g){p.camera=g,t.length=0,i.length=0}function a(g){t.push(g)}function l(g){i.push(g)}function u(){e.setup(t)}function d(g){e.setupView(t,g)}const p={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:p,setupLights:u,setupLightsView:d,pushLight:a,pushShadow:l}}function Vq(n){let e=new WeakMap;function t(s,a=0){const l=e.get(s);let u;return l===void 0?(u=new SR(n),e.set(s,[u])):a>=l.length?(u=new SR(n),l.push(u)):u=l[a],u}function i(){e=new WeakMap}return{get:t,dispose:i}}const Hq=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,jq=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,Gq=[new Y(1,0,0),new Y(-1,0,0),new Y(0,1,0),new Y(0,-1,0),new Y(0,0,1),new Y(0,0,-1)],Wq=[new Y(0,-1,0),new Y(0,-1,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,-1,0),new Y(0,-1,0)],MR=new Wt,yg=new Y,q1=new Y;function Xq(n,e,t){let i=new Ep;const s=new Be,a=new Be,l=new Jn,u=new kT,d=new FT,p={},g=t.maxTextureSize,y={[vc]:Tr,[Tr]:vc,[hl]:hl},x=new qa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Be},radius:{value:4}},vertexShader:Hq,fragmentShader:jq}),_=x.clone();_.defines.HORIZONTAL_PASS=1;const w=new Kt;w.setAttribute("position",new Yn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new ns(w,x),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=np;let M=this.type;this.render=function(z,B,V){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||z.length===0)return;z.type===Og&&(ct("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),z.type=np);const O=n.getRenderTarget(),F=n.getActiveCubeFace(),W=n.getActiveMipmapLevel(),ee=n.state;ee.setBlending(gl),ee.buffers.depth.getReversed()===!0?ee.buffers.color.setClear(0,0,0,0):ee.buffers.color.setClear(1,1,1,1),ee.buffers.depth.setTest(!0),ee.setScissorTest(!1);const J=M!==this.type;J&&B.traverse(function(ae){ae.material&&(Array.isArray(ae.material)?ae.material.forEach(he=>he.needsUpdate=!0):ae.material.needsUpdate=!0)});for(let ae=0,he=z.length;ae<he;ae++){const Z=z[ae],K=Z.shadow;if(K===void 0){ct("WebGLShadowMap:",Z,"has no shadow.");continue}if(K.autoUpdate===!1&&K.needsUpdate===!1)continue;s.copy(K.mapSize);const le=K.getFrameExtents();if(s.multiply(le),a.copy(K.mapSize),(s.x>g||s.y>g)&&(s.x>g&&(a.x=Math.floor(g/le.x),s.x=a.x*le.x,K.mapSize.x=a.x),s.y>g&&(a.y=Math.floor(g/le.y),s.y=a.y*le.y,K.mapSize.y=a.y)),K.map===null||J===!0){if(K.map!==null&&(K.map.depthTexture!==null&&(K.map.depthTexture.dispose(),K.map.depthTexture=null),K.map.dispose()),this.type===Xf){if(Z.isPointLight){ct("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}K.map=new da(s.x,s.y,{format:ah,type:_l,minFilter:hi,magFilter:hi,generateMipmaps:!1}),K.map.texture.name=Z.name+".shadowMap",K.map.depthTexture=new mp(s.x,s.y,wr),K.map.depthTexture.name=Z.name+".shadowMapDepth",K.map.depthTexture.format=bl,K.map.depthTexture.compareFunction=null,K.map.depthTexture.minFilter=Wi,K.map.depthTexture.magFilter=Wi}else{Z.isPointLight?(K.map=new wT(s.x),K.map.depthTexture=new IL(s.x,Xa)):(K.map=new da(s.x,s.y),K.map.depthTexture=new mp(s.x,s.y,Xa)),K.map.depthTexture.name=Z.name+".shadowMap",K.map.depthTexture.format=bl;const Re=n.state.buffers.depth.getReversed();this.type===np?(K.map.depthTexture.compareFunction=Re?wb:Mb,K.map.depthTexture.minFilter=hi,K.map.depthTexture.magFilter=hi):(K.map.depthTexture.compareFunction=null,K.map.depthTexture.minFilter=Wi,K.map.depthTexture.magFilter=Wi)}K.camera.updateProjectionMatrix()}const Ee=K.map.isWebGLCubeRenderTarget?6:1;for(let Re=0;Re<Ee;Re++){if(K.map.isWebGLCubeRenderTarget)n.setRenderTarget(K.map,Re),n.clear();else{Re===0&&(n.setRenderTarget(K.map),n.clear());const q=K.getViewport(Re);l.set(a.x*q.x,a.y*q.y,a.x*q.z,a.y*q.w),ee.viewport(l)}if(Z.isPointLight){const q=K.camera,oe=K.matrix,Ae=Z.distance||q.far;Ae!==q.far&&(q.far=Ae,q.updateProjectionMatrix()),yg.setFromMatrixPosition(Z.matrixWorld),q.position.copy(yg),q1.copy(q.position),q1.add(Gq[Re]),q.up.copy(Wq[Re]),q.lookAt(q1),q.updateMatrixWorld(),oe.makeTranslation(-yg.x,-yg.y,-yg.z),MR.multiplyMatrices(q.projectionMatrix,q.matrixWorldInverse),K._frustum.setFromProjectionMatrix(MR,q.coordinateSystem,q.reversedDepth)}else K.updateMatrices(Z);i=K.getFrustum(),N(B,V,K.camera,Z,this.type)}K.isPointLightShadow!==!0&&this.type===Xf&&D(K,V),K.needsUpdate=!1}M=this.type,E.needsUpdate=!1,n.setRenderTarget(O,F,W)};function D(z,B){const V=e.update(A);x.defines.VSM_SAMPLES!==z.blurSamples&&(x.defines.VSM_SAMPLES=z.blurSamples,_.defines.VSM_SAMPLES=z.blurSamples,x.needsUpdate=!0,_.needsUpdate=!0),z.mapPass===null&&(z.mapPass=new da(s.x,s.y,{format:ah,type:_l})),x.uniforms.shadow_pass.value=z.map.depthTexture,x.uniforms.resolution.value=z.mapSize,x.uniforms.radius.value=z.radius,n.setRenderTarget(z.mapPass),n.clear(),n.renderBufferDirect(B,null,V,x,A,null),_.uniforms.shadow_pass.value=z.mapPass.texture,_.uniforms.resolution.value=z.mapSize,_.uniforms.radius.value=z.radius,n.setRenderTarget(z.map),n.clear(),n.renderBufferDirect(B,null,V,_,A,null)}function L(z,B,V,O){let F=null;const W=V.isPointLight===!0?z.customDistanceMaterial:z.customDepthMaterial;if(W!==void 0)F=W;else if(F=V.isPointLight===!0?d:u,n.localClippingEnabled&&B.clipShadows===!0&&Array.isArray(B.clippingPlanes)&&B.clippingPlanes.length!==0||B.displacementMap&&B.displacementScale!==0||B.alphaMap&&B.alphaTest>0||B.map&&B.alphaTest>0||B.alphaToCoverage===!0){const ee=F.uuid,J=B.uuid;let ae=p[ee];ae===void 0&&(ae={},p[ee]=ae);let he=ae[J];he===void 0&&(he=F.clone(),ae[J]=he,B.addEventListener("dispose",P)),F=he}if(F.visible=B.visible,F.wireframe=B.wireframe,O===Xf?F.side=B.shadowSide!==null?B.shadowSide:B.side:F.side=B.shadowSide!==null?B.shadowSide:y[B.side],F.alphaMap=B.alphaMap,F.alphaTest=B.alphaToCoverage===!0?.5:B.alphaTest,F.map=B.map,F.clipShadows=B.clipShadows,F.clippingPlanes=B.clippingPlanes,F.clipIntersection=B.clipIntersection,F.displacementMap=B.displacementMap,F.displacementScale=B.displacementScale,F.displacementBias=B.displacementBias,F.wireframeLinewidth=B.wireframeLinewidth,F.linewidth=B.linewidth,V.isPointLight===!0&&F.isMeshDistanceMaterial===!0){const ee=n.properties.get(F);ee.light=V}return F}function N(z,B,V,O,F){if(z.visible===!1)return;if(z.layers.test(B.layers)&&(z.isMesh||z.isLine||z.isPoints)&&(z.castShadow||z.receiveShadow&&F===Xf)&&(!z.frustumCulled||i.intersectsObject(z))){z.modelViewMatrix.multiplyMatrices(V.matrixWorldInverse,z.matrixWorld);const J=e.update(z),ae=z.material;if(Array.isArray(ae)){const he=J.groups;for(let Z=0,K=he.length;Z<K;Z++){const le=he[Z],Ee=ae[le.materialIndex];if(Ee&&Ee.visible){const Re=L(z,Ee,O,F);z.onBeforeShadow(n,z,B,V,J,Re,le),n.renderBufferDirect(V,null,J,Re,z,le),z.onAfterShadow(n,z,B,V,J,Re,le)}}}else if(ae.visible){const he=L(z,ae,O,F);z.onBeforeShadow(n,z,B,V,J,he,null),n.renderBufferDirect(V,null,J,he,z,null),z.onAfterShadow(n,z,B,V,J,he,null)}}const ee=z.children;for(let J=0,ae=ee.length;J<ae;J++)N(ee[J],B,V,O,F)}function P(z){z.target.removeEventListener("dispose",P);for(const V in p){const O=p[V],F=z.target.uuid;F in O&&(O[F].dispose(),delete O[F])}}}const qq={[s_]:r_,[a_]:c_,[o_]:u_,[rh]:l_,[r_]:s_,[c_]:a_,[u_]:o_,[l_]:rh};function Zq(n,e){function t(){let ie=!1;const at=new Jn;let Xe=null;const lt=new Jn(0,0,0,0);return{setMask:function(He){Xe!==He&&!ie&&(n.colorMask(He,He,He,He),Xe=He)},setLocked:function(He){ie=He},setClear:function(He,Le,Je,Ht,vn){vn===!0&&(He*=Ht,Le*=Ht,Je*=Ht),at.set(He,Le,Je,Ht),lt.equals(at)===!1&&(n.clearColor(He,Le,Je,Ht),lt.copy(at))},reset:function(){ie=!1,Xe=null,lt.set(-1,0,0,0)}}}function i(){let ie=!1,at=!1,Xe=null,lt=null,He=null;return{setReversed:function(Le){if(at!==Le){const Je=e.get("EXT_clip_control");Le?Je.clipControlEXT(Je.LOWER_LEFT_EXT,Je.ZERO_TO_ONE_EXT):Je.clipControlEXT(Je.LOWER_LEFT_EXT,Je.NEGATIVE_ONE_TO_ONE_EXT),at=Le;const Ht=He;He=null,this.setClear(Ht)}},getReversed:function(){return at},setTest:function(Le){Le?Ce(n.DEPTH_TEST):et(n.DEPTH_TEST)},setMask:function(Le){Xe!==Le&&!ie&&(n.depthMask(Le),Xe=Le)},setFunc:function(Le){if(at&&(Le=qq[Le]),lt!==Le){switch(Le){case s_:n.depthFunc(n.NEVER);break;case r_:n.depthFunc(n.ALWAYS);break;case a_:n.depthFunc(n.LESS);break;case rh:n.depthFunc(n.LEQUAL);break;case o_:n.depthFunc(n.EQUAL);break;case l_:n.depthFunc(n.GEQUAL);break;case c_:n.depthFunc(n.GREATER);break;case u_:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}lt=Le}},setLocked:function(Le){ie=Le},setClear:function(Le){He!==Le&&(at&&(Le=1-Le),n.clearDepth(Le),He=Le)},reset:function(){ie=!1,Xe=null,lt=null,He=null,at=!1}}}function s(){let ie=!1,at=null,Xe=null,lt=null,He=null,Le=null,Je=null,Ht=null,vn=null;return{setTest:function(bn){ie||(bn?Ce(n.STENCIL_TEST):et(n.STENCIL_TEST))},setMask:function(bn){at!==bn&&!ie&&(n.stencilMask(bn),at=bn)},setFunc:function(bn,rs,Us){(Xe!==bn||lt!==rs||He!==Us)&&(n.stencilFunc(bn,rs,Us),Xe=bn,lt=rs,He=Us)},setOp:function(bn,rs,Us){(Le!==bn||Je!==rs||Ht!==Us)&&(n.stencilOp(bn,rs,Us),Le=bn,Je=rs,Ht=Us)},setLocked:function(bn){ie=bn},setClear:function(bn){vn!==bn&&(n.clearStencil(bn),vn=bn)},reset:function(){ie=!1,at=null,Xe=null,lt=null,He=null,Le=null,Je=null,Ht=null,vn=null}}}const a=new t,l=new i,u=new s,d=new WeakMap,p=new WeakMap;let g={},y={},x=new WeakMap,_=[],w=null,A=!1,E=null,M=null,D=null,L=null,N=null,P=null,z=null,B=new vt(0,0,0),V=0,O=!1,F=null,W=null,ee=null,J=null,ae=null;const he=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Z=!1,K=0;const le=n.getParameter(n.VERSION);le.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(le)[1]),Z=K>=1):le.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(le)[1]),Z=K>=2);let Ee=null,Re={};const q=n.getParameter(n.SCISSOR_BOX),oe=n.getParameter(n.VIEWPORT),Ae=new Jn().fromArray(q),ke=new Jn().fromArray(oe);function rt(ie,at,Xe,lt){const He=new Uint8Array(4),Le=n.createTexture();n.bindTexture(ie,Le),n.texParameteri(ie,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ie,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Je=0;Je<Xe;Je++)ie===n.TEXTURE_3D||ie===n.TEXTURE_2D_ARRAY?n.texImage3D(at,0,n.RGBA,1,1,lt,0,n.RGBA,n.UNSIGNED_BYTE,He):n.texImage2D(at+Je,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,He);return Le}const de={};de[n.TEXTURE_2D]=rt(n.TEXTURE_2D,n.TEXTURE_2D,1),de[n.TEXTURE_CUBE_MAP]=rt(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),de[n.TEXTURE_2D_ARRAY]=rt(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),de[n.TEXTURE_3D]=rt(n.TEXTURE_3D,n.TEXTURE_3D,1,1),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),Ce(n.DEPTH_TEST),l.setFunc(rh),Pe(!1),tt(VM),Ce(n.CULL_FACE),De(gl);function Ce(ie){g[ie]!==!0&&(n.enable(ie),g[ie]=!0)}function et(ie){g[ie]!==!1&&(n.disable(ie),g[ie]=!1)}function it(ie,at){return y[ie]!==at?(n.bindFramebuffer(ie,at),y[ie]=at,ie===n.DRAW_FRAMEBUFFER&&(y[n.FRAMEBUFFER]=at),ie===n.FRAMEBUFFER&&(y[n.DRAW_FRAMEBUFFER]=at),!0):!1}function ht(ie,at){let Xe=_,lt=!1;if(ie){Xe=x.get(at),Xe===void 0&&(Xe=[],x.set(at,Xe));const He=ie.textures;if(Xe.length!==He.length||Xe[0]!==n.COLOR_ATTACHMENT0){for(let Le=0,Je=He.length;Le<Je;Le++)Xe[Le]=n.COLOR_ATTACHMENT0+Le;Xe.length=He.length,lt=!0}}else Xe[0]!==n.BACK&&(Xe[0]=n.BACK,lt=!0);lt&&n.drawBuffers(Xe)}function tn(ie){return w!==ie?(n.useProgram(ie),w=ie,!0):!1}const fn={[xu]:n.FUNC_ADD,[zI]:n.FUNC_SUBTRACT,[kI]:n.FUNC_REVERSE_SUBTRACT};fn[FI]=n.MIN,fn[BI]=n.MAX;const Pt={[VI]:n.ZERO,[HI]:n.ONE,[jI]:n.SRC_COLOR,[n_]:n.SRC_ALPHA,[YI]:n.SRC_ALPHA_SATURATE,[qI]:n.DST_COLOR,[WI]:n.DST_ALPHA,[GI]:n.ONE_MINUS_SRC_COLOR,[i_]:n.ONE_MINUS_SRC_ALPHA,[ZI]:n.ONE_MINUS_DST_COLOR,[XI]:n.ONE_MINUS_DST_ALPHA,[$I]:n.CONSTANT_COLOR,[KI]:n.ONE_MINUS_CONSTANT_COLOR,[JI]:n.CONSTANT_ALPHA,[QI]:n.ONE_MINUS_CONSTANT_ALPHA};function De(ie,at,Xe,lt,He,Le,Je,Ht,vn,bn){if(ie===gl){A===!0&&(et(n.BLEND),A=!1);return}if(A===!1&&(Ce(n.BLEND),A=!0),ie!==OI){if(ie!==E||bn!==O){if((M!==xu||N!==xu)&&(n.blendEquation(n.FUNC_ADD),M=xu,N=xu),bn)switch(ie){case Jf:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case t_:n.blendFunc(n.ONE,n.ONE);break;case HM:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case jM:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:Rt("WebGLState: Invalid blending: ",ie);break}else switch(ie){case Jf:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case t_:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case HM:Rt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case jM:Rt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Rt("WebGLState: Invalid blending: ",ie);break}D=null,L=null,P=null,z=null,B.set(0,0,0),V=0,E=ie,O=bn}return}He=He||at,Le=Le||Xe,Je=Je||lt,(at!==M||He!==N)&&(n.blendEquationSeparate(fn[at],fn[He]),M=at,N=He),(Xe!==D||lt!==L||Le!==P||Je!==z)&&(n.blendFuncSeparate(Pt[Xe],Pt[lt],Pt[Le],Pt[Je]),D=Xe,L=lt,P=Le,z=Je),(Ht.equals(B)===!1||vn!==V)&&(n.blendColor(Ht.r,Ht.g,Ht.b,vn),B.copy(Ht),V=vn),E=ie,O=!1}function je(ie,at){ie.side===hl?et(n.CULL_FACE):Ce(n.CULL_FACE);let Xe=ie.side===Tr;at&&(Xe=!Xe),Pe(Xe),ie.blending===Jf&&ie.transparent===!1?De(gl):De(ie.blending,ie.blendEquation,ie.blendSrc,ie.blendDst,ie.blendEquationAlpha,ie.blendSrcAlpha,ie.blendDstAlpha,ie.blendColor,ie.blendAlpha,ie.premultipliedAlpha),l.setFunc(ie.depthFunc),l.setTest(ie.depthTest),l.setMask(ie.depthWrite),a.setMask(ie.colorWrite);const lt=ie.stencilWrite;u.setTest(lt),lt&&(u.setMask(ie.stencilWriteMask),u.setFunc(ie.stencilFunc,ie.stencilRef,ie.stencilFuncMask),u.setOp(ie.stencilFail,ie.stencilZFail,ie.stencilZPass)),Tt(ie.polygonOffset,ie.polygonOffsetFactor,ie.polygonOffsetUnits),ie.alphaToCoverage===!0?Ce(n.SAMPLE_ALPHA_TO_COVERAGE):et(n.SAMPLE_ALPHA_TO_COVERAGE)}function Pe(ie){F!==ie&&(ie?n.frontFace(n.CW):n.frontFace(n.CCW),F=ie)}function tt(ie){ie!==LI?(Ce(n.CULL_FACE),ie!==W&&(ie===VM?n.cullFace(n.BACK):ie===PI?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):et(n.CULL_FACE),W=ie}function $(ie){ie!==ee&&(Z&&n.lineWidth(ie),ee=ie)}function Tt(ie,at,Xe){ie?(Ce(n.POLYGON_OFFSET_FILL),(J!==at||ae!==Xe)&&(n.polygonOffset(at,Xe),J=at,ae=Xe)):et(n.POLYGON_OFFSET_FILL)}function st(ie){ie?Ce(n.SCISSOR_TEST):et(n.SCISSOR_TEST)}function At(ie){ie===void 0&&(ie=n.TEXTURE0+he-1),Ee!==ie&&(n.activeTexture(ie),Ee=ie)}function Ze(ie,at,Xe){Xe===void 0&&(Ee===null?Xe=n.TEXTURE0+he-1:Xe=Ee);let lt=Re[Xe];lt===void 0&&(lt={type:void 0,texture:void 0},Re[Xe]=lt),(lt.type!==ie||lt.texture!==at)&&(Ee!==Xe&&(n.activeTexture(Xe),Ee=Xe),n.bindTexture(ie,at||de[ie]),lt.type=ie,lt.texture=at)}function X(){const ie=Re[Ee];ie!==void 0&&ie.type!==void 0&&(n.bindTexture(ie.type,null),ie.type=void 0,ie.texture=void 0)}function k(){try{n.compressedTexImage2D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function se(){try{n.compressedTexImage3D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function Me(){try{n.texSubImage2D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function Ue(){try{n.texSubImage3D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function we(){try{n.compressedTexSubImage2D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function dt(){try{n.compressedTexSubImage3D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function Ke(){try{n.texStorage2D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function xt(){try{n.texStorage3D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function Dt(){try{n.texImage2D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function Ve(){try{n.texImage3D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function qe(ie){Ae.equals(ie)===!1&&(n.scissor(ie.x,ie.y,ie.z,ie.w),Ae.copy(ie))}function pt(ie){ke.equals(ie)===!1&&(n.viewport(ie.x,ie.y,ie.z,ie.w),ke.copy(ie))}function ft(ie,at){let Xe=p.get(at);Xe===void 0&&(Xe=new WeakMap,p.set(at,Xe));let lt=Xe.get(ie);lt===void 0&&(lt=n.getUniformBlockIndex(at,ie.name),Xe.set(ie,lt))}function nt(ie,at){const lt=p.get(at).get(ie);d.get(at)!==lt&&(n.uniformBlockBinding(at,lt,ie.__bindingPointIndex),d.set(at,lt))}function Jt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),l.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),g={},Ee=null,Re={},y={},x=new WeakMap,_=[],w=null,A=!1,E=null,M=null,D=null,L=null,N=null,P=null,z=null,B=new vt(0,0,0),V=0,O=!1,F=null,W=null,ee=null,J=null,ae=null,Ae.set(0,0,n.canvas.width,n.canvas.height),ke.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:Ce,disable:et,bindFramebuffer:it,drawBuffers:ht,useProgram:tn,setBlending:De,setMaterial:je,setFlipSided:Pe,setCullFace:tt,setLineWidth:$,setPolygonOffset:Tt,setScissorTest:st,activeTexture:At,bindTexture:Ze,unbindTexture:X,compressedTexImage2D:k,compressedTexImage3D:se,texImage2D:Dt,texImage3D:Ve,updateUBOMapping:ft,uniformBlockBinding:nt,texStorage2D:Ke,texStorage3D:xt,texSubImage2D:Me,texSubImage3D:Ue,compressedTexSubImage2D:we,compressedTexSubImage3D:dt,scissor:qe,viewport:pt,reset:Jt}}function Yq(n,e,t,i,s,a,l){const u=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new Be,g=new WeakMap;let y;const x=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function w(X,k){return _?new OffscreenCanvas(X,k):l0("canvas")}function A(X,k,se){let Me=1;const Ue=Ze(X);if((Ue.width>se||Ue.height>se)&&(Me=se/Math.max(Ue.width,Ue.height)),Me<1)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap||typeof VideoFrame<"u"&&X instanceof VideoFrame){const we=Math.floor(Me*Ue.width),dt=Math.floor(Me*Ue.height);y===void 0&&(y=w(we,dt));const Ke=k?w(we,dt):y;return Ke.width=we,Ke.height=dt,Ke.getContext("2d").drawImage(X,0,0,we,dt),ct("WebGLRenderer: Texture has been resized from ("+Ue.width+"x"+Ue.height+") to ("+we+"x"+dt+")."),Ke}else return"data"in X&&ct("WebGLRenderer: Image in DataTexture is too big ("+Ue.width+"x"+Ue.height+")."),X;return X}function E(X){return X.generateMipmaps}function M(X){n.generateMipmap(X)}function D(X){return X.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:X.isWebGL3DRenderTarget?n.TEXTURE_3D:X.isWebGLArrayRenderTarget||X.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function L(X,k,se,Me,Ue=!1){if(X!==null){if(n[X]!==void 0)return n[X];ct("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let we=k;if(k===n.RED&&(se===n.FLOAT&&(we=n.R32F),se===n.HALF_FLOAT&&(we=n.R16F),se===n.UNSIGNED_BYTE&&(we=n.R8)),k===n.RED_INTEGER&&(se===n.UNSIGNED_BYTE&&(we=n.R8UI),se===n.UNSIGNED_SHORT&&(we=n.R16UI),se===n.UNSIGNED_INT&&(we=n.R32UI),se===n.BYTE&&(we=n.R8I),se===n.SHORT&&(we=n.R16I),se===n.INT&&(we=n.R32I)),k===n.RG&&(se===n.FLOAT&&(we=n.RG32F),se===n.HALF_FLOAT&&(we=n.RG16F),se===n.UNSIGNED_BYTE&&(we=n.RG8)),k===n.RG_INTEGER&&(se===n.UNSIGNED_BYTE&&(we=n.RG8UI),se===n.UNSIGNED_SHORT&&(we=n.RG16UI),se===n.UNSIGNED_INT&&(we=n.RG32UI),se===n.BYTE&&(we=n.RG8I),se===n.SHORT&&(we=n.RG16I),se===n.INT&&(we=n.RG32I)),k===n.RGB_INTEGER&&(se===n.UNSIGNED_BYTE&&(we=n.RGB8UI),se===n.UNSIGNED_SHORT&&(we=n.RGB16UI),se===n.UNSIGNED_INT&&(we=n.RGB32UI),se===n.BYTE&&(we=n.RGB8I),se===n.SHORT&&(we=n.RGB16I),se===n.INT&&(we=n.RGB32I)),k===n.RGBA_INTEGER&&(se===n.UNSIGNED_BYTE&&(we=n.RGBA8UI),se===n.UNSIGNED_SHORT&&(we=n.RGBA16UI),se===n.UNSIGNED_INT&&(we=n.RGBA32UI),se===n.BYTE&&(we=n.RGBA8I),se===n.SHORT&&(we=n.RGBA16I),se===n.INT&&(we=n.RGBA32I)),k===n.RGB&&(se===n.UNSIGNED_INT_5_9_9_9_REV&&(we=n.RGB9_E5),se===n.UNSIGNED_INT_10F_11F_11F_REV&&(we=n.R11F_G11F_B10F)),k===n.RGBA){const dt=Ue?a0:Tn.getTransfer(Me);se===n.FLOAT&&(we=n.RGBA32F),se===n.HALF_FLOAT&&(we=n.RGBA16F),se===n.UNSIGNED_BYTE&&(we=dt===Bn?n.SRGB8_ALPHA8:n.RGBA8),se===n.UNSIGNED_SHORT_4_4_4_4&&(we=n.RGBA4),se===n.UNSIGNED_SHORT_5_5_5_1&&(we=n.RGB5_A1)}return(we===n.R16F||we===n.R32F||we===n.RG16F||we===n.RG32F||we===n.RGBA16F||we===n.RGBA32F)&&e.get("EXT_color_buffer_float"),we}function N(X,k){let se;return X?k===null||k===Xa||k===lp?se=n.DEPTH24_STENCIL8:k===wr?se=n.DEPTH32F_STENCIL8:k===op&&(se=n.DEPTH24_STENCIL8,ct("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):k===null||k===Xa||k===lp?se=n.DEPTH_COMPONENT24:k===wr?se=n.DEPTH_COMPONENT32F:k===op&&(se=n.DEPTH_COMPONENT16),se}function P(X,k){return E(X)===!0||X.isFramebufferTexture&&X.minFilter!==Wi&&X.minFilter!==hi?Math.log2(Math.max(k.width,k.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?k.mipmaps.length:1}function z(X){const k=X.target;k.removeEventListener("dispose",z),V(k),k.isVideoTexture&&g.delete(k)}function B(X){const k=X.target;k.removeEventListener("dispose",B),F(k)}function V(X){const k=i.get(X);if(k.__webglInit===void 0)return;const se=X.source,Me=x.get(se);if(Me){const Ue=Me[k.__cacheKey];Ue.usedTimes--,Ue.usedTimes===0&&O(X),Object.keys(Me).length===0&&x.delete(se)}i.remove(X)}function O(X){const k=i.get(X);n.deleteTexture(k.__webglTexture);const se=X.source,Me=x.get(se);delete Me[k.__cacheKey],l.memory.textures--}function F(X){const k=i.get(X);if(X.depthTexture&&(X.depthTexture.dispose(),i.remove(X.depthTexture)),X.isWebGLCubeRenderTarget)for(let Me=0;Me<6;Me++){if(Array.isArray(k.__webglFramebuffer[Me]))for(let Ue=0;Ue<k.__webglFramebuffer[Me].length;Ue++)n.deleteFramebuffer(k.__webglFramebuffer[Me][Ue]);else n.deleteFramebuffer(k.__webglFramebuffer[Me]);k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer[Me])}else{if(Array.isArray(k.__webglFramebuffer))for(let Me=0;Me<k.__webglFramebuffer.length;Me++)n.deleteFramebuffer(k.__webglFramebuffer[Me]);else n.deleteFramebuffer(k.__webglFramebuffer);if(k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer),k.__webglMultisampledFramebuffer&&n.deleteFramebuffer(k.__webglMultisampledFramebuffer),k.__webglColorRenderbuffer)for(let Me=0;Me<k.__webglColorRenderbuffer.length;Me++)k.__webglColorRenderbuffer[Me]&&n.deleteRenderbuffer(k.__webglColorRenderbuffer[Me]);k.__webglDepthRenderbuffer&&n.deleteRenderbuffer(k.__webglDepthRenderbuffer)}const se=X.textures;for(let Me=0,Ue=se.length;Me<Ue;Me++){const we=i.get(se[Me]);we.__webglTexture&&(n.deleteTexture(we.__webglTexture),l.memory.textures--),i.remove(se[Me])}i.remove(X)}let W=0;function ee(){W=0}function J(){const X=W;return X>=s.maxTextures&&ct("WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+s.maxTextures),W+=1,X}function ae(X){const k=[];return k.push(X.wrapS),k.push(X.wrapT),k.push(X.wrapR||0),k.push(X.magFilter),k.push(X.minFilter),k.push(X.anisotropy),k.push(X.internalFormat),k.push(X.format),k.push(X.type),k.push(X.generateMipmaps),k.push(X.premultiplyAlpha),k.push(X.flipY),k.push(X.unpackAlignment),k.push(X.colorSpace),k.join()}function he(X,k){const se=i.get(X);if(X.isVideoTexture&&st(X),X.isRenderTargetTexture===!1&&X.isExternalTexture!==!0&&X.version>0&&se.__version!==X.version){const Me=X.image;if(Me===null)ct("WebGLRenderer: Texture marked for update but no image data found.");else if(Me.complete===!1)ct("WebGLRenderer: Texture marked for update but image is incomplete");else{de(se,X,k);return}}else X.isExternalTexture&&(se.__webglTexture=X.sourceTexture?X.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,se.__webglTexture,n.TEXTURE0+k)}function Z(X,k){const se=i.get(X);if(X.isRenderTargetTexture===!1&&X.version>0&&se.__version!==X.version){de(se,X,k);return}else X.isExternalTexture&&(se.__webglTexture=X.sourceTexture?X.sourceTexture:null);t.bindTexture(n.TEXTURE_2D_ARRAY,se.__webglTexture,n.TEXTURE0+k)}function K(X,k){const se=i.get(X);if(X.isRenderTargetTexture===!1&&X.version>0&&se.__version!==X.version){de(se,X,k);return}t.bindTexture(n.TEXTURE_3D,se.__webglTexture,n.TEXTURE0+k)}function le(X,k){const se=i.get(X);if(X.isCubeDepthTexture!==!0&&X.version>0&&se.__version!==X.version){Ce(se,X,k);return}t.bindTexture(n.TEXTURE_CUBE_MAP,se.__webglTexture,n.TEXTURE0+k)}const Ee={[n0]:n.REPEAT,[Kr]:n.CLAMP_TO_EDGE,[i0]:n.MIRRORED_REPEAT},Re={[Wi]:n.NEAREST,[hT]:n.NEAREST_MIPMAP_NEAREST,[Kd]:n.NEAREST_MIPMAP_LINEAR,[hi]:n.LINEAR,[zg]:n.LINEAR_MIPMAP_NEAREST,[dl]:n.LINEAR_MIPMAP_LINEAR},q={[lL]:n.NEVER,[dL]:n.ALWAYS,[cL]:n.LESS,[Mb]:n.LEQUAL,[uL]:n.EQUAL,[wb]:n.GEQUAL,[fL]:n.GREATER,[hL]:n.NOTEQUAL};function oe(X,k){if(k.type===wr&&e.has("OES_texture_float_linear")===!1&&(k.magFilter===hi||k.magFilter===zg||k.magFilter===Kd||k.magFilter===dl||k.minFilter===hi||k.minFilter===zg||k.minFilter===Kd||k.minFilter===dl)&&ct("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(X,n.TEXTURE_WRAP_S,Ee[k.wrapS]),n.texParameteri(X,n.TEXTURE_WRAP_T,Ee[k.wrapT]),(X===n.TEXTURE_3D||X===n.TEXTURE_2D_ARRAY)&&n.texParameteri(X,n.TEXTURE_WRAP_R,Ee[k.wrapR]),n.texParameteri(X,n.TEXTURE_MAG_FILTER,Re[k.magFilter]),n.texParameteri(X,n.TEXTURE_MIN_FILTER,Re[k.minFilter]),k.compareFunction&&(n.texParameteri(X,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(X,n.TEXTURE_COMPARE_FUNC,q[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(k.magFilter===Wi||k.minFilter!==Kd&&k.minFilter!==dl||k.type===wr&&e.has("OES_texture_float_linear")===!1)return;if(k.anisotropy>1||i.get(k).__currentAnisotropy){const se=e.get("EXT_texture_filter_anisotropic");n.texParameterf(X,se.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,s.getMaxAnisotropy())),i.get(k).__currentAnisotropy=k.anisotropy}}}function Ae(X,k){let se=!1;X.__webglInit===void 0&&(X.__webglInit=!0,k.addEventListener("dispose",z));const Me=k.source;let Ue=x.get(Me);Ue===void 0&&(Ue={},x.set(Me,Ue));const we=ae(k);if(we!==X.__cacheKey){Ue[we]===void 0&&(Ue[we]={texture:n.createTexture(),usedTimes:0},l.memory.textures++,se=!0),Ue[we].usedTimes++;const dt=Ue[X.__cacheKey];dt!==void 0&&(Ue[X.__cacheKey].usedTimes--,dt.usedTimes===0&&O(k)),X.__cacheKey=we,X.__webglTexture=Ue[we].texture}return se}function ke(X,k,se){return Math.floor(Math.floor(X/se)/k)}function rt(X,k,se,Me){const we=X.updateRanges;if(we.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,k.width,k.height,se,Me,k.data);else{we.sort((Ve,qe)=>Ve.start-qe.start);let dt=0;for(let Ve=1;Ve<we.length;Ve++){const qe=we[dt],pt=we[Ve],ft=qe.start+qe.count,nt=ke(pt.start,k.width,4),Jt=ke(qe.start,k.width,4);pt.start<=ft+1&&nt===Jt&&ke(pt.start+pt.count-1,k.width,4)===nt?qe.count=Math.max(qe.count,pt.start+pt.count-qe.start):(++dt,we[dt]=pt)}we.length=dt+1;const Ke=n.getParameter(n.UNPACK_ROW_LENGTH),xt=n.getParameter(n.UNPACK_SKIP_PIXELS),Dt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,k.width);for(let Ve=0,qe=we.length;Ve<qe;Ve++){const pt=we[Ve],ft=Math.floor(pt.start/4),nt=Math.ceil(pt.count/4),Jt=ft%k.width,ie=Math.floor(ft/k.width),at=nt,Xe=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,Jt),n.pixelStorei(n.UNPACK_SKIP_ROWS,ie),t.texSubImage2D(n.TEXTURE_2D,0,Jt,ie,at,Xe,se,Me,k.data)}X.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Ke),n.pixelStorei(n.UNPACK_SKIP_PIXELS,xt),n.pixelStorei(n.UNPACK_SKIP_ROWS,Dt)}}function de(X,k,se){let Me=n.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(Me=n.TEXTURE_2D_ARRAY),k.isData3DTexture&&(Me=n.TEXTURE_3D);const Ue=Ae(X,k),we=k.source;t.bindTexture(Me,X.__webglTexture,n.TEXTURE0+se);const dt=i.get(we);if(we.version!==dt.__version||Ue===!0){t.activeTexture(n.TEXTURE0+se);const Ke=Tn.getPrimaries(Tn.workingColorSpace),xt=k.colorSpace===fc?null:Tn.getPrimaries(k.colorSpace),Dt=k.colorSpace===fc||Ke===xt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Dt);let Ve=A(k.image,!1,s.maxTextureSize);Ve=At(k,Ve);const qe=a.convert(k.format,k.colorSpace),pt=a.convert(k.type);let ft=L(k.internalFormat,qe,pt,k.colorSpace,k.isVideoTexture);oe(Me,k);let nt;const Jt=k.mipmaps,ie=k.isVideoTexture!==!0,at=dt.__version===void 0||Ue===!0,Xe=we.dataReady,lt=P(k,Ve);if(k.isDepthTexture)ft=N(k.format===Su,k.type),at&&(ie?t.texStorage2D(n.TEXTURE_2D,1,ft,Ve.width,Ve.height):t.texImage2D(n.TEXTURE_2D,0,ft,Ve.width,Ve.height,0,qe,pt,null));else if(k.isDataTexture)if(Jt.length>0){ie&&at&&t.texStorage2D(n.TEXTURE_2D,lt,ft,Jt[0].width,Jt[0].height);for(let He=0,Le=Jt.length;He<Le;He++)nt=Jt[He],ie?Xe&&t.texSubImage2D(n.TEXTURE_2D,He,0,0,nt.width,nt.height,qe,pt,nt.data):t.texImage2D(n.TEXTURE_2D,He,ft,nt.width,nt.height,0,qe,pt,nt.data);k.generateMipmaps=!1}else ie?(at&&t.texStorage2D(n.TEXTURE_2D,lt,ft,Ve.width,Ve.height),Xe&&rt(k,Ve,qe,pt)):t.texImage2D(n.TEXTURE_2D,0,ft,Ve.width,Ve.height,0,qe,pt,Ve.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){ie&&at&&t.texStorage3D(n.TEXTURE_2D_ARRAY,lt,ft,Jt[0].width,Jt[0].height,Ve.depth);for(let He=0,Le=Jt.length;He<Le;He++)if(nt=Jt[He],k.format!==Js)if(qe!==null)if(ie){if(Xe)if(k.layerUpdates.size>0){const Je=QM(nt.width,nt.height,k.format,k.type);for(const Ht of k.layerUpdates){const vn=nt.data.subarray(Ht*Je/nt.data.BYTES_PER_ELEMENT,(Ht+1)*Je/nt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,He,0,0,Ht,nt.width,nt.height,1,qe,vn)}k.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,He,0,0,0,nt.width,nt.height,Ve.depth,qe,nt.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,He,ft,nt.width,nt.height,Ve.depth,0,nt.data,0,0);else ct("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ie?Xe&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,He,0,0,0,nt.width,nt.height,Ve.depth,qe,pt,nt.data):t.texImage3D(n.TEXTURE_2D_ARRAY,He,ft,nt.width,nt.height,Ve.depth,0,qe,pt,nt.data)}else{ie&&at&&t.texStorage2D(n.TEXTURE_2D,lt,ft,Jt[0].width,Jt[0].height);for(let He=0,Le=Jt.length;He<Le;He++)nt=Jt[He],k.format!==Js?qe!==null?ie?Xe&&t.compressedTexSubImage2D(n.TEXTURE_2D,He,0,0,nt.width,nt.height,qe,nt.data):t.compressedTexImage2D(n.TEXTURE_2D,He,ft,nt.width,nt.height,0,nt.data):ct("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ie?Xe&&t.texSubImage2D(n.TEXTURE_2D,He,0,0,nt.width,nt.height,qe,pt,nt.data):t.texImage2D(n.TEXTURE_2D,He,ft,nt.width,nt.height,0,qe,pt,nt.data)}else if(k.isDataArrayTexture)if(ie){if(at&&t.texStorage3D(n.TEXTURE_2D_ARRAY,lt,ft,Ve.width,Ve.height,Ve.depth),Xe)if(k.layerUpdates.size>0){const He=QM(Ve.width,Ve.height,k.format,k.type);for(const Le of k.layerUpdates){const Je=Ve.data.subarray(Le*He/Ve.data.BYTES_PER_ELEMENT,(Le+1)*He/Ve.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Le,Ve.width,Ve.height,1,qe,pt,Je)}k.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ve.width,Ve.height,Ve.depth,qe,pt,Ve.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ft,Ve.width,Ve.height,Ve.depth,0,qe,pt,Ve.data);else if(k.isData3DTexture)ie?(at&&t.texStorage3D(n.TEXTURE_3D,lt,ft,Ve.width,Ve.height,Ve.depth),Xe&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ve.width,Ve.height,Ve.depth,qe,pt,Ve.data)):t.texImage3D(n.TEXTURE_3D,0,ft,Ve.width,Ve.height,Ve.depth,0,qe,pt,Ve.data);else if(k.isFramebufferTexture){if(at)if(ie)t.texStorage2D(n.TEXTURE_2D,lt,ft,Ve.width,Ve.height);else{let He=Ve.width,Le=Ve.height;for(let Je=0;Je<lt;Je++)t.texImage2D(n.TEXTURE_2D,Je,ft,He,Le,0,qe,pt,null),He>>=1,Le>>=1}}else if(Jt.length>0){if(ie&&at){const He=Ze(Jt[0]);t.texStorage2D(n.TEXTURE_2D,lt,ft,He.width,He.height)}for(let He=0,Le=Jt.length;He<Le;He++)nt=Jt[He],ie?Xe&&t.texSubImage2D(n.TEXTURE_2D,He,0,0,qe,pt,nt):t.texImage2D(n.TEXTURE_2D,He,ft,qe,pt,nt);k.generateMipmaps=!1}else if(ie){if(at){const He=Ze(Ve);t.texStorage2D(n.TEXTURE_2D,lt,ft,He.width,He.height)}Xe&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,qe,pt,Ve)}else t.texImage2D(n.TEXTURE_2D,0,ft,qe,pt,Ve);E(k)&&M(Me),dt.__version=we.version,k.onUpdate&&k.onUpdate(k)}X.__version=k.version}function Ce(X,k,se){if(k.image.length!==6)return;const Me=Ae(X,k),Ue=k.source;t.bindTexture(n.TEXTURE_CUBE_MAP,X.__webglTexture,n.TEXTURE0+se);const we=i.get(Ue);if(Ue.version!==we.__version||Me===!0){t.activeTexture(n.TEXTURE0+se);const dt=Tn.getPrimaries(Tn.workingColorSpace),Ke=k.colorSpace===fc?null:Tn.getPrimaries(k.colorSpace),xt=k.colorSpace===fc||dt===Ke?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,xt);const Dt=k.isCompressedTexture||k.image[0].isCompressedTexture,Ve=k.image[0]&&k.image[0].isDataTexture,qe=[];for(let Le=0;Le<6;Le++)!Dt&&!Ve?qe[Le]=A(k.image[Le],!0,s.maxCubemapSize):qe[Le]=Ve?k.image[Le].image:k.image[Le],qe[Le]=At(k,qe[Le]);const pt=qe[0],ft=a.convert(k.format,k.colorSpace),nt=a.convert(k.type),Jt=L(k.internalFormat,ft,nt,k.colorSpace),ie=k.isVideoTexture!==!0,at=we.__version===void 0||Me===!0,Xe=Ue.dataReady;let lt=P(k,pt);oe(n.TEXTURE_CUBE_MAP,k);let He;if(Dt){ie&&at&&t.texStorage2D(n.TEXTURE_CUBE_MAP,lt,Jt,pt.width,pt.height);for(let Le=0;Le<6;Le++){He=qe[Le].mipmaps;for(let Je=0;Je<He.length;Je++){const Ht=He[Je];k.format!==Js?ft!==null?ie?Xe&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Je,0,0,Ht.width,Ht.height,ft,Ht.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Je,Jt,Ht.width,Ht.height,0,Ht.data):ct("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ie?Xe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Je,0,0,Ht.width,Ht.height,ft,nt,Ht.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Je,Jt,Ht.width,Ht.height,0,ft,nt,Ht.data)}}}else{if(He=k.mipmaps,ie&&at){He.length>0&&lt++;const Le=Ze(qe[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,lt,Jt,Le.width,Le.height)}for(let Le=0;Le<6;Le++)if(Ve){ie?Xe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,0,0,qe[Le].width,qe[Le].height,ft,nt,qe[Le].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,Jt,qe[Le].width,qe[Le].height,0,ft,nt,qe[Le].data);for(let Je=0;Je<He.length;Je++){const vn=He[Je].image[Le].image;ie?Xe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Je+1,0,0,vn.width,vn.height,ft,nt,vn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Je+1,Jt,vn.width,vn.height,0,ft,nt,vn.data)}}else{ie?Xe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,0,0,ft,nt,qe[Le]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,Jt,ft,nt,qe[Le]);for(let Je=0;Je<He.length;Je++){const Ht=He[Je];ie?Xe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Je+1,0,0,ft,nt,Ht.image[Le]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Je+1,Jt,ft,nt,Ht.image[Le])}}}E(k)&&M(n.TEXTURE_CUBE_MAP),we.__version=Ue.version,k.onUpdate&&k.onUpdate(k)}X.__version=k.version}function et(X,k,se,Me,Ue,we){const dt=a.convert(se.format,se.colorSpace),Ke=a.convert(se.type),xt=L(se.internalFormat,dt,Ke,se.colorSpace),Dt=i.get(k),Ve=i.get(se);if(Ve.__renderTarget=k,!Dt.__hasExternalTextures){const qe=Math.max(1,k.width>>we),pt=Math.max(1,k.height>>we);Ue===n.TEXTURE_3D||Ue===n.TEXTURE_2D_ARRAY?t.texImage3D(Ue,we,xt,qe,pt,k.depth,0,dt,Ke,null):t.texImage2D(Ue,we,xt,qe,pt,0,dt,Ke,null)}t.bindFramebuffer(n.FRAMEBUFFER,X),Tt(k)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Me,Ue,Ve.__webglTexture,0,$(k)):(Ue===n.TEXTURE_2D||Ue>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ue<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Me,Ue,Ve.__webglTexture,we),t.bindFramebuffer(n.FRAMEBUFFER,null)}function it(X,k,se){if(n.bindRenderbuffer(n.RENDERBUFFER,X),k.depthBuffer){const Me=k.depthTexture,Ue=Me&&Me.isDepthTexture?Me.type:null,we=N(k.stencilBuffer,Ue),dt=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;Tt(k)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,$(k),we,k.width,k.height):se?n.renderbufferStorageMultisample(n.RENDERBUFFER,$(k),we,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,we,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,dt,n.RENDERBUFFER,X)}else{const Me=k.textures;for(let Ue=0;Ue<Me.length;Ue++){const we=Me[Ue],dt=a.convert(we.format,we.colorSpace),Ke=a.convert(we.type),xt=L(we.internalFormat,dt,Ke,we.colorSpace);Tt(k)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,$(k),xt,k.width,k.height):se?n.renderbufferStorageMultisample(n.RENDERBUFFER,$(k),xt,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,xt,k.width,k.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ht(X,k,se){const Me=k.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(n.FRAMEBUFFER,X),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ue=i.get(k.depthTexture);if(Ue.__renderTarget=k,(!Ue.__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),Me){if(Ue.__webglInit===void 0&&(Ue.__webglInit=!0,k.depthTexture.addEventListener("dispose",z)),Ue.__webglTexture===void 0){Ue.__webglTexture=n.createTexture(),t.bindTexture(n.TEXTURE_CUBE_MAP,Ue.__webglTexture),oe(n.TEXTURE_CUBE_MAP,k.depthTexture);const Dt=a.convert(k.depthTexture.format),Ve=a.convert(k.depthTexture.type);let qe;k.depthTexture.format===bl?qe=n.DEPTH_COMPONENT24:k.depthTexture.format===Su&&(qe=n.DEPTH24_STENCIL8);for(let pt=0;pt<6;pt++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pt,0,qe,k.width,k.height,0,Dt,Ve,null)}}else he(k.depthTexture,0);const we=Ue.__webglTexture,dt=$(k),Ke=Me?n.TEXTURE_CUBE_MAP_POSITIVE_X+se:n.TEXTURE_2D,xt=k.depthTexture.format===Su?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(k.depthTexture.format===bl)Tt(k)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,xt,Ke,we,0,dt):n.framebufferTexture2D(n.FRAMEBUFFER,xt,Ke,we,0);else if(k.depthTexture.format===Su)Tt(k)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,xt,Ke,we,0,dt):n.framebufferTexture2D(n.FRAMEBUFFER,xt,Ke,we,0);else throw new Error("Unknown depthTexture format")}function tn(X){const k=i.get(X),se=X.isWebGLCubeRenderTarget===!0;if(k.__boundDepthTexture!==X.depthTexture){const Me=X.depthTexture;if(k.__depthDisposeCallback&&k.__depthDisposeCallback(),Me){const Ue=()=>{delete k.__boundDepthTexture,delete k.__depthDisposeCallback,Me.removeEventListener("dispose",Ue)};Me.addEventListener("dispose",Ue),k.__depthDisposeCallback=Ue}k.__boundDepthTexture=Me}if(X.depthTexture&&!k.__autoAllocateDepthBuffer)if(se)for(let Me=0;Me<6;Me++)ht(k.__webglFramebuffer[Me],X,Me);else{const Me=X.texture.mipmaps;Me&&Me.length>0?ht(k.__webglFramebuffer[0],X,0):ht(k.__webglFramebuffer,X,0)}else if(se){k.__webglDepthbuffer=[];for(let Me=0;Me<6;Me++)if(t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[Me]),k.__webglDepthbuffer[Me]===void 0)k.__webglDepthbuffer[Me]=n.createRenderbuffer(),it(k.__webglDepthbuffer[Me],X,!1);else{const Ue=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,we=k.__webglDepthbuffer[Me];n.bindRenderbuffer(n.RENDERBUFFER,we),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ue,n.RENDERBUFFER,we)}}else{const Me=X.texture.mipmaps;if(Me&&Me.length>0?t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer===void 0)k.__webglDepthbuffer=n.createRenderbuffer(),it(k.__webglDepthbuffer,X,!1);else{const Ue=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,we=k.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,we),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ue,n.RENDERBUFFER,we)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function fn(X,k,se){const Me=i.get(X);k!==void 0&&et(Me.__webglFramebuffer,X,X.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),se!==void 0&&tn(X)}function Pt(X){const k=X.texture,se=i.get(X),Me=i.get(k);X.addEventListener("dispose",B);const Ue=X.textures,we=X.isWebGLCubeRenderTarget===!0,dt=Ue.length>1;if(dt||(Me.__webglTexture===void 0&&(Me.__webglTexture=n.createTexture()),Me.__version=k.version,l.memory.textures++),we){se.__webglFramebuffer=[];for(let Ke=0;Ke<6;Ke++)if(k.mipmaps&&k.mipmaps.length>0){se.__webglFramebuffer[Ke]=[];for(let xt=0;xt<k.mipmaps.length;xt++)se.__webglFramebuffer[Ke][xt]=n.createFramebuffer()}else se.__webglFramebuffer[Ke]=n.createFramebuffer()}else{if(k.mipmaps&&k.mipmaps.length>0){se.__webglFramebuffer=[];for(let Ke=0;Ke<k.mipmaps.length;Ke++)se.__webglFramebuffer[Ke]=n.createFramebuffer()}else se.__webglFramebuffer=n.createFramebuffer();if(dt)for(let Ke=0,xt=Ue.length;Ke<xt;Ke++){const Dt=i.get(Ue[Ke]);Dt.__webglTexture===void 0&&(Dt.__webglTexture=n.createTexture(),l.memory.textures++)}if(X.samples>0&&Tt(X)===!1){se.__webglMultisampledFramebuffer=n.createFramebuffer(),se.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,se.__webglMultisampledFramebuffer);for(let Ke=0;Ke<Ue.length;Ke++){const xt=Ue[Ke];se.__webglColorRenderbuffer[Ke]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,se.__webglColorRenderbuffer[Ke]);const Dt=a.convert(xt.format,xt.colorSpace),Ve=a.convert(xt.type),qe=L(xt.internalFormat,Dt,Ve,xt.colorSpace,X.isXRRenderTarget===!0),pt=$(X);n.renderbufferStorageMultisample(n.RENDERBUFFER,pt,qe,X.width,X.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.RENDERBUFFER,se.__webglColorRenderbuffer[Ke])}n.bindRenderbuffer(n.RENDERBUFFER,null),X.depthBuffer&&(se.__webglDepthRenderbuffer=n.createRenderbuffer(),it(se.__webglDepthRenderbuffer,X,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(we){t.bindTexture(n.TEXTURE_CUBE_MAP,Me.__webglTexture),oe(n.TEXTURE_CUBE_MAP,k);for(let Ke=0;Ke<6;Ke++)if(k.mipmaps&&k.mipmaps.length>0)for(let xt=0;xt<k.mipmaps.length;xt++)et(se.__webglFramebuffer[Ke][xt],X,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,xt);else et(se.__webglFramebuffer[Ke],X,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0);E(k)&&M(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(dt){for(let Ke=0,xt=Ue.length;Ke<xt;Ke++){const Dt=Ue[Ke],Ve=i.get(Dt);let qe=n.TEXTURE_2D;(X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(qe=X.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(qe,Ve.__webglTexture),oe(qe,Dt),et(se.__webglFramebuffer,X,Dt,n.COLOR_ATTACHMENT0+Ke,qe,0),E(Dt)&&M(qe)}t.unbindTexture()}else{let Ke=n.TEXTURE_2D;if((X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(Ke=X.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ke,Me.__webglTexture),oe(Ke,k),k.mipmaps&&k.mipmaps.length>0)for(let xt=0;xt<k.mipmaps.length;xt++)et(se.__webglFramebuffer[xt],X,k,n.COLOR_ATTACHMENT0,Ke,xt);else et(se.__webglFramebuffer,X,k,n.COLOR_ATTACHMENT0,Ke,0);E(k)&&M(Ke),t.unbindTexture()}X.depthBuffer&&tn(X)}function De(X){const k=X.textures;for(let se=0,Me=k.length;se<Me;se++){const Ue=k[se];if(E(Ue)){const we=D(X),dt=i.get(Ue).__webglTexture;t.bindTexture(we,dt),M(we),t.unbindTexture()}}}const je=[],Pe=[];function tt(X){if(X.samples>0){if(Tt(X)===!1){const k=X.textures,se=X.width,Me=X.height;let Ue=n.COLOR_BUFFER_BIT;const we=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,dt=i.get(X),Ke=k.length>1;if(Ke)for(let Dt=0;Dt<k.length;Dt++)t.bindFramebuffer(n.FRAMEBUFFER,dt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Dt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,dt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Dt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,dt.__webglMultisampledFramebuffer);const xt=X.texture.mipmaps;xt&&xt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,dt.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,dt.__webglFramebuffer);for(let Dt=0;Dt<k.length;Dt++){if(X.resolveDepthBuffer&&(X.depthBuffer&&(Ue|=n.DEPTH_BUFFER_BIT),X.stencilBuffer&&X.resolveStencilBuffer&&(Ue|=n.STENCIL_BUFFER_BIT)),Ke){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,dt.__webglColorRenderbuffer[Dt]);const Ve=i.get(k[Dt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ve,0)}n.blitFramebuffer(0,0,se,Me,0,0,se,Me,Ue,n.NEAREST),d===!0&&(je.length=0,Pe.length=0,je.push(n.COLOR_ATTACHMENT0+Dt),X.depthBuffer&&X.resolveDepthBuffer===!1&&(je.push(we),Pe.push(we),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Pe)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,je))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ke)for(let Dt=0;Dt<k.length;Dt++){t.bindFramebuffer(n.FRAMEBUFFER,dt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Dt,n.RENDERBUFFER,dt.__webglColorRenderbuffer[Dt]);const Ve=i.get(k[Dt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,dt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Dt,n.TEXTURE_2D,Ve,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,dt.__webglMultisampledFramebuffer)}else if(X.depthBuffer&&X.resolveDepthBuffer===!1&&d){const k=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[k])}}}function $(X){return Math.min(s.maxSamples,X.samples)}function Tt(X){const k=i.get(X);return X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function st(X){const k=l.render.frame;g.get(X)!==k&&(g.set(X,k),X.update())}function At(X,k){const se=X.colorSpace,Me=X.format,Ue=X.type;return X.isCompressedTexture===!0||X.isVideoTexture===!0||se!==Ru&&se!==fc&&(Tn.getTransfer(se)===Bn?(Me!==Js||Ue!==xr)&&ct("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Rt("WebGLTextures: Unsupported texture color space:",se)),k}function Ze(X){return typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement?(p.width=X.naturalWidth||X.width,p.height=X.naturalHeight||X.height):typeof VideoFrame<"u"&&X instanceof VideoFrame?(p.width=X.displayWidth,p.height=X.displayHeight):(p.width=X.width,p.height=X.height),p}this.allocateTextureUnit=J,this.resetTextureUnits=ee,this.setTexture2D=he,this.setTexture2DArray=Z,this.setTexture3D=K,this.setTextureCube=le,this.rebindTextures=fn,this.setupRenderTarget=Pt,this.updateRenderTargetMipmap=De,this.updateMultisampleRenderTarget=tt,this.setupDepthRenderbuffer=tn,this.setupFrameBufferTexture=et,this.useMultisampledRTT=Tt,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function MP(n,e){function t(i,s=fc){let a;const l=Tn.getTransfer(s);if(i===xr)return n.UNSIGNED_BYTE;if(i===vb)return n.UNSIGNED_SHORT_4_4_4_4;if(i===yb)return n.UNSIGNED_SHORT_5_5_5_1;if(i===mT)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===gT)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===dT)return n.BYTE;if(i===pT)return n.SHORT;if(i===op)return n.UNSIGNED_SHORT;if(i===gb)return n.INT;if(i===Xa)return n.UNSIGNED_INT;if(i===wr)return n.FLOAT;if(i===_l)return n.HALF_FLOAT;if(i===vT)return n.ALPHA;if(i===yT)return n.RGB;if(i===Js)return n.RGBA;if(i===bl)return n.DEPTH_COMPONENT;if(i===Su)return n.DEPTH_STENCIL;if(i===xb)return n.RED;if(i===R0)return n.RED_INTEGER;if(i===ah)return n.RG;if(i===_b)return n.RG_INTEGER;if(i===bb)return n.RGBA_INTEGER;if(i===kg||i===Fg||i===Bg||i===Vg)if(l===Bn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===kg)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Fg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Bg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Vg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===kg)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Fg)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Bg)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Vg)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===f_||i===h_||i===d_||i===p_)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===f_)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===h_)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===d_)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===p_)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===m_||i===g_||i===v_||i===y_||i===x_||i===__||i===b_)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===m_||i===g_)return l===Bn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===v_)return l===Bn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC;if(i===y_)return a.COMPRESSED_R11_EAC;if(i===x_)return a.COMPRESSED_SIGNED_R11_EAC;if(i===__)return a.COMPRESSED_RG11_EAC;if(i===b_)return a.COMPRESSED_SIGNED_RG11_EAC}else return null;if(i===S_||i===M_||i===w_||i===T_||i===E_||i===A_||i===C_||i===R_||i===N_||i===D_||i===I_||i===L_||i===P_||i===U_)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===S_)return l===Bn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===M_)return l===Bn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===w_)return l===Bn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===T_)return l===Bn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===E_)return l===Bn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===A_)return l===Bn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===C_)return l===Bn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===R_)return l===Bn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===N_)return l===Bn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===D_)return l===Bn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===I_)return l===Bn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===L_)return l===Bn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===P_)return l===Bn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===U_)return l===Bn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===O_||i===z_||i===k_)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===O_)return l===Bn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===z_)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===k_)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===F_||i===B_||i===V_||i===H_)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(i===F_)return a.COMPRESSED_RED_RGTC1_EXT;if(i===B_)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===V_)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===H_)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===lp?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const $q=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Kq=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Jq{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const i=new RT(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new qa({vertexShader:$q,fragmentShader:Kq,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ns(new Ap(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Qq extends Sl{constructor(e,t){super();const i=this;let s=null,a=1,l=null,u="local-floor",d=1,p=null,g=null,y=null,x=null,_=null,w=null;const A=typeof XRWebGLBinding<"u",E=new Jq,M={},D=t.getContextAttributes();let L=null,N=null;const P=[],z=[],B=new Be;let V=null;const O=new _s;O.viewport=new Jn;const F=new _s;F.viewport=new Jn;const W=[O,F],ee=new hP;let J=null,ae=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(de){let Ce=P[de];return Ce===void 0&&(Ce=new Px,P[de]=Ce),Ce.getTargetRaySpace()},this.getControllerGrip=function(de){let Ce=P[de];return Ce===void 0&&(Ce=new Px,P[de]=Ce),Ce.getGripSpace()},this.getHand=function(de){let Ce=P[de];return Ce===void 0&&(Ce=new Px,P[de]=Ce),Ce.getHandSpace()};function he(de){const Ce=z.indexOf(de.inputSource);if(Ce===-1)return;const et=P[Ce];et!==void 0&&(et.update(de.inputSource,de.frame,p||l),et.dispatchEvent({type:de.type,data:de.inputSource}))}function Z(){s.removeEventListener("select",he),s.removeEventListener("selectstart",he),s.removeEventListener("selectend",he),s.removeEventListener("squeeze",he),s.removeEventListener("squeezestart",he),s.removeEventListener("squeezeend",he),s.removeEventListener("end",Z),s.removeEventListener("inputsourceschange",K);for(let de=0;de<P.length;de++){const Ce=z[de];Ce!==null&&(z[de]=null,P[de].disconnect(Ce))}J=null,ae=null,E.reset();for(const de in M)delete M[de];e.setRenderTarget(L),_=null,x=null,y=null,s=null,N=null,rt.stop(),i.isPresenting=!1,e.setPixelRatio(V),e.setSize(B.width,B.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(de){a=de,i.isPresenting===!0&&ct("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(de){u=de,i.isPresenting===!0&&ct("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||l},this.setReferenceSpace=function(de){p=de},this.getBaseLayer=function(){return x!==null?x:_},this.getBinding=function(){return y===null&&A&&(y=new XRWebGLBinding(s,t)),y},this.getFrame=function(){return w},this.getSession=function(){return s},this.setSession=async function(de){if(s=de,s!==null){if(L=e.getRenderTarget(),s.addEventListener("select",he),s.addEventListener("selectstart",he),s.addEventListener("selectend",he),s.addEventListener("squeeze",he),s.addEventListener("squeezestart",he),s.addEventListener("squeezeend",he),s.addEventListener("end",Z),s.addEventListener("inputsourceschange",K),D.xrCompatible!==!0&&await t.makeXRCompatible(),V=e.getPixelRatio(),e.getSize(B),A&&"createProjectionLayer"in XRWebGLBinding.prototype){let et=null,it=null,ht=null;D.depth&&(ht=D.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,et=D.stencil?Su:bl,it=D.stencil?lp:Xa);const tn={colorFormat:t.RGBA8,depthFormat:ht,scaleFactor:a};y=this.getBinding(),x=y.createProjectionLayer(tn),s.updateRenderState({layers:[x]}),e.setPixelRatio(1),e.setSize(x.textureWidth,x.textureHeight,!1),N=new da(x.textureWidth,x.textureHeight,{format:Js,type:xr,depthTexture:new mp(x.textureWidth,x.textureHeight,it,void 0,void 0,void 0,void 0,void 0,void 0,et),stencilBuffer:D.stencil,colorSpace:e.outputColorSpace,samples:D.antialias?4:0,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}else{const et={antialias:D.antialias,alpha:!0,depth:D.depth,stencil:D.stencil,framebufferScaleFactor:a};_=new XRWebGLLayer(s,t,et),s.updateRenderState({baseLayer:_}),e.setPixelRatio(1),e.setSize(_.framebufferWidth,_.framebufferHeight,!1),N=new da(_.framebufferWidth,_.framebufferHeight,{format:Js,type:xr,colorSpace:e.outputColorSpace,stencilBuffer:D.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}N.isXRRenderTarget=!0,this.setFoveation(d),p=null,l=await s.requestReferenceSpace(u),rt.setContext(s),rt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return E.getDepthTexture()};function K(de){for(let Ce=0;Ce<de.removed.length;Ce++){const et=de.removed[Ce],it=z.indexOf(et);it>=0&&(z[it]=null,P[it].disconnect(et))}for(let Ce=0;Ce<de.added.length;Ce++){const et=de.added[Ce];let it=z.indexOf(et);if(it===-1){for(let tn=0;tn<P.length;tn++)if(tn>=z.length){z.push(et),it=tn;break}else if(z[tn]===null){z[tn]=et,it=tn;break}if(it===-1)break}const ht=P[it];ht&&ht.connect(et)}}const le=new Y,Ee=new Y;function Re(de,Ce,et){le.setFromMatrixPosition(Ce.matrixWorld),Ee.setFromMatrixPosition(et.matrixWorld);const it=le.distanceTo(Ee),ht=Ce.projectionMatrix.elements,tn=et.projectionMatrix.elements,fn=ht[14]/(ht[10]-1),Pt=ht[14]/(ht[10]+1),De=(ht[9]+1)/ht[5],je=(ht[9]-1)/ht[5],Pe=(ht[8]-1)/ht[0],tt=(tn[8]+1)/tn[0],$=fn*Pe,Tt=fn*tt,st=it/(-Pe+tt),At=st*-Pe;if(Ce.matrixWorld.decompose(de.position,de.quaternion,de.scale),de.translateX(At),de.translateZ(st),de.matrixWorld.compose(de.position,de.quaternion,de.scale),de.matrixWorldInverse.copy(de.matrixWorld).invert(),ht[10]===-1)de.projectionMatrix.copy(Ce.projectionMatrix),de.projectionMatrixInverse.copy(Ce.projectionMatrixInverse);else{const Ze=fn+st,X=Pt+st,k=$-At,se=Tt+(it-At),Me=De*Pt/X*Ze,Ue=je*Pt/X*Ze;de.projectionMatrix.makePerspective(k,se,Me,Ue,Ze,X),de.projectionMatrixInverse.copy(de.projectionMatrix).invert()}}function q(de,Ce){Ce===null?de.matrixWorld.copy(de.matrix):de.matrixWorld.multiplyMatrices(Ce.matrixWorld,de.matrix),de.matrixWorldInverse.copy(de.matrixWorld).invert()}this.updateCamera=function(de){if(s===null)return;let Ce=de.near,et=de.far;E.texture!==null&&(E.depthNear>0&&(Ce=E.depthNear),E.depthFar>0&&(et=E.depthFar)),ee.near=F.near=O.near=Ce,ee.far=F.far=O.far=et,(J!==ee.near||ae!==ee.far)&&(s.updateRenderState({depthNear:ee.near,depthFar:ee.far}),J=ee.near,ae=ee.far),ee.layers.mask=de.layers.mask|6,O.layers.mask=ee.layers.mask&3,F.layers.mask=ee.layers.mask&5;const it=de.parent,ht=ee.cameras;q(ee,it);for(let tn=0;tn<ht.length;tn++)q(ht[tn],it);ht.length===2?Re(ee,O,F):ee.projectionMatrix.copy(O.projectionMatrix),oe(de,ee,it)};function oe(de,Ce,et){et===null?de.matrix.copy(Ce.matrixWorld):(de.matrix.copy(et.matrixWorld),de.matrix.invert(),de.matrix.multiply(Ce.matrixWorld)),de.matrix.decompose(de.position,de.quaternion,de.scale),de.updateMatrixWorld(!0),de.projectionMatrix.copy(Ce.projectionMatrix),de.projectionMatrixInverse.copy(Ce.projectionMatrixInverse),de.isPerspectiveCamera&&(de.fov=fp*2*Math.atan(1/de.projectionMatrix.elements[5]),de.zoom=1)}this.getCamera=function(){return ee},this.getFoveation=function(){if(!(x===null&&_===null))return d},this.setFoveation=function(de){d=de,x!==null&&(x.fixedFoveation=de),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=de)},this.hasDepthSensing=function(){return E.texture!==null},this.getDepthSensingMesh=function(){return E.getMesh(ee)},this.getCameraTexture=function(de){return M[de]};let Ae=null;function ke(de,Ce){if(g=Ce.getViewerPose(p||l),w=Ce,g!==null){const et=g.views;_!==null&&(e.setRenderTargetFramebuffer(N,_.framebuffer),e.setRenderTarget(N));let it=!1;et.length!==ee.cameras.length&&(ee.cameras.length=0,it=!0);for(let Pt=0;Pt<et.length;Pt++){const De=et[Pt];let je=null;if(_!==null)je=_.getViewport(De);else{const tt=y.getViewSubImage(x,De);je=tt.viewport,Pt===0&&(e.setRenderTargetTextures(N,tt.colorTexture,tt.depthStencilTexture),e.setRenderTarget(N))}let Pe=W[Pt];Pe===void 0&&(Pe=new _s,Pe.layers.enable(Pt),Pe.viewport=new Jn,W[Pt]=Pe),Pe.matrix.fromArray(De.transform.matrix),Pe.matrix.decompose(Pe.position,Pe.quaternion,Pe.scale),Pe.projectionMatrix.fromArray(De.projectionMatrix),Pe.projectionMatrixInverse.copy(Pe.projectionMatrix).invert(),Pe.viewport.set(je.x,je.y,je.width,je.height),Pt===0&&(ee.matrix.copy(Pe.matrix),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale)),it===!0&&ee.cameras.push(Pe)}const ht=s.enabledFeatures;if(ht&&ht.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&A){y=i.getBinding();const Pt=y.getDepthInformation(et[0]);Pt&&Pt.isValid&&Pt.texture&&E.init(Pt,s.renderState)}if(ht&&ht.includes("camera-access")&&A){e.state.unbindTexture(),y=i.getBinding();for(let Pt=0;Pt<et.length;Pt++){const De=et[Pt].camera;if(De){let je=M[De];je||(je=new RT,M[De]=je);const Pe=y.getCameraImage(De);je.sourceTexture=Pe}}}}for(let et=0;et<P.length;et++){const it=z[et],ht=P[et];it!==null&&ht!==void 0&&ht.update(it,Ce,p||l)}Ae&&Ae(de,Ce),Ce.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Ce}),w=null}const rt=new yP;rt.setAnimationLoop(ke),this.setAnimationLoop=function(de){Ae=de},this.dispose=function(){}}}const Ff=new pa,eZ=new Wt;function tZ(n,e){function t(E,M){E.matrixAutoUpdate===!0&&E.updateMatrix(),M.value.copy(E.matrix)}function i(E,M){M.color.getRGB(E.fogColor.value,_L(n)),M.isFog?(E.fogNear.value=M.near,E.fogFar.value=M.far):M.isFogExp2&&(E.fogDensity.value=M.density)}function s(E,M,D,L,N){M.isMeshBasicMaterial||M.isMeshLambertMaterial?a(E,M):M.isMeshToonMaterial?(a(E,M),y(E,M)):M.isMeshPhongMaterial?(a(E,M),g(E,M)):M.isMeshStandardMaterial?(a(E,M),x(E,M),M.isMeshPhysicalMaterial&&_(E,M,N)):M.isMeshMatcapMaterial?(a(E,M),w(E,M)):M.isMeshDepthMaterial?a(E,M):M.isMeshDistanceMaterial?(a(E,M),A(E,M)):M.isMeshNormalMaterial?a(E,M):M.isLineBasicMaterial?(l(E,M),M.isLineDashedMaterial&&u(E,M)):M.isPointsMaterial?d(E,M,D,L):M.isSpriteMaterial?p(E,M):M.isShadowMaterial?(E.color.value.copy(M.color),E.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function a(E,M){E.opacity.value=M.opacity,M.color&&E.diffuse.value.copy(M.color),M.emissive&&E.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(E.map.value=M.map,t(M.map,E.mapTransform)),M.alphaMap&&(E.alphaMap.value=M.alphaMap,t(M.alphaMap,E.alphaMapTransform)),M.bumpMap&&(E.bumpMap.value=M.bumpMap,t(M.bumpMap,E.bumpMapTransform),E.bumpScale.value=M.bumpScale,M.side===Tr&&(E.bumpScale.value*=-1)),M.normalMap&&(E.normalMap.value=M.normalMap,t(M.normalMap,E.normalMapTransform),E.normalScale.value.copy(M.normalScale),M.side===Tr&&E.normalScale.value.negate()),M.displacementMap&&(E.displacementMap.value=M.displacementMap,t(M.displacementMap,E.displacementMapTransform),E.displacementScale.value=M.displacementScale,E.displacementBias.value=M.displacementBias),M.emissiveMap&&(E.emissiveMap.value=M.emissiveMap,t(M.emissiveMap,E.emissiveMapTransform)),M.specularMap&&(E.specularMap.value=M.specularMap,t(M.specularMap,E.specularMapTransform)),M.alphaTest>0&&(E.alphaTest.value=M.alphaTest);const D=e.get(M),L=D.envMap,N=D.envMapRotation;L&&(E.envMap.value=L,Ff.copy(N),Ff.x*=-1,Ff.y*=-1,Ff.z*=-1,L.isCubeTexture&&L.isRenderTargetTexture===!1&&(Ff.y*=-1,Ff.z*=-1),E.envMapRotation.value.setFromMatrix4(eZ.makeRotationFromEuler(Ff)),E.flipEnvMap.value=L.isCubeTexture&&L.isRenderTargetTexture===!1?-1:1,E.reflectivity.value=M.reflectivity,E.ior.value=M.ior,E.refractionRatio.value=M.refractionRatio),M.lightMap&&(E.lightMap.value=M.lightMap,E.lightMapIntensity.value=M.lightMapIntensity,t(M.lightMap,E.lightMapTransform)),M.aoMap&&(E.aoMap.value=M.aoMap,E.aoMapIntensity.value=M.aoMapIntensity,t(M.aoMap,E.aoMapTransform))}function l(E,M){E.diffuse.value.copy(M.color),E.opacity.value=M.opacity,M.map&&(E.map.value=M.map,t(M.map,E.mapTransform))}function u(E,M){E.dashSize.value=M.dashSize,E.totalSize.value=M.dashSize+M.gapSize,E.scale.value=M.scale}function d(E,M,D,L){E.diffuse.value.copy(M.color),E.opacity.value=M.opacity,E.size.value=M.size*D,E.scale.value=L*.5,M.map&&(E.map.value=M.map,t(M.map,E.uvTransform)),M.alphaMap&&(E.alphaMap.value=M.alphaMap,t(M.alphaMap,E.alphaMapTransform)),M.alphaTest>0&&(E.alphaTest.value=M.alphaTest)}function p(E,M){E.diffuse.value.copy(M.color),E.opacity.value=M.opacity,E.rotation.value=M.rotation,M.map&&(E.map.value=M.map,t(M.map,E.mapTransform)),M.alphaMap&&(E.alphaMap.value=M.alphaMap,t(M.alphaMap,E.alphaMapTransform)),M.alphaTest>0&&(E.alphaTest.value=M.alphaTest)}function g(E,M){E.specular.value.copy(M.specular),E.shininess.value=Math.max(M.shininess,1e-4)}function y(E,M){M.gradientMap&&(E.gradientMap.value=M.gradientMap)}function x(E,M){E.metalness.value=M.metalness,M.metalnessMap&&(E.metalnessMap.value=M.metalnessMap,t(M.metalnessMap,E.metalnessMapTransform)),E.roughness.value=M.roughness,M.roughnessMap&&(E.roughnessMap.value=M.roughnessMap,t(M.roughnessMap,E.roughnessMapTransform)),M.envMap&&(E.envMapIntensity.value=M.envMapIntensity)}function _(E,M,D){E.ior.value=M.ior,M.sheen>0&&(E.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),E.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(E.sheenColorMap.value=M.sheenColorMap,t(M.sheenColorMap,E.sheenColorMapTransform)),M.sheenRoughnessMap&&(E.sheenRoughnessMap.value=M.sheenRoughnessMap,t(M.sheenRoughnessMap,E.sheenRoughnessMapTransform))),M.clearcoat>0&&(E.clearcoat.value=M.clearcoat,E.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(E.clearcoatMap.value=M.clearcoatMap,t(M.clearcoatMap,E.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,t(M.clearcoatRoughnessMap,E.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(E.clearcoatNormalMap.value=M.clearcoatNormalMap,t(M.clearcoatNormalMap,E.clearcoatNormalMapTransform),E.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===Tr&&E.clearcoatNormalScale.value.negate())),M.dispersion>0&&(E.dispersion.value=M.dispersion),M.iridescence>0&&(E.iridescence.value=M.iridescence,E.iridescenceIOR.value=M.iridescenceIOR,E.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(E.iridescenceMap.value=M.iridescenceMap,t(M.iridescenceMap,E.iridescenceMapTransform)),M.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=M.iridescenceThicknessMap,t(M.iridescenceThicknessMap,E.iridescenceThicknessMapTransform))),M.transmission>0&&(E.transmission.value=M.transmission,E.transmissionSamplerMap.value=D.texture,E.transmissionSamplerSize.value.set(D.width,D.height),M.transmissionMap&&(E.transmissionMap.value=M.transmissionMap,t(M.transmissionMap,E.transmissionMapTransform)),E.thickness.value=M.thickness,M.thicknessMap&&(E.thicknessMap.value=M.thicknessMap,t(M.thicknessMap,E.thicknessMapTransform)),E.attenuationDistance.value=M.attenuationDistance,E.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(E.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(E.anisotropyMap.value=M.anisotropyMap,t(M.anisotropyMap,E.anisotropyMapTransform))),E.specularIntensity.value=M.specularIntensity,E.specularColor.value.copy(M.specularColor),M.specularColorMap&&(E.specularColorMap.value=M.specularColorMap,t(M.specularColorMap,E.specularColorMapTransform)),M.specularIntensityMap&&(E.specularIntensityMap.value=M.specularIntensityMap,t(M.specularIntensityMap,E.specularIntensityMapTransform))}function w(E,M){M.matcap&&(E.matcap.value=M.matcap)}function A(E,M){const D=e.get(M).light;E.referencePosition.value.setFromMatrixPosition(D.matrixWorld),E.nearDistance.value=D.shadow.camera.near,E.farDistance.value=D.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:s}}function nZ(n,e,t,i){let s={},a={},l=[];const u=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function d(D,L){const N=L.program;i.uniformBlockBinding(D,N)}function p(D,L){let N=s[D.id];N===void 0&&(w(D),N=g(D),s[D.id]=N,D.addEventListener("dispose",E));const P=L.program;i.updateUBOMapping(D,P);const z=e.render.frame;a[D.id]!==z&&(x(D),a[D.id]=z)}function g(D){const L=y();D.__bindingPointIndex=L;const N=n.createBuffer(),P=D.__size,z=D.usage;return n.bindBuffer(n.UNIFORM_BUFFER,N),n.bufferData(n.UNIFORM_BUFFER,P,z),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,L,N),N}function y(){for(let D=0;D<u;D++)if(l.indexOf(D)===-1)return l.push(D),D;return Rt("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function x(D){const L=s[D.id],N=D.uniforms,P=D.__cache;n.bindBuffer(n.UNIFORM_BUFFER,L);for(let z=0,B=N.length;z<B;z++){const V=Array.isArray(N[z])?N[z]:[N[z]];for(let O=0,F=V.length;O<F;O++){const W=V[O];if(_(W,z,O,P)===!0){const ee=W.__offset,J=Array.isArray(W.value)?W.value:[W.value];let ae=0;for(let he=0;he<J.length;he++){const Z=J[he],K=A(Z);typeof Z=="number"||typeof Z=="boolean"?(W.__data[0]=Z,n.bufferSubData(n.UNIFORM_BUFFER,ee+ae,W.__data)):Z.isMatrix3?(W.__data[0]=Z.elements[0],W.__data[1]=Z.elements[1],W.__data[2]=Z.elements[2],W.__data[3]=0,W.__data[4]=Z.elements[3],W.__data[5]=Z.elements[4],W.__data[6]=Z.elements[5],W.__data[7]=0,W.__data[8]=Z.elements[6],W.__data[9]=Z.elements[7],W.__data[10]=Z.elements[8],W.__data[11]=0):(Z.toArray(W.__data,ae),ae+=K.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,ee,W.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function _(D,L,N,P){const z=D.value,B=L+"_"+N;if(P[B]===void 0)return typeof z=="number"||typeof z=="boolean"?P[B]=z:P[B]=z.clone(),!0;{const V=P[B];if(typeof z=="number"||typeof z=="boolean"){if(V!==z)return P[B]=z,!0}else if(V.equals(z)===!1)return V.copy(z),!0}return!1}function w(D){const L=D.uniforms;let N=0;const P=16;for(let B=0,V=L.length;B<V;B++){const O=Array.isArray(L[B])?L[B]:[L[B]];for(let F=0,W=O.length;F<W;F++){const ee=O[F],J=Array.isArray(ee.value)?ee.value:[ee.value];for(let ae=0,he=J.length;ae<he;ae++){const Z=J[ae],K=A(Z),le=N%P,Ee=le%K.boundary,Re=le+Ee;N+=Ee,Re!==0&&P-Re<K.storage&&(N+=P-Re),ee.__data=new Float32Array(K.storage/Float32Array.BYTES_PER_ELEMENT),ee.__offset=N,N+=K.storage}}}const z=N%P;return z>0&&(N+=P-z),D.__size=N,D.__cache={},this}function A(D){const L={boundary:0,storage:0};return typeof D=="number"||typeof D=="boolean"?(L.boundary=4,L.storage=4):D.isVector2?(L.boundary=8,L.storage=8):D.isVector3||D.isColor?(L.boundary=16,L.storage=12):D.isVector4?(L.boundary=16,L.storage=16):D.isMatrix3?(L.boundary=48,L.storage=48):D.isMatrix4?(L.boundary=64,L.storage=64):D.isTexture?ct("WebGLRenderer: Texture samplers can not be part of an uniforms group."):ct("WebGLRenderer: Unsupported uniform value type.",D),L}function E(D){const L=D.target;L.removeEventListener("dispose",E);const N=l.indexOf(L.__bindingPointIndex);l.splice(N,1),n.deleteBuffer(s[L.id]),delete s[L.id],delete a[L.id]}function M(){for(const D in s)n.deleteBuffer(s[D]);l=[],s={},a={}}return{bind:d,update:p,dispose:M}}const iZ=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let fl=null;function sZ(){return fl===null&&(fl=new Ao(iZ,16,16,ah,_l),fl.name="DFG_LUT",fl.minFilter=hi,fl.magFilter=hi,fl.wrapS=Kr,fl.wrapT=Kr,fl.generateMipmaps=!1,fl.needsUpdate=!0),fl}class wP{constructor(e={}){const{canvas:t=gL(),context:i=null,depth:s=!0,stencil:a=!1,alpha:l=!1,antialias:u=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:p=!1,powerPreference:g="default",failIfMajorPerformanceCaveat:y=!1,reversedDepthBuffer:x=!1,outputBufferType:_=xr}=e;this.isWebGLRenderer=!0;let w;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");w=i.getContextAttributes().alpha}else w=l;const A=_,E=new Set([bb,_b,R0]),M=new Set([xr,Xa,op,lp,vb,yb]),D=new Uint32Array(4),L=new Int32Array(4);let N=null,P=null;const z=[],B=[];let V=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Wa,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const O=this;let F=!1;this._outputColorSpace=$s;let W=0,ee=0,J=null,ae=-1,he=null;const Z=new Jn,K=new Jn;let le=null;const Ee=new vt(0);let Re=0,q=t.width,oe=t.height,Ae=1,ke=null,rt=null;const de=new Jn(0,0,q,oe),Ce=new Jn(0,0,q,oe);let et=!1;const it=new Ep;let ht=!1,tn=!1;const fn=new Wt,Pt=new Y,De=new Jn,je={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Pe=!1;function tt(){return J===null?Ae:1}let $=i;function Tt(j,re){return t.getContext(j,re)}try{const j={alpha:!0,depth:s,stencil:a,antialias:u,premultipliedAlpha:d,preserveDrawingBuffer:p,powerPreference:g,failIfMajorPerformanceCaveat:y};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${db}`),t.addEventListener("webglcontextlost",Ht,!1),t.addEventListener("webglcontextrestored",vn,!1),t.addEventListener("webglcontextcreationerror",bn,!1),$===null){const re="webgl2";if($=Tt(re,j),$===null)throw Tt(re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(j){throw Rt("WebGLRenderer: "+j.message),j}let st,At,Ze,X,k,se,Me,Ue,we,dt,Ke,xt,Dt,Ve,qe,pt,ft,nt,Jt,ie,at,Xe,lt,He;function Le(){st=new rX($),st.init(),Xe=new MP($,st),At=new $W($,st,e,Xe),Ze=new Zq($,st),At.reversedDepthBuffer&&x&&Ze.buffers.depth.setReversed(!0),X=new lX($),k=new Lq,se=new Yq($,st,Ze,k,At,Xe,X),Me=new JW(O),Ue=new sX(O),we=new hG($),lt=new ZW($,we),dt=new aX($,we,X,lt),Ke=new uX($,dt,we,X),Jt=new cX($,At,se),pt=new KW(k),xt=new Iq(O,Me,Ue,st,At,lt,pt),Dt=new tZ(O,k),Ve=new Uq,qe=new Vq(st),nt=new qW(O,Me,Ue,Ze,Ke,w,d),ft=new Xq(O,Ke,At),He=new nZ($,X,At,Ze),ie=new YW($,st,X),at=new oX($,st,X),X.programs=xt.programs,O.capabilities=At,O.extensions=st,O.properties=k,O.renderLists=Ve,O.shadowMap=ft,O.state=Ze,O.info=X}Le(),A!==xr&&(V=new hX(A,t.width,t.height,s,a));const Je=new Qq(O,$);this.xr=Je,this.getContext=function(){return $},this.getContextAttributes=function(){return $.getContextAttributes()},this.forceContextLoss=function(){const j=st.get("WEBGL_lose_context");j&&j.loseContext()},this.forceContextRestore=function(){const j=st.get("WEBGL_lose_context");j&&j.restoreContext()},this.getPixelRatio=function(){return Ae},this.setPixelRatio=function(j){j!==void 0&&(Ae=j,this.setSize(q,oe,!1))},this.getSize=function(j){return j.set(q,oe)},this.setSize=function(j,re,_e=!0){if(Je.isPresenting){ct("WebGLRenderer: Can't change size while VR device is presenting.");return}q=j,oe=re,t.width=Math.floor(j*Ae),t.height=Math.floor(re*Ae),_e===!0&&(t.style.width=j+"px",t.style.height=re+"px"),V!==null&&V.setSize(t.width,t.height),this.setViewport(0,0,j,re)},this.getDrawingBufferSize=function(j){return j.set(q*Ae,oe*Ae).floor()},this.setDrawingBufferSize=function(j,re,_e){q=j,oe=re,Ae=_e,t.width=Math.floor(j*_e),t.height=Math.floor(re*_e),this.setViewport(0,0,j,re)},this.setEffects=function(j){if(A===xr){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(j){for(let re=0;re<j.length;re++)if(j[re].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}V.setEffects(j||[])},this.getCurrentViewport=function(j){return j.copy(Z)},this.getViewport=function(j){return j.copy(de)},this.setViewport=function(j,re,_e,ve){j.isVector4?de.set(j.x,j.y,j.z,j.w):de.set(j,re,_e,ve),Ze.viewport(Z.copy(de).multiplyScalar(Ae).round())},this.getScissor=function(j){return j.copy(Ce)},this.setScissor=function(j,re,_e,ve){j.isVector4?Ce.set(j.x,j.y,j.z,j.w):Ce.set(j,re,_e,ve),Ze.scissor(K.copy(Ce).multiplyScalar(Ae).round())},this.getScissorTest=function(){return et},this.setScissorTest=function(j){Ze.setScissorTest(et=j)},this.setOpaqueSort=function(j){ke=j},this.setTransparentSort=function(j){rt=j},this.getClearColor=function(j){return j.copy(nt.getClearColor())},this.setClearColor=function(){nt.setClearColor(...arguments)},this.getClearAlpha=function(){return nt.getClearAlpha()},this.setClearAlpha=function(){nt.setClearAlpha(...arguments)},this.clear=function(j=!0,re=!0,_e=!0){let ve=0;if(j){let ue=!1;if(J!==null){const Ye=J.texture.format;ue=E.has(Ye)}if(ue){const Ye=J.texture.type,mt=M.has(Ye),We=nt.getClearColor(),yt=nt.getClearAlpha(),bt=We.r,Nt=We.g,Mt=We.b;mt?(D[0]=bt,D[1]=Nt,D[2]=Mt,D[3]=yt,$.clearBufferuiv($.COLOR,0,D)):(L[0]=bt,L[1]=Nt,L[2]=Mt,L[3]=yt,$.clearBufferiv($.COLOR,0,L))}else ve|=$.COLOR_BUFFER_BIT}re&&(ve|=$.DEPTH_BUFFER_BIT),_e&&(ve|=$.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),$.clear(ve)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ht,!1),t.removeEventListener("webglcontextrestored",vn,!1),t.removeEventListener("webglcontextcreationerror",bn,!1),nt.dispose(),Ve.dispose(),qe.dispose(),k.dispose(),Me.dispose(),Ue.dispose(),Ke.dispose(),lt.dispose(),He.dispose(),xt.dispose(),Je.dispose(),Je.removeEventListener("sessionstart",$a),Je.removeEventListener("sessionend",El),ps.stop()};function Ht(j){j.preventDefault(),c0("WebGLRenderer: Context Lost."),F=!0}function vn(){c0("WebGLRenderer: Context Restored."),F=!1;const j=X.autoReset,re=ft.enabled,_e=ft.autoUpdate,ve=ft.needsUpdate,ue=ft.type;Le(),X.autoReset=j,ft.enabled=re,ft.autoUpdate=_e,ft.needsUpdate=ve,ft.type=ue}function bn(j){Rt("WebGLRenderer: A WebGL context could not be created. Reason: ",j.statusMessage)}function rs(j){const re=j.target;re.removeEventListener("dispose",rs),Us(re)}function Us(j){No(j),k.remove(j)}function No(j){const re=k.get(j).programs;re!==void 0&&(re.forEach(function(_e){xt.releaseProgram(_e)}),j.isShaderMaterial&&xt.releaseShaderCache(j))}this.renderBufferDirect=function(j,re,_e,ve,ue,Ye){re===null&&(re=je);const mt=ue.isMesh&&ue.matrixWorld.determinant()<0,We=na(j,re,_e,ve,ue);Ze.setMaterial(ve,mt);let yt=_e.index,bt=1;if(ve.wireframe===!0){if(yt=dt.getWireframeAttribute(_e),yt===void 0)return;bt=2}const Nt=_e.drawRange,Mt=_e.attributes.position;let Ot=Nt.start*bt,En=(Nt.start+Nt.count)*bt;Ye!==null&&(Ot=Math.max(Ot,Ye.start*bt),En=Math.min(En,(Ye.start+Ye.count)*bt)),yt!==null?(Ot=Math.max(Ot,0),En=Math.min(En,yt.count)):Mt!=null&&(Ot=Math.max(Ot,0),En=Math.min(En,Mt.count));const jn=En-Ot;if(jn<0||jn===1/0)return;lt.setup(ue,ve,We,_e,yt);let zn,Xt=ie;if(yt!==null&&(zn=we.get(yt),Xt=at,Xt.setIndex(zn)),ue.isMesh)ve.wireframe===!0?(Ze.setLineWidth(ve.wireframeLinewidth*tt()),Xt.setMode($.LINES)):Xt.setMode($.TRIANGLES);else if(ue.isLine){let ot=ve.linewidth;ot===void 0&&(ot=1),Ze.setLineWidth(ot*tt()),ue.isLineSegments?Xt.setMode($.LINES):ue.isLineLoop?Xt.setMode($.LINE_LOOP):Xt.setMode($.LINE_STRIP)}else ue.isPoints?Xt.setMode($.POINTS):ue.isSprite&&Xt.setMode($.TRIANGLES);if(ue.isBatchedMesh)if(ue._multiDrawInstances!==null)up("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Xt.renderMultiDrawInstances(ue._multiDrawStarts,ue._multiDrawCounts,ue._multiDrawCount,ue._multiDrawInstances);else if(st.get("WEBGL_multi_draw"))Xt.renderMultiDraw(ue._multiDrawStarts,ue._multiDrawCounts,ue._multiDrawCount);else{const ot=ue._multiDrawStarts,Sn=ue._multiDrawCounts,Ft=ue._multiDrawCount,Ci=yt?we.get(yt).bytesPerElement:1,ia=k.get(ve).currentProgram.getUniforms();for(let $n=0;$n<Ft;$n++)ia.setValue($,"_gl_DrawID",$n),Xt.render(ot[$n]/Ci,Sn[$n])}else if(ue.isInstancedMesh)Xt.renderInstances(Ot,jn,ue.count);else if(_e.isInstancedBufferGeometry){const ot=_e._maxInstanceCount!==void 0?_e._maxInstanceCount:1/0,Sn=Math.min(_e.instanceCount,ot);Xt.renderInstances(Ot,jn,Sn)}else Xt.render(Ot,jn)};function Do(j,re,_e){j.transparent===!0&&j.side===hl&&j.forceSinglePass===!1?(j.side=Tr,j.needsUpdate=!0,sr(j,re,_e),j.side=vc,j.needsUpdate=!0,sr(j,re,_e),j.side=hl):sr(j,re,_e)}this.compile=function(j,re,_e=null){_e===null&&(_e=j),P=qe.get(_e),P.init(re),B.push(P),_e.traverseVisible(function(ue){ue.isLight&&ue.layers.test(re.layers)&&(P.pushLight(ue),ue.castShadow&&P.pushShadow(ue))}),j!==_e&&j.traverseVisible(function(ue){ue.isLight&&ue.layers.test(re.layers)&&(P.pushLight(ue),ue.castShadow&&P.pushShadow(ue))}),P.setupLights();const ve=new Set;return j.traverse(function(ue){if(!(ue.isMesh||ue.isPoints||ue.isLine||ue.isSprite))return;const Ye=ue.material;if(Ye)if(Array.isArray(Ye))for(let mt=0;mt<Ye.length;mt++){const We=Ye[mt];Do(We,_e,ue),ve.add(We)}else Do(Ye,_e,ue),ve.add(Ye)}),P=B.pop(),ve},this.compileAsync=function(j,re,_e=null){const ve=this.compile(j,re,_e);return new Promise(ue=>{function Ye(){if(ve.forEach(function(mt){k.get(mt).currentProgram.isReady()&&ve.delete(mt)}),ve.size===0){ue(j);return}setTimeout(Ye,10)}st.get("KHR_parallel_shader_compile")!==null?Ye():setTimeout(Ye,10)})};let Tl=null;function Io(j){Tl&&Tl(j)}function $a(){ps.stop()}function El(){ps.start()}const ps=new yP;ps.setAnimationLoop(Io),typeof self<"u"&&ps.setContext(self),this.setAnimationLoop=function(j){Tl=j,Je.setAnimationLoop(j),j===null?ps.stop():ps.start()},Je.addEventListener("sessionstart",$a),Je.addEventListener("sessionend",El),this.render=function(j,re){if(re!==void 0&&re.isCamera!==!0){Rt("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(F===!0)return;const _e=Je.enabled===!0&&Je.isPresenting===!0,ve=V!==null&&(J===null||_e)&&V.begin(O,J);if(j.matrixWorldAutoUpdate===!0&&j.updateMatrixWorld(),re.parent===null&&re.matrixWorldAutoUpdate===!0&&re.updateMatrixWorld(),Je.enabled===!0&&Je.isPresenting===!0&&(V===null||V.isCompositing()===!1)&&(Je.cameraAutoUpdate===!0&&Je.updateCamera(re),re=Je.getCamera()),j.isScene===!0&&j.onBeforeRender(O,j,re,J),P=qe.get(j,B.length),P.init(re),B.push(P),fn.multiplyMatrices(re.projectionMatrix,re.matrixWorldInverse),it.setFromProjectionMatrix(fn,fa,re.reversedDepth),tn=this.localClippingEnabled,ht=pt.init(this.clippingPlanes,tn),N=Ve.get(j,z.length),N.init(),z.push(N),Je.enabled===!0&&Je.isPresenting===!0){const mt=O.xr.getDepthSensingMesh();mt!==null&&tr(mt,re,-1/0,O.sortObjects)}tr(j,re,0,O.sortObjects),N.finish(),O.sortObjects===!0&&N.sort(ke,rt),Pe=Je.enabled===!1||Je.isPresenting===!1||Je.hasDepthSensing()===!1,Pe&&nt.addToRenderList(N,j),this.info.render.frame++,ht===!0&&pt.beginShadows();const ue=P.state.shadowsArray;if(ft.render(ue,j,re),ht===!0&&pt.endShadows(),this.info.autoReset===!0&&this.info.reset(),(ve&&V.hasRenderPass())===!1){const mt=N.opaque,We=N.transmissive;if(P.setupLights(),re.isArrayCamera){const yt=re.cameras;if(We.length>0)for(let bt=0,Nt=yt.length;bt<Nt;bt++){const Mt=yt[bt];zi(mt,We,j,Mt)}Pe&&nt.render(j);for(let bt=0,Nt=yt.length;bt<Nt;bt++){const Mt=yt[bt];ii(N,j,Mt,Mt.viewport)}}else We.length>0&&zi(mt,We,j,re),Pe&&nt.render(j),ii(N,j,re)}J!==null&&ee===0&&(se.updateMultisampleRenderTarget(J),se.updateRenderTargetMipmap(J)),ve&&V.end(O),j.isScene===!0&&j.onAfterRender(O,j,re),lt.resetDefaultState(),ae=-1,he=null,B.pop(),B.length>0?(P=B[B.length-1],ht===!0&&pt.setGlobalState(O.clippingPlanes,P.state.camera)):P=null,z.pop(),z.length>0?N=z[z.length-1]:N=null};function tr(j,re,_e,ve){if(j.visible===!1)return;if(j.layers.test(re.layers)){if(j.isGroup)_e=j.renderOrder;else if(j.isLOD)j.autoUpdate===!0&&j.update(re);else if(j.isLight)P.pushLight(j),j.castShadow&&P.pushShadow(j);else if(j.isSprite){if(!j.frustumCulled||it.intersectsSprite(j)){ve&&De.setFromMatrixPosition(j.matrixWorld).applyMatrix4(fn);const mt=Ke.update(j),We=j.material;We.visible&&N.push(j,mt,We,_e,De.z,null)}}else if((j.isMesh||j.isLine||j.isPoints)&&(!j.frustumCulled||it.intersectsObject(j))){const mt=Ke.update(j),We=j.material;if(ve&&(j.boundingSphere!==void 0?(j.boundingSphere===null&&j.computeBoundingSphere(),De.copy(j.boundingSphere.center)):(mt.boundingSphere===null&&mt.computeBoundingSphere(),De.copy(mt.boundingSphere.center)),De.applyMatrix4(j.matrixWorld).applyMatrix4(fn)),Array.isArray(We)){const yt=mt.groups;for(let bt=0,Nt=yt.length;bt<Nt;bt++){const Mt=yt[bt],Ot=We[Mt.materialIndex];Ot&&Ot.visible&&N.push(j,mt,Ot,_e,De.z,Mt)}}else We.visible&&N.push(j,mt,We,_e,De.z,null)}}const Ye=j.children;for(let mt=0,We=Ye.length;mt<We;mt++)tr(Ye[mt],re,_e,ve)}function ii(j,re,_e,ve){const{opaque:ue,transmissive:Ye,transparent:mt}=j;P.setupLightsView(_e),ht===!0&&pt.setGlobalState(O.clippingPlanes,_e),ve&&Ze.viewport(Z.copy(ve)),ue.length>0&&nr(ue,re,_e),Ye.length>0&&nr(Ye,re,_e),mt.length>0&&nr(mt,re,_e),Ze.buffers.depth.setTest(!0),Ze.buffers.depth.setMask(!0),Ze.buffers.color.setMask(!0),Ze.setPolygonOffset(!1)}function zi(j,re,_e,ve){if((_e.isScene===!0?_e.overrideMaterial:null)!==null)return;if(P.state.transmissionRenderTarget[ve.id]===void 0){const Ot=st.has("EXT_color_buffer_half_float")||st.has("EXT_color_buffer_float");P.state.transmissionRenderTarget[ve.id]=new da(1,1,{generateMipmaps:!0,type:Ot?_l:xr,minFilter:dl,samples:At.samples,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Tn.workingColorSpace})}const Ye=P.state.transmissionRenderTarget[ve.id],mt=ve.viewport||Z;Ye.setSize(mt.z*O.transmissionResolutionScale,mt.w*O.transmissionResolutionScale);const We=O.getRenderTarget(),yt=O.getActiveCubeFace(),bt=O.getActiveMipmapLevel();O.setRenderTarget(Ye),O.getClearColor(Ee),Re=O.getClearAlpha(),Re<1&&O.setClearColor(16777215,.5),O.clear(),Pe&&nt.render(_e);const Nt=O.toneMapping;O.toneMapping=Wa;const Mt=ve.viewport;if(ve.viewport!==void 0&&(ve.viewport=void 0),P.setupLightsView(ve),ht===!0&&pt.setGlobalState(O.clippingPlanes,ve),nr(j,_e,ve),se.updateMultisampleRenderTarget(Ye),se.updateRenderTargetMipmap(Ye),st.has("WEBGL_multisampled_render_to_texture")===!1){let Ot=!1;for(let En=0,jn=re.length;En<jn;En++){const zn=re[En],{object:Xt,geometry:ot,material:Sn,group:Ft}=zn;if(Sn.side===hl&&Xt.layers.test(ve.layers)){const Ci=Sn.side;Sn.side=Tr,Sn.needsUpdate=!0,ir(Xt,_e,ve,ot,Sn,Ft),Sn.side=Ci,Sn.needsUpdate=!0,Ot=!0}}Ot===!0&&(se.updateMultisampleRenderTarget(Ye),se.updateRenderTargetMipmap(Ye))}O.setRenderTarget(We,yt,bt),O.setClearColor(Ee,Re),Mt!==void 0&&(ve.viewport=Mt),O.toneMapping=Nt}function nr(j,re,_e){const ve=re.isScene===!0?re.overrideMaterial:null;for(let ue=0,Ye=j.length;ue<Ye;ue++){const mt=j[ue],{object:We,geometry:yt,group:bt}=mt;let Nt=mt.material;Nt.allowOverride===!0&&ve!==null&&(Nt=ve),We.layers.test(_e.layers)&&ir(We,re,_e,yt,Nt,bt)}}function ir(j,re,_e,ve,ue,Ye){j.onBeforeRender(O,re,_e,ve,ue,Ye),j.modelViewMatrix.multiplyMatrices(_e.matrixWorldInverse,j.matrixWorld),j.normalMatrix.getNormalMatrix(j.modelViewMatrix),ue.onBeforeRender(O,re,_e,ve,j,Ye),ue.transparent===!0&&ue.side===hl&&ue.forceSinglePass===!1?(ue.side=Tr,ue.needsUpdate=!0,O.renderBufferDirect(_e,re,ve,ue,j,Ye),ue.side=vc,ue.needsUpdate=!0,O.renderBufferDirect(_e,re,ve,ue,j,Ye),ue.side=hl):O.renderBufferDirect(_e,re,ve,ue,j,Ye),j.onAfterRender(O,re,_e,ve,ue,Ye)}function sr(j,re,_e){re.isScene!==!0&&(re=je);const ve=k.get(j),ue=P.state.lights,Ye=P.state.shadowsArray,mt=ue.state.version,We=xt.getParameters(j,ue.state,Ye,re,_e),yt=xt.getProgramCacheKey(We);let bt=ve.programs;ve.environment=j.isMeshStandardMaterial?re.environment:null,ve.fog=re.fog,ve.envMap=(j.isMeshStandardMaterial?Ue:Me).get(j.envMap||ve.environment),ve.envMapRotation=ve.environment!==null&&j.envMap===null?re.environmentRotation:j.envMapRotation,bt===void 0&&(j.addEventListener("dispose",rs),bt=new Map,ve.programs=bt);let Nt=bt.get(yt);if(Nt!==void 0){if(ve.currentProgram===Nt&&ve.lightsStateVersion===mt)return Al(j,We),Nt}else We.uniforms=xt.getUniforms(j),j.onBeforeCompile(We,O),Nt=xt.acquireProgram(We,yt),bt.set(yt,Nt),ve.uniforms=We.uniforms;const Mt=ve.uniforms;return(!j.isShaderMaterial&&!j.isRawShaderMaterial||j.clipping===!0)&&(Mt.clippingPlanes=pt.uniform),Al(j,We),ve.needsLights=Ja(j),ve.lightsStateVersion=mt,ve.needsLights&&(Mt.ambientLightColor.value=ue.state.ambient,Mt.lightProbe.value=ue.state.probe,Mt.directionalLights.value=ue.state.directional,Mt.directionalLightShadows.value=ue.state.directionalShadow,Mt.spotLights.value=ue.state.spot,Mt.spotLightShadows.value=ue.state.spotShadow,Mt.rectAreaLights.value=ue.state.rectArea,Mt.ltc_1.value=ue.state.rectAreaLTC1,Mt.ltc_2.value=ue.state.rectAreaLTC2,Mt.pointLights.value=ue.state.point,Mt.pointLightShadows.value=ue.state.pointShadow,Mt.hemisphereLights.value=ue.state.hemi,Mt.directionalShadowMap.value=ue.state.directionalShadowMap,Mt.directionalShadowMatrix.value=ue.state.directionalShadowMatrix,Mt.spotShadowMap.value=ue.state.spotShadowMap,Mt.spotLightMatrix.value=ue.state.spotLightMatrix,Mt.spotLightMap.value=ue.state.spotLightMap,Mt.pointShadowMap.value=ue.state.pointShadowMap,Mt.pointShadowMatrix.value=ue.state.pointShadowMatrix),ve.currentProgram=Nt,ve.uniformsList=null,Nt}function Lo(j){if(j.uniformsList===null){const re=j.currentProgram.getUniforms();j.uniformsList=Ux.seqWithValue(re.seq,j.uniforms)}return j.uniformsList}function Al(j,re){const _e=k.get(j);_e.outputColorSpace=re.outputColorSpace,_e.batching=re.batching,_e.batchingColor=re.batchingColor,_e.instancing=re.instancing,_e.instancingColor=re.instancingColor,_e.instancingMorph=re.instancingMorph,_e.skinning=re.skinning,_e.morphTargets=re.morphTargets,_e.morphNormals=re.morphNormals,_e.morphColors=re.morphColors,_e.morphTargetsCount=re.morphTargetsCount,_e.numClippingPlanes=re.numClippingPlanes,_e.numIntersection=re.numClipIntersection,_e.vertexAlphas=re.vertexAlphas,_e.vertexTangents=re.vertexTangents,_e.toneMapping=re.toneMapping}function na(j,re,_e,ve,ue){re.isScene!==!0&&(re=je),se.resetTextureUnits();const Ye=re.fog,mt=ve.isMeshStandardMaterial?re.environment:null,We=J===null?O.outputColorSpace:J.isXRRenderTarget===!0?J.texture.colorSpace:Ru,yt=(ve.isMeshStandardMaterial?Ue:Me).get(ve.envMap||mt),bt=ve.vertexColors===!0&&!!_e.attributes.color&&_e.attributes.color.itemSize===4,Nt=!!_e.attributes.tangent&&(!!ve.normalMap||ve.anisotropy>0),Mt=!!_e.morphAttributes.position,Ot=!!_e.morphAttributes.normal,En=!!_e.morphAttributes.color;let jn=Wa;ve.toneMapped&&(J===null||J.isXRRenderTarget===!0)&&(jn=O.toneMapping);const zn=_e.morphAttributes.position||_e.morphAttributes.normal||_e.morphAttributes.color,Xt=zn!==void 0?zn.length:0,ot=k.get(ve),Sn=P.state.lights;if(ht===!0&&(tn===!0||j!==he)){const Xi=j===he&&ve.id===ae;pt.setState(ve,j,Xi)}let Ft=!1;ve.version===ot.__version?(ot.needsLights&&ot.lightsStateVersion!==Sn.state.version||ot.outputColorSpace!==We||ue.isBatchedMesh&&ot.batching===!1||!ue.isBatchedMesh&&ot.batching===!0||ue.isBatchedMesh&&ot.batchingColor===!0&&ue.colorTexture===null||ue.isBatchedMesh&&ot.batchingColor===!1&&ue.colorTexture!==null||ue.isInstancedMesh&&ot.instancing===!1||!ue.isInstancedMesh&&ot.instancing===!0||ue.isSkinnedMesh&&ot.skinning===!1||!ue.isSkinnedMesh&&ot.skinning===!0||ue.isInstancedMesh&&ot.instancingColor===!0&&ue.instanceColor===null||ue.isInstancedMesh&&ot.instancingColor===!1&&ue.instanceColor!==null||ue.isInstancedMesh&&ot.instancingMorph===!0&&ue.morphTexture===null||ue.isInstancedMesh&&ot.instancingMorph===!1&&ue.morphTexture!==null||ot.envMap!==yt||ve.fog===!0&&ot.fog!==Ye||ot.numClippingPlanes!==void 0&&(ot.numClippingPlanes!==pt.numPlanes||ot.numIntersection!==pt.numIntersection)||ot.vertexAlphas!==bt||ot.vertexTangents!==Nt||ot.morphTargets!==Mt||ot.morphNormals!==Ot||ot.morphColors!==En||ot.toneMapping!==jn||ot.morphTargetsCount!==Xt)&&(Ft=!0):(Ft=!0,ot.__version=ve.version);let Ci=ot.currentProgram;Ft===!0&&(Ci=sr(ve,re,ue));let ia=!1,$n=!1,bs=!1;const Rn=Ci.getUniforms(),ki=ot.uniforms;if(Ze.useProgram(Ci.program)&&(ia=!0,$n=!0,bs=!0),ve.id!==ae&&(ae=ve.id,$n=!0),ia||he!==j){Ze.buffers.depth.getReversed()&&j.reversedDepth!==!0&&(j._reversedDepth=!0,j.updateProjectionMatrix()),Rn.setValue($,"projectionMatrix",j.projectionMatrix),Rn.setValue($,"viewMatrix",j.matrixWorldInverse);const qi=Rn.map.cameraPosition;qi!==void 0&&qi.setValue($,Pt.setFromMatrixPosition(j.matrixWorld)),At.logarithmicDepthBuffer&&Rn.setValue($,"logDepthBufFC",2/(Math.log(j.far+1)/Math.LN2)),(ve.isMeshPhongMaterial||ve.isMeshToonMaterial||ve.isMeshLambertMaterial||ve.isMeshBasicMaterial||ve.isMeshStandardMaterial||ve.isShaderMaterial)&&Rn.setValue($,"isOrthographic",j.isOrthographicCamera===!0),he!==j&&(he=j,$n=!0,bs=!0)}if(ot.needsLights&&(Sn.state.directionalShadowMap.length>0&&Rn.setValue($,"directionalShadowMap",Sn.state.directionalShadowMap,se),Sn.state.spotShadowMap.length>0&&Rn.setValue($,"spotShadowMap",Sn.state.spotShadowMap,se),Sn.state.pointShadowMap.length>0&&Rn.setValue($,"pointShadowMap",Sn.state.pointShadowMap,se)),ue.isSkinnedMesh){Rn.setOptional($,ue,"bindMatrix"),Rn.setOptional($,ue,"bindMatrixInverse");const Xi=ue.skeleton;Xi&&(Xi.boneTexture===null&&Xi.computeBoneTexture(),Rn.setValue($,"boneTexture",Xi.boneTexture,se))}ue.isBatchedMesh&&(Rn.setOptional($,ue,"batchingTexture"),Rn.setValue($,"batchingTexture",ue._matricesTexture,se),Rn.setOptional($,ue,"batchingIdTexture"),Rn.setValue($,"batchingIdTexture",ue._indirectTexture,se),Rn.setOptional($,ue,"batchingColorTexture"),ue._colorsTexture!==null&&Rn.setValue($,"batchingColorTexture",ue._colorsTexture,se));const Ri=_e.morphAttributes;if((Ri.position!==void 0||Ri.normal!==void 0||Ri.color!==void 0)&&Jt.update(ue,_e,Ci),($n||ot.receiveShadow!==ue.receiveShadow)&&(ot.receiveShadow=ue.receiveShadow,Rn.setValue($,"receiveShadow",ue.receiveShadow)),ve.isMeshGouraudMaterial&&ve.envMap!==null&&(ki.envMap.value=yt,ki.flipEnvMap.value=yt.isCubeTexture&&yt.isRenderTargetTexture===!1?-1:1),ve.isMeshStandardMaterial&&ve.envMap===null&&re.environment!==null&&(ki.envMapIntensity.value=re.environmentIntensity),ki.dfgLUT!==void 0&&(ki.dfgLUT.value=sZ()),$n&&(Rn.setValue($,"toneMappingExposure",O.toneMappingExposure),ot.needsLights&&Ka(ki,bs),Ye&&ve.fog===!0&&Dt.refreshFogUniforms(ki,Ye),Dt.refreshMaterialUniforms(ki,ve,Ae,oe,P.state.transmissionRenderTarget[j.id]),Ux.upload($,Lo(ot),ki,se)),ve.isShaderMaterial&&ve.uniformsNeedUpdate===!0&&(Ux.upload($,Lo(ot),ki,se),ve.uniformsNeedUpdate=!1),ve.isSpriteMaterial&&Rn.setValue($,"center",ue.center),Rn.setValue($,"modelViewMatrix",ue.modelViewMatrix),Rn.setValue($,"normalMatrix",ue.normalMatrix),Rn.setValue($,"modelMatrix",ue.matrixWorld),ve.isShaderMaterial||ve.isRawShaderMaterial){const Xi=ve.uniformsGroups;for(let qi=0,Cl=Xi.length;qi<Cl;qi++){const Cr=Xi[qi];He.update(Cr,Ci),He.bind(Cr,Ci)}}return Ci}function Ka(j,re){j.ambientLightColor.needsUpdate=re,j.lightProbe.needsUpdate=re,j.directionalLights.needsUpdate=re,j.directionalLightShadows.needsUpdate=re,j.pointLights.needsUpdate=re,j.pointLightShadows.needsUpdate=re,j.spotLights.needsUpdate=re,j.spotLightShadows.needsUpdate=re,j.rectAreaLights.needsUpdate=re,j.hemisphereLights.needsUpdate=re}function Ja(j){return j.isMeshLambertMaterial||j.isMeshToonMaterial||j.isMeshPhongMaterial||j.isMeshStandardMaterial||j.isShadowMaterial||j.isShaderMaterial&&j.lights===!0}this.getActiveCubeFace=function(){return W},this.getActiveMipmapLevel=function(){return ee},this.getRenderTarget=function(){return J},this.setRenderTargetTextures=function(j,re,_e){const ve=k.get(j);ve.__autoAllocateDepthBuffer=j.resolveDepthBuffer===!1,ve.__autoAllocateDepthBuffer===!1&&(ve.__useRenderToTexture=!1),k.get(j.texture).__webglTexture=re,k.get(j.depthTexture).__webglTexture=ve.__autoAllocateDepthBuffer?void 0:_e,ve.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(j,re){const _e=k.get(j);_e.__webglFramebuffer=re,_e.__useDefaultFramebuffer=re===void 0};const Qa=$.createFramebuffer();this.setRenderTarget=function(j,re=0,_e=0){J=j,W=re,ee=_e;let ve=null,ue=!1,Ye=!1;if(j){const We=k.get(j);if(We.__useDefaultFramebuffer!==void 0){Ze.bindFramebuffer($.FRAMEBUFFER,We.__webglFramebuffer),Z.copy(j.viewport),K.copy(j.scissor),le=j.scissorTest,Ze.viewport(Z),Ze.scissor(K),Ze.setScissorTest(le),ae=-1;return}else if(We.__webglFramebuffer===void 0)se.setupRenderTarget(j);else if(We.__hasExternalTextures)se.rebindTextures(j,k.get(j.texture).__webglTexture,k.get(j.depthTexture).__webglTexture);else if(j.depthBuffer){const Nt=j.depthTexture;if(We.__boundDepthTexture!==Nt){if(Nt!==null&&k.has(Nt)&&(j.width!==Nt.image.width||j.height!==Nt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");se.setupDepthRenderbuffer(j)}}const yt=j.texture;(yt.isData3DTexture||yt.isDataArrayTexture||yt.isCompressedArrayTexture)&&(Ye=!0);const bt=k.get(j).__webglFramebuffer;j.isWebGLCubeRenderTarget?(Array.isArray(bt[re])?ve=bt[re][_e]:ve=bt[re],ue=!0):j.samples>0&&se.useMultisampledRTT(j)===!1?ve=k.get(j).__webglMultisampledFramebuffer:Array.isArray(bt)?ve=bt[_e]:ve=bt,Z.copy(j.viewport),K.copy(j.scissor),le=j.scissorTest}else Z.copy(de).multiplyScalar(Ae).floor(),K.copy(Ce).multiplyScalar(Ae).floor(),le=et;if(_e!==0&&(ve=Qa),Ze.bindFramebuffer($.FRAMEBUFFER,ve)&&Ze.drawBuffers(j,ve),Ze.viewport(Z),Ze.scissor(K),Ze.setScissorTest(le),ue){const We=k.get(j.texture);$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_CUBE_MAP_POSITIVE_X+re,We.__webglTexture,_e)}else if(Ye){const We=re;for(let yt=0;yt<j.textures.length;yt++){const bt=k.get(j.textures[yt]);$.framebufferTextureLayer($.FRAMEBUFFER,$.COLOR_ATTACHMENT0+yt,bt.__webglTexture,_e,We)}}else if(j!==null&&_e!==0){const We=k.get(j.texture);$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,We.__webglTexture,_e)}ae=-1},this.readRenderTargetPixels=function(j,re,_e,ve,ue,Ye,mt,We=0){if(!(j&&j.isWebGLRenderTarget)){Rt("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let yt=k.get(j).__webglFramebuffer;if(j.isWebGLCubeRenderTarget&&mt!==void 0&&(yt=yt[mt]),yt){Ze.bindFramebuffer($.FRAMEBUFFER,yt);try{const bt=j.textures[We],Nt=bt.format,Mt=bt.type;if(!At.textureFormatReadable(Nt)){Rt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!At.textureTypeReadable(Mt)){Rt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}re>=0&&re<=j.width-ve&&_e>=0&&_e<=j.height-ue&&(j.textures.length>1&&$.readBuffer($.COLOR_ATTACHMENT0+We),$.readPixels(re,_e,ve,ue,Xe.convert(Nt),Xe.convert(Mt),Ye))}finally{const bt=J!==null?k.get(J).__webglFramebuffer:null;Ze.bindFramebuffer($.FRAMEBUFFER,bt)}}},this.readRenderTargetPixelsAsync=async function(j,re,_e,ve,ue,Ye,mt,We=0){if(!(j&&j.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let yt=k.get(j).__webglFramebuffer;if(j.isWebGLCubeRenderTarget&&mt!==void 0&&(yt=yt[mt]),yt)if(re>=0&&re<=j.width-ve&&_e>=0&&_e<=j.height-ue){Ze.bindFramebuffer($.FRAMEBUFFER,yt);const bt=j.textures[We],Nt=bt.format,Mt=bt.type;if(!At.textureFormatReadable(Nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!At.textureTypeReadable(Mt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ot=$.createBuffer();$.bindBuffer($.PIXEL_PACK_BUFFER,Ot),$.bufferData($.PIXEL_PACK_BUFFER,Ye.byteLength,$.STREAM_READ),j.textures.length>1&&$.readBuffer($.COLOR_ATTACHMENT0+We),$.readPixels(re,_e,ve,ue,Xe.convert(Nt),Xe.convert(Mt),0);const En=J!==null?k.get(J).__webglFramebuffer:null;Ze.bindFramebuffer($.FRAMEBUFFER,En);const jn=$.fenceSync($.SYNC_GPU_COMMANDS_COMPLETE,0);return $.flush(),await d9($,jn,4),$.bindBuffer($.PIXEL_PACK_BUFFER,Ot),$.getBufferSubData($.PIXEL_PACK_BUFFER,0,Ye),$.deleteBuffer(Ot),$.deleteSync(jn),Ye}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(j,re=null,_e=0){const ve=Math.pow(2,-_e),ue=Math.floor(j.image.width*ve),Ye=Math.floor(j.image.height*ve),mt=re!==null?re.x:0,We=re!==null?re.y:0;se.setTexture2D(j,0),$.copyTexSubImage2D($.TEXTURE_2D,_e,0,0,mt,We,ue,Ye),Ze.unbindTexture()};const Po=$.createFramebuffer(),ga=$.createFramebuffer();this.copyTextureToTexture=function(j,re,_e=null,ve=null,ue=0,Ye=null){Ye===null&&(ue!==0?(up("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ye=ue,ue=0):Ye=0);let mt,We,yt,bt,Nt,Mt,Ot,En,jn;const zn=j.isCompressedTexture?j.mipmaps[Ye]:j.image;if(_e!==null)mt=_e.max.x-_e.min.x,We=_e.max.y-_e.min.y,yt=_e.isBox3?_e.max.z-_e.min.z:1,bt=_e.min.x,Nt=_e.min.y,Mt=_e.isBox3?_e.min.z:0;else{const Ri=Math.pow(2,-ue);mt=Math.floor(zn.width*Ri),We=Math.floor(zn.height*Ri),j.isDataArrayTexture?yt=zn.depth:j.isData3DTexture?yt=Math.floor(zn.depth*Ri):yt=1,bt=0,Nt=0,Mt=0}ve!==null?(Ot=ve.x,En=ve.y,jn=ve.z):(Ot=0,En=0,jn=0);const Xt=Xe.convert(re.format),ot=Xe.convert(re.type);let Sn;re.isData3DTexture?(se.setTexture3D(re,0),Sn=$.TEXTURE_3D):re.isDataArrayTexture||re.isCompressedArrayTexture?(se.setTexture2DArray(re,0),Sn=$.TEXTURE_2D_ARRAY):(se.setTexture2D(re,0),Sn=$.TEXTURE_2D),$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,re.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,re.unpackAlignment);const Ft=$.getParameter($.UNPACK_ROW_LENGTH),Ci=$.getParameter($.UNPACK_IMAGE_HEIGHT),ia=$.getParameter($.UNPACK_SKIP_PIXELS),$n=$.getParameter($.UNPACK_SKIP_ROWS),bs=$.getParameter($.UNPACK_SKIP_IMAGES);$.pixelStorei($.UNPACK_ROW_LENGTH,zn.width),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,zn.height),$.pixelStorei($.UNPACK_SKIP_PIXELS,bt),$.pixelStorei($.UNPACK_SKIP_ROWS,Nt),$.pixelStorei($.UNPACK_SKIP_IMAGES,Mt);const Rn=j.isDataArrayTexture||j.isData3DTexture,ki=re.isDataArrayTexture||re.isData3DTexture;if(j.isDepthTexture){const Ri=k.get(j),Xi=k.get(re),qi=k.get(Ri.__renderTarget),Cl=k.get(Xi.__renderTarget);Ze.bindFramebuffer($.READ_FRAMEBUFFER,qi.__webglFramebuffer),Ze.bindFramebuffer($.DRAW_FRAMEBUFFER,Cl.__webglFramebuffer);for(let Cr=0;Cr<yt;Cr++)Rn&&($.framebufferTextureLayer($.READ_FRAMEBUFFER,$.COLOR_ATTACHMENT0,k.get(j).__webglTexture,ue,Mt+Cr),$.framebufferTextureLayer($.DRAW_FRAMEBUFFER,$.COLOR_ATTACHMENT0,k.get(re).__webglTexture,Ye,jn+Cr)),$.blitFramebuffer(bt,Nt,mt,We,Ot,En,mt,We,$.DEPTH_BUFFER_BIT,$.NEAREST);Ze.bindFramebuffer($.READ_FRAMEBUFFER,null),Ze.bindFramebuffer($.DRAW_FRAMEBUFFER,null)}else if(ue!==0||j.isRenderTargetTexture||k.has(j)){const Ri=k.get(j),Xi=k.get(re);Ze.bindFramebuffer($.READ_FRAMEBUFFER,Po),Ze.bindFramebuffer($.DRAW_FRAMEBUFFER,ga);for(let qi=0;qi<yt;qi++)Rn?$.framebufferTextureLayer($.READ_FRAMEBUFFER,$.COLOR_ATTACHMENT0,Ri.__webglTexture,ue,Mt+qi):$.framebufferTexture2D($.READ_FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,Ri.__webglTexture,ue),ki?$.framebufferTextureLayer($.DRAW_FRAMEBUFFER,$.COLOR_ATTACHMENT0,Xi.__webglTexture,Ye,jn+qi):$.framebufferTexture2D($.DRAW_FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,Xi.__webglTexture,Ye),ue!==0?$.blitFramebuffer(bt,Nt,mt,We,Ot,En,mt,We,$.COLOR_BUFFER_BIT,$.NEAREST):ki?$.copyTexSubImage3D(Sn,Ye,Ot,En,jn+qi,bt,Nt,mt,We):$.copyTexSubImage2D(Sn,Ye,Ot,En,bt,Nt,mt,We);Ze.bindFramebuffer($.READ_FRAMEBUFFER,null),Ze.bindFramebuffer($.DRAW_FRAMEBUFFER,null)}else ki?j.isDataTexture||j.isData3DTexture?$.texSubImage3D(Sn,Ye,Ot,En,jn,mt,We,yt,Xt,ot,zn.data):re.isCompressedArrayTexture?$.compressedTexSubImage3D(Sn,Ye,Ot,En,jn,mt,We,yt,Xt,zn.data):$.texSubImage3D(Sn,Ye,Ot,En,jn,mt,We,yt,Xt,ot,zn):j.isDataTexture?$.texSubImage2D($.TEXTURE_2D,Ye,Ot,En,mt,We,Xt,ot,zn.data):j.isCompressedTexture?$.compressedTexSubImage2D($.TEXTURE_2D,Ye,Ot,En,zn.width,zn.height,Xt,zn.data):$.texSubImage2D($.TEXTURE_2D,Ye,Ot,En,mt,We,Xt,ot,zn);$.pixelStorei($.UNPACK_ROW_LENGTH,Ft),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,Ci),$.pixelStorei($.UNPACK_SKIP_PIXELS,ia),$.pixelStorei($.UNPACK_SKIP_ROWS,$n),$.pixelStorei($.UNPACK_SKIP_IMAGES,bs),Ye===0&&re.generateMipmaps&&$.generateMipmap(Sn),Ze.unbindTexture()},this.initRenderTarget=function(j){k.get(j).__webglFramebuffer===void 0&&se.setupRenderTarget(j)},this.initTexture=function(j){j.isCubeTexture?se.setTextureCube(j,0):j.isData3DTexture?se.setTexture3D(j,0):j.isDataArrayTexture||j.isCompressedArrayTexture?se.setTexture2DArray(j,0):se.setTexture2D(j,0),Ze.unbindTexture()},this.resetState=function(){W=0,ee=0,J=null,Ze.reset(),lt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return fa}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Tn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Tn._getUnpackColorSpace()}}const rZ=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:pb,AddEquation:xu,AddOperation:tL,AdditiveAnimationBlendMode:xT,AdditiveBlending:t_,AgXToneMapping:uT,AlphaFormat:vT,AlwaysCompare:dL,AlwaysDepth:r_,AlwaysStencilFunc:WM,AmbientLight:oP,AnimationAction:mP,AnimationClip:m0,AnimationLoader:nj,AnimationMixer:Dj,AnimationObjectGroup:Rj,AnimationUtils:JH,ArcCurve:PL,ArrayCamera:hP,ArrowHelper:iG,AttachedBindMode:GM,Audio:dP,AudioAnalyser:xj,AudioContext:XT,AudioListener:gj,AudioLoader:dj,AxesHelper:sG,BackSide:Tr,BasicDepthPacking:aL,BasicShadowMap:UI,BatchedMesh:CL,Bone:AT,BooleanKeyframeTrack:dh,Box2:Vj,Box3:Qs,Box3Helper:tG,BoxGeometry:hh,BoxHelper:eG,BufferAttribute:Yn,BufferGeometry:Kt,BufferGeometryLoader:fP,ByteType:dT,Cache:pl,Camera:Ab,CameraHelper:Qj,CanvasTexture:bH,CapsuleGeometry:Pb,CatmullRomCurve3:UL,CineonToneMapping:lT,CircleGeometry:Ub,ClampToEdgeWrapping:Kr,Clock:qT,Color:vt,ColorKeyframeTrack:HT,ColorManagement:Tn,CompressedArrayTexture:xH,CompressedCubeTexture:_H,CompressedTexture:Lb,CompressedTextureLoader:ij,ConeGeometry:I0,ConstantAlphaFactor:JI,ConstantColorFactor:$I,Controls:aG,CubeCamera:SL,CubeDepthTexture:IL,CubeReflectionMapping:xl,CubeRefractionMapping:Cu,CubeTexture:N0,CubeTextureLoader:sj,CubeUVReflectionMapping:wp,CubicBezierCurve:DT,CubicBezierCurve3:OL,CubicInterpolant:QL,CullFaceBack:VM,CullFaceFront:PI,CullFaceFrontBack:M2,CullFaceNone:LI,Curve:Co,CurvePath:kL,CustomBlending:OI,CustomToneMapping:cT,CylinderGeometry:D0,Cylindrical:Bj,Data3DTexture:Eb,DataArrayTexture:Tb,DataTexture:Ao,DataTextureLoader:rj,DataUtils:G9,DecrementStencilOp:V2,DecrementWrapStencilOp:j2,DefaultLoadingManager:nP,DepthFormat:bl,DepthStencilFormat:Su,DepthTexture:mp,DetachedBindMode:nL,DirectionalLight:aP,DirectionalLightHelper:Jj,DiscreteInterpolant:eP,DodecahedronGeometry:Ob,DoubleSide:hl,DstAlphaFactor:WI,DstColorFactor:qI,DynamicCopyUsage:s9,DynamicDrawUsage:J2,DynamicReadUsage:t9,EdgesGeometry:LL,EllipseCurve:zb,EqualCompare:uL,EqualDepth:o_,EqualStencilFunc:q2,EquirectangularReflectionMapping:e0,EquirectangularRefractionMapping:t0,Euler:pa,EventDispatcher:Sl,ExternalTexture:RT,ExtrudeGeometry:kb,FileLoader:yc,Float16BufferAttribute:K9,Float32BufferAttribute:St,FloatType:wr,Fog:Rb,FogExp2:Cb,FramebufferTexture:yH,FrontSide:vc,Frustum:Ep,FrustumArray:Ib,GLBufferAttribute:Oj,GLSL1:a9,GLSL3:XM,GreaterCompare:fL,GreaterDepth:c_,GreaterEqualCompare:wb,GreaterEqualDepth:l_,GreaterEqualStencilFunc:K2,GreaterStencilFunc:Y2,GridHelper:$j,Group:Qd,HalfFloatType:_l,HemisphereLight:iP,HemisphereLightHelper:Yj,IcosahedronGeometry:Fb,ImageBitmapLoader:hj,ImageLoader:g0,ImageUtils:yL,IncrementStencilOp:B2,IncrementWrapStencilOp:H2,InstancedBufferAttribute:pp,InstancedBufferGeometry:uP,InstancedInterleavedBuffer:Uj,InstancedMesh:AL,Int16BufferAttribute:Y9,Int32BufferAttribute:$9,Int8BufferAttribute:X9,IntType:gb,InterleavedBuffer:Nb,InterleavedBufferAttribute:oh,Interpolant:U0,InterpolateDiscrete:s0,InterpolateLinear:j_,InterpolateSmooth:Lx,InterpolationSamplingMode:c9,InterpolationSamplingType:l9,InvertStencilOp:G2,KeepStencilOp:Vf,KeyframeTrack:Ya,LOD:TL,LatheGeometry:Bb,Layers:hp,LessCompare:cL,LessDepth:a_,LessEqualCompare:Mb,LessEqualDepth:rh,LessEqualStencilFunc:Z2,LessStencilFunc:X2,Light:ku,LightProbe:cP,Line:Du,Line3:Gj,LineBasicMaterial:Er,LineCurve:IT,LineCurve3:zL,LineDashedMaterial:KL,LineLoop:RL,LineSegments:Ml,LinearFilter:hi,LinearInterpolant:VT,LinearMipMapLinearFilter:A2,LinearMipMapNearestFilter:E2,LinearMipmapLinearFilter:dl,LinearMipmapNearestFilter:zg,LinearSRGBColorSpace:Ru,LinearToneMapping:aT,LinearTransfer:a0,Loader:ta,LoaderUtils:KM,LoadingManager:jT,LoopOnce:iL,LoopPingPong:rL,LoopRepeat:sL,MOUSE:b2,Material:er,MaterialLoader:qb,MathUtils:vL,Matrix2:KT,Matrix3:en,Matrix4:Wt,MaxEquation:BI,Mesh:ns,MeshBasicMaterial:Ou,MeshDepthMaterial:kT,MeshDistanceMaterial:FT,MeshLambertMaterial:YL,MeshMatcapMaterial:$L,MeshNormalMaterial:ZL,MeshPhongMaterial:XL,MeshPhysicalMaterial:WL,MeshStandardMaterial:zT,MeshToonMaterial:qL,MinEquation:FI,MirroredRepeatWrapping:i0,MixOperation:eL,MultiplyBlending:jM,MultiplyOperation:C0,NearestFilter:Wi,NearestMipMapLinearFilter:T2,NearestMipMapNearestFilter:w2,NearestMipmapLinearFilter:Kd,NearestMipmapNearestFilter:hT,NeutralToneMapping:fT,NeverCompare:lL,NeverDepth:s_,NeverStencilFunc:W2,NoBlending:gl,NoColorSpace:fc,NoNormalPacking:U2,NoToneMapping:Wa,NormalAnimationBlendMode:Sb,NormalBlending:Jf,NormalGAPacking:z2,NormalRGPacking:O2,NotEqualCompare:hL,NotEqualDepth:u_,NotEqualStencilFunc:$2,NumberKeyframeTrack:d0,Object3D:Dn,ObjectLoader:uj,ObjectSpaceNormalMap:oL,OctahedronGeometry:L0,OneFactor:HI,OneMinusConstantAlphaFactor:QI,OneMinusConstantColorFactor:KI,OneMinusDstAlphaFactor:XI,OneMinusDstColorFactor:ZI,OneMinusSrcAlphaFactor:i_,OneMinusSrcColorFactor:GI,OrthographicCamera:Cp,PCFShadowMap:np,PCFSoftShadowMap:Og,PMREMGenerator:ew,Path:q_,PerspectiveCamera:_s,Plane:vu,PlaneGeometry:Ap,PlaneHelper:nG,PointLight:rP,PointLightHelper:qj,Points:NL,PointsMaterial:CT,PolarGridHelper:Kj,PolyhedronGeometry:zu,PositionalAudio:yj,PropertyBinding:Nn,PropertyMixer:pP,QuadraticBezierCurve:LT,QuadraticBezierCurve3:PT,Quaternion:Qr,QuaternionKeyframeTrack:O0,QuaternionLinearInterpolant:tP,R11_EAC_Format:y_,RED_GREEN_RGTC2_Format:V_,RED_RGTC1_Format:F_,REVISION:db,RG11_EAC_Format:__,RGBADepthPacking:I2,RGBAFormat:Js,RGBAIntegerFormat:bb,RGBA_ASTC_10x10_Format:L_,RGBA_ASTC_10x5_Format:N_,RGBA_ASTC_10x6_Format:D_,RGBA_ASTC_10x8_Format:I_,RGBA_ASTC_12x10_Format:P_,RGBA_ASTC_12x12_Format:U_,RGBA_ASTC_4x4_Format:S_,RGBA_ASTC_5x4_Format:M_,RGBA_ASTC_5x5_Format:w_,RGBA_ASTC_6x5_Format:T_,RGBA_ASTC_6x6_Format:E_,RGBA_ASTC_8x5_Format:A_,RGBA_ASTC_8x6_Format:C_,RGBA_ASTC_8x8_Format:R_,RGBA_BPTC_Format:O_,RGBA_ETC2_EAC_Format:v_,RGBA_PVRTC_2BPPV1_Format:p_,RGBA_PVRTC_4BPPV1_Format:d_,RGBA_S3TC_DXT1_Format:Fg,RGBA_S3TC_DXT3_Format:Bg,RGBA_S3TC_DXT5_Format:Vg,RGBDepthPacking:L2,RGBFormat:yT,RGBIntegerFormat:C2,RGB_BPTC_SIGNED_Format:z_,RGB_BPTC_UNSIGNED_Format:k_,RGB_ETC1_Format:m_,RGB_ETC2_Format:g_,RGB_PVRTC_2BPPV1_Format:h_,RGB_PVRTC_4BPPV1_Format:f_,RGB_S3TC_DXT1_Format:kg,RGDepthPacking:P2,RGFormat:ah,RGIntegerFormat:_b,RawShaderMaterial:OT,Ray:Tp,Raycaster:gP,RectAreaLight:lP,RedFormat:xb,RedIntegerFormat:R0,ReinhardToneMapping:oT,RenderTarget:bT,RenderTarget3D:Ij,RepeatWrapping:n0,ReplaceStencilOp:F2,ReverseSubtractEquation:kI,RingGeometry:Vb,SIGNED_R11_EAC_Format:x_,SIGNED_RED_GREEN_RGTC2_Format:H_,SIGNED_RED_RGTC1_Format:B_,SIGNED_RG11_EAC_Format:b_,SRGBColorSpace:$s,SRGBTransfer:Bn,Scene:TT,ShaderChunk:ln,ShaderLib:wo,ShaderMaterial:qa,ShadowMaterial:GL,Shape:eh,ShapeGeometry:Hb,ShapePath:rG,ShapeUtils:Eo,ShortType:pT,Skeleton:Db,SkeletonHelper:Xj,SkinnedMesh:EL,Source:Mu,Sphere:Ls,SphereGeometry:P0,Spherical:Fj,SphericalHarmonics3:WT,SplineCurve:UT,SpotLight:sP,SpotLightHelper:Wj,Sprite:wL,SpriteMaterial:ET,SrcAlphaFactor:n_,SrcAlphaSaturateFactor:YI,SrcColorFactor:jI,StaticCopyUsage:i9,StaticDrawUsage:o0,StaticReadUsage:e9,StereoCamera:pj,StreamCopyUsage:r9,StreamDrawUsage:Q2,StreamReadUsage:n9,StringKeyframeTrack:ph,SubtractEquation:zI,SubtractiveBlending:HM,TOUCH:S2,TangentSpaceNormalMap:Uu,TetrahedronGeometry:jb,Texture:Oi,TextureLoader:aj,TextureUtils:fG,Timer:zj,TimestampQuery:o9,TorusGeometry:Gb,TorusKnotGeometry:Wb,Triangle:$r,TriangleFanDrawMode:D2,TriangleStripDrawMode:N2,TrianglesDrawMode:R2,TubeGeometry:Xb,UVMapping:mb,Uint16BufferAttribute:ST,Uint32BufferAttribute:MT,Uint8BufferAttribute:q9,Uint8ClampedBufferAttribute:Z9,Uniform:$T,UniformsGroup:Pj,UniformsLib:ut,UniformsUtils:bL,UnsignedByteType:xr,UnsignedInt101111Type:gT,UnsignedInt248Type:lp,UnsignedInt5999Type:mT,UnsignedIntType:Xa,UnsignedShort4444Type:vb,UnsignedShort5551Type:yb,UnsignedShortType:op,VSMShadowMap:Xf,Vector2:Be,Vector3:Y,Vector4:Jn,VectorKeyframeTrack:p0,VideoFrameTexture:vH,VideoTexture:DL,WebGL3DRenderTarget:P9,WebGLArrayRenderTarget:L9,WebGLCoordinateSystem:fa,WebGLCubeRenderTarget:wT,WebGLRenderTarget:da,WebGLRenderer:wP,WebGLUtils:MP,WebGPUCoordinateSystem:cp,WebXRController:Px,WireframeGeometry:jL,WrapAroundEnding:r0,ZeroCurvatureEnding:qf,ZeroFactor:VI,ZeroSlopeEnding:Zf,ZeroStencilOp:k2,createCanvasElement:gL,error:Rt,getConsoleFunction:h9,log:c0,setConsoleFunction:f9,warn:ct,warnOnce:up},Symbol.toStringTag,{value:"Module"}));var Z1={exports:{}},Y1={},$1={exports:{}},K1={};var wR;function aZ(){if(wR)return K1;wR=1;var n=M0();function e(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,s=n.useEffect,a=n.useLayoutEffect,l=n.useDebugValue;function u(y,x){var _=x(),w=i({inst:{value:_,getSnapshot:x}}),A=w[0].inst,E=w[1];return a(function(){A.value=_,A.getSnapshot=x,d(A)&&E({inst:A})},[y,_,x]),s(function(){return d(A)&&E({inst:A}),y(function(){d(A)&&E({inst:A})})},[y]),l(_),_}function d(y){var x=y.getSnapshot;y=y.value;try{var _=x();return!t(y,_)}catch{return!0}}function p(y,x){return x()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return K1.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,K1}var TR;function oZ(){return TR||(TR=1,$1.exports=aZ()),$1.exports}var ER;function lZ(){if(ER)return Y1;ER=1;var n=M0(),e=oZ();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var i=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,a=n.useRef,l=n.useEffect,u=n.useMemo,d=n.useDebugValue;return Y1.useSyncExternalStoreWithSelector=function(p,g,y,x,_){var w=a(null);if(w.current===null){var A={hasValue:!1,value:null};w.current=A}else A=w.current;w=u(function(){function M(z){if(!D){if(D=!0,L=z,z=x(z),_!==void 0&&A.hasValue){var B=A.value;if(_(B,z))return N=B}return N=z}if(B=N,i(L,z))return B;var V=x(z);return _!==void 0&&_(B,V)?(L=z,B):(L=z,N=V)}var D=!1,L,N,P=y===void 0?null:y;return[function(){return M(g())},P===null?void 0:function(){return M(P())}]},[g,y,x,_]);var E=s(p,w[0],w[1]);return l(function(){A.hasValue=!0,A.value=E},[E]),d(E),E},Y1}var AR;function cZ(){return AR||(AR=1,Z1.exports=lZ()),Z1.exports}var uZ=cZ();const fZ=sb(uZ),{useSyncExternalStoreWithSelector:hZ}=fZ,dZ=n=>n;function pZ(n,e=dZ,t){const i=hZ(n.subscribe,n.getState,n.getInitialState,e,t);return jf.useDebugValue(i),i}const CR=(n,e)=>{const t=yN(n),i=(s,a=e)=>pZ(t,s,a);return Object.assign(i,t),i},mZ=((n,e)=>n?CR(n,e):CR);var iw=oN();const gZ=sb(iw);function JT(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const s=JT(i,e,t);if(s)return s;i=e?null:i.sibling}}function TP(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const QT=TP(pe.createContext(null));let EP=class extends pe.Component{render(){return pe.createElement(QT.Provider,{value:this._reactInternals},this.props.children)}};function AP(){const n=pe.useContext(QT);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=pe.useId();return pe.useMemo(()=>{for(const t of[n,n?.alternate]){if(!t)continue;const i=JT(t,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[n,e])}const vZ=Symbol.for("react.context"),yZ=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===vZ;function xZ(){const n=AP(),[e]=pe.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;yZ(i)&&i!==QT&&!e.has(i)&&e.set(i,pe.use(TP(i))),t=t.return}return e}function _Z(){const n=xZ();return pe.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>pe.createElement(e,null,pe.createElement(t.Provider,{...i,value:n.get(t)})),e=>pe.createElement(EP,{...e})),[n])}function CP(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const RP=n=>n&&n.isOrthographicCamera,bZ=n=>n&&n.hasOwnProperty("current"),SZ=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),z0=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?pe.useLayoutEffect:pe.useEffect;function NP(n){const e=pe.useRef(n);return z0(()=>{e.current=n},[n]),e}function MZ(){const n=AP(),e=_Z();return pe.useMemo(()=>({children:t})=>{const s=!!JT(n,!0,a=>a.type===pe.StrictMode)?pe.StrictMode:pe.Fragment;return R.jsx(s,{children:R.jsx(e,{children:t})})},[n,e])}function wZ({set:n}){return z0(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const TZ=(n=>(n=class extends pe.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function DP(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function Hd(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const wi={obj:n=>n===Object(n)&&!wi.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:s=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(wi.str(n)||wi.num(n)||wi.boo(n))return n===e;const a=wi.obj(n);if(a&&i==="reference")return n===e;const l=wi.arr(n);if(l&&t==="reference")return n===e;if((l||a)&&n===e)return!0;let u;for(u in n)if(!(u in e))return!1;if(a&&t==="shallow"&&i==="shallow"){for(u in s?e:n)if(!wi.equ(n[u],e[u],{strict:s,objects:"reference"}))return!1}else for(u in s?e:n)if(n[u]!==e[u])return!1;if(wi.und(u)){if(l&&n.length===0&&e.length===0||a&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function EZ(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const IP=["children","key","ref"];function AZ(n){const e={};for(const t in n)IP.includes(t)||(e[t]=n[t]);return e}function Z_(n,e,t,i){const s=n;let a=s?.__r3f;return a||(a={root:e,type:t,parent:null,children:[],props:AZ(i),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=a)),a}function v0(n,e){if(!e.includes("-"))return{root:n,key:e,target:n[e]};if(e in n)return{root:n,key:e,target:n[e]};let t=n;const i=e.split("-");for(const s of i){if(typeof t!="object"||t===null){if(t!==void 0){const a=i.slice(i.indexOf(s)).join("-");return{root:t,key:a,target:void 0}}return{root:n,key:e,target:void 0}}e=s,n=t,t=t[e]}return{root:n,key:e,target:t}}const RR=/-\d+$/;function Y_(n,e){if(wi.str(e.props.attach)){if(RR.test(e.props.attach)){const s=e.props.attach.replace(RR,""),{root:a,key:l}=v0(n.object,s);Array.isArray(a[l])||(a[l]=[])}const{root:t,key:i}=v0(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else wi.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function $_(n,e){if(wi.str(e.props.attach)){const{root:t,key:i}=v0(n.object,e.props.attach),s=e.previousAttach;s===void 0?delete t[i]:t[i]=s}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const sw=[...IP,"args","dispose","attach","object","onUpdate","dispose"],NR=new Map;function CZ(n){let e=NR.get(n.constructor);try{e||(e=new n.constructor,NR.set(n.constructor,e))}catch{}return e}function RZ(n,e){const t={};for(const i in e)if(!sw.includes(i)&&!wi.equ(e[i],n.props[i])){t[i]=e[i];for(const s in e)s.startsWith(`${i}-`)&&(t[s]=e[s])}for(const i in n.props){if(sw.includes(i)||e.hasOwnProperty(i))continue;const{root:s,key:a}=v0(n.object,i);if(s.constructor&&s.constructor.length===0){const l=CZ(s);wi.und(l)||(t[a]=l[a])}else t[a]=0}return t}const NZ=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],DZ=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function _u(n,e){var t;const i=n.__r3f,s=i&&CP(i).getState(),a=i?.eventCount;for(const u in e){let d=e[u];if(sw.includes(u))continue;if(i&&DZ.test(u)){typeof d=="function"?i.handlers[u]=d:delete i.handlers[u],i.eventCount=Object.keys(i.handlers).length;continue}if(d===void 0)continue;let{root:p,key:g,target:y}=v0(n,u);if(y===void 0&&(typeof p!="object"||p===null))throw Error(`R3F: Cannot set "${u}". Ensure it is an object before setting "${g}".`);if(y instanceof hp&&d instanceof hp)y.mask=d.mask;else if(y instanceof vt&&SZ(d))y.set(d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof y.copy=="function"&&d!=null&&d.constructor&&y.constructor===d.constructor)y.copy(d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&Array.isArray(d))typeof y.fromArray=="function"?y.fromArray(d):y.set(...d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof d=="number")typeof y.setScalar=="function"?y.setScalar(d):y.set(d);else{var l;p[g]=d,s&&!s.linear&&NZ.includes(g)&&(l=p[g])!=null&&l.isTexture&&p[g].format===Js&&p[g].type===xr&&(p[g].colorSpace=$s)}}if(i!=null&&i.parent&&s!=null&&s.internal&&(t=i.object)!=null&&t.isObject3D&&a!==i.eventCount){const u=i.object,d=s.internal.interaction.indexOf(u);d>-1&&s.internal.interaction.splice(d,1),i.eventCount&&u.raycast!==null&&s.internal.interaction.push(u)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&Np(i),n}function Np(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function IZ(n,e){n.manual||(RP(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const Yr=n=>n?.isObject3D;function Sx(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function LP(n,e,t,i){const s=t.get(e);s&&(t.delete(e),t.size===0&&(n.delete(i),s.target.releasePointerCapture(i)))}function LZ(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,s)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((i,s)=>{LP(t.capturedMap,e,i,s)})}function PZ(n){function e(d){const{internal:p}=n.getState(),g=d.offsetX-p.initialClick[0],y=d.offsetY-p.initialClick[1];return Math.round(Math.sqrt(g*g+y*y))}function t(d){return d.filter(p=>["Move","Over","Enter","Out","Leave"].some(g=>{var y;return(y=p.__r3f)==null?void 0:y.handlers["onPointer"+g]}))}function i(d,p){const g=n.getState(),y=new Set,x=[],_=p?p(g.internal.interaction):g.internal.interaction;for(let M=0;M<_.length;M++){const D=Hd(_[M]);D&&(D.raycaster.camera=void 0)}g.previousRoot||g.events.compute==null||g.events.compute(d,g);function w(M){const D=Hd(M);if(!D||!D.events.enabled||D.raycaster.camera===null)return[];if(D.raycaster.camera===void 0){var L;D.events.compute==null||D.events.compute(d,D,(L=D.previousRoot)==null?void 0:L.getState()),D.raycaster.camera===void 0&&(D.raycaster.camera=null)}return D.raycaster.camera?D.raycaster.intersectObject(M,!0):[]}let A=_.flatMap(w).sort((M,D)=>{const L=Hd(M.object),N=Hd(D.object);return!L||!N?M.distance-D.distance:N.events.priority-L.events.priority||M.distance-D.distance}).filter(M=>{const D=Sx(M);return y.has(D)?!1:(y.add(D),!0)});g.events.filter&&(A=g.events.filter(A,g));for(const M of A){let D=M.object;for(;D;){var E;(E=D.__r3f)!=null&&E.eventCount&&x.push({...M,eventObject:D}),D=D.parent}}if("pointerId"in d&&g.internal.capturedMap.has(d.pointerId))for(let M of g.internal.capturedMap.get(d.pointerId).values())y.has(Sx(M.intersection))||x.push(M.intersection);return x}function s(d,p,g,y){if(d.length){const x={stopped:!1};for(const _ of d){let w=Hd(_.object);if(w||_.object.traverseAncestors(A=>{const E=Hd(A);if(E)return w=E,!1}),w){const{raycaster:A,pointer:E,camera:M,internal:D}=w,L=new Y(E.x,E.y,0).unproject(M),N=O=>{var F,W;return(F=(W=D.capturedMap.get(O))==null?void 0:W.has(_.eventObject))!=null?F:!1},P=O=>{const F={intersection:_,target:p.target};D.capturedMap.has(O)?D.capturedMap.get(O).set(_.eventObject,F):D.capturedMap.set(O,new Map([[_.eventObject,F]])),p.target.setPointerCapture(O)},z=O=>{const F=D.capturedMap.get(O);F&&LP(D.capturedMap,_.eventObject,F,O)};let B={};for(let O in p){let F=p[O];typeof F!="function"&&(B[O]=F)}let V={..._,...B,pointer:E,intersections:d,stopped:x.stopped,delta:g,unprojectedPoint:L,ray:A.ray,camera:M,stopPropagation(){const O="pointerId"in p&&D.capturedMap.get(p.pointerId);if((!O||O.has(_.eventObject))&&(V.stopped=x.stopped=!0,D.hovered.size&&Array.from(D.hovered.values()).find(F=>F.eventObject===_.eventObject))){const F=d.slice(0,d.indexOf(_));a([...F,_])}},target:{hasPointerCapture:N,setPointerCapture:P,releasePointerCapture:z},currentTarget:{hasPointerCapture:N,setPointerCapture:P,releasePointerCapture:z},nativeEvent:p};if(y(V),x.stopped===!0)break}}}return d}function a(d){const{internal:p}=n.getState();for(const g of p.hovered.values())if(!d.length||!d.find(y=>y.object===g.object&&y.index===g.index&&y.instanceId===g.instanceId)){const x=g.eventObject.__r3f;if(p.hovered.delete(Sx(g)),x!=null&&x.eventCount){const _=x.handlers,w={...g,intersections:d};_.onPointerOut==null||_.onPointerOut(w),_.onPointerLeave==null||_.onPointerLeave(w)}}}function l(d,p){for(let g=0;g<p.length;g++){const y=p[g].__r3f;y==null||y.handlers.onPointerMissed==null||y.handlers.onPointerMissed(d)}}function u(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return p=>{const{internal:g}=n.getState();"pointerId"in p&&g.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{g.capturedMap.has(p.pointerId)&&(g.capturedMap.delete(p.pointerId),a([]))})}}return function(g){const{onPointerMissed:y,internal:x}=n.getState();x.lastEvent.current=g;const _=d==="onPointerMove",w=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",E=i(g,_?t:void 0),M=w?e(g):0;d==="onPointerDown"&&(x.initialClick=[g.offsetX,g.offsetY],x.initialHits=E.map(L=>L.eventObject)),w&&!E.length&&M<=2&&(l(g,x.interaction),y&&y(g)),_&&a(E);function D(L){const N=L.eventObject,P=N.__r3f;if(!(P!=null&&P.eventCount))return;const z=P.handlers;if(_){if(z.onPointerOver||z.onPointerEnter||z.onPointerOut||z.onPointerLeave){const B=Sx(L),V=x.hovered.get(B);V?V.stopped&&L.stopPropagation():(x.hovered.set(B,L),z.onPointerOver==null||z.onPointerOver(L),z.onPointerEnter==null||z.onPointerEnter(L))}z.onPointerMove==null||z.onPointerMove(L)}else{const B=z[d];B?(!w||x.initialHits.includes(N))&&(l(g,x.interaction.filter(V=>!x.initialHits.includes(V))),B(L)):w&&x.initialHits.includes(N)&&l(g,x.interaction.filter(V=>!x.initialHits.includes(V)))}}s(E,g,M,D)}}return{handlePointer:u}}const DR=n=>!!(n!=null&&n.render),PP=pe.createContext(null),UZ=(n,e)=>{const t=mZ((u,d)=>{const p=new Y,g=new Y,y=new Y;function x(M=d().camera,D=g,L=d().size){const{width:N,height:P,top:z,left:B}=L,V=N/P;D.isVector3?y.copy(D):y.set(...D);const O=M.getWorldPosition(p).distanceTo(y);if(RP(M))return{width:N/M.zoom,height:P/M.zoom,top:z,left:B,factor:1,distance:O,aspect:V};{const F=M.fov*Math.PI/180,W=2*Math.tan(F/2)*O,ee=W*(N/P);return{width:ee,height:W,top:z,left:B,factor:N/ee,distance:O,aspect:V}}}let _;const w=M=>u(D=>({performance:{...D.performance,current:M}})),A=new Be;return{set:u,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(M=1)=>n(d(),M),advance:(M,D)=>e(M,D,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new qT,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=d();_&&clearTimeout(_),M.performance.current!==M.performance.min&&w(M.performance.min),_=setTimeout(()=>w(d().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:x},setEvents:M=>u(D=>({...D,events:{...D.events,...M}})),setSize:(M,D,L=0,N=0)=>{const P=d().camera,z={width:M,height:D,top:L,left:N};u(B=>({size:z,viewport:{...B.viewport,...x(P,g,z)}}))},setDpr:M=>u(D=>{const L=DP(M);return{viewport:{...D.viewport,dpr:L,initialDpr:D.viewport.initialDpr||L}}}),setFrameloop:(M="always")=>{const D=d().clock;D.stop(),D.elapsedTime=0,M!=="never"&&(D.start(),D.elapsedTime=0),u(()=>({frameloop:M}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:pe.createRef(),active:!1,frames:0,priority:0,subscribe:(M,D,L)=>{const N=d().internal;return N.priority=N.priority+(D>0?1:0),N.subscribers.push({ref:M,priority:D,store:L}),N.subscribers=N.subscribers.sort((P,z)=>P.priority-z.priority),()=>{const P=d().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(D>0?1:0),P.subscribers=P.subscribers.filter(z=>z.ref!==M))}}}}}),i=t.getState();let s=i.size,a=i.viewport.dpr,l=i.camera;return t.subscribe(()=>{const{camera:u,size:d,viewport:p,gl:g,set:y}=t.getState();if(d.width!==s.width||d.height!==s.height||p.dpr!==a){s=d,a=p.dpr,IZ(u,d),p.dpr>0&&g.setPixelRatio(p.dpr);const x=typeof HTMLCanvasElement<"u"&&g.domElement instanceof HTMLCanvasElement;g.setSize(d.width,d.height,x)}u!==l&&(l=u,y(x=>({viewport:{...x.viewport,...x.viewport.getCurrentViewport(u)}})))}),t.subscribe(u=>n(u)),t};function OZ(){const n=pe.useContext(PP);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function zZ(n,e=0){const t=OZ(),i=t.getState().internal.subscribe,s=NP(n);return z0(()=>i(s,e,t),[e,i,t]),null}const kZ=1,FZ=8,BZ=32,VZ=2;var HZ={version:"9.5.0"};function jZ(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var IR={exports:{}},LR={exports:{}},PR;function GZ(){return PR||(PR=1,(function(n){n.exports=function(e){function t(c,f,v,b){return new tm(c,f,v,b)}function i(){}function s(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(c){var f=c,v=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(v=f.return),c=f.return;while(c)}return f.tag===3?v:null}function l(c){if(a(c)!==c)throw Error(s(188))}function u(c){var f=c.alternate;if(!f){if(f=a(c),f===null)throw Error(s(188));return f!==c?null:c}for(var v=c,b=f;;){var C=v.return;if(C===null)break;var I=C.alternate;if(I===null){if(b=C.return,b!==null){v=b;continue}break}if(C.child===I.child){for(I=C.child;I;){if(I===v)return l(C),c;if(I===b)return l(C),f;I=I.sibling}throw Error(s(188))}if(v.return!==b.return)v=C,b=I;else{for(var H=!1,te=C.child;te;){if(te===v){H=!0,v=C,b=I;break}if(te===b){H=!0,b=C,v=I;break}te=te.sibling}if(!H){for(te=I.child;te;){if(te===v){H=!0,v=I,b=C;break}if(te===b){H=!0,b=I,v=C;break}te=te.sibling}if(!H)throw Error(s(189))}}if(v.alternate!==b)throw Error(s(190))}if(v.tag!==3)throw Error(s(188));return v.stateNode.current===v?c:f}function d(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=d(c),f!==null)return f;c=c.sibling}return null}function p(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(c.tag!==4&&(f=p(c),f!==null))return f;c=c.sibling}return null}function g(c){return c===null||typeof c!="object"?null:(c=lo&&c[lo]||c["@@iterator"],typeof c=="function"?c:null)}function y(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===qo?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case Bl:return"Fragment";case Hl:return"Profiler";case Vl:return"StrictMode";case jh:return"Suspense";case oo:return"SuspenseList";case af:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case Fl:return"Portal";case Ur:return c.displayName||"Context";case rf:return(c._context.displayName||"Context")+".Consumer";case Bc:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Gh:return f=c.displayName||null,f!==null?f:y(c.type)||"Memo";case Ts:f=c._payload,c=c._init;try{return y(c(f))}catch{}}return null}function x(c){return{current:c}}function _(c){0>ql||(c.current=id[ql],id[ql]=null,ql--)}function w(c,f){ql++,id[ql]=c.current,c.current=f}function A(c){return c>>>=0,c===0?32:31-(sd(c)/ny|0)|0}function E(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return c&261888;case 262144:case 524288:case 1048576:case 2097152:return c&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function M(c,f,v){var b=c.pendingLanes;if(b===0)return 0;var C=0,I=c.suspendedLanes,H=c.pingedLanes;c=c.warmLanes;var te=b&134217727;return te!==0?(b=te&~I,b!==0?C=E(b):(H&=te,H!==0?C=E(H):v||(v=te&~c,v!==0&&(C=E(v))))):(te=b&~I,te!==0?C=E(te):H!==0?C=E(H):v||(v=b&~c,v!==0&&(C=E(v)))),C===0?0:f!==0&&f!==C&&(f&I)===0&&(I=C&-C,v=f&-f,I>=v||I===32&&(v&4194048)!==0)?f:C}function D(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function L(c,f){switch(c){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function N(){var c=qc;return qc<<=1,(qc&62914560)===0&&(qc=4194304),c}function P(c){for(var f=[],v=0;31>v;v++)f.push(c);return f}function z(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function B(c,f,v,b,C,I){var H=c.pendingLanes;c.pendingLanes=v,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=v,c.entangledLanes&=v,c.errorRecoveryDisabledLanes&=v,c.shellSuspendCounter=0;var te=c.entanglements,Se=c.expirationTimes,Fe=c.hiddenUpdates;for(v=H&~v;0<v;){var Qe=31-Vs(v),Ge=1<<Qe;te[Qe]=0,Se[Qe]=-1;var gt=Fe[Qe];if(gt!==null)for(Fe[Qe]=null,Qe=0;Qe<gt.length;Qe++){var qt=gt[Qe];qt!==null&&(qt.lane&=-536870913)}v&=~Ge}b!==0&&V(c,b,0),I!==0&&C===0&&c.tag!==0&&(c.suspendedLanes|=I&~(H&~f))}function V(c,f,v){c.pendingLanes|=f,c.suspendedLanes&=~f;var b=31-Vs(f);c.entangledLanes|=f,c.entanglements[b]=c.entanglements[b]|1073741824|v&261930}function O(c,f){var v=c.entangledLanes|=f;for(c=c.entanglements;v;){var b=31-Vs(v),C=1<<b;C&f|c[b]&f&&(c[b]|=f),v&=~C}}function F(c,f){var v=f&-f;return v=(v&42)!==0?1:W(v),(v&(c.suspendedLanes|f))!==0?0:v}function W(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function ee(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function J(c){if(typeof Bm=="function"&&ry(c),Hs&&typeof Hs.setStrictMode=="function")try{Hs.setStrictMode(Yl,c)}catch{}}function ae(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}function he(c){if(ud===void 0)try{throw Error()}catch(v){var f=v.stack.trim().match(/\n( *(at )?)/);ud=f&&f[1]||"",Da=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ud+c+Da}function Z(c,f){if(!c||mf)return"";mf=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(f){var Ge=function(){throw Error()};if(Object.defineProperty(Ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ge,[])}catch(qt){var gt=qt}Reflect.construct(c,[],Ge)}else{try{Ge.call()}catch(qt){gt=qt}c.call(Ge.prototype)}}else{try{throw Error()}catch(qt){gt=qt}(Ge=c())&&typeof Ge.catch=="function"&&Ge.catch(function(){})}}catch(qt){if(qt&&gt&&typeof qt.stack=="string")return[qt.stack,gt.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var I=b.DetermineComponentFrameRoot(),H=I[0],te=I[1];if(H&&te){var Se=H.split(`
`),Fe=te.split(`
`);for(C=b=0;b<Se.length&&!Se[b].includes("DetermineComponentFrameRoot");)b++;for(;C<Fe.length&&!Fe[C].includes("DetermineComponentFrameRoot");)C++;if(b===Se.length||C===Fe.length)for(b=Se.length-1,C=Fe.length-1;1<=b&&0<=C&&Se[b]!==Fe[C];)C--;for(;1<=b&&0<=C;b--,C--)if(Se[b]!==Fe[C]){if(b!==1||C!==1)do if(b--,C--,0>C||Se[b]!==Fe[C]){var Qe=`
`+Se[b].replace(" at new "," at ");return c.displayName&&Qe.includes("<anonymous>")&&(Qe=Qe.replace("<anonymous>",c.displayName)),Qe}while(1<=b&&0<=C);break}}}finally{mf=!1,Error.prepareStackTrace=v}return(v=c?c.displayName||c.name:"")?he(v):""}function K(c,f){switch(c.tag){case 26:case 27:case 5:return he(c.type);case 16:return he("Lazy");case 13:return c.child!==f&&f!==null?he("Suspense Fallback"):he("Suspense");case 19:return he("SuspenseList");case 0:case 15:return Z(c.type,!1);case 11:return Z(c.type.render,!1);case 1:return Z(c.type,!0);case 31:return he("Activity");default:return""}}function le(c){try{var f="",v=null;do f+=K(c,v),v=c,c=c.return;while(c);return f}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function Ee(c,f){if(typeof c=="object"&&c!==null){var v=Vm.get(c);return v!==void 0?v:(f={value:c,source:f,stack:le(f)},Vm.set(c,f),f)}return{value:c,source:f,stack:le(f)}}function Re(c,f){fo[Ia++]=gf,fo[Ia++]=Fn,Fn=c,gf=f}function q(c,f,v){kr[ur++]=os,kr[ur++]=ra,kr[ur++]=Fr,Fr=c;var b=os;c=ra;var C=32-Vs(b)-1;b&=~(1<<C),v+=1;var I=32-Vs(f)+C;if(30<I){var H=C-C%5;I=(b&(1<<H)-1).toString(32),b>>=H,C-=H,os=1<<32-Vs(f)+C|v<<C|b,ra=I+c}else os=1<<I|v<<C|b,ra=c}function oe(c){c.return!==null&&(Re(c,1),q(c,1,0))}function Ae(c){for(;c===Fn;)Fn=fo[--Ia],fo[Ia]=null,gf=fo[--Ia],fo[Ia]=null;for(;c===Fr;)Fr=kr[--ur],kr[ur]=null,ra=kr[--ur],kr[ur]=null,os=kr[--ur],kr[ur]=null}function ke(c,f){kr[ur++]=os,kr[ur++]=ra,kr[ur++]=Fr,os=f.id,ra=f.overflow,Fr=c}function rt(c,f){w(ls,f),w(ho,c),w(Ki,null),c=yv(f),_(Ki),w(Ki,c)}function de(){_(Ki),_(ho),_(ls)}function Ce(c){c.memoizedState!==null&&w(vf,c);var f=Ki.current,v=jc(f,c.type);f!==v&&(w(ho,c),w(Ki,v))}function et(c){ho.current===c&&(_(Ki),_(ho)),vf.current===c&&(_(vf),yi?Wl._currentValue=Gl:Wl._currentValue2=Gl)}function it(c){var f=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw je(Ee(f,c)),fd}function ht(c,f){if(!ei)throw Error(s(175));Gv(c.stateNode,c.type,c.memoizedProps,f,c)||it(c,!0)}function tn(c){for(Vi=c.return;Vi;)switch(Vi.tag){case 5:case 31:case 13:As=!1;return;case 27:case 3:As=!0;return;default:Vi=Vi.return}}function fn(c){if(!ei||c!==Vi)return!1;if(!dn)return tn(c),dn=!0,!1;var f=c.tag;if(Bi?f!==3&&f!==27&&(f!==5||Xc(c.type)&&!Es(c.type,c.memoizedProps))&&ti&&it(c):f!==3&&(f!==5||Xc(c.type)&&!Es(c.type,c.memoizedProps))&&ti&&it(c),tn(c),f===13){if(!ei)throw Error(s(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));ti=Rm(c)}else if(f===31){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));ti=Xv(c)}else ti=Bi&&f===27?Ov(c.type,ti):Vi?Uv(c.stateNode):null;return!0}function Pt(){ei&&(ti=Vi=null,dn=!1)}function De(){var c=La;return c!==null&&(Ws===null?Ws=c:Ws.push.apply(Ws,c),La=null),c}function je(c){La===null?La=[c]:La.push(c)}function Pe(c,f,v){yi?(w(Br,f._currentValue),f._currentValue=v):(w(Br,f._currentValue2),f._currentValue2=v)}function tt(c){var f=Br.current;yi?c._currentValue=f:c._currentValue2=f,_(Br)}function $(c,f,v){for(;c!==null;){var b=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,b!==null&&(b.childLanes|=f)):b!==null&&(b.childLanes&f)!==f&&(b.childLanes|=f),c===v)break;c=c.return}}function Tt(c,f,v,b){var C=c.child;for(C!==null&&(C.return=c);C!==null;){var I=C.dependencies;if(I!==null){var H=C.child;I=I.firstContext;e:for(;I!==null;){var te=I;I=C;for(var Se=0;Se<f.length;Se++)if(te.context===f[Se]){I.lanes|=v,te=I.alternate,te!==null&&(te.lanes|=v),$(I.return,v,c),b||(H=null);break e}I=te.next}}else if(C.tag===18){if(H=C.return,H===null)throw Error(s(341));H.lanes|=v,I=H.alternate,I!==null&&(I.lanes|=v),$(H,v,c),H=null}else H=C.child;if(H!==null)H.return=C;else for(H=C;H!==null;){if(H===c){H=null;break}if(C=H.sibling,C!==null){C.return=H.return,H=C;break}H=H.return}C=H}}function st(c,f,v,b){c=null;for(var C=f,I=!1;C!==null;){if(!I){if((C.flags&524288)!==0)I=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var H=C.alternate;if(H===null)throw Error(s(387));if(H=H.memoizedProps,H!==null){var te=C.type;_i(C.pendingProps.value,H.value)||(c!==null?c.push(te):c=[te])}}else if(C===vf.current){if(H=C.alternate,H===null)throw Error(s(387));H.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(c!==null?c.push(Wl):c=[Wl])}C=C.return}c!==null&&Tt(f,c,v,b),f.flags|=262144}function At(c){for(c=c.firstContext;c!==null;){var f=c.context;if(!_i(yi?f._currentValue:f._currentValue2,c.memoizedValue))return!0;c=c.next}return!1}function Ze(c){Xn=c,aa=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function X(c){return se(Xn,c)}function k(c,f){return Xn===null&&Ze(c),se(c,f)}function se(c,f){var v=yi?f._currentValue:f._currentValue2;if(f={context:f,memoizedValue:v,next:null},aa===null){if(c===null)throw Error(s(308));aa=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else aa=aa.next=f;return v}function Me(){return{controller:new ay,data:new Map,refCount:0}}function Ue(c){c.refCount--,c.refCount===0&&Ji(hS,function(){c.controller.abort()})}function we(){}function dt(c){c!==Pn&&c.next===null&&(Pn===null?yf=Pn=c:Pn=Pn.next=c),Vr=!0,vs||(vs=!0,ft())}function Ke(c,f){if(!hd&&Vr){hd=!0;do for(var v=!1,b=yf;b!==null;){if(c!==0){var C=b.pendingLanes;if(C===0)var I=0;else{var H=b.suspendedLanes,te=b.pingedLanes;I=(1<<31-Vs(42|c)+1)-1,I&=C&~(H&~te),I=I&201326741?I&201326741|1:I?I|2:0}I!==0&&(v=!0,pt(b,I))}else I=pn,I=M(b,b===rn?I:0,b.cancelPendingCommit!==null||b.timeoutHandle!==Bs),(I&3)===0||D(b,I)||(v=!0,pt(b,I));b=b.next}while(v);hd=!1}}function xt(){Dt()}function Dt(){Vr=vs=!1;var c=0;Jo!==0&&jl()&&(c=Jo);for(var f=gs(),v=null,b=yf;b!==null;){var C=b.next,I=Ve(b,f);I===0?(b.next=null,v===null?yf=C:v.next=C,C===null&&(Pn=v)):(v=b,(c!==0||(I&3)!==0)&&(Vr=!0)),b=C}Li!==0&&Li!==5||Ke(c),Jo!==0&&(Jo=0)}function Ve(c,f){for(var v=c.suspendedLanes,b=c.pingedLanes,C=c.expirationTimes,I=c.pendingLanes&-62914561;0<I;){var H=31-Vs(I),te=1<<H,Se=C[H];Se===-1?((te&v)===0||(te&b)!==0)&&(C[H]=L(te,f)):Se<=f&&(c.expiredLanes|=te),I&=~te}if(f=rn,v=pn,v=M(c,c===f?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==Bs),b=c.callbackNode,v===0||c===f&&(On===2||On===9)||c.cancelPendingCommit!==null)return b!==null&&b!==null&&ad(b),c.callbackNode=null,c.callbackPriority=0;if((v&3)===0||D(c,v)){if(f=v&-v,f===c.callbackPriority)return f;switch(b!==null&&ad(b),ee(v)){case 2:case 8:v=sy;break;case 32:v=pf;break;case 268435456:v=ld;break;default:v=pf}return b=qe.bind(null,c),v=df(v,b),c.callbackPriority=f,c.callbackNode=v,f}return b!==null&&b!==null&&ad(b),c.callbackPriority=2,c.callbackNode=null,2}function qe(c,f){if(Li!==0&&Li!==5)return c.callbackNode=null,c.callbackPriority=0,null;var v=c.callbackNode;if(Ca()&&c.callbackNode!==v)return null;var b=pn;return b=M(c,c===rn?b:0,c.cancelPendingCommit!==null||c.timeoutHandle!==Bs),b===0?null:(sa(c,b,f),Ve(c,gs()),c.callbackNode!=null&&c.callbackNode===v?qe.bind(null,c):null)}function pt(c,f){if(Ca())return null;sa(c,f,!0)}function ft(){dm?pm(function(){(cn&6)!==0?df(od,xt):Dt()}):df(od,xt)}function nt(){if(Jo===0){var c=po;c===0&&(c=rd,rd<<=1,(rd&261888)===0&&(rd=256)),Jo=c}return Jo}function Jt(c,f){if(Zc===null){var v=Zc=[];Hm=0,po=nt(),Hi={status:"pending",value:void 0,then:function(b){v.push(b)}}}return Hm++,f.then(ie,ie),f}function ie(){if(--Hm===0&&Zc!==null){Hi!==null&&(Hi.status="fulfilled");var c=Zc;Zc=null,po=0,Hi=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function at(c,f){var v=[],b={status:"pending",value:null,reason:null,then:function(C){v.push(C)}};return c.then(function(){b.status="fulfilled",b.value=f;for(var C=0;C<v.length;C++)(0,v[C])(f)},function(C){for(b.status="rejected",b.reason=C,C=0;C<v.length;C++)(0,v[C])(void 0)}),b}function Xe(){var c=Qo.current;return c!==null?c:rn.pooledCache}function lt(c,f){f===null?w(Qo,Qo.current):w(Qo,f.pool)}function He(){var c=Xe();return c===null?null:{parent:yi?ni._currentValue:ni._currentValue2,pool:c}}function Le(c,f){if(_i(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var v=Object.keys(c),b=Object.keys(f);if(v.length!==b.length)return!1;for(b=0;b<v.length;b++){var C=v[b];if(!fS.call(f,C)||!_i(c[C],f[C]))return!1}return!0}function Je(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Ht(c,f,v){switch(v=c[v],v===void 0?c.push(f):v!==f&&(f.then(we,we),f=v),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,rs(c),c;default:if(typeof f.status=="string")f.then(we,we);else{if(c=rn,c!==null&&100<c.shellSuspendCounter)throw Error(s(482));c=f,c.status="pending",c.then(function(b){if(f.status==="pending"){var C=f;C.status="fulfilled",C.value=b}},function(b){if(f.status==="pending"){var C=f;C.status="rejected",C.reason=b}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,rs(c),c}throw Cs=f,ji}}function vn(c){try{var f=c._init;return f(c._payload)}catch(v){throw v!==null&&typeof v=="object"&&typeof v.then=="function"?(Cs=v,ji):v}}function bn(){if(Cs===null)throw Error(s(459));var c=Cs;return Cs=null,c}function rs(c){if(c===ji||c===jr)throw Error(s(483))}function Us(c){var f=$l;return $l+=1,el===null&&(el=[]),Ht(el,c,f)}function No(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function Do(c,f){throw f.$$typeof===kl?Error(s(525)):(c=Object.prototype.toString.call(f),Error(s(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function Tl(c){function f(ye,fe){if(c){var be=ye.deletions;be===null?(ye.deletions=[fe],ye.flags|=16):be.push(fe)}}function v(ye,fe){if(!c)return null;for(;fe!==null;)f(ye,fe),fe=fe.sibling;return null}function b(ye){for(var fe=new Map;ye!==null;)ye.key!==null?fe.set(ye.key,ye):fe.set(ye.index,ye),ye=ye.sibling;return fe}function C(ye,fe){return ye=lr(ye,fe),ye.index=0,ye.sibling=null,ye}function I(ye,fe,be){return ye.index=be,c?(be=ye.alternate,be!==null?(be=be.index,be<fe?(ye.flags|=67108866,fe):be):(ye.flags|=67108866,fe)):(ye.flags|=1048576,fe)}function H(ye){return c&&ye.alternate===null&&(ye.flags|=67108866),ye}function te(ye,fe,be,$e){return fe===null||fe.tag!==6?(fe=nm(be,ye.mode,$e),fe.return=ye,fe):(fe=C(fe,be),fe.return=ye,fe)}function Se(ye,fe,be,$e){var Ut=be.type;return Ut===Bl?Qe(ye,fe,be.props.children,$e,be.key):fe!==null&&(fe.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===Ts&&vn(Ut)===fe.type)?(fe=C(fe,be.props),No(fe,be),fe.return=ye,fe):(fe=ao(be.type,be.key,be.props,null,ye.mode,$e),No(fe,be),fe.return=ye,fe)}function Fe(ye,fe,be,$e){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==be.containerInfo||fe.stateNode.implementation!==be.implementation?(fe=sm(be,ye.mode,$e),fe.return=ye,fe):(fe=C(fe,be.children||[]),fe.return=ye,fe)}function Qe(ye,fe,be,$e,Ut){return fe===null||fe.tag!==7?(fe=Pr(be,ye.mode,$e,Ut),fe.return=ye,fe):(fe=C(fe,be),fe.return=ye,fe)}function Ge(ye,fe,be){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return fe=nm(""+fe,ye.mode,be),fe.return=ye,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case Ra:return be=ao(fe.type,fe.key,fe.props,null,ye.mode,be),No(be,fe),be.return=ye,be;case Fl:return fe=sm(fe,ye.mode,be),fe.return=ye,fe;case Ts:return fe=vn(fe),Ge(ye,fe,be)}if(Zo(fe)||g(fe))return fe=Pr(fe,ye.mode,be,null),fe.return=ye,fe;if(typeof fe.then=="function")return Ge(ye,Us(fe),be);if(fe.$$typeof===Ur)return Ge(ye,k(ye,fe),be);Do(ye,fe)}return null}function gt(ye,fe,be,$e){var Ut=fe!==null?fe.key:null;if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return Ut!==null?null:te(ye,fe,""+be,$e);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case Ra:return be.key===Ut?Se(ye,fe,be,$e):null;case Fl:return be.key===Ut?Fe(ye,fe,be,$e):null;case Ts:return be=vn(be),gt(ye,fe,be,$e)}if(Zo(be)||g(be))return Ut!==null?null:Qe(ye,fe,be,$e,null);if(typeof be.then=="function")return gt(ye,fe,Us(be),$e);if(be.$$typeof===Ur)return gt(ye,fe,k(ye,be),$e);Do(ye,be)}return null}function qt(ye,fe,be,$e,Ut){if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return ye=ye.get(be)||null,te(fe,ye,""+$e,Ut);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case Ra:return ye=ye.get($e.key===null?be:$e.key)||null,Se(fe,ye,$e,Ut);case Fl:return ye=ye.get($e.key===null?be:$e.key)||null,Fe(fe,ye,$e,Ut);case Ts:return $e=vn($e),qt(ye,fe,be,$e,Ut)}if(Zo($e)||g($e))return ye=ye.get(be)||null,Qe(fe,ye,$e,Ut,null);if(typeof $e.then=="function")return qt(ye,fe,be,Us($e),Ut);if($e.$$typeof===Ur)return qt(ye,fe,be,k(fe,$e),Ut);Do(fe,$e)}return null}function Mi(ye,fe,be,$e){for(var Ut=null,ui=null,kt=fe,Mn=fe=0,Qi=null;kt!==null&&Mn<be.length;Mn++){kt.index>Mn?(Qi=kt,kt=null):Qi=kt.sibling;var Cn=gt(ye,kt,be[Mn],$e);if(Cn===null){kt===null&&(kt=Qi);break}c&&kt&&Cn.alternate===null&&f(ye,kt),fe=I(Cn,fe,Mn),ui===null?Ut=Cn:ui.sibling=Cn,ui=Cn,kt=Qi}if(Mn===be.length)return v(ye,kt),dn&&Re(ye,Mn),Ut;if(kt===null){for(;Mn<be.length;Mn++)kt=Ge(ye,be[Mn],$e),kt!==null&&(fe=I(kt,fe,Mn),ui===null?Ut=kt:ui.sibling=kt,ui=kt);return dn&&Re(ye,Mn),Ut}for(kt=b(kt);Mn<be.length;Mn++)Qi=qt(kt,ye,Mn,be[Mn],$e),Qi!==null&&(c&&Qi.alternate!==null&&kt.delete(Qi.key===null?Mn:Qi.key),fe=I(Qi,fe,Mn),ui===null?Ut=Qi:ui.sibling=Qi,ui=Qi);return c&&kt.forEach(function(Xr){return f(ye,Xr)}),dn&&Re(ye,Mn),Ut}function nu(ye,fe,be,$e){if(be==null)throw Error(s(151));for(var Ut=null,ui=null,kt=fe,Mn=fe=0,Qi=null,Cn=be.next();kt!==null&&!Cn.done;Mn++,Cn=be.next()){kt.index>Mn?(Qi=kt,kt=null):Qi=kt.sibling;var Xr=gt(ye,kt,Cn.value,$e);if(Xr===null){kt===null&&(kt=Qi);break}c&&kt&&Xr.alternate===null&&f(ye,kt),fe=I(Xr,fe,Mn),ui===null?Ut=Xr:ui.sibling=Xr,ui=Xr,kt=Qi}if(Cn.done)return v(ye,kt),dn&&Re(ye,Mn),Ut;if(kt===null){for(;!Cn.done;Mn++,Cn=be.next())Cn=Ge(ye,Cn.value,$e),Cn!==null&&(fe=I(Cn,fe,Mn),ui===null?Ut=Cn:ui.sibling=Cn,ui=Cn);return dn&&Re(ye,Mn),Ut}for(kt=b(kt);!Cn.done;Mn++,Cn=be.next())Cn=qt(kt,ye,Mn,Cn.value,$e),Cn!==null&&(c&&Cn.alternate!==null&&kt.delete(Cn.key===null?Mn:Cn.key),fe=I(Cn,fe,Mn),ui===null?Ut=Cn:ui.sibling=Cn,ui=Cn);return c&&kt.forEach(function(dS){return f(ye,dS)}),dn&&Re(ye,Mn),Ut}function ll(ye,fe,be,$e){if(typeof be=="object"&&be!==null&&be.type===Bl&&be.key===null&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case Ra:e:{for(var Ut=be.key;fe!==null;){if(fe.key===Ut){if(Ut=be.type,Ut===Bl){if(fe.tag===7){v(ye,fe.sibling),$e=C(fe,be.props.children),$e.return=ye,ye=$e;break e}}else if(fe.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===Ts&&vn(Ut)===fe.type){v(ye,fe.sibling),$e=C(fe,be.props),No($e,be),$e.return=ye,ye=$e;break e}v(ye,fe);break}else f(ye,fe);fe=fe.sibling}be.type===Bl?($e=Pr(be.props.children,ye.mode,$e,be.key),$e.return=ye,ye=$e):($e=ao(be.type,be.key,be.props,null,ye.mode,$e),No($e,be),$e.return=ye,ye=$e)}return H(ye);case Fl:e:{for(Ut=be.key;fe!==null;){if(fe.key===Ut)if(fe.tag===4&&fe.stateNode.containerInfo===be.containerInfo&&fe.stateNode.implementation===be.implementation){v(ye,fe.sibling),$e=C(fe,be.children||[]),$e.return=ye,ye=$e;break e}else{v(ye,fe);break}else f(ye,fe);fe=fe.sibling}$e=sm(be,ye.mode,$e),$e.return=ye,ye=$e}return H(ye);case Ts:return be=vn(be),ll(ye,fe,be,$e)}if(Zo(be))return Mi(ye,fe,be,$e);if(g(be)){if(Ut=g(be),typeof Ut!="function")throw Error(s(150));return be=Ut.call(be),nu(ye,fe,be,$e)}if(typeof be.then=="function")return ll(ye,fe,Us(be),$e);if(be.$$typeof===Ur)return ll(ye,fe,k(ye,be),$e);Do(ye,be)}return typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint"?(be=""+be,fe!==null&&fe.tag===6?(v(ye,fe.sibling),$e=C(fe,be),$e.return=ye,ye=$e):(v(ye,fe),$e=nm(be,ye.mode,$e),$e.return=ye,ye=$e),H(ye)):v(ye,fe)}return function(ye,fe,be,$e){try{$l=0;var Ut=ll(ye,fe,be,$e);return el=null,Ut}catch(kt){if(kt===ji||kt===jr)throw kt;var ui=t(29,kt,null,ye.mode);return ui.lanes=$e,ui.return=ye,ui}}}function Io(){for(var c=Ua,f=Kl=Ua=0;f<c;){var v=us[f];us[f++]=null;var b=us[f];us[f++]=null;var C=us[f];us[f++]=null;var I=us[f];if(us[f++]=null,b!==null&&C!==null){var H=b.pending;H===null?C.next=C:(C.next=H.next,H.next=C),b.pending=C}I!==0&&tr(v,C,I)}}function $a(c,f,v,b){us[Ua++]=c,us[Ua++]=f,us[Ua++]=v,us[Ua++]=b,Kl|=b,c.lanes|=b,c=c.alternate,c!==null&&(c.lanes|=b)}function El(c,f,v,b){return $a(c,f,v,b),ii(c)}function ps(c,f){return $a(c,null,null,f),ii(c)}function tr(c,f,v){c.lanes|=v;var b=c.alternate;b!==null&&(b.lanes|=v);for(var C=!1,I=c.return;I!==null;)I.childLanes|=v,b=I.alternate,b!==null&&(b.childLanes|=v),I.tag===22&&(c=I.stateNode,c===null||c._visibility&1||(C=!0)),c=I,I=I.return;return c.tag===3?(I=c.stateNode,C&&f!==null&&(C=31-Vs(v),c=I.hiddenUpdates,b=c[C],b===null?c[C]=[f]:b.push(f),f.lane=v|536870912),I):null}function ii(c){if(50<An)throw An=0,wf=null,Error(s(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}function zi(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nr(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function ir(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function sr(c,f,v){var b=c.updateQueue;if(b===null)return null;if(b=b.shared,(cn&2)!==0){var C=b.pending;return C===null?f.next=f:(f.next=C.next,C.next=f),b.pending=f,f=ii(c),tr(c,null,v),f}return $a(c,b,f,v),ii(c)}function Lo(c,f,v){if(f=f.updateQueue,f!==null&&(f=f.shared,(v&4194048)!==0)){var b=f.lanes;b&=c.pendingLanes,v|=b,f.lanes=v,O(c,v)}}function Al(c,f){var v=c.updateQueue,b=c.alternate;if(b!==null&&(b=b.updateQueue,v===b)){var C=null,I=null;if(v=v.firstBaseUpdate,v!==null){do{var H={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};I===null?C=I=H:I=I.next=H,v=v.next}while(v!==null);I===null?C=I=f:I=I.next=f}else C=I=f;v={baseState:b.baseState,firstBaseUpdate:C,lastBaseUpdate:I,shared:b.shared,callbacks:b.callbacks},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=f:c.next=f,v.lastBaseUpdate=f}function na(){if(pd){var c=Hi;if(c!==null)throw c}}function Ka(c,f,v,b){pd=!1;var C=c.updateQueue;fr=!1;var I=C.firstBaseUpdate,H=C.lastBaseUpdate,te=C.shared.pending;if(te!==null){C.shared.pending=null;var Se=te,Fe=Se.next;Se.next=null,H===null?I=Fe:H.next=Fe,H=Se;var Qe=c.alternate;Qe!==null&&(Qe=Qe.updateQueue,te=Qe.lastBaseUpdate,te!==H&&(te===null?Qe.firstBaseUpdate=Fe:te.next=Fe,Qe.lastBaseUpdate=Se))}if(I!==null){var Ge=C.baseState;H=0,Qe=Fe=Se=null,te=I;do{var gt=te.lane&-536870913,qt=gt!==te.lane;if(qt?(pn&gt)===gt:(b&gt)===gt){gt!==0&&gt===po&&(pd=!0),Qe!==null&&(Qe=Qe.next={lane:0,tag:te.tag,payload:te.payload,callback:null,next:null});e:{var Mi=c,nu=te;gt=f;var ll=v;switch(nu.tag){case 1:if(Mi=nu.payload,typeof Mi=="function"){Ge=Mi.call(ll,Ge,gt);break e}Ge=Mi;break e;case 3:Mi.flags=Mi.flags&-65537|128;case 0:if(Mi=nu.payload,gt=typeof Mi=="function"?Mi.call(ll,Ge,gt):Mi,gt==null)break e;Ge=Hh({},Ge,gt);break e;case 2:fr=!0}}gt=te.callback,gt!==null&&(c.flags|=64,qt&&(c.flags|=8192),qt=C.callbacks,qt===null?C.callbacks=[gt]:qt.push(gt))}else qt={lane:gt,tag:te.tag,payload:te.payload,callback:te.callback,next:null},Qe===null?(Fe=Qe=qt,Se=Ge):Qe=Qe.next=qt,H|=gt;if(te=te.next,te===null){if(te=C.shared.pending,te===null)break;qt=te,te=qt.next,qt.next=null,C.lastBaseUpdate=qt,C.shared.pending=null}}while(!0);Qe===null&&(Se=Ge),C.baseState=Se,C.firstBaseUpdate=Fe,C.lastBaseUpdate=Qe,I===null&&(C.shared.lanes=0),go|=H,c.lanes=H,c.memoizedState=Ge}}function Ja(c,f){if(typeof c!="function")throw Error(s(191,c));c.call(f)}function Qa(c,f){var v=c.callbacks;if(v!==null)for(c.callbacks=null,c=0;c<v.length;c++)Ja(v[c],f)}function Po(c,f){c=za,w(tl,c),w(Jl,f),za=c|f.baseLanes}function ga(){w(tl,za),w(Jl,Jl.current)}function j(){za=tl.current,_(Jl),_(tl)}function re(c){var f=c.alternate;w(pi,pi.current&1),w(js,c),Gs===null&&(f===null||Jl.current!==null||f.memoizedState!==null)&&(Gs=c)}function _e(c){w(pi,pi.current),w(js,c),Gs===null&&(Gs=c)}function ve(c){c.tag===22?(w(pi,pi.current),w(js,c),Gs===null&&(Gs=c)):ue()}function ue(){w(pi,pi.current),w(js,js.current)}function Ye(c){_(js),Gs===c&&(Gs=null),_(pi)}function mt(c){for(var f=c;f!==null;){if(f.tag===13){var v=f.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||$o(v)||$h(v)))return f}else if(f.tag===19&&(f.memoizedProps.revealOrder==="forwards"||f.memoizedProps.revealOrder==="backwards"||f.memoizedProps.revealOrder==="unstable_legacy-backwards"||f.memoizedProps.revealOrder==="together")){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function We(){throw Error(s(321))}function yt(c,f){if(f===null)return!1;for(var v=0;v<f.length&&v<c.length;v++)if(!_i(c[v],f[v]))return!1;return!0}function bt(c,f,v,b,C,I){return mo=I,Yt=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,It.H=c===null||c.memoizedState===null?oi:Oa,yn=!1,I=v(b,C),yn=!1,Qt&&(I=Mt(f,v,b,C)),Nt(c),I}function Nt(c){It.H=hr;var f=Ct!==null&&Ct.next!==null;if(mo=0,Gt=Ct=Yt=null,sn=!1,Gr=0,oa=null,f)throw Error(s(300));c===null||Kn||(c=c.dependencies,c!==null&&At(c)&&(Kn=!0))}function Mt(c,f,v,b){Yt=c;var C=0;do{if(Qt&&(oa=null),Gr=0,Qt=!1,25<=C)throw Error(s(301));if(C+=1,Gt=Ct=null,c.updateQueue!=null){var I=c.updateQueue;I.lastEffect=null,I.events=null,I.stores=null,I.memoCache!=null&&(I.memoCache.index=0)}It.H=nl,I=f(v,b)}while(Qt);return I}function Ot(){var c=It.H,f=c.useState()[0];return f=typeof f.then=="function"?Ft(f):f,c=c.useState()[0],(Ct!==null?Ct.memoizedState:null)!==c&&(Yt.flags|=1024),f}function En(){var c=ys!==0;return ys=0,c}function jn(c,f,v){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~v}function zn(c){if(sn){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}sn=!1}mo=0,Gt=Ct=Yt=null,Qt=!1,Gr=ys=0,oa=null}function Xt(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Yt.memoizedState=Gt=c:Gt=Gt.next=c,Gt}function ot(){if(Ct===null){var c=Yt.alternate;c=c!==null?c.memoizedState:null}else c=Ct.next;var f=Gt===null?Yt.memoizedState:Gt.next;if(f!==null)Gt=f,Ct=c;else{if(c===null)throw Yt.alternate===null?Error(s(467)):Error(s(310));Ct=c,c={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Gt===null?Yt.memoizedState=Gt=c:Gt=Gt.next=c}return Gt}function Sn(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ft(c){var f=Gr;return Gr+=1,oa===null&&(oa=[]),c=Ht(oa,c,f),f=Yt,(Gt===null?f.memoizedState:Gt.next)===null&&(f=f.alternate,It.H=f===null||f.memoizedState===null?oi:Oa),c}function Ci(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Ft(c);if(c.$$typeof===Ur)return X(c)}throw Error(s(438,String(c)))}function ia(c){var f=null,v=Yt.updateQueue;if(v!==null&&(f=v.memoCache),f==null){var b=Yt.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(f={data:b.data.map(function(C){return C.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),v===null&&(v=Sn(),Yt.updateQueue=v),v.memoCache=f,v=f.data[f.index],v===void 0)for(v=f.data[f.index]=Array(c),b=0;b<c;b++)v[b]=am;return f.index++,v}function $n(c,f){return typeof f=="function"?f(c):f}function bs(c){var f=ot();return Rn(f,Ct,c)}function Rn(c,f,v){var b=c.queue;if(b===null)throw Error(s(311));b.lastRenderedReducer=v;var C=c.baseQueue,I=b.pending;if(I!==null){if(C!==null){var H=C.next;C.next=I.next,I.next=H}f.baseQueue=C=I,b.pending=null}if(I=c.baseState,C===null)c.memoizedState=I;else{f=C.next;var te=H=null,Se=null,Fe=f,Qe=!1;do{var Ge=Fe.lane&-536870913;if(Ge!==Fe.lane?(pn&Ge)===Ge:(mo&Ge)===Ge){var gt=Fe.revertLane;if(gt===0)Se!==null&&(Se=Se.next={lane:0,revertLane:0,gesture:null,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),Ge===po&&(Qe=!0);else if((mo&gt)===gt){Fe=Fe.next,gt===po&&(Qe=!0);continue}else Ge={lane:0,revertLane:Fe.revertLane,gesture:null,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null},Se===null?(te=Se=Ge,H=I):Se=Se.next=Ge,Yt.lanes|=gt,go|=gt;Ge=Fe.action,yn&&v(I,Ge),I=Fe.hasEagerState?Fe.eagerState:v(I,Ge)}else gt={lane:Ge,revertLane:Fe.revertLane,gesture:Fe.gesture,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null},Se===null?(te=Se=gt,H=I):Se=Se.next=gt,Yt.lanes|=Ge,go|=Ge;Fe=Fe.next}while(Fe!==null&&Fe!==f);if(Se===null?H=I:Se.next=te,!_i(I,c.memoizedState)&&(Kn=!0,Qe&&(v=Hi,v!==null)))throw v;c.memoizedState=I,c.baseState=H,c.baseQueue=Se,b.lastRenderedState=I}return C===null&&(b.lanes=0),[c.memoizedState,b.dispatch]}function ki(c){var f=ot(),v=f.queue;if(v===null)throw Error(s(311));v.lastRenderedReducer=c;var b=v.dispatch,C=v.pending,I=f.memoizedState;if(C!==null){v.pending=null;var H=C=C.next;do I=c(I,H.action),H=H.next;while(H!==C);_i(I,f.memoizedState)||(Kn=!0),f.memoizedState=I,f.baseQueue===null&&(f.baseState=I),v.lastRenderedState=I}return[I,b]}function Ri(c,f,v){var b=Yt,C=ot(),I=dn;if(I){if(v===void 0)throw Error(s(407));v=v()}else v=f();var H=!_i((Ct||C).memoizedState,v);if(H&&(C.memoizedState=v,Kn=!0),C=C.queue,Sc(Cl.bind(null,b,C,c),[c]),C.getSnapshot!==f||H||Gt!==null&&Gt.memoizedState.tag&1){if(b.flags|=2048,rr(9,{destroy:void 0},qi.bind(null,b,C,v,f),null),rn===null)throw Error(s(349));I||(mo&127)!==0||Xi(b,f,v)}return v}function Xi(c,f,v){c.flags|=16384,c={getSnapshot:f,value:v},f=Yt.updateQueue,f===null?(f=Sn(),Yt.updateQueue=f,f.stores=[c]):(v=f.stores,v===null?f.stores=[c]:v.push(c))}function qi(c,f,v,b){f.value=v,f.getSnapshot=b,Cr(f)&&B0(c)}function Cl(c,f,v){return v(function(){Cr(f)&&B0(c)})}function Cr(c){var f=c.getSnapshot;c=c.value;try{var v=f();return!_i(c,v)}catch{return!0}}function B0(c){var f=ps(c,2);f!==null&&ri(f,c,2)}function Dp(c){var f=Xt();if(typeof c=="function"){var v=c;if(c=v(),yn){J(!0);try{v()}finally{J(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$n,lastRenderedState:c},f}function Fu(c,f,v,b){return c.baseState=v,Rn(c,Ct,typeof b=="function"?b:$n)}function eo(c,f,v,b,C){if(Sh(c))throw Error(s(485));if(c=f.action,c!==null){var I={payload:C,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){I.listeners.push(H)}};It.T!==null?v(!0):I.isTransition=!1,b(I),v=f.pending,v===null?(I.next=f.pending=I,mh(f,I)):(I.next=v.next,f.pending=v.next=I)}}function mh(c,f){var v=f.action,b=f.payload,C=c.state;if(f.isTransition){var I=It.T,H={};It.T=H;try{var te=v(C,b),Se=It.S;Se!==null&&Se(H,te),gh(c,f,te)}catch(Fe){Uo(c,f,Fe)}finally{I!==null&&H.types!==null&&(I.types=H.types),It.T=I}}else try{I=v(C,b),gh(c,f,I)}catch(Fe){Uo(c,f,Fe)}}function gh(c,f,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(b){Rl(c,f,b)},function(b){return Uo(c,f,b)}):Rl(c,f,v)}function Rl(c,f,v){f.status="fulfilled",f.value=v,Ip(f),c.state=v,f=c.pending,f!==null&&(v=f.next,v===f?c.pending=null:(v=v.next,f.next=v,mh(c,v)))}function Uo(c,f,v){var b=c.pending;if(c.pending=null,b!==null){b=b.next;do f.status="rejected",f.reason=v,Ip(f),f=f.next;while(f!==b)}c.action=null}function Ip(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function vh(c,f){return f}function Lp(c,f){if(dn){var v=rn.formState;if(v!==null){e:{var b=Yt;if(dn){if(ti){var C=Pv(ti,As);if(C){ti=Uv(C),b=Tm(C);break e}}it(b)}b=!1}b&&(f=v[0])}}v=Xt(),v.memoizedState=v.baseState=f,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vh,lastRenderedState:f},v.queue=b,v=X0.bind(null,Yt,b),b.dispatch=v,b=Dp(!1);var I=bh.bind(null,Yt,!1,b.queue);return b=Xt(),C={state:f,dispatch:null,action:c,pending:null},b.queue=C,v=eo.bind(null,Yt,C,I,v),C.dispatch=v,b.memoizedState=c,[f,v,!1]}function _c(c){var f=ot();return va(f,Ct,c)}function va(c,f,v){if(f=Rn(c,f,vh)[0],c=bs($n)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var b=Ft(f)}catch(H){throw H===ji?jr:H}else b=f;f=ot();var C=f.queue,I=C.dispatch;return v!==f.memoizedState&&(Yt.flags|=2048,rr(9,{destroy:void 0},Pp.bind(null,C,v),null)),[b,I,c]}function Pp(c,f){c.action=f}function bc(c){var f=ot(),v=Ct;if(v!==null)return va(f,v,c);ot(),f=f.memoizedState,v=ot();var b=v.queue.dispatch;return v.memoizedState=c,[f,b,!1]}function rr(c,f,v,b){return c={tag:c,create:v,deps:b,inst:f,next:null},f=Yt.updateQueue,f===null&&(f=Sn(),Yt.updateQueue=f),v=f.lastEffect,v===null?f.lastEffect=c.next=c:(b=v.next,v.next=c,c.next=b,f.lastEffect=c),c}function yh(){return ot().memoizedState}function Nl(c,f,v,b){var C=Xt();Yt.flags|=c,C.memoizedState=rr(1|f,{destroy:void 0},v,b===void 0?null:b)}function Bu(c,f,v,b){var C=ot();b=b===void 0?null:b;var I=C.memoizedState.inst;Ct!==null&&b!==null&&yt(b,Ct.memoizedState.deps)?C.memoizedState=rr(f,I,v,b):(Yt.flags|=c,C.memoizedState=rr(1|f,I,v,b))}function Vu(c,f){Nl(8390656,8,c,f)}function Sc(c,f){Bu(2048,8,c,f)}function V0(c){Yt.flags|=4;var f=Yt.updateQueue;if(f===null)f=Sn(),Yt.updateQueue=f,f.events=[c];else{var v=f.events;v===null?f.events=[c]:v.push(c)}}function Ss(c){var f=ot().memoizedState;return V0({ref:f,nextImpl:c}),function(){if((cn&2)!==0)throw Error(s(440));return f.impl.apply(void 0,arguments)}}function Oo(c,f){return Bu(4,2,c,f)}function Hu(c,f){return Bu(4,4,c,f)}function Mc(c,f){if(typeof f=="function"){c=c();var v=f(c);return function(){typeof v=="function"?v():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function H0(c,f,v){v=v!=null?v.concat([c]):null,Bu(4,4,Mc.bind(null,f,c),v)}function ju(){}function xh(c,f){var v=ot();f=f===void 0?null:f;var b=v.memoizedState;return f!==null&&yt(f,b[1])?b[0]:(v.memoizedState=[c,f],c)}function wc(c,f){var v=ot();f=f===void 0?null:f;var b=v.memoizedState;if(f!==null&&yt(f,b[1]))return b[0];if(b=c(),yn){J(!0);try{c()}finally{J(!1)}}return v.memoizedState=[b,f],b}function Tc(c,f,v){return v===void 0||(mo&1073741824)!==0&&(pn&261930)===0?c.memoizedState=f:(c.memoizedState=v,c=io(),Yt.lanes|=c,go|=c,v)}function Up(c,f,v,b){return _i(v,f)?v:Jl.current!==null?(c=Tc(c,v,b),_i(c,f)||(Kn=!0),c):(mo&42)===0||(mo&1073741824)!==0&&(pn&261930)===0?(Kn=!0,c.memoizedState=v):(c=io(),Yt.lanes|=c,go|=c,f)}function j0(c,f,v,b,C){var I=Or();hn(I!==0&&8>I?I:8);var H=It.T,te={};It.T=te,bh(c,!1,f,v);try{var Se=C(),Fe=It.S;if(Fe!==null&&Fe(te,Se),Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var Qe=at(Se,b);Gu(c,f,Qe,Qn(c))}else Gu(c,f,b,Qn(c))}catch(Ge){Gu(c,f,{then:function(){},status:"rejected",reason:Ge},Qn())}finally{hn(I),H!==null&&te.types!==null&&(H.types=te.types),It.T=H}}function G0(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:Gl,baseState:Gl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$n,lastRenderedState:Gl},next:null};var v={};return f.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$n,lastRenderedState:v},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function Op(){return X(Wl)}function _h(){return ot().memoizedState}function W0(){return ot().memoizedState}function tS(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var v=Qn();c=ir(v);var b=sr(f,c,v);b!==null&&(ri(b,f,v),Lo(b,f,v)),f={cache:Me()},c.payload=f;return}f=f.return}}function nS(c,f,v){var b=Qn();v={lane:b,revertLane:0,gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},Sh(c)?q0(f,v):(v=El(c,f,v,b),v!==null&&(ri(v,c,b),Z0(v,f,b)))}function X0(c,f,v){var b=Qn();Gu(c,f,v,b)}function Gu(c,f,v,b){var C={lane:b,revertLane:0,gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null};if(Sh(c))q0(f,C);else{var I=c.alternate;if(c.lanes===0&&(I===null||I.lanes===0)&&(I=f.lastRenderedReducer,I!==null))try{var H=f.lastRenderedState,te=I(H,v);if(C.hasEagerState=!0,C.eagerState=te,_i(te,H))return $a(c,f,C,0),rn===null&&Io(),!1}catch{}if(v=El(c,f,C,b),v!==null)return ri(v,c,b),Z0(v,f,b),!0}return!1}function bh(c,f,v,b){if(b={lane:2,revertLane:nt(),gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},Sh(c)){if(f)throw Error(s(479))}else f=El(c,v,b,2),f!==null&&ri(f,c,2)}function Sh(c){var f=c.alternate;return c===Yt||f!==null&&f===Yt}function q0(c,f){Qt=sn=!0;var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}function Z0(c,f,v){if((v&4194048)!==0){var b=f.lanes;b&=c.pendingLanes,v|=b,f.lanes=v,O(c,v)}}function zp(c,f,v,b){f=c.memoizedState,v=v(b,f),v=v==null?f:Hh({},f,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}function Mh(c,f,v,b,C,I,H){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(b,I,H):f.prototype&&f.prototype.isPureReactComponent?!Le(v,b)||!Le(C,I):!0}function Y0(c,f,v,b){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(v,b),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(v,b),f.state!==c&&xf.enqueueReplaceState(f,f.state,null)}function Dl(c,f){var v=f;if("ref"in f){v={};for(var b in f)b!=="ref"&&(v[b]=f[b])}if(c=c.defaultProps){v===f&&(v=Hh({},v));for(var C in c)v[C]===void 0&&(v[C]=c[C])}return v}function wh(c,f){try{var v=c.onUncaughtError;v(f.value,{componentStack:f.stack})}catch(b){setTimeout(function(){throw b})}}function kp(c,f,v){try{var b=c.onCaughtError;b(v.value,{componentStack:v.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function Fp(c,f,v){return v=ir(v),v.tag=3,v.payload={element:null},v.callback=function(){wh(c,f)},v}function $0(c){return c=ir(c),c.tag=3,c}function K0(c,f,v,b){var C=v.type.getDerivedStateFromError;if(typeof C=="function"){var I=b.value;c.payload=function(){return C(I)},c.callback=function(){kp(f,v,b)}}var H=v.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(c.callback=function(){kp(f,v,b),typeof C!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var te=b.stack;this.componentDidCatch(b.value,{componentStack:te!==null?te:""})})}function iS(c,f,v,b,C){if(v.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(f=v.alternate,f!==null&&st(f,v,C,!0),v=js.current,v!==null){switch(v.tag){case 31:case 13:return Gs===null?Oc():v.alternate===null&&ci===0&&(ci=3),v.flags&=-257,v.flags|=65536,v.lanes=C,b===Pa?v.flags|=16384:(f=v.updateQueue,f===null?v.updateQueue=new Set([b]):f.add(b),Fc(c,b,C)),!1;case 22:return v.flags|=65536,b===Pa?v.flags|=16384:(f=v.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([b])},v.updateQueue=f):(v=f.retryQueue,v===null?f.retryQueue=new Set([b]):v.add(b)),Fc(c,b,C)),!1}throw Error(s(435,v.tag))}return Fc(c,b,C),Oc(),!1}if(dn)return f=js.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=C,b!==fd&&(c=Error(s(422),{cause:b}),je(Ee(c,v)))):(b!==fd&&(f=Error(s(423),{cause:b}),je(Ee(f,v))),c=c.current.alternate,c.flags|=65536,C&=-C,c.lanes|=C,b=Ee(b,v),C=Fp(c.stateNode,b,C),Al(c,C),ci!==4&&(ci=2)),!1;var I=Error(s(520),{cause:b});if(I=Ee(I,v),bf===null?bf=[I]:bf.push(I),ci!==4&&(ci=2),f===null)return!0;b=Ee(b,v),v=f;do{switch(v.tag){case 3:return v.flags|=65536,c=C&-C,v.lanes|=c,c=Fp(v.stateNode,b,c),Al(v,c),!1;case 1:if(f=v.type,I=v.stateNode,(v.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(vo===null||!vo.has(I))))return v.flags|=65536,C&=-C,v.lanes|=C,C=$0(C),K0(C,c,v,b),Al(v,C),!1}v=v.return}while(v!==null);return!1}function as(c,f,v,b){f.child=c===null?jm(f,null,v,b):cs(f,c.child,v,b)}function J0(c,f,v,b,C){v=v.render;var I=f.ref;if("ref"in b){var H={};for(var te in b)te!=="ref"&&(H[te]=b[te])}else H=b;return Ze(f),b=bt(c,f,v,H,I,C),te=En(),c!==null&&!Kn?(jn(c,f,C),ya(c,f,C)):(dn&&te&&oe(f),f.flags|=1,as(c,f,b,C),f.child)}function Q0(c,f,v,b,C){if(c===null){var I=v.type;return typeof I=="function"&&!Ol(I)&&I.defaultProps===void 0&&v.compare===null?(f.tag=15,f.type=I,ev(c,f,I,b,C)):(c=ao(v.type,null,b,f,f.mode,C),c.ref=f.ref,c.return=f,f.child=c)}if(I=c.child,!Xu(c,C)){var H=I.memoizedProps;if(v=v.compare,v=v!==null?v:Le,v(H,b)&&c.ref===f.ref)return ya(c,f,C)}return f.flags|=1,c=lr(I,b),c.ref=f.ref,c.return=f,f.child=c}function ev(c,f,v,b,C){if(c!==null){var I=c.memoizedProps;if(Le(I,b)&&c.ref===f.ref)if(Kn=!1,f.pendingProps=b=I,Xu(c,C))(c.flags&131072)!==0&&(Kn=!0);else return f.lanes=c.lanes,ya(c,f,C)}return Eh(c,f,v,b,C)}function tv(c,f,v,b){var C=b.children,I=c!==null?c.memoizedState:null;if(c===null&&f.stateNode===null&&(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),b.mode==="hidden"){if((f.flags&128)!==0){if(I=I!==null?I.baseLanes|v:v,c!==null){for(b=f.child=c.child,C=0;b!==null;)C=C|b.lanes|b.childLanes,b=b.sibling;b=C&~I}else b=0,f.child=null;return Ec(c,f,I,v,b)}if((v&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&lt(f,I!==null?I.cachePool:null),I!==null?Po(f,I):ga(),ve(f);else return b=f.lanes=536870912,Ec(c,f,I!==null?I.baseLanes|v:v,v,b)}else I!==null?(lt(f,I.cachePool),Po(f,I),ue(),f.memoizedState=null):(c!==null&&lt(f,null),ga(),ue());return as(c,f,C,v),f.child}function Il(c,f){return c!==null&&c.tag===22||f.stateNode!==null||(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.sibling}function Ec(c,f,v,b,C){var I=Xe();return I=I===null?null:{parent:yi?ni._currentValue:ni._currentValue2,pool:I},f.memoizedState={baseLanes:v,cachePool:I},c!==null&&lt(f,null),ga(),ve(f),c!==null&&st(c,f,b,!0),f.childLanes=C,null}function Th(c,f){return f=zo({mode:f.mode,children:f.children},c.mode),f.ref=c.ref,c.child=f,f.return=c,f}function Bp(c,f,v){return cs(f,c.child,null,v),c=Th(f,f.pendingProps),c.flags|=2,Ye(f),f.memoizedState=null,c}function nv(c,f,v){var b=f.pendingProps,C=(f.flags&128)!==0;if(f.flags&=-129,c===null){if(dn){if(b.mode==="hidden")return c=Th(f,b),f.lanes=536870912,Il(null,c);if(_e(f),(c=ti)?(c=Am(c,As),c!==null&&(f.memoizedState={dehydrated:c,treeContext:Fr!==null?{id:os,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},v=im(c),v.return=f,f.child=v,Vi=f,ti=null)):c=null,c===null)throw it(f);return f.lanes=536870912,null}return Th(f,b)}var I=c.memoizedState;if(I!==null){var H=I.dehydrated;if(_e(f),C)if(f.flags&256)f.flags&=-257,f=Bp(c,f,v);else if(f.memoizedState!==null)f.child=c.child,f.flags|=128,f=null;else throw Error(s(558));else if(Kn||st(c,f,v,!1),C=(v&c.childLanes)!==0,Kn||C){if(b=rn,b!==null&&(H=F(b,v),H!==0&&H!==I.retryLane))throw I.retryLane=H,ps(c,H),ri(b,c,H),Rs;Oc(),f=Bp(c,f,v)}else c=I.treeContext,ei&&(ti=Fv(H),Vi=f,dn=!0,La=null,As=!1,c!==null&&ke(f,c)),f=Th(f,b),f.flags|=4096;return f}return c=lr(c.child,{mode:b.mode,children:b.children}),c.ref=f.ref,f.child=c,c.return=f,c}function Wu(c,f){var v=f.ref;if(v===null)c!==null&&c.ref!==null&&(f.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(s(284));(c===null||c.ref!==v)&&(f.flags|=4194816)}}function Eh(c,f,v,b,C){return Ze(f),v=bt(c,f,v,b,void 0,C),b=En(),c!==null&&!Kn?(jn(c,f,C),ya(c,f,C)):(dn&&b&&oe(f),f.flags|=1,as(c,f,v,C),f.child)}function Vp(c,f,v,b,C,I){return Ze(f),f.updateQueue=null,v=Mt(f,b,v,C),Nt(c),b=En(),c!==null&&!Kn?(jn(c,f,I),ya(c,f,I)):(dn&&b&&oe(f),f.flags|=1,as(c,f,v,I),f.child)}function Ll(c,f,v,b,C){if(Ze(f),f.stateNode===null){var I=Na,H=v.contextType;typeof H=="object"&&H!==null&&(I=X(H)),I=new v(b,I),f.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,I.updater=xf,f.stateNode=I,I._reactInternals=f,I=f.stateNode,I.props=b,I.state=f.memoizedState,I.refs={},zi(f),H=v.contextType,I.context=typeof H=="object"&&H!==null?X(H):Na,I.state=f.memoizedState,H=v.getDerivedStateFromProps,typeof H=="function"&&(zp(f,v,H,b),I.state=f.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(H=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),H!==I.state&&xf.enqueueReplaceState(I,I.state,null),Ka(f,b,I,C),na(),I.state=f.memoizedState),typeof I.componentDidMount=="function"&&(f.flags|=4194308),b=!0}else if(c===null){I=f.stateNode;var te=f.memoizedProps,Se=Dl(v,te);I.props=Se;var Fe=I.context,Qe=v.contextType;H=Na,typeof Qe=="object"&&Qe!==null&&(H=X(Qe));var Ge=v.getDerivedStateFromProps;Qe=typeof Ge=="function"||typeof I.getSnapshotBeforeUpdate=="function",te=f.pendingProps!==te,Qe||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(te||Fe!==H)&&Y0(f,I,b,H),fr=!1;var gt=f.memoizedState;I.state=gt,Ka(f,b,I,C),na(),Fe=f.memoizedState,te||gt!==Fe||fr?(typeof Ge=="function"&&(zp(f,v,Ge,b),Fe=f.memoizedState),(Se=fr||Mh(f,v,Se,b,gt,Fe,H))?(Qe||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(f.flags|=4194308)):(typeof I.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=b,f.memoizedState=Fe),I.props=b,I.state=Fe,I.context=H,b=Se):(typeof I.componentDidMount=="function"&&(f.flags|=4194308),b=!1)}else{I=f.stateNode,nr(c,f),H=f.memoizedProps,Qe=Dl(v,H),I.props=Qe,Ge=f.pendingProps,gt=I.context,Fe=v.contextType,Se=Na,typeof Fe=="object"&&Fe!==null&&(Se=X(Fe)),te=v.getDerivedStateFromProps,(Fe=typeof te=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(H!==Ge||gt!==Se)&&Y0(f,I,b,Se),fr=!1,gt=f.memoizedState,I.state=gt,Ka(f,b,I,C),na();var qt=f.memoizedState;H!==Ge||gt!==qt||fr||c!==null&&c.dependencies!==null&&At(c.dependencies)?(typeof te=="function"&&(zp(f,v,te,b),qt=f.memoizedState),(Qe=fr||Mh(f,v,Qe,b,gt,qt,Se)||c!==null&&c.dependencies!==null&&At(c.dependencies))?(Fe||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(b,qt,Se),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(b,qt,Se)),typeof I.componentDidUpdate=="function"&&(f.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof I.componentDidUpdate!="function"||H===c.memoizedProps&&gt===c.memoizedState||(f.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||H===c.memoizedProps&&gt===c.memoizedState||(f.flags|=1024),f.memoizedProps=b,f.memoizedState=qt),I.props=b,I.state=qt,I.context=Se,b=Qe):(typeof I.componentDidUpdate!="function"||H===c.memoizedProps&&gt===c.memoizedState||(f.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||H===c.memoizedProps&&gt===c.memoizedState||(f.flags|=1024),b=!1)}return I=b,Wu(c,f),b=(f.flags&128)!==0,I||b?(I=f.stateNode,v=b&&typeof v.getDerivedStateFromError!="function"?null:I.render(),f.flags|=1,c!==null&&b?(f.child=cs(f,c.child,null,C),f.child=cs(f,null,v,C)):as(c,f,v,C),f.memoizedState=I.state,c=f.child):c=ya(c,f,C),c}function iv(c,f,v,b){return Pt(),f.flags|=256,as(c,f,v,b),f.child}function Hp(c){return{baseLanes:c,cachePool:He()}}function jp(c,f,v){return c=c!==null?c.childLanes&~v:0,f&&(c|=Ns),c}function Gp(c,f,v){var b=f.pendingProps,C=!1,I=(f.flags&128)!==0,H;if((H=I)||(H=c!==null&&c.memoizedState===null?!1:(pi.current&2)!==0),H&&(C=!0,f.flags&=-129),H=(f.flags&32)!==0,f.flags&=-33,c===null){if(dn){if(C?re(f):ue(),(c=ti)?(c=jv(c,As),c!==null&&(f.memoizedState={dehydrated:c,treeContext:Fr!==null?{id:os,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},v=im(c),v.return=f,f.child=v,Vi=f,ti=null)):c=null,c===null)throw it(f);return $h(c)?f.lanes=32:f.lanes=536870912,null}var te=b.children;return b=b.fallback,C?(ue(),C=f.mode,te=zo({mode:"hidden",children:te},C),b=Pr(b,C,v,null),te.return=f,b.return=f,te.sibling=b,f.child=te,b=f.child,b.memoizedState=Hp(v),b.childLanes=jp(c,H,v),f.memoizedState=Ql,Il(null,b)):(re(f),Ah(f,te))}var Se=c.memoizedState;if(Se!==null&&(te=Se.dehydrated,te!==null)){if(I)f.flags&256?(re(f),f.flags&=-257,f=Pl(c,f,v)):f.memoizedState!==null?(ue(),f.child=c.child,f.flags|=128,f=null):(ue(),te=b.fallback,C=f.mode,b=zo({mode:"visible",children:b.children},C),te=Pr(te,C,v,null),te.flags|=2,b.return=f,te.return=f,b.sibling=te,f.child=b,cs(f,c.child,null,v),b=f.child,b.memoizedState=Hp(v),b.childLanes=jp(c,H,v),f.memoizedState=Ql,f=Il(null,b));else if(re(f),$h(te))H=Kh(te).digest,b=Error(s(419)),b.stack="",b.digest=H,je({value:b,source:null,stack:null}),f=Pl(c,f,v);else if(Kn||st(c,f,v,!1),H=(v&c.childLanes)!==0,Kn||H){if(H=rn,H!==null&&(b=F(H,v),b!==0&&b!==Se.retryLane))throw Se.retryLane=b,ps(c,b),ri(H,c,b),Rs;$o(te)||Oc(),f=Pl(c,f,v)}else $o(te)?(f.flags|=192,f.child=c.child,f=null):(c=Se.treeContext,ei&&(ti=Bv(te),Vi=f,dn=!0,La=null,As=!1,c!==null&&ke(f,c)),f=Ah(f,b.children),f.flags|=4096);return f}return C?(ue(),te=b.fallback,C=f.mode,Se=c.child,I=Se.sibling,b=lr(Se,{mode:"hidden",children:b.children}),b.subtreeFlags=Se.subtreeFlags&65011712,I!==null?te=lr(I,te):(te=Pr(te,C,v,null),te.flags|=2),te.return=f,b.return=f,b.sibling=te,f.child=b,Il(null,b),b=f.child,te=c.child.memoizedState,te===null?te=Hp(v):(C=te.cachePool,C!==null?(Se=yi?ni._currentValue:ni._currentValue2,C=C.parent!==Se?{parent:Se,pool:Se}:C):C=He(),te={baseLanes:te.baseLanes|v,cachePool:C}),b.memoizedState=te,b.childLanes=jp(c,H,v),f.memoizedState=Ql,Il(c.child,b)):(re(f),v=c.child,c=v.sibling,v=lr(v,{mode:"visible",children:b.children}),v.return=f,v.sibling=null,c!==null&&(H=f.deletions,H===null?(f.deletions=[c],f.flags|=16):H.push(c)),f.child=v,f.memoizedState=null,v)}function Ah(c,f){return f=zo({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function zo(c,f){return c=t(22,c,null,f),c.lanes=0,c}function Pl(c,f,v){return cs(f,c.child,null,v),c=Ah(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function sv(c,f,v){c.lanes|=f;var b=c.alternate;b!==null&&(b.lanes|=f),$(c.return,f,v)}function Ac(c,f,v,b,C,I){var H=c.memoizedState;H===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:b,tail:v,tailMode:C,treeForkCount:I}:(H.isBackwards=f,H.rendering=null,H.renderingStartTime=0,H.last=b,H.tail=v,H.tailMode=C,H.treeForkCount=I)}function Wp(c,f,v){var b=f.pendingProps,C=b.revealOrder,I=b.tail;b=b.children;var H=pi.current,te=(H&2)!==0;if(te?(H=H&1|2,f.flags|=128):H&=1,w(pi,H),as(c,f,b,v),b=dn?gf:0,!te&&c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&sv(c,v,f);else if(c.tag===19)sv(c,v,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}switch(C){case"forwards":for(v=f.child,C=null;v!==null;)c=v.alternate,c!==null&&mt(c)===null&&(C=v),v=v.sibling;v=C,v===null?(C=f.child,f.child=null):(C=v.sibling,v.sibling=null),Ac(f,!1,C,v,I,b);break;case"backwards":case"unstable_legacy-backwards":for(v=null,C=f.child,f.child=null;C!==null;){if(c=C.alternate,c!==null&&mt(c)===null){f.child=C;break}c=C.sibling,C.sibling=v,v=C,C=c}Ac(f,!0,v,null,I,b);break;case"together":Ac(f,!1,null,null,void 0,b);break;default:f.memoizedState=null}return f.child}function ya(c,f,v){if(c!==null&&(f.dependencies=c.dependencies),go|=f.lanes,(v&f.childLanes)===0)if(c!==null){if(st(c,f,v,!1),(v&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(s(153));if(f.child!==null){for(c=f.child,v=lr(c,c.pendingProps),f.child=v,v.return=f;c.sibling!==null;)c=c.sibling,v=v.sibling=lr(c,c.pendingProps),v.return=f;v.sibling=null}return f.child}function Xu(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&At(c)))}function Xp(c,f,v){switch(f.tag){case 3:rt(f,f.stateNode.containerInfo),Pe(f,ni,c.memoizedState.cache),Pt();break;case 27:case 5:Ce(f);break;case 4:rt(f,f.stateNode.containerInfo);break;case 10:Pe(f,f.type,f.memoizedProps.value);break;case 31:if(f.memoizedState!==null)return f.flags|=128,_e(f),null;break;case 13:var b=f.memoizedState;if(b!==null)return b.dehydrated!==null?(re(f),f.flags|=128,null):(v&f.child.childLanes)!==0?Gp(c,f,v):(re(f),c=ya(c,f,v),c!==null?c.sibling:null);re(f);break;case 19:var C=(c.flags&128)!==0;if(b=(v&f.childLanes)!==0,b||(st(c,f,v,!1),b=(v&f.childLanes)!==0),C){if(b)return Wp(c,f,v);f.flags|=128}if(C=f.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),w(pi,pi.current),b)break;return null;case 22:return f.lanes=0,tv(c,f,v,f.pendingProps);case 24:Pe(f,ni,c.memoizedState.cache)}return ya(c,f,v)}function qp(c,f,v){if(c!==null)if(c.memoizedProps!==f.pendingProps)Kn=!0;else{if(!Xu(c,v)&&(f.flags&128)===0)return Kn=!1,Xp(c,f,v);Kn=(c.flags&131072)!==0}else Kn=!1,dn&&(f.flags&1048576)!==0&&q(f,gf,f.index);switch(f.lanes=0,f.tag){case 16:e:{var b=f.pendingProps;if(c=vn(f.elementType),f.type=c,typeof c=="function")Ol(c)?(b=Dl(c,b),f.tag=1,f=Ll(null,f,c,b,v)):(f.tag=0,f=Eh(null,f,c,b,v));else{if(c!=null){var C=c.$$typeof;if(C===Bc){f.tag=11,f=J0(null,f,c,b,v);break e}else if(C===Gh){f.tag=14,f=Q0(null,f,c,b,v);break e}}throw f=y(c)||c,Error(s(306,f,""))}}return f;case 0:return Eh(c,f,f.type,f.pendingProps,v);case 1:return b=f.type,C=Dl(b,f.pendingProps),Ll(c,f,b,C,v);case 3:e:{if(rt(f,f.stateNode.containerInfo),c===null)throw Error(s(387));var I=f.pendingProps;C=f.memoizedState,b=C.element,nr(c,f),Ka(f,I,null,v);var H=f.memoizedState;if(I=H.cache,Pe(f,ni,I),I!==C.cache&&Tt(f,[ni],v,!0),na(),I=H.element,ei&&C.isDehydrated)if(C={element:I,isDehydrated:!1,cache:H.cache},f.updateQueue.baseState=C,f.memoizedState=C,f.flags&256){f=iv(c,f,I,v);break e}else if(I!==b){b=Ee(Error(s(424)),f),je(b),f=iv(c,f,I,v);break e}else for(ei&&(ti=kv(f.stateNode.containerInfo),Vi=f,dn=!0,La=null,As=!0),v=jm(f,null,I,v),f.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Pt(),I===b){f=ya(c,f,v);break e}as(c,f,I,v)}f=f.child}return f;case 26:if(zr)return Wu(c,f),c===null?(v=Im(f.type,null,f.pendingProps,null))?f.memoizedState=v:dn||(f.stateNode=td(f.type,f.pendingProps,ls.current,f)):f.memoizedState=Im(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:if(Bi)return Ce(f),c===null&&Bi&&dn&&(b=f.stateNode=nd(f.type,f.pendingProps,ls.current,Ki.current,!1),Vi=f,As=!0,ti=Em(f.type,b,ti)),as(c,f,f.pendingProps.children,v),Wu(c,f),c===null&&(f.flags|=4194304),f.child;case 5:return c===null&&dn&&(Jv(f.type,f.pendingProps,Ki.current),(C=b=ti)&&(b=Vv(b,f.type,f.pendingProps,As),b!==null?(f.stateNode=b,Vi=f,ti=zv(b),As=!1,C=!0):C=!1),C||it(f)),Ce(f),C=f.type,I=f.pendingProps,H=c!==null?c.memoizedProps:null,b=I.children,Es(C,I)?b=null:H!==null&&Es(C,H)&&(f.flags|=32),f.memoizedState!==null&&(C=bt(c,f,Ot,null,null,v),yi?Wl._currentValue=C:Wl._currentValue2=C),Wu(c,f),as(c,f,b,v),f.child;case 6:return c===null&&dn&&(Dm(f.pendingProps,Ki.current),(c=v=ti)&&(v=Hv(v,f.pendingProps,As),v!==null?(f.stateNode=v,Vi=f,ti=null,c=!0):c=!1),c||it(f)),null;case 13:return Gp(c,f,v);case 4:return rt(f,f.stateNode.containerInfo),b=f.pendingProps,c===null?f.child=cs(f,null,b,v):as(c,f,b,v),f.child;case 11:return J0(c,f,f.type,f.pendingProps,v);case 7:return as(c,f,f.pendingProps,v),f.child;case 8:return as(c,f,f.pendingProps.children,v),f.child;case 12:return as(c,f,f.pendingProps.children,v),f.child;case 10:return b=f.pendingProps,Pe(f,f.type,b.value),as(c,f,b.children,v),f.child;case 9:return C=f.type._context,b=f.pendingProps.children,Ze(f),C=X(C),b=b(C),f.flags|=1,as(c,f,b,v),f.child;case 14:return Q0(c,f,f.type,f.pendingProps,v);case 15:return ev(c,f,f.type,f.pendingProps,v);case 19:return Wp(c,f,v);case 31:return nv(c,f,v);case 22:return tv(c,f,v,f.pendingProps);case 24:return Ze(f),b=X(ni),c===null?(C=Xe(),C===null&&(C=rn,I=Me(),C.pooledCache=I,I.refCount++,I!==null&&(C.pooledCacheLanes|=v),C=I),f.memoizedState={parent:b,cache:C},zi(f),Pe(f,ni,C)):((c.lanes&v)!==0&&(nr(c,f),Ka(f,null,null,v),na()),C=c.memoizedState,I=f.memoizedState,C.parent!==b?(C={parent:b,cache:b},f.memoizedState=C,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=C),Pe(f,ni,b)):(b=I.cache,Pe(f,ni,b),b!==C.cache&&Tt(f,[ni],v,!0))),as(c,f,f.pendingProps.children,v),f.child;case 29:throw f.pendingProps}throw Error(s(156,f.tag))}function Rr(c){c.flags|=4}function qu(c){cr&&(c.flags|=8)}function rv(c,f){if(c!==null&&c.child===f.child)return!1;if((f.flags&16)!==0)return!0;for(c=f.child;c!==null;){if((c.flags&8218)!==0||(c.subtreeFlags&8218)!==0)return!0;c=c.sibling}return!1}function Zp(c,f,v,b){if(gn)for(v=f.child;v!==null;){if(v.tag===5||v.tag===6)lf(c,v.stateNode);else if(!(v.tag===4||Bi&&v.tag===27)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===f)break;for(;v.sibling===null;){if(v.return===null||v.return===f)return;v=v.return}v.sibling.return=v.return,v=v.sibling}else if(cr)for(var C=f.child;C!==null;){if(C.tag===5){var I=C.stateNode;v&&b&&(I=Lv(I,C.type,C.memoizedProps)),lf(c,I)}else if(C.tag===6)I=C.stateNode,v&&b&&(I=wm(I,C.memoizedProps)),lf(c,I);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)I=C.child,I!==null&&(I.return=C),Zp(c,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===f)break;for(;C.sibling===null;){if(C.return===null||C.return===f)return;C=C.return}C.sibling.return=C.return,C=C.sibling}}function av(c,f,v,b){var C=!1;if(cr)for(var I=f.child;I!==null;){if(I.tag===5){var H=I.stateNode;v&&b&&(H=Lv(H,I.type,I.memoizedProps)),Sm(c,H)}else if(I.tag===6)H=I.stateNode,v&&b&&(H=wm(H,I.memoizedProps)),Sm(c,H);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)C=I.child,C!==null&&(C.return=I),av(c,I,!0,!0),C=!0;else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===f)break;for(;I.sibling===null;){if(I.return===null||I.return===f)return C;I=I.return}I.sibling.return=I.return,I=I.sibling}return C}function ov(c,f){if(cr&&rv(c,f)){c=f.stateNode;var v=c.containerInfo,b=bm();av(b,f,!1,!1),c.pendingChildren=b,Rr(f),Iv(v,b)}}function Yp(c,f,v,b){if(gn)c.memoizedProps!==b&&Rr(f);else if(cr){var C=c.stateNode,I=c.memoizedProps;if((c=rv(c,f))||I!==b){var H=Ki.current;I=Dv(C,v,I,b,!c,null),I===C?f.stateNode=C:(qu(f),Fs(I,v,b,H)&&Rr(f),f.stateNode=I,c&&Zp(I,f,!1,!1))}else f.stateNode=C}}function Ms(c,f,v,b,C){if((c.mode&32)!==0&&(v===null?cf(f,b):Wc(f,v,b))){if(c.flags|=16777216,(C&335544128)===C||um(f,b))if(ai(c.stateNode,f,b))c.flags|=8192;else if(mn())c.flags|=8192;else throw Cs=Pa,dd}else c.flags&=-16777217}function Cc(c,f){if(Om(f)){if(c.flags|=16777216,!zm(f))if(mn())c.flags|=8192;else throw Cs=Pa,dd}else c.flags&=-16777217}function Zu(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?N():536870912,c.lanes|=f,eu|=f)}function Rc(c,f){if(!dn)switch(c.tailMode){case"hidden":f=c.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var b=null;v!==null;)v.alternate!==null&&(b=v),v=v.sibling;b===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:b.sibling=null}}function Gn(c){var f=c.alternate!==null&&c.alternate.child===c.child,v=0,b=0;if(f)for(var C=c.child;C!==null;)v|=C.lanes|C.childLanes,b|=C.subtreeFlags&65011712,b|=C.flags&65011712,C.return=c,C=C.sibling;else for(C=c.child;C!==null;)v|=C.lanes|C.childLanes,b|=C.subtreeFlags,b|=C.flags,C.return=c,C=C.sibling;return c.subtreeFlags|=b,c.childLanes=v,f}function lv(c,f,v){var b=f.pendingProps;switch(Ae(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gn(f),null;case 1:return Gn(f),null;case 3:return v=f.stateNode,b=null,c!==null&&(b=c.memoizedState.cache),f.memoizedState.cache!==b&&(f.flags|=2048),tt(ni),de(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(c===null||c.child===null)&&(fn(f)?Rr(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,De())),ov(c,f),Gn(f),null;case 26:if(zr){var C=f.type,I=f.memoizedState;return c===null?(Rr(f),I!==null?(Gn(f),Cc(f,I)):(Gn(f),Ms(f,C,null,b,v))):I?I!==c.memoizedState?(Rr(f),Gn(f),Cc(f,I)):(Gn(f),f.flags&=-16777217):(I=c.memoizedProps,gn?I!==b&&Rr(f):Yp(c,f,C,b),Gn(f),Ms(f,C,I,b,v)),null}case 27:if(Bi){if(et(f),v=ls.current,C=f.type,c!==null&&f.stateNode!=null)gn?c.memoizedProps!==b&&Rr(f):Yp(c,f,C,b);else{if(!b){if(f.stateNode===null)throw Error(s(166));return Gn(f),null}c=Ki.current,fn(f)?ht(f,c):(c=nd(C,b,v,c,!0),f.stateNode=c,Rr(f))}return Gn(f),null}case 5:if(et(f),C=f.type,c!==null&&f.stateNode!=null)Yp(c,f,C,b);else{if(!b){if(f.stateNode===null)throw Error(s(166));return Gn(f),null}if(I=Ki.current,fn(f))ht(f,I),Yv(f.stateNode,C,b,I)&&(f.flags|=64);else{var H=lm(C,b,ls.current,I,f);qu(f),Zp(H,f,!1,!1),f.stateNode=H,Fs(H,C,b,I)&&Rr(f)}}return Gn(f),Ms(f,f.type,c===null?null:c.memoizedProps,f.pendingProps,v),null;case 6:if(c&&f.stateNode!=null)v=c.memoizedProps,gn?v!==b&&Rr(f):cr&&(v!==b?(c=ls.current,v=Ki.current,qu(f),f.stateNode=co(b,c,v,f)):f.stateNode=c.stateNode);else{if(typeof b!="string"&&f.stateNode===null)throw Error(s(166));if(c=ls.current,v=Ki.current,fn(f)){if(!ei)throw Error(s(176));if(c=f.stateNode,v=f.memoizedProps,b=null,C=Vi,C!==null)switch(C.tag){case 27:case 5:b=C.memoizedProps}lS(c,v,f,b)||it(f,!0)}else qu(f),f.stateNode=co(b,c,v,f)}return Gn(f),null;case 31:if(v=f.memoizedState,c===null||c.memoizedState!==null){if(b=fn(f),v!==null){if(c===null){if(!b)throw Error(s(318));if(!ei)throw Error(s(556));if(c=f.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(557));Cm(c,f)}else Pt(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Gn(f),c=!1}else v=De(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=v),c=!0;if(!c)return f.flags&256?(Ye(f),f):(Ye(f),null);if((f.flags&128)!==0)throw Error(s(558))}return Gn(f),null;case 13:if(b=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(C=fn(f),b!==null&&b.dehydrated!==null){if(c===null){if(!C)throw Error(s(318));if(!ei)throw Error(s(344));if(C=f.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(s(317));Wv(C,f)}else Pt(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Gn(f),C=!1}else C=De(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=C),C=!0;if(!C)return f.flags&256?(Ye(f),f):(Ye(f),null)}return Ye(f),(f.flags&128)!==0?(f.lanes=v,f):(v=b!==null,c=c!==null&&c.memoizedState!==null,v&&(b=f.child,C=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(C=b.alternate.memoizedState.cachePool.pool),I=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(I=b.memoizedState.cachePool.pool),I!==C&&(b.flags|=2048)),v!==c&&v&&(f.child.flags|=8192),Zu(f,f.updateQueue),Gn(f),null);case 4:return de(),ov(c,f),c===null&&kn(f.stateNode.containerInfo),Gn(f),null;case 10:return tt(f.type),Gn(f),null;case 19:if(_(pi),b=f.memoizedState,b===null)return Gn(f),null;if(C=(f.flags&128)!==0,I=b.rendering,I===null)if(C)Rc(b,!1);else{if(ci!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(I=mt(c),I!==null){for(f.flags|=128,Rc(b,!1),c=I.updateQueue,f.updateQueue=c,Zu(f,c),f.subtreeFlags=0,c=v,v=f.child;v!==null;)Fh(v,c),v=v.sibling;return w(pi,pi.current&1|2),dn&&Re(f,b.treeForkCount),f.child}c=c.sibling}b.tail!==null&&gs()>ol&&(f.flags|=128,C=!0,Rc(b,!1),f.lanes=4194304)}else{if(!C)if(c=mt(I),c!==null){if(f.flags|=128,C=!0,c=c.updateQueue,f.updateQueue=c,Zu(f,c),Rc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!I.alternate&&!dn)return Gn(f),null}else 2*gs()-b.renderingStartTime>ol&&v!==536870912&&(f.flags|=128,C=!0,Rc(b,!1),f.lanes=4194304);b.isBackwards?(I.sibling=f.child,f.child=I):(c=b.last,c!==null?c.sibling=I:f.child=I,b.last=I)}return b.tail!==null?(c=b.tail,b.rendering=c,b.tail=c.sibling,b.renderingStartTime=gs(),c.sibling=null,v=pi.current,w(pi,C?v&1|2:v&1),dn&&Re(f,b.treeForkCount),c):(Gn(f),null);case 22:case 23:return Ye(f),j(),b=f.memoizedState!==null,c!==null?c.memoizedState!==null!==b&&(f.flags|=8192):b&&(f.flags|=8192),b?(v&536870912)!==0&&(f.flags&128)===0&&(Gn(f),f.subtreeFlags&6&&(f.flags|=8192)):Gn(f),v=f.updateQueue,v!==null&&Zu(f,v.retryQueue),v=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==v&&(f.flags|=2048),c!==null&&_(Qo),null;case 24:return v=null,c!==null&&(v=c.memoizedState.cache),f.memoizedState.cache!==v&&(f.flags|=2048),tt(ni),Gn(f),null;case 25:return null;case 30:return null}throw Error(s(156,f.tag))}function $p(c,f){switch(Ae(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return tt(ni),de(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return et(f),null;case 31:if(f.memoizedState!==null){if(Ye(f),f.alternate===null)throw Error(s(340));Pt()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 13:if(Ye(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(s(340));Pt()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return _(pi),null;case 4:return de(),null;case 10:return tt(f.type),null;case 22:case 23:return Ye(f),j(),c!==null&&_(Qo),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return tt(ni),null;case 25:return null;default:return null}}function cv(c,f){switch(Ae(f),f.tag){case 3:tt(ni),de();break;case 26:case 27:case 5:et(f);break;case 4:de();break;case 31:f.memoizedState!==null&&Ye(f);break;case 13:Ye(f);break;case 19:_(pi);break;case 10:tt(f.type);break;case 22:case 23:Ye(f),j(),c!==null&&_(Qo);break;case 24:tt(ni)}}function xa(c,f){try{var v=f.updateQueue,b=v!==null?v.lastEffect:null;if(b!==null){var C=b.next;v=C;do{if((v.tag&c)===c){b=void 0;var I=v.create,H=v.inst;b=I(),H.destroy=b}v=v.next}while(v!==C)}}catch(te){Vt(f,f.return,te)}}function _a(c,f,v){try{var b=f.updateQueue,C=b!==null?b.lastEffect:null;if(C!==null){var I=C.next;b=I;do{if((b.tag&c)===c){var H=b.inst,te=H.destroy;if(te!==void 0){H.destroy=void 0,C=f;var Se=v,Fe=te;try{Fe()}catch(Qe){Vt(C,Se,Qe)}}}b=b.next}while(b!==I)}}catch(Qe){Vt(f,f.return,Qe)}}function Nc(c){var f=c.updateQueue;if(f!==null){var v=c.stateNode;try{Qa(f,v)}catch(b){Vt(c,c.return,b)}}}function Ch(c,f,v){v.props=Dl(c.type,c.memoizedProps),v.state=c.memoizedState;try{v.componentWillUnmount()}catch(b){Vt(c,f,b)}}function Dc(c,f){try{var v=c.ref;if(v!==null){switch(c.tag){case 26:case 27:case 5:var b=Hc(c.stateNode);break;case 30:b=c.stateNode;break;default:b=c.stateNode}typeof v=="function"?c.refCleanup=v(b):v.current=b}}catch(C){Vt(c,f,C)}}function ms(c,f){var v=c.ref,b=c.refCleanup;if(v!==null)if(typeof b=="function")try{b()}catch(C){Vt(c,f,C)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(C){Vt(c,f,C)}else v.current=null}function Ul(c){var f=c.type,v=c.memoizedProps,b=c.stateNode;try{Mv(b,f,v,c)}catch(C){Vt(c,c.return,C)}}function Yu(c,f,v){try{wv(c.stateNode,c.type,v,f,c)}catch(b){Vt(c,c.return,b)}}function Kp(c){return c.tag===5||c.tag===3||(zr?c.tag===26:!1)||(Bi?c.tag===27&&Xl(c.type):!1)||c.tag===4}function to(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Kp(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(Bi&&c.tag===27&&Xl(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Rh(c,f,v){var b=c.tag;if(b===5||b===6)c=c.stateNode,f?Ev(v,c,f):vm(v,c);else if(b!==4&&(Bi&&b===27&&Xl(c.type)&&(v=c.stateNode,f=null),c=c.child,c!==null))for(Rh(c,f,v),c=c.sibling;c!==null;)Rh(c,f,v),c=c.sibling}function $u(c,f,v){var b=c.tag;if(b===5||b===6)c=c.stateNode,f?Tv(v,c,f):gm(v,c);else if(b!==4&&(Bi&&b===27&&Xl(c.type)&&(v=c.stateNode),c=c.child,c!==null))for($u(c,f,v),c=c.sibling;c!==null;)$u(c,f,v),c=c.sibling}function Jp(c,f,v){c=c.containerInfo;try{Mm(c,v)}catch(b){Vt(f,f.return,b)}}function uv(c){var f=c.stateNode,v=c.memoizedProps;try{Di(c.type,v,f,c)}catch(b){Vt(c,c.return,b)}}function sS(c,f){for(Wh(c.containerInfo),bi=f;bi!==null;)if(c=bi,f=c.child,(c.subtreeFlags&1028)!==0&&f!==null)f.return=c,bi=f;else for(;bi!==null;){c=bi;var v=c.alternate;switch(f=c.flags,c.tag){case 0:if((f&4)!==0&&(f=c.updateQueue,f=f!==null?f.events:null,f!==null))for(var b=0;b<f.length;b++){var C=f[b];C.ref.impl=C.nextImpl}break;case 11:case 15:break;case 1:if((f&1024)!==0&&v!==null){f=void 0,b=c,C=v.memoizedProps,v=v.memoizedState;var I=b.stateNode;try{var H=Dl(b.type,C);f=I.getSnapshotBeforeUpdate(H,v),I.__reactInternalSnapshotBeforeUpdate=f}catch(te){Vt(b,b.return,te)}}break;case 3:(f&1024)!==0&&gn&&_m(c.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(s(163))}if(f=c.sibling,f!==null){f.return=c.return,bi=f;break}bi=c.return}}function fv(c,f,v){var b=v.flags;switch(v.tag){case 0:case 11:case 15:ws(c,v),b&4&&xa(5,v);break;case 1:if(ws(c,v),b&4)if(c=v.stateNode,f===null)try{c.componentDidMount()}catch(H){Vt(v,v.return,H)}else{var C=Dl(v.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(C,f,c.__reactInternalSnapshotBeforeUpdate)}catch(H){Vt(v,v.return,H)}}b&64&&Nc(v),b&512&&Dc(v,v.return);break;case 3:if(ws(c,v),b&64&&(b=v.updateQueue,b!==null)){if(c=null,v.child!==null)switch(v.child.tag){case 27:case 5:c=Hc(v.child.stateNode);break;case 1:c=v.child.stateNode}try{Qa(b,c)}catch(H){Vt(v,v.return,H)}}break;case 27:Bi&&f===null&&b&4&&uv(v);case 26:case 5:if(ws(c,v),f===null){if(b&4)Ul(v);else if(b&64){c=v.type,f=v.memoizedProps,C=v.stateNode;try{qv(C,c,f,v)}catch(H){Vt(v,v.return,H)}}}b&512&&Dc(v,v.return);break;case 12:ws(c,v);break;case 31:ws(c,v),b&4&&Dr(c,v);break;case 13:ws(c,v),b&4&&Ju(c,v),b&64&&(b=v.memoizedState,b!==null&&(b=b.dehydrated,b!==null&&(v=rS.bind(null,v),Jh(b,v))));break;case 22:if(b=v.memoizedState!==null||mi,!b){f=f!==null&&f.memoizedState!==null||gi,C=mi;var I=gi;mi=b,(gi=f)&&!I?Lr(c,v,(v.subtreeFlags&8772)!==0):ws(c,v),mi=C,gi=I}break;case 30:break;default:ws(c,v)}}function Qp(c){var f=c.alternate;f!==null&&(c.alternate=null,Qp(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&Xh(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Nr(c,f,v){for(v=v.child;v!==null;)Ku(c,f,v),v=v.sibling}function Ku(c,f,v){if(Hs&&typeof Hs.onCommitFiberUnmount=="function")try{Hs.onCommitFiberUnmount(Yl,v)}catch{}switch(v.tag){case 26:if(zr){gi||ms(v,f),Nr(c,f,v),v.memoizedState?Ko(v.memoizedState):v.stateNode&&Um(v.stateNode);break}case 27:if(Bi){gi||ms(v,f);var b=li,C=Si;Xl(v.type)&&(li=v.stateNode,Si=!1),Nr(c,f,v),$i(v.stateNode),li=b,Si=C;break}case 5:gi||ms(v,f);case 6:if(gn){if(b=li,C=Si,li=null,Nr(c,f,v),li=b,Si=C,li!==null)if(Si)try{ym(li,v.stateNode)}catch(I){Vt(v,f,I)}else try{Av(li,v.stateNode)}catch(I){Vt(v,f,I)}}else Nr(c,f,v);break;case 18:gn&&li!==null&&(Si?Qh(li,v.stateNode):Nm(li,v.stateNode));break;case 4:gn?(b=li,C=Si,li=v.stateNode.containerInfo,Si=!0,Nr(c,f,v),li=b,Si=C):(cr&&Jp(v.stateNode,v,bm()),Nr(c,f,v));break;case 0:case 11:case 14:case 15:_a(2,v,f),gi||_a(4,v,f),Nr(c,f,v);break;case 1:gi||(ms(v,f),b=v.stateNode,typeof b.componentWillUnmount=="function"&&Ch(v,f,b)),Nr(c,f,v);break;case 21:Nr(c,f,v);break;case 22:gi=(b=gi)||v.memoizedState!==null,Nr(c,f,v),gi=b;break;default:Nr(c,f,v)}}function Dr(c,f){if(ei&&f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null))){c=c.dehydrated;try{cS(c)}catch(v){Vt(f,f.return,v)}}}function Ju(c,f){if(ei&&f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{uS(c)}catch(v){Vt(f,f.return,v)}}function Ir(c){switch(c.tag){case 31:case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new Wm),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new Wm),f;default:throw Error(s(435,c.tag))}}function no(c,f){var v=Ir(c);f.forEach(function(b){if(!v.has(b)){v.add(b);var C=aS.bind(null,c,b);b.then(C,C)}})}function Zi(c,f){var v=f.deletions;if(v!==null)for(var b=0;b<v.length;b++){var C=v[b],I=c,H=f;if(gn){var te=H;e:for(;te!==null;){switch(te.tag){case 27:if(Bi){if(Xl(te.type)){li=te.stateNode,Si=!1;break e}break}case 5:li=te.stateNode,Si=!1;break e;case 3:case 4:li=te.stateNode.containerInfo,Si=!0;break e}te=te.return}if(li===null)throw Error(s(160));Ku(I,H,C),li=null,Si=!1}else Ku(I,H,C);I=C.alternate,I!==null&&(I.return=null),C.return=null}if(f.subtreeFlags&13886)for(f=f.child;f!==null;)Qu(f,c),f=f.sibling}function Qu(c,f){var v=c.alternate,b=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Zi(f,c),Yi(c),b&4&&(_a(3,c,c.return),xa(3,c),_a(5,c,c.return));break;case 1:Zi(f,c),Yi(c),b&512&&(gi||v===null||ms(v,v.return)),b&64&&mi&&(c=c.updateQueue,c!==null&&(b=c.callbacks,b!==null&&(v=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=v===null?b:v.concat(b))));break;case 26:if(zr){var C=Un;if(Zi(f,c),Yi(c),b&512&&(gi||v===null||ms(v,v.return)),b&4){b=v!==null?v.memoizedState:null;var I=c.memoizedState;v===null?I===null?c.stateNode===null?c.stateNode=Qv(C,c.type,c.memoizedProps,c):Pm(C,c.type,c.stateNode):c.stateNode=Lm(C,I,c.memoizedProps):b!==I?(b===null?v.stateNode!==null&&Um(v.stateNode):Ko(b),I===null?Pm(C,c.type,c.stateNode):Lm(C,I,c.memoizedProps)):I===null&&c.stateNode!==null&&Yu(c,c.memoizedProps,v.memoizedProps)}break}case 27:if(Bi){Zi(f,c),Yi(c),b&512&&(gi||v===null||ms(v,v.return)),v!==null&&b&4&&Yu(c,c.memoizedProps,v.memoizedProps);break}case 5:if(Zi(f,c),Yi(c),b&512&&(gi||v===null||ms(v,v.return)),gn){if(c.flags&32){C=c.stateNode;try{xm(C)}catch(Ge){Vt(c,c.return,Ge)}}b&4&&c.stateNode!=null&&(C=c.memoizedProps,Yu(c,C,v!==null?v.memoizedProps:C)),b&1024&&(Yc=!0)}else cr&&c.alternate!==null&&(c.alternate.stateNode=c.stateNode);break;case 6:if(Zi(f,c),Yi(c),b&4&&gn){if(c.stateNode===null)throw Error(s(162));b=c.memoizedProps,v=v!==null?v.memoizedProps:b,C=c.stateNode;try{Sv(C,v,b)}catch(Ge){Vt(c,c.return,Ge)}}break;case 3:if(zr?(ey(),C=Un,Un=hf(f.containerInfo),Zi(f,c),Un=C):Zi(f,c),Yi(c),b&4){if(gn&&ei&&v!==null&&v.memoizedState.isDehydrated)try{Zv(f.containerInfo)}catch(Ge){Vt(c,c.return,Ge)}if(cr){b=f.containerInfo,v=f.pendingChildren;try{Mm(b,v)}catch(Ge){Vt(c,c.return,Ge)}}}Yc&&(Yc=!1,Nh(c));break;case 4:zr?(v=Un,Un=hf(c.stateNode.containerInfo),Zi(f,c),Yi(c),Un=v):(Zi(f,c),Yi(c)),b&4&&cr&&Jp(c.stateNode,c,c.stateNode.pendingChildren);break;case 12:Zi(f,c),Yi(c);break;case 31:Zi(f,c),Yi(c),b&4&&(b=c.updateQueue,b!==null&&(c.updateQueue=null,no(c,b)));break;case 13:Zi(f,c),Yi(c),c.child.flags&8192&&c.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(Sf=gs()),b&4&&(b=c.updateQueue,b!==null&&(c.updateQueue=null,no(c,b)));break;case 22:C=c.memoizedState!==null;var H=v!==null&&v.memoizedState!==null,te=mi,Se=gi;if(mi=te||C,gi=Se||H,Zi(f,c),gi=Se,mi=te,Yi(c),b&8192&&(f=c.stateNode,f._visibility=C?f._visibility&-2:f._visibility|1,C&&(v===null||H||mi||gi||ko(c)),gn)){e:if(v=null,gn)for(f=c;;){if(f.tag===5||zr&&f.tag===26){if(v===null){H=v=f;try{I=H.stateNode,C?oS(I):Rv(H.stateNode,H.memoizedProps)}catch(Ge){Vt(H,H.return,Ge)}}}else if(f.tag===6){if(v===null){H=f;try{var Fe=H.stateNode;C?Cv(Fe):Nv(Fe,H.memoizedProps)}catch(Ge){Vt(H,H.return,Ge)}}}else if(f.tag===18){if(v===null){H=f;try{var Qe=H.stateNode;C?$v(Qe):Kv(H.stateNode)}catch(Ge){Vt(H,H.return,Ge)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break e;for(;f.sibling===null;){if(f.return===null||f.return===c)break e;v===f&&(v=null),f=f.return}v===f&&(v=null),f.sibling.return=f.return,f=f.sibling}}b&4&&(b=c.updateQueue,b!==null&&(v=b.retryQueue,v!==null&&(b.retryQueue=null,no(c,v))));break;case 19:Zi(f,c),Yi(c),b&4&&(b=c.updateQueue,b!==null&&(c.updateQueue=null,no(c,b)));break;case 30:break;case 21:break;default:Zi(f,c),Yi(c)}}function Yi(c){var f=c.flags;if(f&2){try{for(var v,b=c.return;b!==null;){if(Kp(b)){v=b;break}b=b.return}if(gn){if(v==null)throw Error(s(160));switch(v.tag){case 27:if(Bi){var C=v.stateNode,I=to(c);$u(c,I,C);break}case 5:var H=v.stateNode;v.flags&32&&(xm(H),v.flags&=-33);var te=to(c);$u(c,te,H);break;case 3:case 4:var Se=v.stateNode.containerInfo,Fe=to(c);Rh(c,Fe,Se);break;default:throw Error(s(161))}}}catch(Qe){Vt(c,c.return,Qe)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function Nh(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;Nh(f),f.tag===5&&f.flags&1024&&hm(f.stateNode),c=c.sibling}}function ws(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)fv(c,f.alternate,f),f=f.sibling}function ko(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:_a(4,f,f.return),ko(f);break;case 1:ms(f,f.return);var v=f.stateNode;typeof v.componentWillUnmount=="function"&&Ch(f,f.return,v),ko(f);break;case 27:Bi&&$i(f.stateNode);case 26:case 5:ms(f,f.return),ko(f);break;case 22:f.memoizedState===null&&ko(f);break;case 30:ko(f);break;default:ko(f)}c=c.sibling}}function Lr(c,f,v){for(v=v&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var b=f.alternate,C=c,I=f,H=I.flags;switch(I.tag){case 0:case 11:case 15:Lr(C,I,v),xa(4,I);break;case 1:if(Lr(C,I,v),b=I,C=b.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(Fe){Vt(b,b.return,Fe)}if(b=I,C=b.updateQueue,C!==null){var te=b.stateNode;try{var Se=C.shared.hiddenCallbacks;if(Se!==null)for(C.shared.hiddenCallbacks=null,C=0;C<Se.length;C++)Ja(Se[C],te)}catch(Fe){Vt(b,b.return,Fe)}}v&&H&64&&Nc(I),Dc(I,I.return);break;case 27:Bi&&uv(I);case 26:case 5:Lr(C,I,v),v&&b===null&&H&4&&Ul(I),Dc(I,I.return);break;case 12:Lr(C,I,v);break;case 31:Lr(C,I,v),v&&H&4&&Dr(C,I);break;case 13:Lr(C,I,v),v&&H&4&&Ju(C,I);break;case 22:I.memoizedState===null&&Lr(C,I,v),Dc(I,I.return);break;case 30:break;default:Lr(C,I,v)}f=f.sibling}}function Fo(c,f){var v=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==v&&(c!=null&&c.refCount++,v!=null&&Ue(v))}function em(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Ue(c))}function si(c,f,v,b){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)Dh(c,f,v,b),f=f.sibling}function Dh(c,f,v,b){var C=f.flags;switch(f.tag){case 0:case 11:case 15:si(c,f,v,b),C&2048&&xa(9,f);break;case 1:si(c,f,v,b);break;case 3:si(c,f,v,b),C&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Ue(c)));break;case 12:if(C&2048){si(c,f,v,b),c=f.stateNode;try{var I=f.memoizedProps,H=I.id,te=I.onPostCommit;typeof te=="function"&&te(H,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Se){Vt(f,f.return,Se)}}else si(c,f,v,b);break;case 31:si(c,f,v,b);break;case 13:si(c,f,v,b);break;case 23:break;case 22:I=f.stateNode,H=f.alternate,f.memoizedState!==null?I._visibility&2?si(c,f,v,b):Ic(c,f):I._visibility&2?si(c,f,v,b):(I._visibility|=2,Os(c,f,v,b,(f.subtreeFlags&10256)!==0||!1)),C&2048&&Fo(H,f);break;case 24:si(c,f,v,b),C&2048&&em(f.alternate,f);break;default:si(c,f,v,b)}}function Os(c,f,v,b,C){for(C=C&&((f.subtreeFlags&10256)!==0||!1),f=f.child;f!==null;){var I=c,H=f,te=v,Se=b,Fe=H.flags;switch(H.tag){case 0:case 11:case 15:Os(I,H,te,Se,C),xa(8,H);break;case 23:break;case 22:var Qe=H.stateNode;H.memoizedState!==null?Qe._visibility&2?Os(I,H,te,Se,C):Ic(I,H):(Qe._visibility|=2,Os(I,H,te,Se,C)),C&&Fe&2048&&Fo(H.alternate,H);break;case 24:Os(I,H,te,Se,C),C&&Fe&2048&&em(H.alternate,H);break;default:Os(I,H,te,Se,C)}f=f.sibling}}function Ic(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var v=c,b=f,C=b.flags;switch(b.tag){case 22:Ic(v,b),C&2048&&Fo(b.alternate,b);break;case 24:Ic(v,b),C&2048&&em(b.alternate,b);break;default:Ic(v,b)}f=f.sibling}}function ba(c,f,v){if(c.subtreeFlags&dr)for(c=c.child;c!==null;)Bo(c,f,v),c=c.sibling}function Bo(c,f,v){switch(c.tag){case 26:if(ba(c,f,v),c.flags&dr)if(c.memoizedState!==null)ty(v,Un,c.memoizedState,c.memoizedProps);else{var b=c.stateNode,C=c.type;c=c.memoizedProps,((f&335544128)===f||um(C,c))&&qh(v,b,C,c)}break;case 5:ba(c,f,v),c.flags&dr&&(b=c.stateNode,C=c.type,c=c.memoizedProps,((f&335544128)===f||um(C,c))&&qh(v,b,C,c));break;case 3:case 4:zr?(b=Un,Un=hf(c.stateNode.containerInfo),ba(c,f,v),Un=b):ba(c,f,v);break;case 22:c.memoizedState===null&&(b=c.alternate,b!==null&&b.memoizedState!==null?(b=dr,dr=16777216,ba(c,f,v),dr=b):ba(c,f,v));break;default:ba(c,f,v)}}function Ih(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function Lc(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var b=f[v];bi=b,ar(b,c)}Ih(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Lh(c),c=c.sibling}function Lh(c){switch(c.tag){case 0:case 11:case 15:Lc(c),c.flags&2048&&_a(9,c,c.return);break;case 3:Lc(c);break;case 12:Lc(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&2&&(c.return===null||c.return.tag!==13)?(f._visibility&=-3,ef(c)):Lc(c);break;default:Lc(c)}}function ef(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var b=f[v];bi=b,ar(b,c)}Ih(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:_a(8,f,f.return),ef(f);break;case 22:v=f.stateNode,v._visibility&2&&(v._visibility&=-3,ef(f));break;default:ef(f)}c=c.sibling}}function ar(c,f){for(;bi!==null;){var v=bi;switch(v.tag){case 0:case 11:case 15:_a(8,v,f);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var b=v.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:Ue(v.memoizedState.cache)}if(b=v.child,b!==null)b.return=v,bi=b;else e:for(v=c;bi!==null;){b=bi;var C=b.sibling,I=b.return;if(Qp(b),b===v){bi=null;break e}if(C!==null){C.return=I,bi=C;break e}bi=I}}}function Vo(c){var f=Zt(c);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(s(364));return f}if(c=xi(c),c===null)throw Error(s(362));return c.stateNode.current}function Ho(c,f){var v=c.tag;switch(f.$$typeof){case Wr:if(c.type===f.value)return!0;break;case Kc:e:{for(f=f.value,c=[c,0],v=0;v<c.length;){var b=c[v++],C=b.tag,I=c[v++],H=f[I];if(C!==5&&C!==26&&C!==27||!Yo(b)){for(;H!=null&&Ho(b,H);)I++,H=f[I];if(I===f.length){f=!0;break e}else for(b=b.child;b!==null;)c.push(b,I),b=b.sibling}}f=!1}return f;case Jc:if((v===5||v===26||v===27)&&mm(c.stateNode,f.value))return!0;break;case il:if((v===5||v===6||v===26||v===27)&&(c=uf(c),c!==null&&0<=c.indexOf(f.value)))return!0;break;case _f:if((v===5||v===26||v===27)&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Pc(c){switch(c.$$typeof){case Wr:return"<"+(y(c.value)||"Unknown")+">";case Kc:return":has("+(Pc(c)||"")+")";case Jc:return'[role="'+c.value+'"]';case il:return'"'+c.value+'"';case _f:return'[data-testname="'+c.value+'"]';default:throw Error(s(365))}}function Uc(c,f){var v=[];c=[c,0];for(var b=0;b<c.length;){var C=c[b++],I=C.tag,H=c[b++],te=f[H];if(I!==5&&I!==26&&I!==27||!Yo(C)){for(;te!=null&&Ho(C,te);)H++,te=f[H];if(H===f.length)v.push(C);else for(C=C.child;C!==null;)c.push(C,H),C=C.sibling}}return v}function zs(c,f){if(!Fi)throw Error(s(363));c=Vo(c),c=Uc(c,f),f=[],c=Array.from(c);for(var v=0;v<c.length;){var b=c[v++],C=b.tag;if(C===5||C===26||C===27)Yo(b)||f.push(b.stateNode);else for(b=b.child;b!==null;)c.push(b),b=b.sibling}return f}function Qn(){return(cn&2)!==0&&pn!==0?pn&-pn:It.T!==null?nt():Gc()}function io(){if(Ns===0)if((pn&536870912)===0||dn){var c=Zl;Zl<<=1,(Zl&3932160)===0&&(Zl=262144),Ns=c}else Ns=536870912;return c=js.current,c!==null&&(c.flags|=32),Ns}function ri(c,f,v){(c===rn&&(On===2||On===9)||c.cancelPendingCommit!==null)&&(di(c,0),Ma(c,pn,Ns,!1)),z(c,v),((cn&2)===0||c!==rn)&&(c===rn&&((cn&2)===0&&(al|=v),ci===4&&Ma(c,pn,Ns,!1)),dt(c))}function sa(c,f,v){if((cn&6)!==0)throw Error(s(327));var b=!v&&(f&127)===0&&(f&c.expiredLanes)===0||D(c,f),C=b?pv(c,f):wa(c,f,!0),I=b;do{if(C===0){sl&&!b&&Ma(c,f,0,!1);break}else{if(v=c.current.alternate,I&&!hv(v)){C=wa(c,f,!1),I=!1;continue}if(C===2){if(I=f,c.errorRecoveryDisabledLanes&I)var H=0;else H=c.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){f=H;e:{var te=c;C=bf;var Se=ei&&te.current.memoizedState.isDehydrated;if(Se&&(di(te,H).flags|=256),H=wa(te,H,!1),H!==2){if(rl&&!Se){te.errorRecoveryDisabledLanes|=I,al|=I,C=4;break e}I=Ws,Ws=C,I!==null&&(Ws===null?Ws=I:Ws.push.apply(Ws,I))}C=H}if(I=!1,C!==2)continue}}if(C===1){di(c,0),Ma(c,f,0,!0);break}e:{switch(b=c,I=C,I){case 0:case 1:throw Error(s(345));case 4:if((f&4194048)!==f)break;case 6:Ma(b,f,Ns,!la);break e;case 2:Ws=null;break;case 3:case 5:break;default:throw Error(s(329))}if((f&62914560)===f&&(C=Sf+300-gs(),10<C)){if(Ma(b,f,Ns,!la),M(b,0,!0)!==0)break e;ka=f,b.timeoutHandle=cm(Sa.bind(null,b,v,Ws,Mf,md,f,Ns,al,eu,la,I,"Throttled",-0,0),C);break e}Sa(b,v,Ws,Mf,md,f,Ns,al,eu,la,I,null,-0,0)}}break}while(!0);dt(c)}function Sa(c,f,v,b,C,I,H,te,Se,Fe,Qe,Ge,gt,qt){if(c.timeoutHandle=Bs,Ge=f.subtreeFlags,Ge&8192||(Ge&16785408)===16785408){Ge=fm(),Bo(f,I,Ge);var Mi=(I&62914560)===I?Sf-gs():(I&4194048)===I?tc-gs():0;if(Mi=bv(Ge,Mi),Mi!==null){ka=I,c.cancelPendingCommit=Mi(Ea.bind(null,c,f,I,v,b,C,H,te,Se,Qe,Ge,null,gt,qt)),Ma(c,I,H,!Fe);return}}Ea(c,f,I,v,b,C,H,te,Se)}function hv(c){for(var f=c;;){var v=f.tag;if((v===0||v===11||v===15)&&f.flags&16384&&(v=f.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var b=0;b<v.length;b++){var C=v[b],I=C.getSnapshot;C=C.value;try{if(!_i(I(),C))return!1}catch{return!1}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Ma(c,f,v,b){f&=~Qc,f&=~al,c.suspendedLanes|=f,c.pingedLanes&=~f,b&&(c.warmLanes|=f),b=c.expirationTimes;for(var C=f;0<C;){var I=31-Vs(C),H=1<<I;b[I]=-1,C&=~H}v!==0&&V(c,v,f)}function Ph(){return(cn&6)===0?(Ke(0),!1):!0}function Uh(){if(un!==null){if(On===0)var c=un.return;else c=un,aa=Xn=null,zn(c),el=null,$l=0,c=un;for(;c!==null;)cv(c.alternate,c),c=c.return;un=null}}function di(c,f){var v=c.timeoutHandle;v!==Bs&&(c.timeoutHandle=Bs,_v(v)),v=c.cancelPendingCommit,v!==null&&(c.cancelPendingCommit=null,v()),ka=0,Uh(),rn=c,un=v=lr(c.current,null),pn=f,On=0,Ii=null,la=!1,sl=D(c,f),rl=!1,eu=Ns=Qc=al=go=ci=0,Ws=bf=null,md=!1,(f&8)!==0&&(f|=f&32);var b=c.entangledLanes;if(b!==0)for(c=c.entanglements,b&=f;0<b;){var C=31-Vs(b),I=1<<C;f|=c[C],b&=~I}return za=f,Io(),v}function Wn(c,f){Yt=null,It.H=hr,f===ji||f===jr?(f=bn(),On=3):f===dd?(f=bn(),On=4):On=f===Rs?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Ii=f,un===null&&(ci=1,wh(c,Ee(f,c.current)))}function mn(){var c=js.current;return c===null?!0:(pn&4194048)===pn?Gs===null:(pn&62914560)===pn||(pn&536870912)!==0?c===Gs:!1}function so(){var c=It.H;return It.H=hr,c===null?hr:c}function or(){var c=It.A;return It.A=$c,c}function Oc(){ci=4,la||(pn&4194048)!==pn&&js.current!==null||(sl=!0),(go&134217727)===0&&(al&134217727)===0||rn===null||Ma(rn,pn,Ns,!1)}function wa(c,f,v){var b=cn;cn|=2;var C=so(),I=or();(rn!==c||pn!==f)&&(Mf=null,di(c,f)),f=!1;var H=ci;e:do try{if(On!==0&&un!==null){var te=un,Se=Ii;switch(On){case 8:Uh(),H=6;break e;case 3:case 2:case 9:case 6:js.current===null&&(f=!0);var Fe=On;if(On=0,Ii=null,Ta(c,te,Se,Fe),v&&sl){H=0;break e}break;default:Fe=On,On=0,Ii=null,Ta(c,te,Se,Fe)}}dv(),H=ci;break}catch(Qe){Wn(c,Qe)}while(!0);return f&&c.shellSuspendCounter++,aa=Xn=null,cn=b,It.H=C,It.A=I,un===null&&(rn=null,pn=0,Io()),H}function dv(){for(;un!==null;)jo(un)}function pv(c,f){var v=cn;cn|=2;var b=so(),C=or();rn!==c||pn!==f?(Mf=null,ol=gs()+500,di(c,f)):sl=D(c,f);e:do try{if(On!==0&&un!==null){f=un;var I=Ii;t:switch(On){case 1:On=0,Ii=null,Ta(c,f,I,1);break;case 2:case 9:if(Je(I)){On=0,Ii=null,Oh(f);break}f=function(){On!==2&&On!==9||rn!==c||(On=7),dt(c)},I.then(f,f);break e;case 3:On=7;break e;case 4:On=5;break e;case 7:Je(I)?(On=0,Ii=null,Oh(f)):(On=0,Ii=null,Ta(c,f,I,7));break;case 5:var H=null;switch(un.tag){case 26:H=un.memoizedState;case 5:case 27:var te=un,Se=te.type,Fe=te.pendingProps;if(H?zm(H):ai(te.stateNode,Se,Fe)){On=0,Ii=null;var Qe=te.sibling;if(Qe!==null)un=Qe;else{var Ge=te.return;Ge!==null?(un=Ge,kc(Ge)):un=null}break t}}On=0,Ii=null,Ta(c,f,I,5);break;case 6:On=0,Ii=null,Ta(c,f,I,6);break;case 8:Uh(),ci=6;break e;default:throw Error(s(462))}}zc();break}catch(gt){Wn(c,gt)}while(!0);return aa=Xn=null,It.H=b,It.A=C,cn=v,un!==null?0:(rn=null,pn=0,Io(),ci)}function zc(){for(;un!==null&&!iy();)jo(un)}function jo(c){var f=qp(c.alternate,c,za);c.memoizedProps=c.pendingProps,f===null?kc(c):un=f}function Oh(c){var f=c,v=f.alternate;switch(f.tag){case 15:case 0:f=Vp(v,f,f.pendingProps,f.type,void 0,pn);break;case 11:f=Vp(v,f,f.pendingProps,f.type.render,f.ref,pn);break;case 5:zn(f);default:cv(v,f),f=un=Fh(f,za),f=qp(v,f,za)}c.memoizedProps=c.pendingProps,f===null?kc(c):un=f}function Ta(c,f,v,b){aa=Xn=null,zn(f),el=null,$l=0;var C=f.return;try{if(iS(c,C,f,v,pn)){ci=1,wh(c,Ee(v,c.current)),un=null;return}}catch(I){if(C!==null)throw un=C,I;ci=1,wh(c,Ee(v,c.current)),un=null;return}f.flags&32768?(dn||b===1?c=!0:sl||(pn&536870912)!==0?c=!1:(la=c=!0,(b===2||b===9||b===3||b===6)&&(b=js.current,b!==null&&b.tag===13&&(b.flags|=16384))),Go(f,c)):kc(f)}function kc(c){var f=c;do{if((f.flags&32768)!==0){Go(f,la);return}c=f.return;var v=lv(f.alternate,f,za);if(v!==null){un=v;return}if(f=f.sibling,f!==null){un=f;return}un=f=c}while(f!==null);ci===0&&(ci=5)}function Go(c,f){do{var v=$p(c.alternate,c);if(v!==null){v.flags&=32767,un=v;return}if(v=c.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!f&&(c=c.sibling,c!==null)){un=c;return}un=c=v}while(c!==null);ci=6,un=null}function Ea(c,f,v,b,C,I,H,te,Se){c.cancelPendingCommit=null;do Ca();while(Li!==0);if((cn&6)!==0)throw Error(s(327));if(f!==null){if(f===c.current)throw Error(s(177));if(I=f.lanes|f.childLanes,I|=Kl,B(c,v,I,H,te,Se),c===rn&&(un=rn=null,pn=0),nc=f,yo=c,ka=v,tu=I,gd=C,Xm=b,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,Ni(pf,function(){return tf(),null})):(c.callbackNode=null,c.callbackPriority=0),b=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||b){b=It.T,It.T=null,C=Or(),hn(2),H=cn,cn|=4;try{sS(c,f,v)}finally{cn=H,hn(C),It.T=b}}Li=1,ro(),Aa(),zh()}}function ro(){if(Li===1){Li=0;var c=yo,f=nc,v=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||v){v=It.T,It.T=null;var b=Or();hn(2);var C=cn;cn|=4;try{Qu(f,c),xv(c.containerInfo)}finally{cn=C,hn(b),It.T=v}}c.current=f,Li=2}}function Aa(){if(Li===2){Li=0;var c=yo,f=nc,v=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||v){v=It.T,It.T=null;var b=Or();hn(2);var C=cn;cn|=4;try{fv(c,f.alternate,f)}finally{cn=C,hn(b),It.T=v}}Li=3}}function zh(){if(Li===4||Li===3){Li=0,Fm();var c=yo,f=nc,v=ka,b=Xm;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Li=5:(Li=0,nc=yo=null,kh(c,c.pendingLanes));var C=c.pendingLanes;if(C===0&&(vo=null),ee(v),f=f.stateNode,Hs&&typeof Hs.onCommitFiberRoot=="function")try{Hs.onCommitFiberRoot(Yl,f,void 0,(f.current.flags&128)===128)}catch{}if(b!==null){f=It.T,C=Or(),hn(2),It.T=null;try{for(var I=c.onRecoverableError,H=0;H<b.length;H++){var te=b[H];I(te.value,{componentStack:te.stack})}}finally{It.T=f,hn(C)}}(ka&3)!==0&&Ca(),dt(c),C=c.pendingLanes,(v&261930)!==0&&(C&42)!==0?c===wf?An++:(An=0,wf=c):An=0,ei&&ff(),Ke(0)}}function kh(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,Ue(f)))}function Ca(){return ro(),Aa(),zh(),tf()}function tf(){if(Li!==5)return!1;var c=yo,f=tu;tu=0;var v=ee(ka),b=32>v?32:v;v=It.T;var C=Or();try{hn(b),It.T=null,b=gd,gd=null;var I=yo,H=ka;if(Li=0,nc=yo=null,ka=0,(cn&6)!==0)throw Error(s(331));var te=cn;if(cn|=4,Lh(I.current),Dh(I,I.current,H,b),cn=te,Ke(0,!1),Hs&&typeof Hs.onPostCommitFiberRoot=="function")try{Hs.onPostCommitFiberRoot(Yl,I)}catch{}return!0}finally{hn(C),It.T=v,kh(c,f)}}function Wo(c,f,v){f=Ee(v,f),f=Fp(c.stateNode,f,2),c=sr(c,f,2),c!==null&&(z(c,2),dt(c))}function Vt(c,f,v){if(c.tag===3)Wo(c,c,v);else for(;f!==null;){if(f.tag===3){Wo(f,c,v);break}else if(f.tag===1){var b=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(vo===null||!vo.has(b))){c=Ee(v,c),v=$0(2),b=sr(f,v,2),b!==null&&(K0(v,b,f,c),z(b,2),dt(b));break}}f=f.return}}function Fc(c,f,v){var b=c.pingCache;if(b===null){b=c.pingCache=new pr;var C=new Set;b.set(f,C)}else C=b.get(f),C===void 0&&(C=new Set,b.set(f,C));C.has(v)||(rl=!0,C.add(v),c=mv.bind(null,c,f,v),f.then(c,c))}function mv(c,f,v){var b=c.pingCache;b!==null&&b.delete(f),c.pingedLanes|=c.suspendedLanes&v,c.warmLanes&=~v,rn===c&&(pn&v)===v&&(ci===4||ci===3&&(pn&62914560)===pn&&300>gs()-Sf?(cn&2)===0&&di(c,0):Qc|=v,eu===pn&&(eu=0)),dt(c)}function gv(c,f){f===0&&(f=N()),c=ps(c,f),c!==null&&(z(c,f),dt(c))}function rS(c){var f=c.memoizedState,v=0;f!==null&&(v=f.retryLane),gv(c,v)}function aS(c,f){var v=0;switch(c.tag){case 31:case 13:var b=c.stateNode,C=c.memoizedState;C!==null&&(v=C.retryLane);break;case 19:b=c.stateNode;break;case 22:b=c.stateNode._retryCache;break;default:throw Error(s(314))}b!==null&&b.delete(f),gv(c,v)}function Ni(c,f){return df(c,f)}function tm(c,f,v,b){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(c){return c=c.prototype,!(!c||!c.isReactComponent)}function lr(c,f){var v=c.alternate;return v===null?(v=t(c.tag,f,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=f,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&65011712,v.childLanes=c.childLanes,v.lanes=c.lanes,v.child=c.child,v.memoizedProps=c.memoizedProps,v.memoizedState=c.memoizedState,v.updateQueue=c.updateQueue,f=c.dependencies,v.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},v.sibling=c.sibling,v.index=c.index,v.ref=c.ref,v.refCleanup=c.refCleanup,v}function Fh(c,f){c.flags&=65011714;var v=c.alternate;return v===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=v.childLanes,c.lanes=v.lanes,c.child=v.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=v.memoizedProps,c.memoizedState=v.memoizedState,c.updateQueue=v.updateQueue,c.type=v.type,f=v.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function ao(c,f,v,b,C,I){var H=0;if(b=c,typeof c=="function")Ol(c)&&(H=1);else if(typeof c=="string")H=zr&&Bi?ed(c,v,Ki.current)?26:km(c)?27:5:zr?ed(c,v,Ki.current)?26:5:Bi&&km(c)?27:5;else e:switch(c){case af:return c=t(31,v,f,C),c.elementType=af,c.lanes=I,c;case Bl:return Pr(v.children,C,I,f);case Vl:H=8,C|=24;break;case Hl:return c=t(12,v,f,C|2),c.elementType=Hl,c.lanes=I,c;case jh:return c=t(13,v,f,C),c.elementType=jh,c.lanes=I,c;case oo:return c=t(19,v,f,C),c.elementType=oo,c.lanes=I,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case Ur:H=10;break e;case rf:H=9;break e;case Bc:H=11;break e;case Gh:H=14;break e;case Ts:H=16,b=null;break e}H=29,v=Error(s(130,c===null?"null":typeof c,"")),b=null}return f=t(H,v,f,C),f.elementType=c,f.type=b,f.lanes=I,f}function Pr(c,f,v,b){return c=t(7,c,b,f),c.lanes=v,c}function nm(c,f,v){return c=t(6,c,null,f),c.lanes=v,c}function im(c){var f=t(18,null,null,0);return f.stateNode=c,f}function sm(c,f,v){return f=t(4,c.children!==null?c.children:[],c.key,f),f.lanes=v,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function vv(c,f,v,b,C,I,H,te,Se){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Bs,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=P(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=P(0),this.hiddenUpdates=P(null),this.identifierPrefix=b,this.onUncaughtError=C,this.onCaughtError=I,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Se,this.incompleteTransitions=new Map}function Xo(c,f,v,b,C,I,H,te,Se,Fe,Qe,Ge){return c=new vv(c,f,v,H,Se,Fe,Qe,Ge,te),f=1,I===!0&&(f|=24),I=t(3,null,null,f),c.current=I,I.stateNode=c,f=Me(),f.refCount++,c.pooledCache=f,f.refCount++,I.memoizedState={element:b,isDehydrated:v,cache:f},zi(I),c}function Bh(c){return c?(c=Na,c):Na}function nf(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(s(188)):(c=Object.keys(c).join(","),Error(s(268,c)));return c=u(f),c=c!==null?d(c):null,c===null?null:Hc(c.stateNode)}function rm(c,f,v,b,C,I){C=Bh(C),b.context===null?b.context=C:b.pendingContext=C,b=ir(f),b.payload={element:v},I=I===void 0?null:I,I!==null&&(b.callback=I),v=sr(c,b,f),v!==null&&(ri(v,c,f),Lo(v,c,f))}function zl(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<f?v:f}}function sf(c,f){zl(c,f),(c=c.alternate)&&zl(c,f)}var nn={},Vh=jf,ks=gZ,Hh=Object.assign,kl=Symbol.for("react.element"),Ra=Symbol.for("react.transitional.element"),Fl=Symbol.for("react.portal"),Bl=Symbol.for("react.fragment"),Vl=Symbol.for("react.strict_mode"),Hl=Symbol.for("react.profiler"),rf=Symbol.for("react.consumer"),Ur=Symbol.for("react.context"),Bc=Symbol.for("react.forward_ref"),jh=Symbol.for("react.suspense"),oo=Symbol.for("react.suspense_list"),Gh=Symbol.for("react.memo"),Ts=Symbol.for("react.lazy"),af=Symbol.for("react.activity"),am=Symbol.for("react.memo_cache_sentinel"),lo=Symbol.iterator,qo=Symbol.for("react.client.reference"),Zo=Array.isArray,It=Vh.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,om=e.rendererVersion,of=e.rendererPackageName,Vc=e.extraDevToolsConfig,Hc=e.getPublicInstance,yv=e.getRootHostContext,jc=e.getChildHostContext,Wh=e.prepareForCommit,xv=e.resetAfterCommit,lm=e.createInstance;e.cloneMutableInstance;var lf=e.appendInitialChild,Fs=e.finalizeInitialChildren,Es=e.shouldSetTextContent,co=e.createTextInstance;e.cloneMutableTextInstance;var cm=e.scheduleTimeout,_v=e.cancelTimeout,Bs=e.noTimeout,yi=e.isPrimaryRenderer;e.warnsIfNotActing;var gn=e.supportsMutation,cr=e.supportsPersistence,ei=e.supportsHydration,Zt=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var kn=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var hn=e.setCurrentUpdatePriority,Or=e.getCurrentUpdatePriority,Gc=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var jl=e.shouldAttemptEagerTransition,Xh=e.detachDeletedInstance;e.requestPostPaintCallback;var cf=e.maySuspendCommit,Wc=e.maySuspendCommitOnUpdate,um=e.maySuspendCommitInSyncRender,ai=e.preloadInstance,fm=e.startSuspendingCommit,qh=e.suspendInstance;e.suspendOnActiveViewTransition;var bv=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var Gl=e.NotPendingTransition,Wl=e.HostTransitionContext,hm=e.resetFormInstance;e.bindToConsole;var dm=e.supportsMicrotasks,pm=e.scheduleMicrotask,Fi=e.supportsTestSelectors,xi=e.findFiberRoot,Zh=e.getBoundingRect,uf=e.getTextContent,Yo=e.isHiddenSubtree,mm=e.matchAccessibilityRole,uo=e.setFocusIfFocusable,Yh=e.setupIntersectionObserver,gm=e.appendChild,vm=e.appendChildToContainer,Sv=e.commitTextUpdate,Mv=e.commitMount,wv=e.commitUpdate,Tv=e.insertBefore,Ev=e.insertInContainerBefore,Av=e.removeChild,ym=e.removeChildFromContainer,xm=e.resetTextContent,oS=e.hideInstance,Cv=e.hideTextInstance,Rv=e.unhideInstance,Nv=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var _m=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var Dv=e.cloneInstance,bm=e.createContainerChildSet,Sm=e.appendChildToContainerChildSet,Iv=e.finalizeContainerChildren,Mm=e.replaceContainerChildren,Lv=e.cloneHiddenInstance,wm=e.cloneHiddenTextInstance,$o=e.isSuspenseInstancePending,$h=e.isSuspenseInstanceFallback,Kh=e.getSuspenseInstanceFallbackErrorDetails,Jh=e.registerSuspenseInstanceRetry,Pv=e.canHydrateFormStateMarker,Tm=e.isFormStateMarkerMatching,Uv=e.getNextHydratableSibling,Ov=e.getNextHydratableSiblingAfterSingleton,zv=e.getFirstHydratableChild,kv=e.getFirstHydratableChildWithinContainer,Fv=e.getFirstHydratableChildWithinActivityInstance,Bv=e.getFirstHydratableChildWithinSuspenseInstance,Em=e.getFirstHydratableChildWithinSingleton,Vv=e.canHydrateInstance,Hv=e.canHydrateTextInstance,Am=e.canHydrateActivityInstance,jv=e.canHydrateSuspenseInstance,Gv=e.hydrateInstance,lS=e.hydrateTextInstance,Cm=e.hydrateActivityInstance,Wv=e.hydrateSuspenseInstance,Xv=e.getNextHydratableInstanceAfterActivityInstance,Rm=e.getNextHydratableInstanceAfterSuspenseInstance,qv=e.commitHydratedInstance,Zv=e.commitHydratedContainer,cS=e.commitHydratedActivityInstance,uS=e.commitHydratedSuspenseInstance,Yv=e.finalizeHydratedChildren,ff=e.flushHydrationEvents;e.clearActivityBoundary;var Nm=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var Qh=e.clearSuspenseBoundaryFromContainer,$v=e.hideDehydratedBoundary,Kv=e.unhideDehydratedBoundary,Xc=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Jv=e.validateHydratableInstance,Dm=e.validateHydratableTextInstance,zr=e.supportsResources,ed=e.isHostHoistableType,hf=e.getHoistableRoot,Im=e.getResource,Lm=e.acquireResource,Ko=e.releaseResource,Qv=e.hydrateHoistable,Pm=e.mountHoistable,Um=e.unmountHoistable,td=e.createHoistableInstance,ey=e.prepareToCommitHoistables,Om=e.mayResourceSuspendCommit,zm=e.preloadResource,ty=e.suspendResource,Bi=e.supportsSingletons,nd=e.resolveSingletonInstance,Di=e.acquireSingletonInstance,$i=e.releaseSingletonInstance,km=e.isHostSingletonType,Xl=e.isSingletonScope,id=[],ql=-1,Na={},Vs=Math.clz32?Math.clz32:A,sd=Math.log,ny=Math.LN2,rd=256,Zl=262144,qc=4194304,df=ks.unstable_scheduleCallback,ad=ks.unstable_cancelCallback,iy=ks.unstable_shouldYield,Fm=ks.unstable_requestPaint,gs=ks.unstable_now,od=ks.unstable_ImmediatePriority,sy=ks.unstable_UserBlockingPriority,pf=ks.unstable_NormalPriority,ld=ks.unstable_IdlePriority,Bm=ks.log,ry=ks.unstable_setDisableYieldValue,Yl=null,Hs=null,_i=typeof Object.is=="function"?Object.is:ae,cd=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},fS=Object.prototype.hasOwnProperty,ud,Da,mf=!1,Vm=new WeakMap,fo=[],Ia=0,Fn=null,gf=0,kr=[],ur=0,Fr=null,os=1,ra="",Ki=x(null),ho=x(null),ls=x(null),vf=x(null),Vi=null,ti=null,dn=!1,La=null,As=!1,fd=Error(s(519)),Br=x(null),Xn=null,aa=null,ay=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(v,b){c.push(b)}};this.abort=function(){f.aborted=!0,c.forEach(function(v){return v()})}},Ji=ks.unstable_scheduleCallback,hS=ks.unstable_NormalPriority,ni={$$typeof:Ur,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},yf=null,Pn=null,vs=!1,Vr=!1,hd=!1,Jo=0,Zc=null,Hm=0,po=0,Hi=null,Hr=It.S;It.S=function(c,f){tc=gs(),typeof f=="object"&&f!==null&&typeof f.then=="function"&&Jt(c,f),Hr!==null&&Hr(c,f)};var Qo=x(null),ji=Error(s(460)),dd=Error(s(474)),jr=Error(s(542)),Pa={then:function(){}},Cs=null,el=null,$l=0,cs=Tl(!0),jm=Tl(!1),us=[],Ua=0,Kl=0,fr=!1,pd=!1,Jl=x(null),tl=x(0),js=x(null),Gs=null,pi=x(0),mo=0,Yt=null,Ct=null,Gt=null,sn=!1,Qt=!1,yn=!1,ys=0,Gr=0,oa=null,Gm=0,hr={readContext:X,use:Ci,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We};hr.useEffectEvent=We;var oi={readContext:X,use:Ci,useCallback:function(c,f){return Xt().memoizedState=[c,f===void 0?null:f],c},useContext:X,useEffect:Vu,useImperativeHandle:function(c,f,v){v=v!=null?v.concat([c]):null,Nl(4194308,4,Mc.bind(null,f,c),v)},useLayoutEffect:function(c,f){return Nl(4194308,4,c,f)},useInsertionEffect:function(c,f){Nl(4,2,c,f)},useMemo:function(c,f){var v=Xt();f=f===void 0?null:f;var b=c();if(yn){J(!0);try{c()}finally{J(!1)}}return v.memoizedState=[b,f],b},useReducer:function(c,f,v){var b=Xt();if(v!==void 0){var C=v(f);if(yn){J(!0);try{v(f)}finally{J(!1)}}}else C=f;return b.memoizedState=b.baseState=C,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:C},b.queue=c,c=c.dispatch=nS.bind(null,Yt,c),[b.memoizedState,c]},useRef:function(c){var f=Xt();return c={current:c},f.memoizedState=c},useState:function(c){c=Dp(c);var f=c.queue,v=X0.bind(null,Yt,f);return f.dispatch=v,[c.memoizedState,v]},useDebugValue:ju,useDeferredValue:function(c,f){var v=Xt();return Tc(v,c,f)},useTransition:function(){var c=Dp(!1);return c=j0.bind(null,Yt,c.queue,!0,!1),Xt().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,v){var b=Yt,C=Xt();if(dn){if(v===void 0)throw Error(s(407));v=v()}else{if(v=f(),rn===null)throw Error(s(349));(pn&127)!==0||Xi(b,f,v)}C.memoizedState=v;var I={value:v,getSnapshot:f};return C.queue=I,Vu(Cl.bind(null,b,I,c),[c]),b.flags|=2048,rr(9,{destroy:void 0},qi.bind(null,b,I,v,f),null),v},useId:function(){var c=Xt(),f=rn.identifierPrefix;if(dn){var v=ra,b=os;v=(b&~(1<<32-Vs(b)-1)).toString(32)+v,f="_"+f+"R_"+v,v=ys++,0<v&&(f+="H"+v.toString(32)),f+="_"}else v=Gm++,f="_"+f+"r_"+v.toString(32)+"_";return c.memoizedState=f},useHostTransitionStatus:Op,useFormState:Lp,useActionState:Lp,useOptimistic:function(c){var f=Xt();f.memoizedState=f.baseState=c;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=v,f=bh.bind(null,Yt,!0,v),v.dispatch=f,[c,f]},useMemoCache:ia,useCacheRefresh:function(){return Xt().memoizedState=tS.bind(null,Yt)},useEffectEvent:function(c){var f=Xt(),v={impl:c};return f.memoizedState=v,function(){if((cn&2)!==0)throw Error(s(440));return v.impl.apply(void 0,arguments)}}},Oa={readContext:X,use:Ci,useCallback:xh,useContext:X,useEffect:Sc,useImperativeHandle:H0,useInsertionEffect:Oo,useLayoutEffect:Hu,useMemo:wc,useReducer:bs,useRef:yh,useState:function(){return bs($n)},useDebugValue:ju,useDeferredValue:function(c,f){var v=ot();return Up(v,Ct.memoizedState,c,f)},useTransition:function(){var c=bs($n)[0],f=ot().memoizedState;return[typeof c=="boolean"?c:Ft(c),f]},useSyncExternalStore:Ri,useId:_h,useHostTransitionStatus:Op,useFormState:_c,useActionState:_c,useOptimistic:function(c,f){var v=ot();return Fu(v,Ct,c,f)},useMemoCache:ia,useCacheRefresh:W0};Oa.useEffectEvent=Ss;var nl={readContext:X,use:Ci,useCallback:xh,useContext:X,useEffect:Sc,useImperativeHandle:H0,useInsertionEffect:Oo,useLayoutEffect:Hu,useMemo:wc,useReducer:ki,useRef:yh,useState:function(){return ki($n)},useDebugValue:ju,useDeferredValue:function(c,f){var v=ot();return Ct===null?Tc(v,c,f):Up(v,Ct.memoizedState,c,f)},useTransition:function(){var c=ki($n)[0],f=ot().memoizedState;return[typeof c=="boolean"?c:Ft(c),f]},useSyncExternalStore:Ri,useId:_h,useHostTransitionStatus:Op,useFormState:bc,useActionState:bc,useOptimistic:function(c,f){var v=ot();return Ct!==null?Fu(v,Ct,c,f):(v.baseState=c,[c,v.queue.dispatch])},useMemoCache:ia,useCacheRefresh:W0};nl.useEffectEvent=Ss;var xf={enqueueSetState:function(c,f,v){c=c._reactInternals;var b=Qn(),C=ir(b);C.payload=f,v!=null&&(C.callback=v),f=sr(c,C,b),f!==null&&(ri(f,c,b),Lo(f,c,b))},enqueueReplaceState:function(c,f,v){c=c._reactInternals;var b=Qn(),C=ir(b);C.tag=1,C.payload=f,v!=null&&(C.callback=v),f=sr(c,C,b),f!==null&&(ri(f,c,b),Lo(f,c,b))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var v=Qn(),b=ir(v);b.tag=2,f!=null&&(b.callback=f),f=sr(c,b,v),f!==null&&(ri(f,c,v),Lo(f,c,v))}},Rs=Error(s(461)),Kn=!1,Ql={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},mi=!1,gi=!1,Yc=!1,Wm=typeof WeakSet=="function"?WeakSet:Set,bi=null,li=null,Si=!1,Un=null,dr=8192,$c={getCacheForType:function(c){var f=X(ni),v=f.data.get(c);return v===void 0&&(v=c(),f.data.set(c,v)),v},cacheSignal:function(){return X(ni).controller.signal}},Wr=0,Kc=1,Jc=2,_f=3,il=4;if(typeof Symbol=="function"&&Symbol.for){var ec=Symbol.for;Wr=ec("selector.component"),Kc=ec("selector.has_pseudo_class"),Jc=ec("selector.role"),_f=ec("selector.test_id"),il=ec("selector.text")}var pr=typeof WeakMap=="function"?WeakMap:Map,cn=0,rn=null,un=null,pn=0,On=0,Ii=null,la=!1,sl=!1,rl=!1,za=0,ci=0,go=0,al=0,Qc=0,Ns=0,eu=0,bf=null,Ws=null,md=!1,Sf=0,tc=0,ol=1/0,Mf=null,vo=null,Li=0,yo=null,nc=null,ka=0,tu=0,gd=null,Xm=null,An=0,wf=null;return nn.attemptContinuousHydration=function(c){if(c.tag===13||c.tag===31){var f=ps(c,67108864);f!==null&&ri(f,c,67108864),sf(c,67108864)}},nn.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13||c.tag===31){var f=Qn();f=W(f);var v=ps(c,f);v!==null&&ri(v,c,f),sf(c,f)}},nn.attemptSynchronousHydration=function(c){switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var f=E(c.pendingLanes);if(f!==0){for(c.pendingLanes|=2,c.entangledLanes|=2;f;){var v=1<<31-Vs(f);c.entanglements[1]|=v,f&=~v}dt(c),(cn&6)===0&&(ol=gs()+500,Ke(0))}}break;case 31:case 13:f=ps(c,2),f!==null&&ri(f,c,2),Ph(),sf(c,2)}},nn.batchedUpdates=function(c,f){return c(f)},nn.createComponentSelector=function(c){return{$$typeof:Wr,value:c}},nn.createContainer=function(c,f,v,b,C,I,H,te,Se,Fe){return Xo(c,f,!1,null,v,b,I,null,H,te,Se,Fe)},nn.createHasPseudoClassSelector=function(c){return{$$typeof:Kc,value:c}},nn.createHydrationContainer=function(c,f,v,b,C,I,H,te,Se,Fe,Qe,Ge,gt,qt){var Mi;return c=Xo(v,b,!0,c,C,I,te,qt,Se,Fe,Qe,Ge),c.context=Bh(null),v=c.current,b=Qn(),b=W(b),C=ir(b),C.callback=(Mi=f)!=null?Mi:null,sr(v,C,b),f=b,c.current.lanes=f,z(c,f),dt(c),c},nn.createPortal=function(c,f,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fl,key:b==null?null:""+b,children:c,containerInfo:f,implementation:v}},nn.createRoleSelector=function(c){return{$$typeof:Jc,value:c}},nn.createTestNameSelector=function(c){return{$$typeof:_f,value:c}},nn.createTextSelector=function(c){return{$$typeof:il,value:c}},nn.defaultOnCaughtError=function(c){console.error(c)},nn.defaultOnRecoverableError=function(c){cd(c)},nn.defaultOnUncaughtError=function(c){cd(c)},nn.deferredUpdates=function(c){var f=It.T,v=Or();try{return hn(32),It.T=null,c()}finally{hn(v),It.T=f}},nn.discreteUpdates=function(c,f,v,b,C){var I=It.T,H=Or();try{return hn(2),It.T=null,c(f,v,b,C)}finally{hn(H),It.T=I,cn===0&&(ol=gs()+500)}},nn.findAllNodes=zs,nn.findBoundingRects=function(c,f){if(!Fi)throw Error(s(363));f=zs(c,f),c=[];for(var v=0;v<f.length;v++)c.push(Zh(f[v]));for(f=c.length-1;0<f;f--){v=c[f];for(var b=v.x,C=b+v.width,I=v.y,H=I+v.height,te=f-1;0<=te;te--)if(f!==te){var Se=c[te],Fe=Se.x,Qe=Fe+Se.width,Ge=Se.y,gt=Ge+Se.height;if(b>=Fe&&I>=Ge&&C<=Qe&&H<=gt){c.splice(f,1);break}else if(b!==Fe||v.width!==Se.width||gt<I||Ge>H){if(!(I!==Ge||v.height!==Se.height||Qe<b||Fe>C)){Fe>b&&(Se.width+=Fe-b,Se.x=b),Qe<C&&(Se.width=C-Fe),c.splice(f,1);break}}else{Ge>I&&(Se.height+=Ge-I,Se.y=I),gt<H&&(Se.height=H-Ge),c.splice(f,1);break}}}return c},nn.findHostInstance=nf,nn.findHostInstanceWithNoPortals=function(c){return c=u(c),c=c!==null?p(c):null,c===null?null:Hc(c.stateNode)},nn.findHostInstanceWithWarning=function(c){return nf(c)},nn.flushPassiveEffects=Ca,nn.flushSyncFromReconciler=function(c){var f=cn;cn|=1;var v=It.T,b=Or();try{if(hn(2),It.T=null,c)return c()}finally{hn(b),It.T=v,cn=f,(cn&6)===0&&Ke(0)}},nn.flushSyncWork=Ph,nn.focusWithin=function(c,f){if(!Fi)throw Error(s(363));for(c=Vo(c),f=Uc(c,f),f=Array.from(f),c=0;c<f.length;){var v=f[c++],b=v.tag;if(!Yo(v)){if((b===5||b===26||b===27)&&uo(v.stateNode))return!0;for(v=v.child;v!==null;)f.push(v),v=v.sibling}}return!1},nn.getFindAllNodesFailureDescription=function(c,f){if(!Fi)throw Error(s(363));var v=0,b=[];c=[Vo(c),0];for(var C=0;C<c.length;){var I=c[C++],H=I.tag,te=c[C++],Se=f[te];if((H!==5&&H!==26&&H!==27||!Yo(I))&&(Ho(I,Se)&&(b.push(Pc(Se)),te++,te>v&&(v=te)),te<f.length))for(I=I.child;I!==null;)c.push(I,te),I=I.sibling}if(v<f.length){for(c=[];v<f.length;v++)c.push(Pc(f[v]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},nn.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 27:case 5:return Hc(c.child.stateNode);default:return c.child.stateNode}},nn.injectIntoDevTools=function(){var c={bundleType:0,version:om,rendererPackageName:of,currentDispatcherRef:It,reconcilerVersion:"19.2.0"};if(Vc!==null&&(c.rendererConfig=Vc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)c=!0;else{try{Yl=f.inject(c),Hs=f}catch{}c=!!f.checkDCE}}return c},nn.isAlreadyRendering=function(){return(cn&6)!==0},nn.observeVisibleRects=function(c,f,v,b){if(!Fi)throw Error(s(363));c=zs(c,f);var C=Yh(c,v,b).disconnect;return{disconnect:function(){C()}}},nn.shouldError=function(){return null},nn.shouldSuspend=function(){return!1},nn.startHostTransition=function(c,f,v,b){if(c.tag!==5)throw Error(s(476));var C=G0(c).queue;j0(c,C,f,Gl,v===null?i:function(){var I=G0(c);return I.next===null&&(I=c.alternate.memoizedState),Gu(c,I.next.queue,{},Qn()),v(b)})},nn.updateContainer=function(c,f,v,b){var C=f.current,I=Qn();return rm(C,I,c,f,v,b),I},nn.updateContainerSync=function(c,f,v,b){return rm(f.current,2,c,f,v,b),2},nn},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(LR)),LR.exports}var UR;function WZ(){return UR||(UR=1,IR.exports=GZ()),IR.exports}var XZ=WZ();const qZ=jZ(XZ);function ZZ(n){const e=qZ(n);return e.injectIntoDevTools(),e}const UP=0,vp={},YZ=/^three(?=[A-Z])/,$b=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let $Z=0;const KZ=n=>typeof n=="function";function JZ(n){if(KZ(n)){const e=`${$Z++}`;return vp[e]=n,e}else Object.assign(vp,n)}function OP(n,e){const t=$b(n),i=vp[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function QZ(n,e,t){var i;return n=$b(n)in vp?n:n.replace(YZ,""),OP(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,Z_(e.object,t,n,e)}function eY(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?$_(n.parent,n):Yr(n.object)&&(n.object.visible=!1),n.isHidden=!0,Np(n)}}function zP(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?Y_(n.parent,n):Yr(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,Np(n)}}function eE(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var s,a;const l=vp[$b(e.type)];e.object=(s=e.props.object)!=null?s:new l(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(_u(e.object,e.props),e.props.attach)Y_(n,e);else if(Yr(e.object)&&Yr(n.object)){const l=n.object.children.indexOf(t?.object);if(t&&l!==-1){const u=n.object.children.indexOf(e.object);if(u!==-1){n.object.children.splice(u,1);const d=u<l?l-1:l;n.object.children.splice(d,0,e.object)}else e.object.parent=n.object,n.object.children.splice(l,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const l of e.children)eE(e,l);Np(e)}}function J1(n,e){e&&(e.parent=n,n.children.push(e),eE(n,e))}function OR(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),eE(n,e,t)}function kP(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():iw.unstable_scheduleCallback(iw.unstable_IdlePriority,e)}}function rw(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?$_(n,e):Yr(e.object)&&Yr(n.object)&&(n.object.remove(e.object),LZ(CP(e),e.object));const s=e.props.dispose!==null&&t!==!1;for(let a=e.children.length-1;a>=0;a--){const l=e.children[a];rw(e,l,s)}e.children.length=0,delete e.object.__r3f,s&&e.type!=="primitive"&&e.object.type!=="Scene"&&kP(e.object),t===void 0&&Np(e)}function tY(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const Ox=[];function nY(){for(const[t]of Ox){const i=t.parent;if(i){t.props.attach?$_(i,t):Yr(t.object)&&Yr(i.object)&&i.object.remove(t.object);for(const s of t.children)s.props.attach?$_(t,s):Yr(s.object)&&Yr(t.object)&&t.object.remove(s.object)}t.isHidden&&zP(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&kP(t.object)}for(const[t,i,s]of Ox){t.props=i;const a=t.parent;if(a){var n,e;const l=vp[$b(t.type)];t.object=(n=t.props.object)!=null?n:new l(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,tY(s,t.object),_u(t.object,t.props),t.props.attach?Y_(a,t):Yr(t.object)&&Yr(a.object)&&a.object.add(t.object);for(const u of t.children)u.props.attach?Y_(t,u):Yr(u.object)&&Yr(t.object)&&t.object.add(u.object);Np(t)}}Ox.length=0}const Q1=()=>{},zR={};let Mx=UP;const iY=0,sY=4,aw=ZZ({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:QZ,removeChild:rw,appendChild:J1,appendInitialChild:J1,insertBefore:OR,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||J1(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||rw(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||OR(i,e,t)},getRootHostContext:()=>zR,getChildHostContext:()=>zR,commitUpdate(n,e,t,i,s){var a,l,u;OP(e,i);let d=!1;if((n.type==="primitive"&&t.object!==i.object||((a=i.args)==null?void 0:a.length)!==((l=t.args)==null?void 0:l.length)||(u=i.args)!=null&&u.some((g,y)=>{var x;return g!==((x=t.args)==null?void 0:x[y])}))&&(d=!0),d)Ox.push([n,{...i},s]);else{const g=RZ(n,i);Object.keys(g).length&&(Object.assign(n.props,g),_u(n.object,g))}(s.sibling===null||(s.flags&sY)===iY)&&nY()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n?.object,prepareForCommit:()=>null,preparePortalMount:n=>Z_(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:eY,unhideInstance:zP,createTextInstance:Q1,hideTextInstance:Q1,unhideTextInstance:Q1,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:pe.createContext(null),setCurrentUpdatePriority(n){Mx=n},getCurrentUpdatePriority(){return Mx},resolveUpdatePriority(){var n;if(Mx!==UP)return Mx;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return VZ;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return FZ;default:return BZ}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:HZ.version,applyViewTransitionName(n,e,t){},restoreViewTransitionName(n,e){},cancelViewTransitionName(n,e,t){},cancelRootViewTransitionName(n){},restoreRootViewTransitionName(n){},InstanceMeasurement:null,measureInstance:n=>null,wasInstanceInViewport:n=>!0,hasInstanceChanged:(n,e)=>!1,hasInstanceAffectedParent:(n,e)=>!1,suspendOnActiveViewTransition(n,e){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(n){},createViewTransitionInstance:n=>null,getCurrentGestureOffset(n){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(n,e){return n},cloneMutableTextInstance(n){return n},cloneRootViewTransitionContainer(n){throw new Error("Not implemented.")},removeRootViewTransitionClone(n,e){throw new Error("Not implemented.")},createFragmentInstance:n=>null,updateFragmentInstanceFiber(n,e){},commitNewChildToFragmentInstance(n,e){},deleteChildFromFragmentInstance(n,e){},measureClonedInstance:n=>null,maySuspendCommitOnUpdate:(n,e,t)=>!1,maySuspendCommitInSyncRender:(n,e)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(n,e)=>null}),ch=new Map,jd={objects:"shallow",strict:!1};function rY(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:s,left:a}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:s,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function aY(n){const e=ch.get(n),t=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,a=i||UZ(cw,FR),l=t||aw.createContainer(a,kZ,null,!1,null,"",s,s,s,null);e||ch.set(n,{fiber:l,store:a});let u,d,p=!1,g=null;return{async configure(y={}){let x;g=new Promise(q=>x=q);let{gl:_,size:w,scene:A,events:E,onCreated:M,shadows:D=!1,linear:L=!1,flat:N=!1,legacy:P=!1,orthographic:z=!1,frameloop:B="always",dpr:V=[1,2],performance:O,raycaster:F,camera:W,onPointerMissed:ee}=y,J=a.getState(),ae=J.gl;if(!J.gl){const q={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},oe=typeof _=="function"?await _(q):_;DR(oe)?ae=oe:ae=new wP({...q,..._}),J.set({gl:ae})}let he=J.raycaster;he||J.set({raycaster:he=new gP});const{params:Z,...K}=F||{};if(wi.equ(K,he,jd)||_u(he,{...K}),wi.equ(Z,he.params,jd)||_u(he,{params:{...he.params,...Z}}),!J.camera||J.camera===d&&!wi.equ(d,W,jd)){d=W;const q=W?.isCamera,oe=q?W:z?new Cp(0,0,0,0,.1,1e3):new _s(75,0,.1,1e3);q||(oe.position.z=5,W&&(_u(oe,W),oe.manual||("aspect"in W||"left"in W||"right"in W||"bottom"in W||"top"in W)&&(oe.manual=!0,oe.updateProjectionMatrix())),!J.camera&&!(W!=null&&W.rotation)&&oe.lookAt(0,0,0)),J.set({camera:oe}),he.camera=oe}if(!J.scene){let q;A!=null&&A.isScene?(q=A,Z_(q,a,"",{})):(q=new TT,Z_(q,a,"",{}),A&&_u(q,A)),J.set({scene:q})}E&&!J.events.handlers&&J.set({events:E(a)});const le=rY(n,w);if(wi.equ(le,J.size,jd)||J.setSize(le.width,le.height,le.top,le.left),V&&J.viewport.dpr!==DP(V)&&J.setDpr(V),J.frameloop!==B&&J.setFrameloop(B),J.onPointerMissed||J.set({onPointerMissed:ee}),O&&!wi.equ(O,J.performance,jd)&&J.set(q=>({performance:{...q.performance,...O}})),!J.xr){var Ee;const q=(ke,rt)=>{const de=a.getState();de.frameloop!=="never"&&FR(ke,!0,de,rt)},oe=()=>{const ke=a.getState();ke.gl.xr.enabled=ke.gl.xr.isPresenting,ke.gl.xr.setAnimationLoop(ke.gl.xr.isPresenting?q:null),ke.gl.xr.isPresenting||cw(ke)},Ae={connect(){const ke=a.getState().gl;ke.xr.addEventListener("sessionstart",oe),ke.xr.addEventListener("sessionend",oe)},disconnect(){const ke=a.getState().gl;ke.xr.removeEventListener("sessionstart",oe),ke.xr.removeEventListener("sessionend",oe)}};typeof((Ee=ae.xr)==null?void 0:Ee.addEventListener)=="function"&&Ae.connect(),J.set({xr:Ae})}if(ae.shadowMap){const q=ae.shadowMap.enabled,oe=ae.shadowMap.type;if(ae.shadowMap.enabled=!!D,wi.boo(D))ae.shadowMap.type=Og;else if(wi.str(D)){var Re;const Ae={basic:UI,percentage:np,soft:Og,variance:Xf};ae.shadowMap.type=(Re=Ae[D])!=null?Re:Og}else wi.obj(D)&&Object.assign(ae.shadowMap,D);(q!==ae.shadowMap.enabled||oe!==ae.shadowMap.type)&&(ae.shadowMap.needsUpdate=!0)}return Tn.enabled=!P,p||(ae.outputColorSpace=L?Ru:$s,ae.toneMapping=N?Wa:pb),J.legacy!==P&&J.set(()=>({legacy:P})),J.linear!==L&&J.set(()=>({linear:L})),J.flat!==N&&J.set(()=>({flat:N})),_&&!wi.fun(_)&&!DR(_)&&!wi.equ(_,ae,jd)&&_u(ae,_),u=M,p=!0,x(),this},render(y){return!p&&!g&&this.configure(),g.then(()=>{aw.updateContainer(R.jsx(oY,{store:a,children:y,onCreated:u,rootElement:n}),l,null,()=>{})}),a},unmount(){FP(n)}}}function oY({store:n,children:e,onCreated:t,rootElement:i}){return z0(()=>{const s=n.getState();s.set(a=>({internal:{...a.internal,active:!0}})),t&&t(s),n.getState().events.connected||s.events.connect==null||s.events.connect(i)},[]),R.jsx(PP.Provider,{value:n,children:e})}function FP(n,e){const t=ch.get(n),i=t?.fiber;if(i){const s=t?.store.getState();s&&(s.internal.active=!1),aw.updateContainer(null,i,null,()=>{s&&setTimeout(()=>{try{var a,l,u,d;s.events.disconnect==null||s.events.disconnect(),(a=s.gl)==null||(l=a.renderLists)==null||l.dispose==null||l.dispose(),(u=s.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(d=s.gl)!=null&&d.xr&&s.xr.disconnect(),EZ(s.scene),ch.delete(n)}catch{}},500)})}}const lY=new Set,cY=new Set,uY=new Set;function eM(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Wg(n,e){switch(n){case"before":return eM(lY,e);case"after":return eM(cY,e);case"tail":return eM(uY,e)}}let tM,nM;function ow(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),tM=e.internal.subscribers;for(let s=0;s<tM.length;s++)nM=tM[s],nM.ref.current(nM.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let K_=!1,lw=!1,iM,kR,Gd;function BP(n){kR=requestAnimationFrame(BP),K_=!0,iM=0,Wg("before",n),lw=!0;for(const t of ch.values()){var e;Gd=t.store.getState(),Gd.internal.active&&(Gd.frameloop==="always"||Gd.internal.frames>0)&&!((e=Gd.gl.xr)!=null&&e.isPresenting)&&(iM+=ow(n,Gd))}if(lw=!1,Wg("after",n),iM===0)return Wg("tail",n),K_=!1,cancelAnimationFrame(kR)}function cw(n,e=1){var t;if(!n)return ch.forEach(i=>cw(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):lw?n.internal.frames=2:n.internal.frames=1,K_||(K_=!0,requestAnimationFrame(BP)))}function FR(n,e=!0,t,i){if(e&&Wg("before",n),t)ow(n,t,i);else for(const s of ch.values())ow(n,s.store.getState());e&&Wg("after",n)}const sM={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function fY(n){const{handlePointer:e}=PZ(n);return{priority:1,enabled:!0,compute(t,i,s){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(sM).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:s}=n.getState();(t=s.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{const{set:i,events:s}=n.getState();if(s.disconnect==null||s.disconnect(),i(a=>({events:{...a.events,connected:t}})),s.handlers)for(const a in s.handlers){const l=s.handlers[a],[u,d]=sM[a];t.addEventListener(u,l,{passive:d})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const s in i.handlers){const a=i.handlers[s],[l]=sM[s];i.connected.removeEventListener(l,a)}t(s=>({events:{...s.events,connected:void 0}}))}}}}function BR(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function hY({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const s=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,l]=pe.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=pe.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),d=n?typeof n=="number"?n:n.scroll:null,p=n?typeof n=="number"?n:n.resize:null,g=pe.useRef(!1);pe.useEffect(()=>(g.current=!0,()=>{g.current=!1}));const[y,x,_]=pe.useMemo(()=>{const M=()=>{if(!u.current.element)return;const{left:D,top:L,width:N,height:P,bottom:z,right:B,x:V,y:O}=u.current.element.getBoundingClientRect(),F={left:D,top:L,width:N,height:P,bottom:z,right:B,x:V,y:O};u.current.element instanceof HTMLElement&&i&&(F.height=u.current.element.offsetHeight,F.width=u.current.element.offsetWidth),Object.freeze(F),g.current&&!gY(u.current.lastBounds,F)&&l(u.current.lastBounds=F)};return[M,p?BR(M,p):M,d?BR(M,d):M]},[l,i,d,p]);function w(){u.current.scrollContainers&&(u.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",_,!0)),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null),u.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",u.current.orientationHandler))}function A(){u.current.element&&(u.current.resizeObserver=new s(_),u.current.resizeObserver.observe(u.current.element),e&&u.current.scrollContainers&&u.current.scrollContainers.forEach(M=>M.addEventListener("scroll",_,{capture:!0,passive:!0})),u.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",u.current.orientationHandler))}const E=M=>{!M||M===u.current.element||(w(),u.current.element=M,u.current.scrollContainers=VP(M),A())};return pY(_,!!e),dY(x),pe.useEffect(()=>{w(),A()},[e,_,x]),pe.useEffect(()=>w,[]),[E,a,y]}function dY(n){pe.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[n])}function pY(n,e){pe.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[n,e])}function VP(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:s}=window.getComputedStyle(n);return[t,i,s].some(a=>a==="auto"||a==="scroll")&&e.push(n),[...e,...VP(n.parentElement)]}const mY=["x","y","top","bottom","left","right","width","height"],gY=(n,e)=>mY.every(t=>n[t]===e[t]);function vY({ref:n,children:e,fallback:t,resize:i,style:s,gl:a,events:l=fY,eventSource:u,eventPrefix:d,shadows:p,linear:g,flat:y,legacy:x,orthographic:_,frameloop:w,dpr:A,performance:E,raycaster:M,camera:D,scene:L,onPointerMissed:N,onCreated:P,...z}){pe.useMemo(()=>JZ(rZ),[]);const B=MZ(),[V,O]=hY({scroll:!0,debounce:{scroll:50,resize:0},...i}),F=pe.useRef(null),W=pe.useRef(null);pe.useImperativeHandle(n,()=>F.current);const ee=NP(N),[J,ae]=pe.useState(!1),[he,Z]=pe.useState(!1);if(J)throw J;if(he)throw he;const K=pe.useRef(null);z0(()=>{const Ee=F.current;if(O.width>0&&O.height>0&&Ee){K.current||(K.current=aY(Ee));async function Re(){await K.current.configure({gl:a,scene:L,events:l,shadows:p,linear:g,flat:y,legacy:x,orthographic:_,frameloop:w,dpr:A,performance:E,raycaster:M,camera:D,size:O,onPointerMissed:(...q)=>ee.current==null?void 0:ee.current(...q),onCreated:q=>{q.events.connect==null||q.events.connect(u?bZ(u)?u.current:u:W.current),d&&q.setEvents({compute:(oe,Ae)=>{const ke=oe[d+"X"],rt=oe[d+"Y"];Ae.pointer.set(ke/Ae.size.width*2-1,-(rt/Ae.size.height)*2+1),Ae.raycaster.setFromCamera(Ae.pointer,Ae.camera)}}),P?.(q)}}),K.current.render(R.jsx(B,{children:R.jsx(TZ,{set:Z,children:R.jsx(pe.Suspense,{fallback:R.jsx(wZ,{set:ae}),children:e??null})})}))}Re()}}),pe.useEffect(()=>{const Ee=F.current;if(Ee)return()=>FP(Ee)},[]);const le=u?"none":"auto";return R.jsx("div",{ref:W,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:le,...s},...z,children:R.jsx("div",{ref:V,style:{width:"100%",height:"100%"},children:R.jsx("canvas",{ref:F,style:{display:"block"},children:t})})})}function yY(n){return R.jsx(EP,{children:R.jsx(vY,{...n})})}const xY={uniforms:{uTime:{value:0},uTotalEntities:{value:2e9},uEvolution:{value:0}},vertexShader:`
    attribute float aResonance;
    varying vec3 vColor;
    uniform float uTime;
    uniform float uEvolution;
    
    void main() {
      float i = float(gl_InstanceID);
      float phi = 1.618033988749895;
      float angle = i * phi * 2.0 * 3.14159;
      float radius = sqrt(i / 1000.0) * (0.5 + uEvolution * 0.2);
      
      vec3 pos = vec3(
        cos(angle + uEvolution * 2.0) * radius,
        sin(uTime * (0.2 + uEvolution * 1.0) + i * 0.00001) * (2.0 + uEvolution * 5.0), 
        sin(angle) * radius
      );

      // Color logic influenced by Evolution
      vec3 stableColor = mix(vec3(0.0, 0.95, 1.0), vec3(1.0, 1.0, 1.0), uEvolution);
      
      if (aResonance > 1.5) {
        vColor = vec3(1.0, 1.0, 1.0);
      } else if (aResonance > 0.5) {
        vColor = vec3(1.0, 0.0, 0.2);
      } else {
        vColor = stableColor;
      }
      
      vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);
      gl_PointSize = (aResonance > 0.5 ? 4.0 : 2.0) * (1.0 / -mvPosition.z);
      gl_Position = projectionMatrix * mvPosition;
    }
  `,fragmentShader:`
    varying vec3 vColor;
    void main() {
      if (length(gl_PointCoord - vec2(0.5)) > 0.5) discard;
      gl_FragColor = vec4(vColor, 1.0);
    }
  `},xg=1e6,_Y=()=>{const n=pe.useRef(null),e=pe.useRef(null),[t,i]=pe.useState(0);pe.useEffect(()=>{const l=II("evolution-pulse",()=>{console.log(" EVOLUTION PULSE RECEIVED"),i(u=>Math.min(u+.2,1))});return()=>{l.then(u=>u())}},[]);const{positions:s,resonance:a}=pe.useMemo(()=>{const l=new Float32Array(xg*3),u=new Float32Array(xg);for(let d=0;d<xg;d++)l[d*3]=0,l[d*3+1]=0,l[d*3+2]=0,u[d]=Math.random()>.999?1:0;return{positions:l,resonance:u}},[]);return zZ(l=>{e.current&&(e.current.uniforms.uTime.value=l.clock.getElapsedTime(),e.current.uniforms.uEvolution.value=vL.lerp(e.current.uniforms.uEvolution.value,t,.05))}),R.jsxs("points",{ref:n,children:[R.jsxs("bufferGeometry",{children:[R.jsx("bufferAttribute",{attach:"attributes-position",count:xg,array:s,itemSize:3,args:[s,3]}),R.jsx("bufferAttribute",{attach:"attributes-aResonance",count:xg,array:a,itemSize:1,args:[a,1]})]}),R.jsx("shaderMaterial",{ref:e,args:[xY],transparent:!0,depthWrite:!1,blending:t_})]})},bY=()=>R.jsxs("div",{className:"w-full h-full relative group",children:[R.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-cyan-950/20 to-transparent pointer-events-none z-10"}),R.jsxs(yY,{camera:{position:[0,20,50],fov:60},dpr:[1,2],children:[R.jsx("ambientLight",{intensity:.5}),R.jsx(_Y,{})]}),R.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[R.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-400 animate-pulse"}),R.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-400 animate-pulse delay-75"}),R.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-400 animate-pulse delay-150"})]})]});var SY={};const _g=SY.VITE_API_URL||"http://localhost:8890";function MY(){const[n,e]=pe.useState("home"),[t,i]=pe.useState([]),[s,a]=pe.useState(null),[l,u]=pe.useState(""),[d,p]=pe.useState([]),[g,y]=pe.useState(!1);pe.useEffect(()=>{fetch(`${_g}/api/products`).then(E=>E.json()).then(E=>{E.products&&i(E.products)}).catch(console.error),x();const A=setInterval(x,3e4);return()=>clearInterval(A)},[]);const x=async()=>{try{const E=await(await fetch(`${_g}/telemetry`)).json(),D=await(await fetch(`${_g}/api/economy/stats`)).json();a({totalRevenue:E.realized_revenue||D.totalRevenue||0,todayRevenue:D.todayRevenue||0,activeSubscriptions:D.activeSubscriptions||0,growthPercent:D.growthPercent||0,cryptoAssets:E.crypto_assets?{totalUSD:E.total_liquid_usd||0,assets:E.crypto_assets.map(L=>({asset:L.asset,amount:L.free,valueUSD:parseFloat(L.free)*(L.asset==="USDT"||L.asset==="USDC"?1:0)}))}:void 0})}catch(A){console.error("Failed to load stats:",A)}},_=async A=>{if(prompt("Enter your email:"))try{const D=await(await fetch(`${_g}/api/economy/checkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:A,successUrl:`${window.location.origin}/success`,cancelUrl:`${window.location.origin}/pricing`})})).json();D.checkoutUrl?window.location.href=D.checkoutUrl:alert("Failed to create checkout session")}catch(M){alert("Error: "+M.message)}},w=async()=>{if(l.trim()){y(!0),p(A=>[...A,{role:"user",text:l}]);try{const E=await(await fetch(`${_g}/api/ask`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:l})})).json();p(M=>[...M,{role:"ai",text:E.response}])}catch(A){p(E=>[...E,{role:"ai",text:"Error: "+A.message}])}u(""),y(!1)}};return R.jsxs("div",{className:"min-h-screen text-white",children:[R.jsx("nav",{className:"border-b border-purple-500/20 p-4 bg-gray-900/50 backdrop-blur",children:R.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[R.jsxs("div",{className:"flex items-center gap-2 text-2xl font-bold",children:[R.jsx("span",{className:"text-3xl",children:""}),R.jsx("span",{className:"gradient-text",children:"AETERNAAA"}),R.jsx("span",{className:"text-sm text-gray-400 ml-2",children:"Money Dashboard"})]}),R.jsxs("div",{className:"flex gap-6",children:[R.jsx("button",{onClick:()=>e("home"),className:`hover:text-purple-400 transition ${n==="home"?"text-purple-400":""}`,children:"Home"}),R.jsx("button",{onClick:()=>e("pricing"),className:`hover:text-purple-400 transition ${n==="pricing"?"text-purple-400":""}`,children:"Pricing"}),R.jsx("button",{onClick:()=>e("admin"),className:`hover:text-purple-400 transition ${n==="admin"?"text-purple-400":""}`,children:"Revenue"}),R.jsx("button",{onClick:()=>e("chat"),className:`hover:text-purple-400 transition ${n==="chat"?"text-purple-400":""}`,children:"AI Chat"})]})]})}),n==="home"&&R.jsxs("div",{className:"max-w-7xl mx-auto p-8",children:[R.jsxs("div",{className:"text-center py-20",children:[R.jsxs("h1",{className:"text-6xl font-bold mb-6",children:[R.jsx("span",{className:"gradient-text",children:"AETERNAAA"}),R.jsx("br",{}),R.jsx("span",{className:"text-white",children:"Sovereign Cognitive Entity"})]}),R.jsx("p",{className:"text-xl text-gray-400 mb-8 max-w-2xl mx-auto",children:"Enterprise AI platform with integrated payment processing. Generate revenue through Stripe and track crypto assets via Binance."}),R.jsxs("div",{className:"flex gap-4 justify-center",children:[R.jsx("button",{onClick:()=>e("pricing"),className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg font-semibold text-lg hover:opacity-90 pulse-glow",children:"View Plans"}),R.jsx("button",{onClick:()=>e("admin"),className:"px-8 py-4 border border-purple-500 rounded-lg font-semibold text-lg hover:bg-purple-500/20",children:"Revenue Dashboard"})]})]}),R.jsxs("div",{className:"grid md:grid-cols-3 gap-8 py-12",children:[R.jsx(rM,{icon:R.jsx(Vx,{className:"w-8 h-8"}),title:"Rust Backend",desc:"High-performance API with Axum framework"}),R.jsx(rM,{icon:R.jsx(_w,{className:"w-8 h-8"}),title:"Stripe Integration",desc:"Live payment processing with webhooks"}),R.jsx(rM,{icon:R.jsx(cA,{className:"w-8 h-8"}),title:"Binance Tracking",desc:"Real-time crypto asset monitoring"})]})]}),n==="pricing"&&R.jsxs("div",{className:"max-w-6xl mx-auto p-8",children:[R.jsx("h2",{className:"text-4xl font-bold text-center mb-4 gradient-text",children:" Pricing Plans"}),R.jsx("p",{className:"text-center text-gray-400 mb-12",children:"Choose your access level to AETERNAAA"}),R.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map(A=>R.jsx(wY,{product:A,popular:A.category==="enterprise",onBuy:()=>_(A.id)},A.id))})]}),n==="admin"&&s&&R.jsxs("div",{className:"max-w-7xl mx-auto p-8",children:[R.jsx("h2",{className:"text-3xl font-bold mb-8 gradient-text",children:" Revenue Dashboard"}),R.jsxs("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[R.jsx(wx,{icon:R.jsx(xw,{}),label:"Total Revenue",value:`${s.totalRevenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,color:"green"}),R.jsx(wx,{icon:R.jsx(gN,{}),label:"Today",value:`${s.todayRevenue.toLocaleString()}`,color:"blue"}),R.jsx(wx,{icon:R.jsx(pM,{}),label:"Active Subs",value:s.activeSubscriptions.toString(),color:"purple"}),R.jsx(wx,{icon:R.jsx(Bx,{}),label:"Growth",value:`+${s.growthPercent}%`,color:"pink"})]}),s.cryptoAssets&&s.cryptoAssets.totalUSD>0&&R.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 glow-box mb-8",children:[R.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[R.jsx(cA,{className:"w-6 h-6"}),"Crypto Assets (Binance)"]}),R.jsxs("div",{className:"text-3xl font-bold text-green-400 mb-4",children:["$",s.cryptoAssets.totalUSD.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),R.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:s.cryptoAssets.assets.slice(0,6).map((A,E)=>R.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[R.jsx("div",{className:"text-sm text-gray-400",children:A.asset}),R.jsx("div",{className:"text-lg font-semibold",children:A.amount})]},E))})]}),R.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 glow-box",children:[R.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Recent Activity"}),R.jsx("div",{className:"space-y-3",children:R.jsx("div",{className:"text-gray-400 text-sm",children:"Real-time transaction data will appear here when payments are processed."})})]})]}),n==="chat"&&R.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[R.jsx("h2",{className:"text-3xl font-bold mb-6 gradient-text",children:" AETERNAAA AI Chat"}),R.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 glow-box min-h-[400px] max-h-[500px] overflow-y-auto mb-4",children:[d.length===0&&R.jsx("p",{className:"text-gray-500 text-center py-20",children:"Ask AETERNAAA anything..."}),d.map((A,E)=>R.jsx("div",{className:`mb-4 ${A.role==="user"?"text-right":""}`,children:R.jsx("div",{className:`inline-block max-w-[80%] p-4 rounded-xl ${A.role==="user"?"bg-purple-600 text-white":"bg-gray-800 text-gray-200"}`,children:A.text})},E)),g&&R.jsx("div",{className:"text-purple-400",children:" Thinking..."})]}),R.jsxs("div",{className:"flex gap-2",children:[R.jsx("input",{value:l,onChange:A=>u(A.target.value),onKeyDown:A=>A.key==="Enter"&&w(),placeholder:"Ask AETERNAAA...",className:"flex-1 bg-gray-800 border border-purple-500/30 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500"}),R.jsx("button",{onClick:w,disabled:g,className:"px-6 py-3 bg-purple-600 rounded-lg hover:bg-purple-700 disabled:opacity-50",children:R.jsx(pN,{className:"w-5 h-5"})})]})]})]})}function rM({icon:n,title:e,desc:t}){return R.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 border border-purple-500/20 hover:border-purple-500/50 transition glow-box",children:[R.jsx("div",{className:"text-purple-400 mb-4",children:n}),R.jsx("h3",{className:"text-xl font-semibold mb-2",children:e}),R.jsx("p",{className:"text-gray-400",children:t})]})}function wY({product:n,popular:e,onBuy:t}){return R.jsxs("div",{className:`bg-gray-900/50 rounded-xl p-8 border ${e?"border-purple-500 glow-box":"border-gray-700"} relative`,children:[e&&R.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-purple-600 px-4 py-1 rounded-full text-sm font-semibold",children:"POPULAR"}),R.jsx("h3",{className:"text-2xl font-bold mb-2",children:n.name}),R.jsx("div",{className:"text-4xl font-bold mb-1",children:n.formattedPrice}),R.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:n.description}),R.jsx("ul",{className:"space-y-3 mb-8",children:n.features.map((i,s)=>R.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[R.jsx(yO,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),R.jsx("span",{children:i})]},s))}),R.jsxs("button",{onClick:t,className:`w-full py-3 rounded-lg font-semibold transition ${e?"bg-gradient-to-r from-purple-600 to-pink-600 hover:opacity-90":"bg-gray-700 hover:bg-gray-600"}`,children:[R.jsx(uN,{className:"w-5 h-5 inline mr-2"}),"Subscribe"]})]})}function wx({icon:n,label:e,value:t,color:i}){const s={green:"from-green-500 to-emerald-500",blue:"from-blue-500 to-cyan-500",purple:"from-purple-500 to-pink-500",pink:"from-pink-500 to-rose-500"};return R.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 glow-box",children:[R.jsx("div",{className:`inline-flex p-3 rounded-lg bg-gradient-to-r ${s[i]} mb-3`,children:n}),R.jsx("div",{className:"text-gray-400 text-sm",children:e}),R.jsx("div",{className:"text-2xl font-bold",children:t})]})}const bg=[{id:"wealth_scanner",name:"Wealth Scanner Pro",description:"AI-powered financial intelligence platform with real-time market analysis and portfolio optimization",category:"analytics",price:299,currency:"EUR",interval:"/month",features:["Real-time market data aggregation","AI-powered portfolio analysis","Risk assessment algorithms","Automated trading signals","Tax optimization suggestions","ESG compliance scoring","Custom alert systems","API integrations (100+ exchanges)"],metrics:{activeUsers:1250,revenue:45e3,uptime:99.98,satisfaction:4.9},status:"active",icon:R.jsx(gN,{className:"w-6 h-6"}),gradient:"from-green-500 to-emerald-600",url:"wealth-scanner.aeterna.website"},{id:"sector_security",name:"Sector Security Suite",description:"Advanced cybersecurity platform with AI threat detection and automated incident response",category:"security",price:499,currency:"EUR",interval:"/month",features:["Real-time vulnerability scanning","AI-powered threat analysis","Automated penetration testing","Compliance reporting (ISO, SOC2, GDPR)","Incident response automation","Dark web monitoring","Quantum-resistant encryption","Zero-trust architecture implementation"],metrics:{activeUsers:890,revenue:78e3,uptime:99.99,satisfaction:4.8},status:"active",icon:R.jsx(mN,{className:"w-6 h-6"}),gradient:"from-red-500 to-pink-600",url:"sector-security.aeterna.website"},{id:"network_optimizer",name:"Network Optimizer Pro",description:"Intelligent network performance optimization with predictive scaling and traffic management",category:"productivity",price:399,currency:"EUR",interval:"/month",features:["Network performance monitoring","Bandwidth optimization algorithms","Latency reduction protocols","Traffic analysis and routing","Predictive capacity planning","CDN optimization","Load balancer intelligence","Multi-cloud orchestration"],metrics:{activeUsers:1120,revenue:52e3,uptime:99.97,satisfaction:4.7},status:"active",icon:R.jsx(BO,{className:"w-6 h-6"}),gradient:"from-blue-500 to-cyan-600",url:"network-optimizer.aeterna.website"},{id:"valuation_gate",name:"Valuation Gate AI",description:"Ultimate asset valuation platform powered by quantum AI and multi-dimensional market analysis",category:"ai",price:799,currency:"EUR",interval:"/month",features:["Quantum AI valuation models","Multi-dimensional market analysis","Real-time asset tracking","Predictive market modeling","Automated due diligence","Investment recommendation engine","Risk-adjusted return calculations","Blockchain asset integration"],metrics:{activeUsers:650,revenue:95e3,uptime:99.99,satisfaction:4.9},status:"active",icon:R.jsx(Vx,{className:"w-6 h-6"}),gradient:"from-purple-500 to-violet-600",url:"valuation-gate.aeterna.website"},{id:"automation_nexus",name:"Automation Nexus",description:"Superior automation platform that makes Playwright + Selenium obsolete",category:"automation",price:599,currency:"EUR",interval:"/month",features:["AI-powered element detection (no selectors needed)","Quantum resonance page scanning","Self-healing automation scripts","Multi-browser swarm execution","Natural language automation commands","Visual AI interaction (screenshot-based)","Anti-detection stealth technology","Cross-platform mobile automation"],metrics:{activeUsers:2100,revenue:125e3,uptime:99.95,satisfaction:4.8},status:"launching",icon:R.jsx(mM,{className:"w-6 h-6"}),gradient:"from-orange-500 to-red-600",url:"automation-nexus.aeterna.website"},{id:"intelligence_core",name:"Intelligence Core",description:"Multi-modal AI platform combining vision, language, and reasoning for enterprise solutions",category:"ai",price:899,currency:"EUR",interval:"/month",features:["Multi-modal AI (text, image, video, audio)","Custom model fine-tuning","Enterprise knowledge bases","Reasoning chain visualization","API rate limiting and scaling","Custom workflow automation","Integration marketplace","White-label deployment"],metrics:{activeUsers:780,revenue:67e3,uptime:99.96,satisfaction:4.9},status:"active",icon:R.jsx(hM,{className:"w-6 h-6"}),gradient:"from-indigo-500 to-purple-600",url:"intelligence-core.aeterna.website"}];function TY(){const[n,e]=pe.useState(null),[t,i]=pe.useState("overview"),[s,a]=pe.useState(null),[l,u]=pe.useState("");pe.useEffect(()=>{const p={totalUsers:bg.reduce((g,y)=>g+y.metrics.activeUsers,0),totalRevenue:bg.reduce((g,y)=>g+y.metrics.revenue,0),activeApps:bg.filter(g=>g.status==="active").length,uptime:99.97,automationTasks:25e5,aiInteractions:156e5};a(p)},[]);const d=bg.filter(p=>p.name.toLowerCase().includes(l.toLowerCase())||p.description.toLowerCase().includes(l.toLowerCase())||p.category.includes(l.toLowerCase()));return R.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:[R.jsx("nav",{className:"border-b border-white/10 bg-black/20 backdrop-blur-xl sticky top-0 z-50",children:R.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4",children:[R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsx("div",{className:"flex items-center gap-4",children:R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center",children:R.jsx("span",{className:"text-xl font-bold",children:""})}),R.jsxs("div",{children:[R.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-white to-purple-200 bg-clip-text text-transparent",children:"AETERNA.WEBSITE"}),R.jsx("p",{className:"text-xs text-gray-400",children:"The Ultimate SaaS Platform"})]})]})}),R.jsxs("div",{className:"flex items-center gap-6",children:[R.jsxs("div",{className:"flex items-center gap-1",children:[R.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),R.jsx("span",{className:"text-sm text-green-400",children:"All Systems Operational"})]}),R.jsx("button",{className:"p-2 hover:bg-white/10 rounded-lg transition",children:R.jsx(cN,{className:"w-5 h-5"})}),R.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg hover:opacity-90 transition",children:"Account"})]})]}),R.jsx("div",{className:"flex gap-8 mt-4",children:[{id:"overview",label:"Overview",icon:R.jsx(Hx,{className:"w-4 h-4"})},{id:"apps",label:"SaaS Applications",icon:R.jsx(rA,{className:"w-4 h-4"})},{id:"analytics",label:"Analytics",icon:R.jsx(aA,{className:"w-4 h-4"})},{id:"account",label:"Account",icon:R.jsx(pM,{className:"w-4 h-4"})}].map(p=>R.jsxs("button",{onClick:()=>i(p.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition ${t===p.id?"bg-white/10 text-white border-b-2 border-purple-500":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[p.icon,p.label]},p.id))})]})}),R.jsx("main",{className:"max-w-7xl mx-auto px-6 py-8",children:R.jsxs(Qx,{mode:"wait",children:[t==="overview"&&R.jsxs(Vn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-8",children:[R.jsxs("div",{className:"text-center py-12",children:[R.jsx(Vn.h1,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-6xl font-bold mb-6 bg-gradient-to-r from-white via-purple-200 to-pink-200 bg-clip-text text-transparent",children:"The Future of SaaS"}),R.jsx("p",{className:"text-xl text-gray-300 mb-8 max-w-3xl mx-auto",children:"One platform. Every tool. Superior to everything on the market. AETERNAAA combines AI, automation, analytics, and security in ways no other platform can."}),R.jsxs("div",{className:"flex gap-4 justify-center",children:[R.jsx("button",{onClick:()=>i("apps"),className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl font-semibold text-lg hover:scale-105 transition-transform",children:"Explore Platform"}),R.jsx("button",{className:"px-8 py-4 border border-white/20 rounded-xl font-semibold text-lg hover:bg-white/10 transition",children:"Watch Demo"})]})]}),s&&R.jsxs("div",{className:"grid md:grid-cols-6 gap-6 mb-12",children:[R.jsx(Wd,{icon:R.jsx(pM,{}),label:"Total Users",value:s.totalUsers.toLocaleString(),change:"+23%",gradient:"from-blue-500 to-cyan-500"}),R.jsx(Wd,{icon:R.jsx(xw,{}),label:"Revenue",value:`${(s.totalRevenue/1e3).toFixed(0)}K`,change:"+35%",gradient:"from-green-500 to-emerald-500"}),R.jsx(Wd,{icon:R.jsx(rA,{}),label:"Active Apps",value:s.activeApps.toString(),change:"New!",gradient:"from-purple-500 to-violet-500"}),R.jsx(Wd,{icon:R.jsx(Bx,{}),label:"Uptime",value:`${s.uptime}%`,change:"SLA",gradient:"from-orange-500 to-red-500"}),R.jsx(Wd,{icon:R.jsx(mM,{}),label:"Automations",value:`${(s.automationTasks/1e6).toFixed(1)}M`,change:"+127%",gradient:"from-indigo-500 to-purple-500"}),R.jsx(Wd,{icon:R.jsx(Vx,{}),label:"AI Queries",value:`${(s.aiInteractions/1e6).toFixed(1)}M`,change:"+89%",gradient:"from-pink-500 to-rose-500"})]}),R.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[R.jsx(aM,{icon:R.jsx(Vx,{}),title:"Quantum AI Integration",description:"Not just AI - quantum-enhanced intelligence that predicts and adapts beyond traditional machine learning",features:["Multi-modal reasoning","Quantum state analysis","Predictive adaptation","Context memory"]}),R.jsx(aM,{icon:R.jsx(mM,{}),title:"Automation Beyond Limits",description:"Makes Playwright + Selenium obsolete with AI-powered, self-healing automation that thinks like humans",features:["Natural language control","Visual AI recognition","Self-healing scripts","Anti-detection stealth"]}),R.jsx(aM,{icon:R.jsx(Hx,{}),title:"Unified Everything",description:"Single platform, single login, infinite capabilities. What takes 20+ SaaS tools elsewhere, we do in one",features:["Universal dashboard","Cross-app data flow","Unified billing","Seamless experience"]})]})]},"overview"),t==="apps"&&R.jsxs(Vn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-8",children:[R.jsxs("div",{className:"flex gap-4 mb-8",children:[R.jsxs("div",{className:"flex-1 relative",children:[R.jsx(dN,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),R.jsx("input",{type:"text",placeholder:"Search applications...",value:l,onChange:p=>u(p.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl pl-10 pr-4 py-3 focus:outline-none focus:border-purple-500 transition"})]}),R.jsxs("select",{className:"bg-white/5 border border-white/10 rounded-xl px-4 py-3 focus:outline-none focus:border-purple-500",children:[R.jsx("option",{value:"",children:"All Categories"}),R.jsx("option",{value:"automation",children:"Automation"}),R.jsx("option",{value:"analytics",children:"Analytics"}),R.jsx("option",{value:"security",children:"Security"}),R.jsx("option",{value:"ai",children:"AI & ML"}),R.jsx("option",{value:"productivity",children:"Productivity"})]})]}),R.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:d.map(p=>R.jsx(EY,{app:p,onClick:()=>e(p)},p.id))})]},"apps"),t==="analytics"&&s&&R.jsxs(Vn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-8",children:[R.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Platform Analytics"}),R.jsxs("div",{className:"bg-white/5 rounded-2xl p-8 border border-white/10",children:[R.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Revenue Performance"}),R.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400",children:R.jsxs("div",{className:"text-center",children:[R.jsx(aA,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),R.jsx("p",{children:"Interactive revenue charts will appear here"}),R.jsx("p",{className:"text-sm",children:"Real-time data from all SaaS applications"})]})})]}),R.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:bg.map(p=>R.jsxs("div",{className:"bg-white/5 rounded-xl p-6 border border-white/10",children:[R.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[R.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-r ${p.gradient}`,children:p.icon}),R.jsxs("div",{children:[R.jsx("h3",{className:"font-semibold",children:p.name}),R.jsx("p",{className:"text-sm text-gray-400",children:p.category})]})]}),R.jsxs("div",{className:"space-y-2",children:[R.jsxs("div",{className:"flex justify-between text-sm",children:[R.jsx("span",{children:"Revenue:"}),R.jsxs("span",{className:"text-green-400",children:["",p.metrics.revenue.toLocaleString()]})]}),R.jsxs("div",{className:"flex justify-between text-sm",children:[R.jsx("span",{children:"Users:"}),R.jsx("span",{children:p.metrics.activeUsers.toLocaleString()})]}),R.jsxs("div",{className:"flex justify-between text-sm",children:[R.jsx("span",{children:"Satisfaction:"}),R.jsxs("span",{className:"text-yellow-400",children:[p.metrics.satisfaction,"/5 "]})]}),R.jsxs("div",{className:"flex justify-between text-sm",children:[R.jsx("span",{children:"Uptime:"}),R.jsxs("span",{className:p.metrics.uptime>99.95?"text-green-400":"text-yellow-400",children:[p.metrics.uptime,"%"]})]})]})]},p.id))})]},"analytics"),t==="account"&&R.jsxs(Vn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-8",children:[R.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Account Management"}),R.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[R.jsxs("div",{className:"bg-white/5 rounded-2xl p-8 border border-white/10",children:[R.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Subscription Details"}),R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{children:"Plan:"}),R.jsx("span",{className:"font-semibold text-purple-400",children:"Galactic Core"})]}),R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{children:"Billing:"}),R.jsx("span",{children:"499/month"})]}),R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{children:"Next billing:"}),R.jsx("span",{children:"Feb 27, 2026"})]}),R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{children:"Status:"}),R.jsx("span",{className:"text-green-400",children:"Active"})]})]})]}),R.jsxs("div",{className:"bg-white/5 rounded-2xl p-8 border border-white/10",children:[R.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Usage Statistics"}),R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{children:"API Calls:"}),R.jsx("span",{children:"Unlimited"})]}),R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{children:"Apps Accessed:"}),R.jsx("span",{children:"6/6"})]}),R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{children:"Data Processed:"}),R.jsx("span",{children:"2.4TB"})]}),R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{children:"Automations:"}),R.jsx("span",{children:"15,420 runs"})]})]})]})]})]},"account")]})}),R.jsx(Qx,{children:n&&R.jsx(Vn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>e(null),children:R.jsx(Vn.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-gradient-to-br from-slate-900 to-purple-900 rounded-2xl border border-white/20 max-w-4xl w-full max-h-[90vh] overflow-auto",onClick:p=>p.stopPropagation(),children:R.jsxs("div",{className:"p-8",children:[R.jsxs("div",{className:"flex items-start gap-6 mb-8",children:[R.jsx("div",{className:`p-4 rounded-2xl bg-gradient-to-r ${n.gradient}`,children:n.icon}),R.jsxs("div",{className:"flex-1",children:[R.jsx("h2",{className:"text-3xl font-bold mb-2",children:n.name}),R.jsx("p",{className:"text-gray-300 mb-4",children:n.description}),R.jsxs("div",{className:"flex items-center gap-6",children:[R.jsxs("span",{className:"text-2xl font-bold",children:["",n.price,n.interval]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("span",{className:"text-sm text-gray-400",children:"Category:"}),R.jsx("span",{className:"px-3 py-1 bg-white/10 rounded-full text-sm capitalize",children:n.category})]})]})]}),R.jsx("button",{onClick:()=>e(null),className:"p-2 hover:bg-white/10 rounded-lg transition",children:""})]}),R.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[R.jsxs("div",{children:[R.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Features"}),R.jsx("ul",{className:"space-y-3",children:n.features.map((p,g)=>R.jsxs("li",{className:"flex items-center gap-3",children:[R.jsx(yw,{className:"w-5 h-5 text-green-400"}),R.jsx("span",{children:p})]},g))})]}),R.jsxs("div",{children:[R.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Performance Metrics"}),R.jsxs("div",{className:"space-y-4",children:[R.jsx(oM,{label:"User Satisfaction",value:n.metrics.satisfaction,max:5,suffix:"/5",color:"green"}),R.jsx(oM,{label:"Uptime",value:n.metrics.uptime,max:100,suffix:"%",color:"blue"}),R.jsx(oM,{label:"Active Users",value:n.metrics.activeUsers,max:3e3,suffix:"",color:"purple"})]})]})]}),R.jsxs("div",{className:"flex gap-4 mt-8 pt-8 border-t border-white/10",children:[R.jsx("button",{className:"flex-1 py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl font-semibold hover:scale-105 transition-transform",children:"Launch Application"}),R.jsx("button",{className:"px-6 py-3 border border-white/20 rounded-xl hover:bg-white/10 transition",children:"View Details"}),R.jsx("button",{className:"px-6 py-3 border border-white/20 rounded-xl hover:bg-white/10 transition",children:"API Docs"})]})]})})})})]})}function Wd({icon:n,label:e,value:t,change:i,gradient:s}){return R.jsxs("div",{className:"bg-white/5 rounded-xl p-6 border border-white/10 hover:bg-white/10 transition",children:[R.jsx("div",{className:`inline-flex p-3 rounded-lg bg-gradient-to-r ${s} mb-4`,children:n}),R.jsx("div",{className:"text-gray-400 text-sm mb-1",children:e}),R.jsx("div",{className:"text-2xl font-bold mb-2",children:t}),R.jsx("div",{className:"text-sm text-green-400",children:i})]})}function aM({icon:n,title:e,description:t,features:i}){return R.jsxs("div",{className:"bg-white/5 rounded-2xl p-8 border border-white/10 hover:bg-white/10 transition",children:[R.jsx("div",{className:"text-purple-400 mb-4",children:n}),R.jsx("h3",{className:"text-xl font-semibold mb-3",children:e}),R.jsx("p",{className:"text-gray-300 mb-6",children:t}),R.jsx("ul",{className:"space-y-2",children:i.map((s,a)=>R.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[R.jsx("div",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full"}),s]},a))})]})}function EY({app:n,onClick:e}){return R.jsxs(Vn.div,{whileHover:{scale:1.02,y:-5},whileTap:{scale:.98},className:"bg-white/5 rounded-2xl p-6 border border-white/10 hover:border-purple-500/30 transition cursor-pointer group",onClick:e,children:[R.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[R.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-r ${n.gradient}`,children:n.icon}),R.jsxs("div",{className:"flex-1",children:[R.jsx("h3",{className:"text-xl font-semibold mb-1",children:n.name}),R.jsx("p",{className:"text-gray-400 text-sm",children:n.category})]}),R.jsxs("div",{className:"flex items-center gap-1",children:[n.status==="active"&&R.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.status==="launching"&&R.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),n.status==="maintenance"&&R.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),R.jsx("span",{className:"text-xs text-gray-400 capitalize",children:n.status})]})]}),R.jsx("p",{className:"text-gray-300 text-sm mb-6 line-clamp-2",children:n.description}),R.jsxs("div",{className:"space-y-3 mb-6",children:[R.jsxs("div",{className:"flex justify-between text-sm",children:[R.jsx("span",{className:"text-gray-400",children:"Active Users:"}),R.jsx("span",{className:"font-semibold",children:n.metrics.activeUsers.toLocaleString()})]}),R.jsxs("div",{className:"flex justify-between text-sm",children:[R.jsx("span",{className:"text-gray-400",children:"Monthly Revenue:"}),R.jsxs("span",{className:"text-green-400 font-semibold",children:["",n.metrics.revenue.toLocaleString()]})]}),R.jsxs("div",{className:"flex justify-between text-sm",children:[R.jsx("span",{className:"text-gray-400",children:"Satisfaction:"}),R.jsxs("span",{className:"text-yellow-400",children:[n.metrics.satisfaction,"/5 "]})]})]}),R.jsxs("div",{className:"flex justify-between items-center",children:[R.jsxs("span",{className:"text-2xl font-bold",children:["",n.price,R.jsx("span",{className:"text-sm text-gray-400",children:n.interval})]}),R.jsxs("div",{className:"flex gap-2",children:[R.jsx("button",{className:"px-4 py-2 bg-white/10 rounded-lg text-sm hover:bg-white/20 transition group-hover:scale-105",children:"View"}),R.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg text-sm hover:opacity-90 transition group-hover:scale-105",children:"Launch"})]})]})]})}function oM({label:n,value:e,max:t,suffix:i,color:s}){const a=Math.min(e/t*100,100),l={green:"bg-green-500",blue:"bg-blue-500",purple:"bg-purple-500"};return R.jsxs("div",{children:[R.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[R.jsx("span",{children:n}),R.jsxs("span",{className:"font-semibold",children:[e,i]})]}),R.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:R.jsx(Vn.div,{initial:{width:0},animate:{width:`${a}%`},transition:{duration:1,ease:"easeOut"},className:`h-2 rounded-full ${l[s]}`})})]})}var AY={value:()=>{}};function Kb(){for(var n=0,e=arguments.length,t={},i;n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new zx(t)}function zx(n){this._=n}function CY(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",s=t.indexOf(".");if(s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}zx.prototype=Kb.prototype={constructor:zx,on:function(n,e){var t=this._,i=CY(n+"",t),s,a=-1,l=i.length;if(arguments.length<2){for(;++a<l;)if((s=(n=i[a]).type)&&(s=RY(t[s],n.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<l;)if(s=(n=i[a]).type)t[s]=VR(t[s],n.name,e);else if(e==null)for(s in t)t[s]=VR(t[s],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new zx(n)},call:function(n,e){if((s=arguments.length-2)>0)for(var t=new Array(s),i=0,s,a;i<s;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(a=this._[n],i=0,s=a.length;i<s;++i)a[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],s=0,a=i.length;s<a;++s)i[s].value.apply(e,t)}};function RY(n,e){for(var t=0,i=n.length,s;t<i;++t)if((s=n[t]).name===e)return s.value}function VR(n,e,t){for(var i=0,s=n.length;i<s;++i)if(n[i].name===e){n[i]=AY,n=n.slice(0,i).concat(n.slice(i+1));break}return t!=null&&n.push({name:e,value:t}),n}var uw="http://www.w3.org/1999/xhtml";const HR={svg:"http://www.w3.org/2000/svg",xhtml:uw,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jb(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),HR.hasOwnProperty(e)?{space:HR[e],local:n}:n}function NY(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===uw&&e.documentElement.namespaceURI===uw?e.createElement(n):e.createElementNS(t,n)}}function DY(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function HP(n){var e=Jb(n);return(e.local?DY:NY)(e)}function IY(){}function tE(n){return n==null?IY:function(){return this.querySelector(n)}}function LY(n){typeof n!="function"&&(n=tE(n));for(var e=this._groups,t=e.length,i=new Array(t),s=0;s<t;++s)for(var a=e[s],l=a.length,u=i[s]=new Array(l),d,p,g=0;g<l;++g)(d=a[g])&&(p=n.call(d,d.__data__,g,a))&&("__data__"in d&&(p.__data__=d.__data__),u[g]=p);return new ma(i,this._parents)}function PY(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function UY(){return[]}function jP(n){return n==null?UY:function(){return this.querySelectorAll(n)}}function OY(n){return function(){return PY(n.apply(this,arguments))}}function zY(n){typeof n=="function"?n=OY(n):n=jP(n);for(var e=this._groups,t=e.length,i=[],s=[],a=0;a<t;++a)for(var l=e[a],u=l.length,d,p=0;p<u;++p)(d=l[p])&&(i.push(n.call(d,d.__data__,p,l)),s.push(d));return new ma(i,s)}function GP(n){return function(){return this.matches(n)}}function WP(n){return function(e){return e.matches(n)}}var kY=Array.prototype.find;function FY(n){return function(){return kY.call(this.children,n)}}function BY(){return this.firstElementChild}function VY(n){return this.select(n==null?BY:FY(typeof n=="function"?n:WP(n)))}var HY=Array.prototype.filter;function jY(){return Array.from(this.children)}function GY(n){return function(){return HY.call(this.children,n)}}function WY(n){return this.selectAll(n==null?jY:GY(typeof n=="function"?n:WP(n)))}function XY(n){typeof n!="function"&&(n=GP(n));for(var e=this._groups,t=e.length,i=new Array(t),s=0;s<t;++s)for(var a=e[s],l=a.length,u=i[s]=[],d,p=0;p<l;++p)(d=a[p])&&n.call(d,d.__data__,p,a)&&u.push(d);return new ma(i,this._parents)}function XP(n){return new Array(n.length)}function qY(){return new ma(this._enter||this._groups.map(XP),this._parents)}function J_(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}J_.prototype={constructor:J_,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function ZY(n){return function(){return n}}function YY(n,e,t,i,s,a){for(var l=0,u,d=e.length,p=a.length;l<p;++l)(u=e[l])?(u.__data__=a[l],i[l]=u):t[l]=new J_(n,a[l]);for(;l<d;++l)(u=e[l])&&(s[l]=u)}function $Y(n,e,t,i,s,a,l){var u,d,p=new Map,g=e.length,y=a.length,x=new Array(g),_;for(u=0;u<g;++u)(d=e[u])&&(x[u]=_=l.call(d,d.__data__,u,e)+"",p.has(_)?s[u]=d:p.set(_,d));for(u=0;u<y;++u)_=l.call(n,a[u],u,a)+"",(d=p.get(_))?(i[u]=d,d.__data__=a[u],p.delete(_)):t[u]=new J_(n,a[u]);for(u=0;u<g;++u)(d=e[u])&&p.get(x[u])===d&&(s[u]=d)}function KY(n){return n.__data__}function JY(n,e){if(!arguments.length)return Array.from(this,KY);var t=e?$Y:YY,i=this._parents,s=this._groups;typeof n!="function"&&(n=ZY(n));for(var a=s.length,l=new Array(a),u=new Array(a),d=new Array(a),p=0;p<a;++p){var g=i[p],y=s[p],x=y.length,_=QY(n.call(g,g&&g.__data__,p,i)),w=_.length,A=u[p]=new Array(w),E=l[p]=new Array(w),M=d[p]=new Array(x);t(g,y,A,E,M,_,e);for(var D=0,L=0,N,P;D<w;++D)if(N=A[D]){for(D>=L&&(L=D+1);!(P=E[L])&&++L<w;);N._next=P||null}}return l=new ma(l,i),l._enter=u,l._exit=d,l}function QY(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function e$(){return new ma(this._exit||this._groups.map(XP),this._parents)}function t$(n,e,t){var i=this.enter(),s=this,a=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(s=e(s),s&&(s=s.selection())),t==null?a.remove():t(a),i&&s?i.merge(s).order():s}function n$(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,s=t.length,a=i.length,l=Math.min(s,a),u=new Array(s),d=0;d<l;++d)for(var p=t[d],g=i[d],y=p.length,x=u[d]=new Array(y),_,w=0;w<y;++w)(_=p[w]||g[w])&&(x[w]=_);for(;d<s;++d)u[d]=t[d];return new ma(u,this._parents)}function i$(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var i=n[e],s=i.length-1,a=i[s],l;--s>=0;)(l=i[s])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function s$(n){n||(n=r$);function e(y,x){return y&&x?n(y.__data__,x.__data__):!y-!x}for(var t=this._groups,i=t.length,s=new Array(i),a=0;a<i;++a){for(var l=t[a],u=l.length,d=s[a]=new Array(u),p,g=0;g<u;++g)(p=l[g])&&(d[g]=p);d.sort(e)}return new ma(s,this._parents).order()}function r$(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function a$(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function o$(){return Array.from(this)}function l$(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],s=0,a=i.length;s<a;++s){var l=i[s];if(l)return l}return null}function c$(){let n=0;for(const e of this)++n;return n}function u$(){return!this.node()}function f$(n){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var s=e[t],a=0,l=s.length,u;a<l;++a)(u=s[a])&&n.call(u,u.__data__,a,s);return this}function h$(n){return function(){this.removeAttribute(n)}}function d$(n){return function(){this.removeAttributeNS(n.space,n.local)}}function p$(n,e){return function(){this.setAttribute(n,e)}}function m$(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function g$(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function v$(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function y$(n,e){var t=Jb(n);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((e==null?t.local?d$:h$:typeof e=="function"?t.local?v$:g$:t.local?m$:p$)(t,e))}function qP(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function x$(n){return function(){this.style.removeProperty(n)}}function _$(n,e,t){return function(){this.style.setProperty(n,e,t)}}function b$(n,e,t){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function S$(n,e,t){return arguments.length>1?this.each((e==null?x$:typeof e=="function"?b$:_$)(n,e,t??"")):yp(this.node(),n)}function yp(n,e){return n.style.getPropertyValue(e)||qP(n).getComputedStyle(n,null).getPropertyValue(e)}function M$(n){return function(){delete this[n]}}function w$(n,e){return function(){this[n]=e}}function T$(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function E$(n,e){return arguments.length>1?this.each((e==null?M$:typeof e=="function"?T$:w$)(n,e)):this.node()[n]}function ZP(n){return n.trim().split(/^|\s+/)}function nE(n){return n.classList||new YP(n)}function YP(n){this._node=n,this._names=ZP(n.getAttribute("class")||"")}YP.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function $P(n,e){for(var t=nE(n),i=-1,s=e.length;++i<s;)t.add(e[i])}function KP(n,e){for(var t=nE(n),i=-1,s=e.length;++i<s;)t.remove(e[i])}function A$(n){return function(){$P(this,n)}}function C$(n){return function(){KP(this,n)}}function R$(n,e){return function(){(e.apply(this,arguments)?$P:KP)(this,n)}}function N$(n,e){var t=ZP(n+"");if(arguments.length<2){for(var i=nE(this.node()),s=-1,a=t.length;++s<a;)if(!i.contains(t[s]))return!1;return!0}return this.each((typeof e=="function"?R$:e?A$:C$)(t,e))}function D$(){this.textContent=""}function I$(n){return function(){this.textContent=n}}function L$(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function P$(n){return arguments.length?this.each(n==null?D$:(typeof n=="function"?L$:I$)(n)):this.node().textContent}function U$(){this.innerHTML=""}function O$(n){return function(){this.innerHTML=n}}function z$(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function k$(n){return arguments.length?this.each(n==null?U$:(typeof n=="function"?z$:O$)(n)):this.node().innerHTML}function F$(){this.nextSibling&&this.parentNode.appendChild(this)}function B$(){return this.each(F$)}function V$(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function H$(){return this.each(V$)}function j$(n){var e=typeof n=="function"?n:HP(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function G$(){return null}function W$(n,e){var t=typeof n=="function"?n:HP(n),i=e==null?G$:typeof e=="function"?e:tE(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function X$(){var n=this.parentNode;n&&n.removeChild(this)}function q$(){return this.each(X$)}function Z$(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function Y$(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function $$(n){return this.select(n?Y$:Z$)}function K$(n){return arguments.length?this.property("__data__",n):this.node().__data__}function J$(n){return function(e){n.call(this,e,this.__data__)}}function Q$(n){return n.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function eK(n){return function(){var e=this.__on;if(e){for(var t=0,i=-1,s=e.length,a;t<s;++t)a=e[t],(!n.type||a.type===n.type)&&a.name===n.name?this.removeEventListener(a.type,a.listener,a.options):e[++i]=a;++i?e.length=i:delete this.__on}}}function tK(n,e,t){return function(){var i=this.__on,s,a=J$(e);if(i){for(var l=0,u=i.length;l<u;++l)if((s=i[l]).type===n.type&&s.name===n.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=t),s.value=e;return}}this.addEventListener(n.type,a,t),s={type:n.type,name:n.name,value:e,listener:a,options:t},i?i.push(s):this.__on=[s]}}function nK(n,e,t){var i=Q$(n+""),s,a=i.length,l;if(arguments.length<2){var u=this.node().__on;if(u){for(var d=0,p=u.length,g;d<p;++d)for(s=0,g=u[d];s<a;++s)if((l=i[s]).type===g.type&&l.name===g.name)return g.value}return}for(u=e?tK:eK,s=0;s<a;++s)this.each(u(i[s],e,t));return this}function JP(n,e,t){var i=qP(n),s=i.CustomEvent;typeof s=="function"?s=new s(e,t):(s=i.document.createEvent("Event"),t?(s.initEvent(e,t.bubbles,t.cancelable),s.detail=t.detail):s.initEvent(e,!1,!1)),n.dispatchEvent(s)}function iK(n,e){return function(){return JP(this,n,e)}}function sK(n,e){return function(){return JP(this,n,e.apply(this,arguments))}}function rK(n,e){return this.each((typeof e=="function"?sK:iK)(n,e))}function*aK(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],s=0,a=i.length,l;s<a;++s)(l=i[s])&&(yield l)}var QP=[null];function ma(n,e){this._groups=n,this._parents=e}function k0(){return new ma([[document.documentElement]],QP)}function oK(){return this}ma.prototype=k0.prototype={constructor:ma,select:LY,selectAll:zY,selectChild:VY,selectChildren:WY,filter:XY,data:JY,enter:qY,exit:e$,join:t$,merge:n$,selection:oK,order:i$,sort:s$,call:a$,nodes:o$,node:l$,size:c$,empty:u$,each:f$,attr:y$,style:S$,property:E$,classed:N$,text:P$,html:k$,raise:B$,lower:H$,append:j$,insert:W$,remove:q$,clone:$$,datum:K$,on:nK,dispatch:rK,[Symbol.iterator]:aK};function dc(n){return typeof n=="string"?new ma([[document.querySelector(n)]],[document.documentElement]):new ma([[n]],QP)}function lK(n){let e;for(;e=n.sourceEvent;)n=e;return n}function jR(n,e){if(n=lK(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}}return[n.pageX,n.pageY]}const cK={passive:!1},y0={capture:!0,passive:!1};function lM(n){n.stopImmediatePropagation()}function sp(n){n.preventDefault(),n.stopImmediatePropagation()}function uK(n){var e=n.document.documentElement,t=dc(n).on("dragstart.drag",sp,y0);"onselectstart"in e?t.on("selectstart.drag",sp,y0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function fK(n,e){var t=n.document.documentElement,i=dc(n).on("dragstart.drag",null);e&&(i.on("click.drag",sp,y0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in t?i.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const Tx=n=>()=>n;function fw(n,{sourceEvent:e,subject:t,target:i,identifier:s,active:a,x:l,y:u,dx:d,dy:p,dispatch:g}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:g}})}fw.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function hK(n){return!n.ctrlKey&&!n.button}function dK(){return this.parentNode}function pK(n,e){return e??{x:n.x,y:n.y}}function mK(){return navigator.maxTouchPoints||"ontouchstart"in this}function gK(){var n=hK,e=dK,t=pK,i=mK,s={},a=Kb("start","drag","end"),l=0,u,d,p,g,y=0;function x(N){N.on("mousedown.drag",_).filter(i).on("touchstart.drag",E).on("touchmove.drag",M,cK).on("touchend.drag touchcancel.drag",D).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(N,P){if(!(g||!n.call(this,N,P))){var z=L(this,e.call(this,N,P),N,P,"mouse");z&&(dc(N.view).on("mousemove.drag",w,y0).on("mouseup.drag",A,y0),uK(N.view),lM(N),p=!1,u=N.clientX,d=N.clientY,z("start",N))}}function w(N){if(sp(N),!p){var P=N.clientX-u,z=N.clientY-d;p=P*P+z*z>y}s.mouse("drag",N)}function A(N){dc(N.view).on("mousemove.drag mouseup.drag",null),fK(N.view,p),sp(N),s.mouse("end",N)}function E(N,P){if(n.call(this,N,P)){var z=N.changedTouches,B=e.call(this,N,P),V=z.length,O,F;for(O=0;O<V;++O)(F=L(this,B,N,P,z[O].identifier,z[O]))&&(lM(N),F("start",N,z[O]))}}function M(N){var P=N.changedTouches,z=P.length,B,V;for(B=0;B<z;++B)(V=s[P[B].identifier])&&(sp(N),V("drag",N,P[B]))}function D(N){var P=N.changedTouches,z=P.length,B,V;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),B=0;B<z;++B)(V=s[P[B].identifier])&&(lM(N),V("end",N,P[B]))}function L(N,P,z,B,V,O){var F=a.copy(),W=jR(O||z,P),ee,J,ae;if((ae=t.call(N,new fw("beforestart",{sourceEvent:z,target:x,identifier:V,active:l,x:W[0],y:W[1],dx:0,dy:0,dispatch:F}),B))!=null)return ee=ae.x-W[0]||0,J=ae.y-W[1]||0,function he(Z,K,le){var Ee=W,Re;switch(Z){case"start":s[V]=he,Re=l++;break;case"end":delete s[V],--l;case"drag":W=jR(le||K,P),Re=l;break}F.call(Z,N,new fw(Z,{sourceEvent:K,subject:ae,target:x,identifier:V,active:Re,x:W[0]+ee,y:W[1]+J,dx:W[0]-Ee[0],dy:W[1]-Ee[1],dispatch:F}),B)}}return x.filter=function(N){return arguments.length?(n=typeof N=="function"?N:Tx(!!N),x):n},x.container=function(N){return arguments.length?(e=typeof N=="function"?N:Tx(N),x):e},x.subject=function(N){return arguments.length?(t=typeof N=="function"?N:Tx(N),x):t},x.touchable=function(N){return arguments.length?(i=typeof N=="function"?N:Tx(!!N),x):i},x.on=function(){var N=a.on.apply(a,arguments);return N===a?x:N},x.clickDistance=function(N){return arguments.length?(y=(N=+N)*N,x):Math.sqrt(y)},x}function iE(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function eU(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function F0(){}var x0=.7,Q_=1/x0,rp="\\s*([+-]?\\d+)\\s*",_0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vK=/^#([0-9a-f]{3,8})$/,yK=new RegExp(`^rgb\\(${rp},${rp},${rp}\\)$`),xK=new RegExp(`^rgb\\(${vl},${vl},${vl}\\)$`),_K=new RegExp(`^rgba\\(${rp},${rp},${rp},${_0}\\)$`),bK=new RegExp(`^rgba\\(${vl},${vl},${vl},${_0}\\)$`),SK=new RegExp(`^hsl\\(${_0},${vl},${vl}\\)$`),MK=new RegExp(`^hsla\\(${_0},${vl},${vl},${_0}\\)$`),GR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};iE(F0,b0,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:WR,formatHex:WR,formatHex8:wK,formatHsl:TK,formatRgb:XR,toString:XR});function WR(){return this.rgb().formatHex()}function wK(){return this.rgb().formatHex8()}function TK(){return tU(this).formatHsl()}function XR(){return this.rgb().formatRgb()}function b0(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=vK.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?qR(e):t===3?new Jr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Ex(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Ex(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=yK.exec(n))?new Jr(e[1],e[2],e[3],1):(e=xK.exec(n))?new Jr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_K.exec(n))?Ex(e[1],e[2],e[3],e[4]):(e=bK.exec(n))?Ex(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=SK.exec(n))?$R(e[1],e[2]/100,e[3]/100,1):(e=MK.exec(n))?$R(e[1],e[2]/100,e[3]/100,e[4]):GR.hasOwnProperty(n)?qR(GR[n]):n==="transparent"?new Jr(NaN,NaN,NaN,0):null}function qR(n){return new Jr(n>>16&255,n>>8&255,n&255,1)}function Ex(n,e,t,i){return i<=0&&(n=e=t=NaN),new Jr(n,e,t,i)}function EK(n){return n instanceof F0||(n=b0(n)),n?(n=n.rgb(),new Jr(n.r,n.g,n.b,n.opacity)):new Jr}function hw(n,e,t,i){return arguments.length===1?EK(n):new Jr(n,e,t,i??1)}function Jr(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}iE(Jr,hw,eU(F0,{brighter(n){return n=n==null?Q_:Math.pow(Q_,n),new Jr(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?x0:Math.pow(x0,n),new Jr(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Jr(th(this.r),th(this.g),th(this.b),eb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ZR,formatHex:ZR,formatHex8:AK,formatRgb:YR,toString:YR}));function ZR(){return`#${$f(this.r)}${$f(this.g)}${$f(this.b)}`}function AK(){return`#${$f(this.r)}${$f(this.g)}${$f(this.b)}${$f((isNaN(this.opacity)?1:this.opacity)*255)}`}function YR(){const n=eb(this.opacity);return`${n===1?"rgb(":"rgba("}${th(this.r)}, ${th(this.g)}, ${th(this.b)}${n===1?")":`, ${n})`}`}function eb(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function th(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function $f(n){return n=th(n),(n<16?"0":"")+n.toString(16)}function $R(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new To(n,e,t,i)}function tU(n){if(n instanceof To)return new To(n.h,n.s,n.l,n.opacity);if(n instanceof F0||(n=b0(n)),!n)return new To;if(n instanceof To)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,s=Math.min(e,t,i),a=Math.max(e,t,i),l=NaN,u=a-s,d=(a+s)/2;return u?(e===a?l=(t-i)/u+(t<i)*6:t===a?l=(i-e)/u+2:l=(e-t)/u+4,u/=d<.5?a+s:2-a-s,l*=60):u=d>0&&d<1?0:l,new To(l,u,d,n.opacity)}function CK(n,e,t,i){return arguments.length===1?tU(n):new To(n,e,t,i??1)}function To(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}iE(To,CK,eU(F0,{brighter(n){return n=n==null?Q_:Math.pow(Q_,n),new To(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?x0:Math.pow(x0,n),new To(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,s=2*t-i;return new Jr(cM(n>=240?n-240:n+120,s,i),cM(n,s,i),cM(n<120?n+240:n-120,s,i),this.opacity)},clamp(){return new To(KR(this.h),Ax(this.s),Ax(this.l),eb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=eb(this.opacity);return`${n===1?"hsl(":"hsla("}${KR(this.h)}, ${Ax(this.s)*100}%, ${Ax(this.l)*100}%${n===1?")":`, ${n})`}`}}));function KR(n){return n=(n||0)%360,n<0?n+360:n}function Ax(n){return Math.max(0,Math.min(1,n||0))}function cM(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const nU=n=>()=>n;function RK(n,e){return function(t){return n+t*e}}function NK(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function DK(n){return(n=+n)==1?iU:function(e,t){return t-e?NK(e,t,n):nU(isNaN(e)?t:e)}}function iU(n,e){var t=e-n;return t?RK(n,t):nU(isNaN(n)?e:n)}const JR=(function n(e){var t=DK(e);function i(s,a){var l=t((s=hw(s)).r,(a=hw(a)).r),u=t(s.g,a.g),d=t(s.b,a.b),p=iU(s.opacity,a.opacity);return function(g){return s.r=l(g),s.g=u(g),s.b=d(g),s.opacity=p(g),s+""}}return i.gamma=n,i})(1);function yu(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var dw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uM=new RegExp(dw.source,"g");function IK(n){return function(){return n}}function LK(n){return function(e){return n(e)+""}}function PK(n,e){var t=dw.lastIndex=uM.lastIndex=0,i,s,a,l=-1,u=[],d=[];for(n=n+"",e=e+"";(i=dw.exec(n))&&(s=uM.exec(e));)(a=s.index)>t&&(a=e.slice(t,a),u[l]?u[l]+=a:u[++l]=a),(i=i[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:yu(i,s)})),t=uM.lastIndex;return t<e.length&&(a=e.slice(t),u[l]?u[l]+=a:u[++l]=a),u.length<2?d[0]?LK(d[0].x):IK(e):(e=d.length,function(p){for(var g=0,y;g<e;++g)u[(y=d[g]).i]=y.x(p);return u.join("")})}var QR=180/Math.PI,pw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function sU(n,e,t,i,s,a){var l,u,d;return(l=Math.sqrt(n*n+e*e))&&(n/=l,e/=l),(d=n*t+e*i)&&(t-=n*d,i-=e*d),(u=Math.sqrt(t*t+i*i))&&(t/=u,i/=u,d/=u),n*i<e*t&&(n=-n,e=-e,d=-d,l=-l),{translateX:s,translateY:a,rotate:Math.atan2(e,n)*QR,skewX:Math.atan(d)*QR,scaleX:l,scaleY:u}}var Cx;function UK(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?pw:sU(e.a,e.b,e.c,e.d,e.e,e.f)}function OK(n){return n==null||(Cx||(Cx=document.createElementNS("http://www.w3.org/2000/svg","g")),Cx.setAttribute("transform",n),!(n=Cx.transform.baseVal.consolidate()))?pw:(n=n.matrix,sU(n.a,n.b,n.c,n.d,n.e,n.f))}function rU(n,e,t,i){function s(p){return p.length?p.pop()+" ":""}function a(p,g,y,x,_,w){if(p!==y||g!==x){var A=_.push("translate(",null,e,null,t);w.push({i:A-4,x:yu(p,y)},{i:A-2,x:yu(g,x)})}else(y||x)&&_.push("translate("+y+e+x+t)}function l(p,g,y,x){p!==g?(p-g>180?g+=360:g-p>180&&(p+=360),x.push({i:y.push(s(y)+"rotate(",null,i)-2,x:yu(p,g)})):g&&y.push(s(y)+"rotate("+g+i)}function u(p,g,y,x){p!==g?x.push({i:y.push(s(y)+"skewX(",null,i)-2,x:yu(p,g)}):g&&y.push(s(y)+"skewX("+g+i)}function d(p,g,y,x,_,w){if(p!==y||g!==x){var A=_.push(s(_)+"scale(",null,",",null,")");w.push({i:A-4,x:yu(p,y)},{i:A-2,x:yu(g,x)})}else(y!==1||x!==1)&&_.push(s(_)+"scale("+y+","+x+")")}return function(p,g){var y=[],x=[];return p=n(p),g=n(g),a(p.translateX,p.translateY,g.translateX,g.translateY,y,x),l(p.rotate,g.rotate,y,x),u(p.skewX,g.skewX,y,x),d(p.scaleX,p.scaleY,g.scaleX,g.scaleY,y,x),p=g=null,function(_){for(var w=-1,A=x.length,E;++w<A;)y[(E=x[w]).i]=E.x(_);return y.join("")}}}var zK=rU(UK,"px, ","px)","deg)"),kK=rU(OK,", ",")",")"),xp=0,Rg=0,Sg=0,aU=1e3,tb,Ng,nb=0,uh=0,Qb=0,S0=typeof performance=="object"&&performance.now?performance:Date,oU=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function sE(){return uh||(oU(FK),uh=S0.now()+Qb)}function FK(){uh=0}function ib(){this._call=this._time=this._next=null}ib.prototype=rE.prototype={constructor:ib,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?sE():+t)+(e==null?0:+e),!this._next&&Ng!==this&&(Ng?Ng._next=this:tb=this,Ng=this),this._call=n,this._time=t,mw()},stop:function(){this._call&&(this._call=null,this._time=1/0,mw())}};function rE(n,e,t){var i=new ib;return i.restart(n,e,t),i}function BK(){sE(),++xp;for(var n=tb,e;n;)(e=uh-n._time)>=0&&n._call.call(void 0,e),n=n._next;--xp}function eN(){uh=(nb=S0.now())+Qb,xp=Rg=0;try{BK()}finally{xp=0,HK(),uh=0}}function VK(){var n=S0.now(),e=n-nb;e>aU&&(Qb-=e,nb=n)}function HK(){for(var n,e=tb,t,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:tb=t);Ng=n,mw(i)}function mw(n){if(!xp){Rg&&(Rg=clearTimeout(Rg));var e=n-uh;e>24?(n<1/0&&(Rg=setTimeout(eN,n-S0.now()-Qb)),Sg&&(Sg=clearInterval(Sg))):(Sg||(nb=S0.now(),Sg=setInterval(VK,aU)),xp=1,oU(eN))}}function tN(n,e,t){var i=new ib;return e=e==null?0:+e,i.restart(s=>{i.stop(),n(s+e)},e,t),i}var jK=Kb("start","end","cancel","interrupt"),GK=[],lU=0,nN=1,gw=2,kx=3,iN=4,vw=5,Fx=6;function eS(n,e,t,i,s,a){var l=n.__transition;if(!l)n.__transition={};else if(t in l)return;WK(n,t,{name:e,index:i,group:s,on:jK,tween:GK,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:lU})}function aE(n,e){var t=Ro(n,e);if(t.state>lU)throw new Error("too late; already scheduled");return t}function wl(n,e){var t=Ro(n,e);if(t.state>kx)throw new Error("too late; already running");return t}function Ro(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function WK(n,e,t){var i=n.__transition,s;i[e]=t,t.timer=rE(a,0,t.time);function a(p){t.state=nN,t.timer.restart(l,t.delay,t.time),t.delay<=p&&l(p-t.delay)}function l(p){var g,y,x,_;if(t.state!==nN)return d();for(g in i)if(_=i[g],_.name===t.name){if(_.state===kx)return tN(l);_.state===iN?(_.state=Fx,_.timer.stop(),_.on.call("interrupt",n,n.__data__,_.index,_.group),delete i[g]):+g<e&&(_.state=Fx,_.timer.stop(),_.on.call("cancel",n,n.__data__,_.index,_.group),delete i[g])}if(tN(function(){t.state===kx&&(t.state=iN,t.timer.restart(u,t.delay,t.time),u(p))}),t.state=gw,t.on.call("start",n,n.__data__,t.index,t.group),t.state===gw){for(t.state=kx,s=new Array(x=t.tween.length),g=0,y=-1;g<x;++g)(_=t.tween[g].value.call(n,n.__data__,t.index,t.group))&&(s[++y]=_);s.length=y+1}}function u(p){for(var g=p<t.duration?t.ease.call(null,p/t.duration):(t.timer.restart(d),t.state=vw,1),y=-1,x=s.length;++y<x;)s[y].call(n,g);t.state===vw&&(t.on.call("end",n,n.__data__,t.index,t.group),d())}function d(){t.state=Fx,t.timer.stop(),delete i[e];for(var p in i)return;delete n.__transition}}function XK(n,e){var t=n.__transition,i,s,a=!0,l;if(t){e=e==null?null:e+"";for(l in t){if((i=t[l]).name!==e){a=!1;continue}s=i.state>gw&&i.state<vw,i.state=Fx,i.timer.stop(),i.on.call(s?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete t[l]}a&&delete n.__transition}}function qK(n){return this.each(function(){XK(this,n)})}function ZK(n,e){var t,i;return function(){var s=wl(this,n),a=s.tween;if(a!==t){i=t=a;for(var l=0,u=i.length;l<u;++l)if(i[l].name===e){i=i.slice(),i.splice(l,1);break}}s.tween=i}}function YK(n,e,t){var i,s;if(typeof t!="function")throw new Error;return function(){var a=wl(this,n),l=a.tween;if(l!==i){s=(i=l).slice();for(var u={name:e,value:t},d=0,p=s.length;d<p;++d)if(s[d].name===e){s[d]=u;break}d===p&&s.push(u)}a.tween=s}}function $K(n,e){var t=this._id;if(n+="",arguments.length<2){for(var i=Ro(this.node(),t).tween,s=0,a=i.length,l;s<a;++s)if((l=i[s]).name===n)return l.value;return null}return this.each((e==null?ZK:YK)(t,n,e))}function oE(n,e,t){var i=n._id;return n.each(function(){var s=wl(this,i);(s.value||(s.value={}))[e]=t.apply(this,arguments)}),function(s){return Ro(s,i).value[e]}}function cU(n,e){var t;return(typeof e=="number"?yu:e instanceof b0?JR:(t=b0(e))?(e=t,JR):PK)(n,e)}function KK(n){return function(){this.removeAttribute(n)}}function JK(n){return function(){this.removeAttributeNS(n.space,n.local)}}function QK(n,e,t){var i,s=t+"",a;return function(){var l=this.getAttribute(n);return l===s?null:l===i?a:a=e(i=l,t)}}function eJ(n,e,t){var i,s=t+"",a;return function(){var l=this.getAttributeNS(n.space,n.local);return l===s?null:l===i?a:a=e(i=l,t)}}function tJ(n,e,t){var i,s,a;return function(){var l,u=t(this),d;return u==null?void this.removeAttribute(n):(l=this.getAttribute(n),d=u+"",l===d?null:l===i&&d===s?a:(s=d,a=e(i=l,u)))}}function nJ(n,e,t){var i,s,a;return function(){var l,u=t(this),d;return u==null?void this.removeAttributeNS(n.space,n.local):(l=this.getAttributeNS(n.space,n.local),d=u+"",l===d?null:l===i&&d===s?a:(s=d,a=e(i=l,u)))}}function iJ(n,e){var t=Jb(n),i=t==="transform"?kK:cU;return this.attrTween(n,typeof e=="function"?(t.local?nJ:tJ)(t,i,oE(this,"attr."+n,e)):e==null?(t.local?JK:KK)(t):(t.local?eJ:QK)(t,i,e))}function sJ(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function rJ(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function aJ(n,e){var t,i;function s(){var a=e.apply(this,arguments);return a!==i&&(t=(i=a)&&rJ(n,a)),t}return s._value=e,s}function oJ(n,e){var t,i;function s(){var a=e.apply(this,arguments);return a!==i&&(t=(i=a)&&sJ(n,a)),t}return s._value=e,s}function lJ(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var i=Jb(n);return this.tween(t,(i.local?aJ:oJ)(i,e))}function cJ(n,e){return function(){aE(this,n).delay=+e.apply(this,arguments)}}function uJ(n,e){return e=+e,function(){aE(this,n).delay=e}}function fJ(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?cJ:uJ)(e,n)):Ro(this.node(),e).delay}function hJ(n,e){return function(){wl(this,n).duration=+e.apply(this,arguments)}}function dJ(n,e){return e=+e,function(){wl(this,n).duration=e}}function pJ(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?hJ:dJ)(e,n)):Ro(this.node(),e).duration}function mJ(n,e){if(typeof e!="function")throw new Error;return function(){wl(this,n).ease=e}}function gJ(n){var e=this._id;return arguments.length?this.each(mJ(e,n)):Ro(this.node(),e).ease}function vJ(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;wl(this,n).ease=t}}function yJ(n){if(typeof n!="function")throw new Error;return this.each(vJ(this._id,n))}function xJ(n){typeof n!="function"&&(n=GP(n));for(var e=this._groups,t=e.length,i=new Array(t),s=0;s<t;++s)for(var a=e[s],l=a.length,u=i[s]=[],d,p=0;p<l;++p)(d=a[p])&&n.call(d,d.__data__,p,a)&&u.push(d);return new xc(i,this._parents,this._name,this._id)}function _J(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,s=t.length,a=Math.min(i,s),l=new Array(i),u=0;u<a;++u)for(var d=e[u],p=t[u],g=d.length,y=l[u]=new Array(g),x,_=0;_<g;++_)(x=d[_]||p[_])&&(y[_]=x);for(;u<i;++u)l[u]=e[u];return new xc(l,this._parents,this._name,this._id)}function bJ(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function SJ(n,e,t){var i,s,a=bJ(e)?aE:wl;return function(){var l=a(this,n),u=l.on;u!==i&&(s=(i=u).copy()).on(e,t),l.on=s}}function MJ(n,e){var t=this._id;return arguments.length<2?Ro(this.node(),t).on.on(n):this.each(SJ(t,n,e))}function wJ(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function TJ(){return this.on("end.remove",wJ(this._id))}function EJ(n){var e=this._name,t=this._id;typeof n!="function"&&(n=tE(n));for(var i=this._groups,s=i.length,a=new Array(s),l=0;l<s;++l)for(var u=i[l],d=u.length,p=a[l]=new Array(d),g,y,x=0;x<d;++x)(g=u[x])&&(y=n.call(g,g.__data__,x,u))&&("__data__"in g&&(y.__data__=g.__data__),p[x]=y,eS(p[x],e,t,x,p,Ro(g,t)));return new xc(a,this._parents,e,t)}function AJ(n){var e=this._name,t=this._id;typeof n!="function"&&(n=jP(n));for(var i=this._groups,s=i.length,a=[],l=[],u=0;u<s;++u)for(var d=i[u],p=d.length,g,y=0;y<p;++y)if(g=d[y]){for(var x=n.call(g,g.__data__,y,d),_,w=Ro(g,t),A=0,E=x.length;A<E;++A)(_=x[A])&&eS(_,e,t,A,x,w);a.push(x),l.push(g)}return new xc(a,l,e,t)}var CJ=k0.prototype.constructor;function RJ(){return new CJ(this._groups,this._parents)}function NJ(n,e){var t,i,s;return function(){var a=yp(this,n),l=(this.style.removeProperty(n),yp(this,n));return a===l?null:a===t&&l===i?s:s=e(t=a,i=l)}}function uU(n){return function(){this.style.removeProperty(n)}}function DJ(n,e,t){var i,s=t+"",a;return function(){var l=yp(this,n);return l===s?null:l===i?a:a=e(i=l,t)}}function IJ(n,e,t){var i,s,a;return function(){var l=yp(this,n),u=t(this),d=u+"";return u==null&&(d=u=(this.style.removeProperty(n),yp(this,n))),l===d?null:l===i&&d===s?a:(s=d,a=e(i=l,u))}}function LJ(n,e){var t,i,s,a="style."+e,l="end."+a,u;return function(){var d=wl(this,n),p=d.on,g=d.value[a]==null?u||(u=uU(e)):void 0;(p!==t||s!==g)&&(i=(t=p).copy()).on(l,s=g),d.on=i}}function PJ(n,e,t){var i=(n+="")=="transform"?zK:cU;return e==null?this.styleTween(n,NJ(n,i)).on("end.style."+n,uU(n)):typeof e=="function"?this.styleTween(n,IJ(n,i,oE(this,"style."+n,e))).each(LJ(this._id,n)):this.styleTween(n,DJ(n,i,e),t).on("end.style."+n,null)}function UJ(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function OJ(n,e,t){var i,s;function a(){var l=e.apply(this,arguments);return l!==s&&(i=(s=l)&&UJ(n,l,t)),i}return a._value=e,a}function zJ(n,e,t){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,OJ(n,e,t??""))}function kJ(n){return function(){this.textContent=n}}function FJ(n){return function(){var e=n(this);this.textContent=e??""}}function BJ(n){return this.tween("text",typeof n=="function"?FJ(oE(this,"text",n)):kJ(n==null?"":n+""))}function VJ(n){return function(e){this.textContent=n.call(this,e)}}function HJ(n){var e,t;function i(){var s=n.apply(this,arguments);return s!==t&&(e=(t=s)&&VJ(s)),e}return i._value=n,i}function jJ(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,HJ(n))}function GJ(){for(var n=this._name,e=this._id,t=fU(),i=this._groups,s=i.length,a=0;a<s;++a)for(var l=i[a],u=l.length,d,p=0;p<u;++p)if(d=l[p]){var g=Ro(d,e);eS(d,n,t,p,l,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new xc(i,this._parents,n,t)}function WJ(){var n,e,t=this,i=t._id,s=t.size();return new Promise(function(a,l){var u={value:l},d={value:function(){--s===0&&a()}};t.each(function(){var p=wl(this,i),g=p.on;g!==n&&(e=(n=g).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(d)),p.on=e}),s===0&&a()})}var XJ=0;function xc(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function fU(){return++XJ}var uc=k0.prototype;xc.prototype={constructor:xc,select:EJ,selectAll:AJ,selectChild:uc.selectChild,selectChildren:uc.selectChildren,filter:xJ,merge:_J,selection:RJ,transition:GJ,call:uc.call,nodes:uc.nodes,node:uc.node,size:uc.size,empty:uc.empty,each:uc.each,on:MJ,attr:iJ,attrTween:lJ,style:PJ,styleTween:zJ,text:BJ,textTween:jJ,remove:TJ,tween:$K,delay:fJ,duration:pJ,ease:gJ,easeVarying:yJ,end:WJ,[Symbol.iterator]:uc[Symbol.iterator]};function qJ(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var ZJ={time:null,delay:0,duration:250,ease:qJ};function YJ(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function $J(n){var e,t;n instanceof xc?(e=n._id,n=n._name):(e=fU(),(t=ZJ).time=sE(),n=n==null?null:n+"");for(var i=this._groups,s=i.length,a=0;a<s;++a)for(var l=i[a],u=l.length,d,p=0;p<u;++p)(d=l[p])&&eS(d,n,e,p,l,t||YJ(d,e));return new xc(i,this._parents,n,e)}k0.prototype.interrupt=qK;k0.prototype.transition=$J;function KJ(n,e){var t,i=1;n==null&&(n=0),e==null&&(e=0);function s(){var a,l=t.length,u,d=0,p=0;for(a=0;a<l;++a)u=t[a],d+=u.x,p+=u.y;for(d=(d/l-n)*i,p=(p/l-e)*i,a=0;a<l;++a)u=t[a],u.x-=d,u.y-=p}return s.initialize=function(a){t=a},s.x=function(a){return arguments.length?(n=+a,s):n},s.y=function(a){return arguments.length?(e=+a,s):e},s.strength=function(a){return arguments.length?(i=+a,s):i},s}function JJ(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return hU(this.cover(e,t),e,t,n)}function hU(n,e,t,i){if(isNaN(e)||isNaN(t))return n;var s,a=n._root,l={data:i},u=n._x0,d=n._y0,p=n._x1,g=n._y1,y,x,_,w,A,E,M,D;if(!a)return n._root=l,n;for(;a.length;)if((A=e>=(y=(u+p)/2))?u=y:p=y,(E=t>=(x=(d+g)/2))?d=x:g=x,s=a,!(a=a[M=E<<1|A]))return s[M]=l,n;if(_=+n._x.call(null,a.data),w=+n._y.call(null,a.data),e===_&&t===w)return l.next=a,s?s[M]=l:n._root=l,n;do s=s?s[M]=new Array(4):n._root=new Array(4),(A=e>=(y=(u+p)/2))?u=y:p=y,(E=t>=(x=(d+g)/2))?d=x:g=x;while((M=E<<1|A)===(D=(w>=x)<<1|_>=y));return s[D]=a,s[M]=l,n}function QJ(n){var e,t,i=n.length,s,a,l=new Array(i),u=new Array(i),d=1/0,p=1/0,g=-1/0,y=-1/0;for(t=0;t<i;++t)isNaN(s=+this._x.call(null,e=n[t]))||isNaN(a=+this._y.call(null,e))||(l[t]=s,u[t]=a,s<d&&(d=s),s>g&&(g=s),a<p&&(p=a),a>y&&(y=a));if(d>g||p>y)return this;for(this.cover(d,p).cover(g,y),t=0;t<i;++t)hU(this,l[t],u[t],n[t]);return this}function eQ(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,i=this._y0,s=this._x1,a=this._y1;if(isNaN(t))s=(t=Math.floor(n))+1,a=(i=Math.floor(e))+1;else{for(var l=s-t||1,u=this._root,d,p;t>n||n>=s||i>e||e>=a;)switch(p=(e<i)<<1|n<t,d=new Array(4),d[p]=u,u=d,l*=2,p){case 0:s=t+l,a=i+l;break;case 1:t=s-l,a=i+l;break;case 2:s=t+l,i=a-l;break;case 3:t=s-l,i=a-l;break}this._root&&this._root.length&&(this._root=u)}return this._x0=t,this._y0=i,this._x1=s,this._y1=a,this}function tQ(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function nQ(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function br(n,e,t,i,s){this.node=n,this.x0=e,this.y0=t,this.x1=i,this.y1=s}function iQ(n,e,t){var i,s=this._x0,a=this._y0,l,u,d,p,g=this._x1,y=this._y1,x=[],_=this._root,w,A;for(_&&x.push(new br(_,s,a,g,y)),t==null?t=1/0:(s=n-t,a=e-t,g=n+t,y=e+t,t*=t);w=x.pop();)if(!(!(_=w.node)||(l=w.x0)>g||(u=w.y0)>y||(d=w.x1)<s||(p=w.y1)<a))if(_.length){var E=(l+d)/2,M=(u+p)/2;x.push(new br(_[3],E,M,d,p),new br(_[2],l,M,E,p),new br(_[1],E,u,d,M),new br(_[0],l,u,E,M)),(A=(e>=M)<<1|n>=E)&&(w=x[x.length-1],x[x.length-1]=x[x.length-1-A],x[x.length-1-A]=w)}else{var D=n-+this._x.call(null,_.data),L=e-+this._y.call(null,_.data),N=D*D+L*L;if(N<t){var P=Math.sqrt(t=N);s=n-P,a=e-P,g=n+P,y=e+P,i=_.data}}return i}function sQ(n){if(isNaN(g=+this._x.call(null,n))||isNaN(y=+this._y.call(null,n)))return this;var e,t=this._root,i,s,a,l=this._x0,u=this._y0,d=this._x1,p=this._y1,g,y,x,_,w,A,E,M;if(!t)return this;if(t.length)for(;;){if((w=g>=(x=(l+d)/2))?l=x:d=x,(A=y>=(_=(u+p)/2))?u=_:p=_,e=t,!(t=t[E=A<<1|w]))return this;if(!t.length)break;(e[E+1&3]||e[E+2&3]||e[E+3&3])&&(i=e,M=E)}for(;t.data!==n;)if(s=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,s?(a?s.next=a:delete s.next,this):e?(a?e[E]=a:delete e[E],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(i?i[M]=t:this._root=t),this):(this._root=a,this)}function rQ(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function aQ(){return this._root}function oQ(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function lQ(n){var e=[],t,i=this._root,s,a,l,u,d;for(i&&e.push(new br(i,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(i=t.node,a=t.x0,l=t.y0,u=t.x1,d=t.y1)&&i.length){var p=(a+u)/2,g=(l+d)/2;(s=i[3])&&e.push(new br(s,p,g,u,d)),(s=i[2])&&e.push(new br(s,a,g,p,d)),(s=i[1])&&e.push(new br(s,p,l,u,g)),(s=i[0])&&e.push(new br(s,a,l,p,g))}return this}function cQ(n){var e=[],t=[],i;for(this._root&&e.push(new br(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var s=i.node;if(s.length){var a,l=i.x0,u=i.y0,d=i.x1,p=i.y1,g=(l+d)/2,y=(u+p)/2;(a=s[0])&&e.push(new br(a,l,u,g,y)),(a=s[1])&&e.push(new br(a,g,u,d,y)),(a=s[2])&&e.push(new br(a,l,y,g,p)),(a=s[3])&&e.push(new br(a,g,y,d,p))}t.push(i)}for(;i=t.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function uQ(n){return n[0]}function fQ(n){return arguments.length?(this._x=n,this):this._x}function hQ(n){return n[1]}function dQ(n){return arguments.length?(this._y=n,this):this._y}function lE(n,e,t){var i=new cE(e??uQ,t??hQ,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function cE(n,e,t,i,s,a){this._x=n,this._y=e,this._x0=t,this._y0=i,this._x1=s,this._y1=a,this._root=void 0}function sN(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var Ar=lE.prototype=cE.prototype;Ar.copy=function(){var n=new cE(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,i;if(!e)return n;if(!e.length)return n._root=sN(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var s=0;s<4;++s)(i=e.source[s])&&(i.length?t.push({source:i,target:e.target[s]=new Array(4)}):e.target[s]=sN(i));return n};Ar.add=JJ;Ar.addAll=QJ;Ar.cover=eQ;Ar.data=tQ;Ar.extent=nQ;Ar.find=iQ;Ar.remove=sQ;Ar.removeAll=rQ;Ar.root=aQ;Ar.size=oQ;Ar.visit=lQ;Ar.visitAfter=cQ;Ar.x=fQ;Ar.y=dQ;function nh(n){return function(){return n}}function Tu(n){return(n()-.5)*1e-6}function pQ(n){return n.x+n.vx}function mQ(n){return n.y+n.vy}function gQ(n){var e,t,i,s=1,a=1;typeof n!="function"&&(n=nh(n==null?1:+n));function l(){for(var p,g=e.length,y,x,_,w,A,E,M=0;M<a;++M)for(y=lE(e,pQ,mQ).visitAfter(u),p=0;p<g;++p)x=e[p],A=t[x.index],E=A*A,_=x.x+x.vx,w=x.y+x.vy,y.visit(D);function D(L,N,P,z,B){var V=L.data,O=L.r,F=A+O;if(V){if(V.index>x.index){var W=_-V.x-V.vx,ee=w-V.y-V.vy,J=W*W+ee*ee;J<F*F&&(W===0&&(W=Tu(i),J+=W*W),ee===0&&(ee=Tu(i),J+=ee*ee),J=(F-(J=Math.sqrt(J)))/J*s,x.vx+=(W*=J)*(F=(O*=O)/(E+O)),x.vy+=(ee*=J)*F,V.vx-=W*(F=1-F),V.vy-=ee*F)}return}return N>_+F||z<_-F||P>w+F||B<w-F}}function u(p){if(p.data)return p.r=t[p.data.index];for(var g=p.r=0;g<4;++g)p[g]&&p[g].r>p.r&&(p.r=p[g].r)}function d(){if(e){var p,g=e.length,y;for(t=new Array(g),p=0;p<g;++p)y=e[p],t[y.index]=+n(y,p,e)}}return l.initialize=function(p,g){e=p,i=g,d()},l.iterations=function(p){return arguments.length?(a=+p,l):a},l.strength=function(p){return arguments.length?(s=+p,l):s},l.radius=function(p){return arguments.length?(n=typeof p=="function"?p:nh(+p),d(),l):n},l}function vQ(n){return n.index}function rN(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function yQ(n){var e=vQ,t=y,i,s=nh(30),a,l,u,d,p,g=1;n==null&&(n=[]);function y(E){return 1/Math.min(u[E.source.index],u[E.target.index])}function x(E){for(var M=0,D=n.length;M<g;++M)for(var L=0,N,P,z,B,V,O,F;L<D;++L)N=n[L],P=N.source,z=N.target,B=z.x+z.vx-P.x-P.vx||Tu(p),V=z.y+z.vy-P.y-P.vy||Tu(p),O=Math.sqrt(B*B+V*V),O=(O-a[L])/O*E*i[L],B*=O,V*=O,z.vx-=B*(F=d[L]),z.vy-=V*F,P.vx+=B*(F=1-F),P.vy+=V*F}function _(){if(l){var E,M=l.length,D=n.length,L=new Map(l.map((P,z)=>[e(P,z,l),P])),N;for(E=0,u=new Array(M);E<D;++E)N=n[E],N.index=E,typeof N.source!="object"&&(N.source=rN(L,N.source)),typeof N.target!="object"&&(N.target=rN(L,N.target)),u[N.source.index]=(u[N.source.index]||0)+1,u[N.target.index]=(u[N.target.index]||0)+1;for(E=0,d=new Array(D);E<D;++E)N=n[E],d[E]=u[N.source.index]/(u[N.source.index]+u[N.target.index]);i=new Array(D),w(),a=new Array(D),A()}}function w(){if(l)for(var E=0,M=n.length;E<M;++E)i[E]=+t(n[E],E,n)}function A(){if(l)for(var E=0,M=n.length;E<M;++E)a[E]=+s(n[E],E,n)}return x.initialize=function(E,M){l=E,p=M,_()},x.links=function(E){return arguments.length?(n=E,_(),x):n},x.id=function(E){return arguments.length?(e=E,x):e},x.iterations=function(E){return arguments.length?(g=+E,x):g},x.strength=function(E){return arguments.length?(t=typeof E=="function"?E:nh(+E),w(),x):t},x.distance=function(E){return arguments.length?(s=typeof E=="function"?E:nh(+E),A(),x):s},x}const xQ=1664525,_Q=1013904223,aN=4294967296;function bQ(){let n=1;return()=>(n=(xQ*n+_Q)%aN)/aN}function SQ(n){return n.x}function MQ(n){return n.y}var wQ=10,TQ=Math.PI*(3-Math.sqrt(5));function EQ(n){var e,t=1,i=.001,s=1-Math.pow(i,1/300),a=0,l=.6,u=new Map,d=rE(y),p=Kb("tick","end"),g=bQ();n==null&&(n=[]);function y(){x(),p.call("tick",e),t<i&&(d.stop(),p.call("end",e))}function x(A){var E,M=n.length,D;A===void 0&&(A=1);for(var L=0;L<A;++L)for(t+=(a-t)*s,u.forEach(function(N){N(t)}),E=0;E<M;++E)D=n[E],D.fx==null?D.x+=D.vx*=l:(D.x=D.fx,D.vx=0),D.fy==null?D.y+=D.vy*=l:(D.y=D.fy,D.vy=0);return e}function _(){for(var A=0,E=n.length,M;A<E;++A){if(M=n[A],M.index=A,M.fx!=null&&(M.x=M.fx),M.fy!=null&&(M.y=M.fy),isNaN(M.x)||isNaN(M.y)){var D=wQ*Math.sqrt(.5+A),L=A*TQ;M.x=D*Math.cos(L),M.y=D*Math.sin(L)}(isNaN(M.vx)||isNaN(M.vy))&&(M.vx=M.vy=0)}}function w(A){return A.initialize&&A.initialize(n,g),A}return _(),e={tick:x,restart:function(){return d.restart(y),e},stop:function(){return d.stop(),e},nodes:function(A){return arguments.length?(n=A,_(),u.forEach(w),e):n},alpha:function(A){return arguments.length?(t=+A,e):t},alphaMin:function(A){return arguments.length?(i=+A,e):i},alphaDecay:function(A){return arguments.length?(s=+A,e):+s},alphaTarget:function(A){return arguments.length?(a=+A,e):a},velocityDecay:function(A){return arguments.length?(l=1-A,e):1-l},randomSource:function(A){return arguments.length?(g=A,u.forEach(w),e):g},force:function(A,E){return arguments.length>1?(E==null?u.delete(A):u.set(A,w(E)),e):u.get(A)},find:function(A,E,M){var D=0,L=n.length,N,P,z,B,V;for(M==null?M=1/0:M*=M,D=0;D<L;++D)B=n[D],N=A-B.x,P=E-B.y,z=N*N+P*P,z<M&&(V=B,M=z);return V},on:function(A,E){return arguments.length>1?(p.on(A,E),e):p.on(A)}}}function AQ(){var n,e,t,i,s=nh(-30),a,l=1,u=1/0,d=.81;function p(_){var w,A=n.length,E=lE(n,SQ,MQ).visitAfter(y);for(i=_,w=0;w<A;++w)e=n[w],E.visit(x)}function g(){if(n){var _,w=n.length,A;for(a=new Array(w),_=0;_<w;++_)A=n[_],a[A.index]=+s(A,_,n)}}function y(_){var w=0,A,E,M=0,D,L,N;if(_.length){for(D=L=N=0;N<4;++N)(A=_[N])&&(E=Math.abs(A.value))&&(w+=A.value,M+=E,D+=E*A.x,L+=E*A.y);_.x=D/M,_.y=L/M}else{A=_,A.x=A.data.x,A.y=A.data.y;do w+=a[A.data.index];while(A=A.next)}_.value=w}function x(_,w,A,E){if(!_.value)return!0;var M=_.x-e.x,D=_.y-e.y,L=E-w,N=M*M+D*D;if(L*L/d<N)return N<u&&(M===0&&(M=Tu(t),N+=M*M),D===0&&(D=Tu(t),N+=D*D),N<l&&(N=Math.sqrt(l*N)),e.vx+=M*_.value*i/N,e.vy+=D*_.value*i/N),!0;if(_.length||N>=u)return;(_.data!==e||_.next)&&(M===0&&(M=Tu(t),N+=M*M),D===0&&(D=Tu(t),N+=D*D),N<l&&(N=Math.sqrt(l*N)));do _.data!==e&&(L=a[_.data.index]*i/N,e.vx+=M*L,e.vy+=D*L);while(_=_.next)}return p.initialize=function(_,w){n=_,t=w,g()},p.strength=function(_){return arguments.length?(s=typeof _=="function"?_:nh(+_),g(),p):s},p.distanceMin=function(_){return arguments.length?(l=_*_,p):Math.sqrt(l)},p.distanceMax=function(_){return arguments.length?(u=_*_,p):Math.sqrt(u)},p.theta=function(_){return arguments.length?(d=_*_,p):Math.sqrt(d)},p}function Dg(n,e,t){this.k=n,this.x=e,this.y=t}Dg.prototype={constructor:Dg,scale:function(n){return n===1?this:new Dg(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Dg(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Dg.prototype;const CQ=()=>{const n=pe.useRef(null),[e,t]=pe.useState([]),[i,s]=pe.useState({totalModules:0,aliveCount:0,unknownCount:0,coreCount:0,securityCount:0,productCount:0}),a=[{id:"wealth_scanner",type:"Analytics",status:" ALIVE",exports:["financial_analysis","market_data","portfolio_optimization"],loc:15420,path:"wealth-scanner.aeterna.website",revenue:45e3,users:1250},{id:"sector_security",type:"Security",status:" ALIVE",exports:["vulnerability_scan","threat_detection","incident_response"],loc:23850,path:"sector-security.aeterna.website",revenue:78e3,users:890},{id:"network_optimizer",type:"Product",status:" ALIVE",exports:["bandwidth_optimization","latency_reduction","traffic_analysis"],loc:18200,path:"network-optimizer.aeterna.website",revenue:52e3,users:1120},{id:"valuation_gate",type:"AI",status:" ALIVE",exports:["asset_valuation","market_prediction","risk_analysis"],loc:31250,path:"valuation-gate.aeterna.website",revenue:95e3,users:650},{id:"automation_nexus",type:"Automation",status:" LAUNCHING",exports:["ai_automation","quantum_scanning","self_healing"],loc:42100,path:"automation-nexus.aeterna.website",revenue:125e3,users:2100},{id:"intelligence_core",type:"AI",status:" ALIVE",exports:["multi_modal_ai","reasoning_chains","custom_models"],loc:28750,path:"intelligence-core.aeterna.website",revenue:67e3,users:780},{id:"aeterna_core",type:"Core",status:" ALIVE",exports:["unified_auth","cross_app_intelligence","quantum_prediction"],loc:55e3,path:"api.aeterna.website",revenue:0,users:6790},{id:"payment_gateway",type:"Core",status:" ALIVE",exports:["stripe_integration","binance_tracking","revenue_analytics"],loc:8500,path:"payments.aeterna.website",revenue:462e3,users:6790},{id:"telegram_uplink",type:"Core",status:" ALIVE",exports:["mobile_commands","ai_chat","real_time_alerts"],loc:4200,path:"mobile.aeterna.website",revenue:0,users:150}];pe.useEffect(()=>{t(a),l(a),u(a)},[]);const l=d=>{s({totalModules:d.length,aliveCount:d.filter(p=>p.status===" ALIVE").length,unknownCount:d.filter(p=>p.status===" UNKNOWN").length,coreCount:d.filter(p=>p.type==="Core").length,securityCount:d.filter(p=>p.type==="Security").length,productCount:d.filter(p=>p.type==="Product").length})},u=d=>{if(!n.current)return;const p=window.innerWidth,g=window.innerHeight;dc(n.current).selectAll("*").remove();const y=dc(n.current).attr("width",p).attr("height",g),x=[];d.forEach((N,P)=>{d.forEach((z,B)=>{P!==B&&(N.type===z.type&&x.push({source:N.id,target:z.id,strength:.5}),(N.type==="Core"||z.type==="Core")&&x.push({source:N.id,target:z.id,strength:.3}),N.type==="AI"&&z.type==="Analytics"&&x.push({source:N.id,target:z.id,strength:.7}))})});const _=EQ(d).force("link",yQ(x).id(N=>N.id).distance(100)).force("charge",AQ().strength(-300)).force("center",KJ(p/2,g/2)).force("collision",gQ().radius(30)),w=y.append("defs");Object.entries({Core:["#8b5cf6","#a855f7"],Security:["#ef4444","#f97316"],Product:["#3b82f6","#06b6d4"],AI:["#ec4899","#f59e0b"],Analytics:["#10b981","#059669"],Automation:["#f59e0b","#ea580c"]}).forEach(([N,P])=>{const z=w.append("radialGradient").attr("id",`gradient-${N}`).attr("cx","50%").attr("cy","50%").attr("r","50%");z.append("stop").attr("offset","0%").attr("stop-color",P[0]).attr("stop-opacity",.8),z.append("stop").attr("offset","100%").attr("stop-color",P[1]).attr("stop-opacity",.4)});const E=y.append("g").selectAll("line").data(x).join("line").attr("stroke","#0f0").attr("stroke-opacity",.3).attr("stroke-width",1),M=y.append("g").selectAll("g").data(d).join("g").attr("class","node").style("cursor","pointer");M.append("circle").attr("r",N=>Math.min(10+Math.sqrt(N.loc/100),25)).attr("fill",N=>`url(#gradient-${N.type})`).attr("stroke",N=>{switch(N.status){case" ALIVE":return"#10b981";case" LAUNCHING":return"#f59e0b";case" UNKNOWN":return"#eab308";default:return"#ef4444"}}).attr("stroke-width",3),M.append("text").text(N=>N.id.replace(/_/g," ")).attr("text-anchor","middle").attr("dy","0.35em").attr("font-size","10px").attr("fill","white").attr("font-weight","bold"),M.filter(N=>N.revenue&&N.revenue>0).append("text").text(N=>`${(N.revenue/1e3).toFixed(0)}K`).attr("text-anchor","middle").attr("dy","25px").attr("font-size","8px").attr("fill","#10b981").attr("font-weight","bold");const D=dc("body").append("div").attr("class","tooltip").style("position","absolute").style("background","rgba(0, 0, 0, 0.9)").style("border","1px solid #0f0").style("padding","10px").style("border-radius","5px").style("color","white").style("pointer-events","none").style("display","none").style("z-index","2000").style("font-size","11px").style("max-width","300px");M.on("mouseover",function(N,P){D.style("display","block").html(`
                        <strong>${P.id.replace(/_/g," ").toUpperCase()}</strong><br/>
                        <strong>Type:</strong> ${P.type}<br/>
                        <strong>Status:</strong> ${P.status}<br/>
                        <strong>LOC:</strong> ${P.loc.toLocaleString()}<br/>
                        ${P.revenue?`<strong>Revenue:</strong> ${P.revenue.toLocaleString()}/mo<br/>`:""}
                        ${P.users?`<strong>Users:</strong> ${P.users.toLocaleString()}<br/>`:""}
                        <strong>Exports:</strong> ${P.exports.join(", ")}<br/>
                        <small><strong>URL:</strong> ${P.path}</small>
                    `).style("left",N.pageX+10+"px").style("top",N.pageY-10+"px"),dc(this).select("circle").attr("stroke-width",6).attr("filter","brightness(1.3)")}).on("mouseout",function(){D.style("display","none"),dc(this).select("circle").attr("stroke-width",3).attr("filter","none")}).on("click",function(N,P){(P.path.startsWith("http")||P.path.includes("aeterna.website"))&&window.open(`https://${P.path}`,"_blank")});const L=gK().on("start",(N,P)=>{N.active||_.alphaTarget(.3).restart(),P.fx=P.x,P.fy=P.y}).on("drag",(N,P)=>{P.fx=N.x,P.fy=N.y}).on("end",(N,P)=>{N.active||_.alphaTarget(0),P.fx=null,P.fy=null});return M.call(L),_.on("tick",()=>{E.attr("x1",N=>N.source.x).attr("y1",N=>N.source.y).attr("x2",N=>N.target.x).attr("y2",N=>N.target.y),M.attr("transform",N=>`translate(${N.x}, ${N.y})`)}),()=>{D.remove()}};return pe.useEffect(()=>{const d=setInterval(()=>{t(p=>p.map(g=>({...g,revenue:g.revenue?g.revenue+Math.floor(Math.random()*1e3):void 0,users:g.users?g.users+Math.floor(Math.random()*10):void 0})))},1e4);return()=>clearInterval(d)},[]),R.jsxs("div",{className:"relative w-full h-screen bg-black overflow-hidden",children:[R.jsxs("div",{className:"absolute top-5 left-5 z-50 bg-black/80 border border-green-500 p-4 backdrop-blur",children:[R.jsx("h1",{className:"text-xl font-bold text-green-400 mb-2",children:" AETERNA NETWORK MAP"}),R.jsx("p",{className:"text-green-300 text-sm",children:"Live SaaS Platform Visualization"}),R.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Click nodes to visit  Drag to reposition  Hover for details"})]}),R.jsxs("div",{className:"absolute top-5 right-5 z-50 bg-black/80 border border-green-500 p-4 backdrop-blur min-w-[250px]",children:[R.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[R.jsxs("div",{children:["Total Modules: ",R.jsx("span",{className:"text-green-400 font-bold",children:i.totalModules})]}),R.jsxs("div",{children:[" ALIVE: ",R.jsx("span",{className:"text-green-400 font-bold",children:i.aliveCount})]}),R.jsxs("div",{children:[" UNKNOWN: ",R.jsx("span",{className:"text-yellow-400 font-bold",children:i.unknownCount})]}),R.jsxs("div",{children:["Core: ",R.jsx("span",{className:"text-purple-400 font-bold",children:i.coreCount})]}),R.jsxs("div",{children:["Security: ",R.jsx("span",{className:"text-red-400 font-bold",children:i.securityCount})]}),R.jsxs("div",{children:["Products: ",R.jsx("span",{className:"text-blue-400 font-bold",children:i.productCount})]})]}),R.jsxs("div",{className:"border-t border-gray-600 mt-3 pt-3",children:[R.jsx("div",{className:"text-xs text-green-400 font-bold",children:"TOTAL REVENUE"}),R.jsxs("div",{className:"text-lg font-bold text-green-400",children:["",e.reduce((d,p)=>d+(p.revenue||0),0).toLocaleString()]}),R.jsx("div",{className:"text-xs text-gray-400",children:"/month"})]}),R.jsxs("div",{className:"border-t border-gray-600 mt-3 pt-3",children:[R.jsx("div",{className:"text-xs text-blue-400 font-bold",children:"TOTAL USERS"}),R.jsx("div",{className:"text-lg font-bold text-blue-400",children:e.reduce((d,p)=>d+(p.users||0),0).toLocaleString()}),R.jsx("div",{className:"text-xs text-gray-400",children:"active"})]})]}),R.jsxs("div",{className:"absolute bottom-5 left-5 z-50 bg-black/80 border border-green-500 p-4 backdrop-blur",children:[R.jsx("div",{className:"text-xs text-green-400 font-bold mb-2",children:"PLATFORM PERFORMANCE"}),R.jsxs("div",{className:"space-y-1 text-xs",children:[R.jsxs("div",{children:["Uptime: ",R.jsx("span",{className:"text-green-400",children:"99.97%"})]}),R.jsxs("div",{children:["Latency: ",R.jsx("span",{className:"text-green-400",children:"23ms avg"})]}),R.jsxs("div",{children:["Throughput: ",R.jsx("span",{className:"text-green-400",children:"2.4M req/min"})]}),R.jsxs("div",{children:["Error Rate: ",R.jsx("span",{className:"text-green-400",children:"0.03%"})]})]}),R.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-600",children:[R.jsx("div",{className:"text-xs text-purple-400",children:" QUANTUM RESONANCE: 0x4121"}),R.jsx("div",{className:"text-xs text-cyan-400",children:" AI PROCESSING: 15.6M queries/day"})]})]}),R.jsxs("div",{className:"absolute bottom-5 right-5 z-50 bg-black/80 border border-green-500 p-4 backdrop-blur",children:[R.jsx("div",{className:"text-xs text-green-400 font-bold mb-2",children:"MODULE TYPES"}),R.jsxs("div",{className:"space-y-1 text-xs",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-purple-500 to-purple-600"}),R.jsx("span",{children:"Core Systems"})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-red-500 to-orange-500"}),R.jsx("span",{children:"Security"})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500"}),R.jsx("span",{children:"Products"})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-pink-500 to-yellow-500"}),R.jsx("span",{children:"AI Systems"})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-green-500 to-emerald-600"}),R.jsx("span",{children:"Analytics"})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-yellow-500 to-orange-500"}),R.jsx("span",{children:"Automation"})]})]}),R.jsx("div",{className:"mt-3 pt-2 border-t border-gray-600 text-xs",children:R.jsx("div",{children:" Online   Launching   Unknown   Offline"})})]}),R.jsx("svg",{ref:n,className:"absolute inset-0 w-full h-full",style:{background:"radial-gradient(circle at center, #0a0a0a 0%, #000 100%)"}})]})},RQ=({health:n})=>R.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[R.jsx("span",{className:`w-2 h-2 rounded-full ${n>90?"bg-[var(--neon-green)] animate-pulse":"bg-[var(--neon-red)]"}`}),R.jsx("span",{style:{color:n>90?"var(--neon-green)":"var(--neon-red)"},children:n>90?"Systems Operational":"Critical Warning"})]}),gr=({icon:n,label:e,active:t,onClick:i,color:s})=>R.jsxs("div",{onClick:i,className:`
            flex items-center gap-3 px-4 py-3 rounded-lg cursor-pointer transition-all relative overflow-hidden group
            ${t?"bg-white/5 text-white border-l-2 border-white":"text-gray-500 hover:text-white hover:bg-white/5"}
        `,children:[R.jsx(n,{size:18,className:`transition-colors duration-300 ${t?"text-white":"text-gray-600 group-hover:text-gray-300"}`,style:{color:t&&s?`var(${s})`:void 0}}),R.jsx("span",{className:`font-bold text-xs uppercase tracking-widest transition-all ${t?"opacity-100 translate-x-1":"opacity-70"}`,children:e})]}),fM=({label:n,value:e,color:t})=>R.jsx("div",{className:"bg-[#0a0a12] border border-[#2a2a50] p-5 rounded-xl hover:border-[var(--neon-cyan)]/50 transition-all group relative overflow-hidden backdrop-blur-sm",children:R.jsxs("div",{className:"relative z-10 flex justify-between items-end",children:[R.jsxs("div",{children:[R.jsx("div",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-1 font-bold",children:n}),R.jsx("div",{className:"text-2xl font-black font-mono tracking-tighter",style:{color:t},children:e})]}),R.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center group-hover:rotate-12 transition-transform",children:R.jsx(_w,{size:14,className:"text-gray-700 group-hover:text-white"})})]})}),NQ=()=>{const{metrics:n,isConnected:e}=UF(),{runRefactor:t,generateAssets:i,createCheckoutSession:s}=OF(),[a,l]=pe.useState(null),[u,d]=pe.useState("dashboard"),[p,g]=pe.useState(!0),[y,x]=pe.useState(!1);pe.useEffect(()=>{const W=II("state-update",ee=>{l(ee.payload)});return()=>{W.then(ee=>ee())}},[]);const[_,w]=pe.useState([{id:"1",role:"assistant",content:"   . QAntum Singularity  .     (PROBE)    (FEEDBACK).",timestamp:new Date}]),[A,E]=pe.useState(""),[M,D]=pe.useState(["QAntum Terminal v35.0 - Singular Command Interface","Type 'help' for available commands","System initialized successfully."]),[L,N]=pe.useState(""),P=pe.useRef(null),z=pe.useRef(null),B=Math.max(0,100-n.entropy*100);pe.useEffect(()=>{P.current?.scrollIntoView({behavior:"smooth"})},[_]),pe.useEffect(()=>{z.current?.scrollIntoView({behavior:"smooth"})},[M]);const V=async()=>{if(!A.trim()||y)return;const W=A,ee={id:Date.now().toString(),role:"user",content:W,timestamp:new Date};w(J=>[...J,ee]),E(""),x(!0);try{const J=await Qg("process_probe",{input:W});w(ae=>[...ae,{id:Date.now().toString(),role:"assistant",content:J,timestamp:new Date}])}catch(J){w(ae=>[...ae,{id:Date.now().toString(),role:"assistant",content:`[ERROR]: Neural Link Failure: ${J}`,timestamp:new Date}])}finally{x(!1)}},O=async W=>{if(W.key==="Enter"){const ee=L.trim();if(!ee||y)return;if(D(J=>[...J,`quantum@empire:~$ ${ee}`]),N(""),x(!0),ee.startsWith("SCRIBE REFACTOR")){D(J=>[...J,"  SCRIBE: INITIATING AUTO-REFACTORING ON 100,000 FILES..."," [VERITAS]: ANALYZING IMPACT..."]);try{const J=await t();D(ae=>[...ae,` [SCRIBE]: PURGE COMPLETE. ${J.report.actions_performed} redundant findings merged.`,` [EQUITY]: +${J.report.equity_yield.toLocaleString(void 0,{minimumFractionDigits:2})} Technical Debt Recovered.`])}catch(J){D(ae=>[...ae,`[ERROR]: SURGERY FAILED: ${J}`])}finally{x(!1)}return}if(ee.startsWith("GENERATE ASSETS")||ee.startsWith("SCRIBE GENERATE")){D(J=>[...J," SCRIBE: TRANSMUTING LOGIC GEMS INTO ASSETS..."," [ORACLE]: CALCULATING MARKET VALUE..."]);try{const J=await i();D(ae=>[...ae,` [GENERATOR]: ASSET TRANSMUTED: ${J.asset}`,` [MARKET]: Micro-SaaS deployed to /assets/sovereign_saas/${J.asset}`]),setTimeout(()=>d("market"),1500)}catch(J){D(ae=>[...ae,`[ERROR]: TRANSMUTATION FAILED: ${J}`])}finally{x(!1)}return}try{const J=await Qg("process_mind_command",{input:ee});D(ae=>[...ae,J])}catch(J){D(ae=>[...ae,`[ERROR]: System Call Failure - ${J}`])}finally{x(!1)}}},F=async W=>{try{const ee=await s(W);ee.checkout_url&&(window.location.href=ee.checkout_url)}catch(ee){console.error("Checkout Failed:",ee)}};return R.jsxs("div",{className:"flex h-screen w-full overflow-hidden bg-[var(--quantum-void)] text-gray-200 font-[var(--font-body)]",children:[R.jsxs("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-[280px] bg-[#0a0a12]/95 backdrop-blur border-r border-[#2a2a50] transform transition-transform duration-300 ${p?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:[R.jsx("div",{className:"p-6 border-b border-[#2a2a50]",children:R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[var(--neon-cyan)] to-[var(--neon-purple)] flex items-center justify-center text-xl shadow-[0_0_20px_rgba(0,245,255,0.3)] animate-pulse",children:""}),R.jsxs("div",{children:[R.jsx("div",{className:"font-[var(--font-display)] font-bold text-white tracking-widest",children:"QAntum"}),R.jsx("div",{className:"text-[10px] text-[var(--neon-cyan)] uppercase tracking-tighter",children:"Singular Core"})]})]})}),R.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 scrollbar-hide",children:[R.jsxs("div",{className:"space-y-1",children:[R.jsx("div",{className:"text-[10px] text-gray-500 uppercase tracking-widest px-3 mb-2 opacity-50",children:"Main Module"}),R.jsx(gr,{icon:RO,label:"Dashboard",active:u==="dashboard",onClick:()=>d("dashboard")}),R.jsx(gr,{icon:oA,label:"Chat AI",active:u==="chat",onClick:()=>d("chat")}),R.jsx(gr,{icon:lA,label:"Terminal",active:u==="terminal",onClick:()=>d("terminal")}),R.jsx(gr,{icon:XO,label:"Market",active:u==="market",onClick:()=>d("market"),color:"--neon-gold"}),R.jsx(gr,{icon:xw,label:"Money",active:u==="money",onClick:()=>d("money"),color:"--neon-green"}),R.jsx(gr,{icon:Hx,label:"SaaS Hub",active:u==="saas",onClick:()=>d("saas"),color:"--neon-cyan"}),R.jsx(gr,{icon:Bx,label:"Network Map",active:u==="network",onClick:()=>d("network"),color:"--neon-purple"}),R.jsx(gr,{icon:EO,label:"Skill Tree",active:u==="skilltree",onClick:()=>d("skilltree")})]}),R.jsxs("div",{className:"space-y-1",children:[R.jsx("div",{className:"text-[10px] text-gray-500 uppercase tracking-widest px-3 mb-2 opacity-50",children:"Departments"}),R.jsx(gr,{icon:hM,label:"Intelligence",active:u==="intelligence",onClick:()=>d("intelligence"),color:"--dept-intelligence"}),R.jsx(gr,{icon:_w,label:"Omega",active:u==="omega",onClick:()=>d("omega"),color:"--dept-omega"}),R.jsx(gr,{icon:hO,label:"Physics",active:u==="physics",onClick:()=>d("physics"),color:"--dept-physics"}),R.jsx(gr,{icon:mN,label:"Fortress",active:u==="fortress",onClick:()=>d("fortress"),color:"--dept-fortress"}),R.jsx(gr,{icon:MO,label:"Biology",active:u==="biology",onClick:()=>d("biology"),color:"--dept-biology"}),R.jsx(gr,{icon:Hx,label:"Reality",active:u==="reality",onClick:()=>d("reality"),color:"--dept-reality"}),R.jsx(gr,{icon:DO,label:"Chemistry",active:u==="chemistry",onClick:()=>d("chemistry"),color:"--dept-chemistry"})]})]}),R.jsx("div",{className:"p-4 border-t border-[#2a2a50]",children:R.jsx(RQ,{health:B})})]}),R.jsxs("main",{className:"flex-1 flex flex-col relative overflow-hidden bg-transparent",children:[R.jsxs("header",{className:"h-[70px] bg-[#0a0a12]/40 backdrop-blur-md border-b border-[#2a2a50]/50 flex items-center justify-between px-8 relative z-30",children:[R.jsxs("div",{className:"flex items-center gap-4",children:[R.jsx("button",{title:"Toggle Sidebar",onClick:()=>g(!p),className:"lg:hidden text-gray-400 hover:text-white transition-colors",children:p?R.jsx(nz,{}):R.jsx(zO,{})}),R.jsxs("div",{className:"relative hidden md:block",children:[R.jsx(dN,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),R.jsx("input",{title:"Search Modules",type:"text",placeholder:"Search modules... (Ctrl+K)",className:"bg-[var(--quantum-void)] border border-[#2a2a50] rounded-md py-1.5 pl-10 pr-4 text-sm w-64 focus:border-[var(--neon-cyan)] outline-none transition-all placeholder:opacity-30"})]})]}),R.jsxs("div",{className:"flex items-center gap-4",children:[R.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-[#0a0a12] border border-[#2a2a50] rounded-full shadow-[inset_0_0_10px_rgba(0,0,0,0.5)]",children:[R.jsx("div",{className:`w-2 h-2 rounded-full ${e?"bg-emerald-500 animate-pulse":"bg-red-500"}`}),R.jsx("span",{className:"text-[10px] font-mono font-bold tracking-widest text-gray-400",children:e?"ONLINE":"OFFLINE"})]}),R.jsxs("button",{title:"Notifications",className:"text-gray-400 hover:text-white transition-colors relative",children:[R.jsx(cN,{size:18}),R.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-[var(--neon-purple)] rounded-full animate-ping"})]}),R.jsx("button",{title:"Settings",className:"text-gray-400 hover:text-white transition-colors",children:R.jsx(dM,{size:18})})]})]}),R.jsx("div",{className:"flex-1 overflow-y-auto p-8 scrollbar-hide bg-[linear-gradient(to_bottom,transparent,#020205)]",children:R.jsxs(Qx,{mode:"wait",children:[u==="dashboard"&&R.jsxs(Vn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-8",children:[R.jsxs("div",{className:"grid grid-cols-12 gap-8",children:[R.jsxs("div",{className:"col-span-12 lg:col-span-8 p-8 rounded-2xl bg-[#0a0a12] border border-[#2a2a50] relative overflow-hidden group",children:[R.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-cyan)]/5 to-[var(--neon-purple)]/5 pointer-events-none"}),R.jsxs("div",{className:"relative z-10",children:[R.jsxs("h2",{className:"text-5xl font-[var(--font-display)] font-black mb-4 bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-500 tracking-tighter uppercase italic",children:["$",a?a.liquid_equity.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"2,104,500,000.00"]}),R.jsx("p",{className:"text-[10px] tracking-[1em] text-[var(--neon-purple)] font-bold opacity-70 mb-8",children:"SOVEREIGN LIQUID EQUITY"}),R.jsxs("div",{className:"flex gap-4",children:[R.jsxs("button",{onClick:()=>d("chat"),className:"px-6 py-3 bg-[var(--neon-cyan)] text-black font-black rounded-lg hover:brightness-125 transition-all flex items-center gap-2 uppercase text-xs tracking-widest transform hover:scale-105",children:[R.jsx(oA,{size:16})," Neural Link"]}),R.jsxs("button",{onClick:()=>d("terminal"),className:"px-6 py-3 bg-[#1a1a3a] border border-[#2a2a50] text-white font-bold rounded-lg hover:border-[var(--neon-cyan)] transition-all flex items-center gap-2 uppercase text-xs tracking-widest transform hover:scale-105",children:[R.jsx(lA,{size:16})," Direct Access"]})]})]})]}),R.jsx("div",{className:"col-span-12 lg:col-span-4 rounded-2xl bg-[#0a0a12] border border-[#2a2a50] overflow-hidden group relative",children:R.jsx(bY,{})})]}),R.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[R.jsxs("div",{className:"col-span-12 md:col-span-8 p-6 rounded-xl bg-[#0a0a12] border border-[#2a2a50]",children:[R.jsxs("div",{className:"flex justify-between items-center mb-6",children:[R.jsxs("h3",{className:"text-xs font-bold text-cyan-500 tracking-widest uppercase flex items-center gap-2",children:[" ",R.jsx(Bx,{size:14})," Entropy Pulse"]}),R.jsxs("div",{className:"text-[10px] text-gray-600 font-mono",children:["SAMPLING: ",a?(Number(a.total_nodes)/1e9).toFixed(1):"2.1","B NODES"]})]}),R.jsx("div",{className:"h-64",children:R.jsx(_2,{})})]}),R.jsxs("div",{className:"col-span-12 md:col-span-4 space-y-6",children:[R.jsx(fM,{label:"Vectors Ingested",value:a?`${(Number(a.total_nodes)/1e9).toFixed(1)}B`:"2.1B",color:"var(--neon-cyan)"}),R.jsx(fM,{label:"Logical Entropy",value:a?a.entropy.toFixed(4):(n.entropy*10).toFixed(4),color:"var(--neon-red)"}),R.jsx(fM,{label:"Axiom Compliance",value:"1001/1001",color:"var(--neon-green)"})]})]})]},"dashboard"),u==="chat"&&R.jsx(Vn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col h-[calc(100vh-140px)] gap-4",children:R.jsxs("div",{className:"flex-1 bg-[#0a0a12]/50 backdrop-blur border border-[#2a2a50] rounded-2xl flex flex-col overflow-hidden shadow-2xl",children:[R.jsxs("div",{className:"p-4 border-b border-[#2a2a50] flex justify-between items-center bg-[#1a1a3a]/20",children:[R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-[var(--neon-cyan)] to-[var(--neon-purple)] flex items-center justify-center shadow-[0_0_15px_rgba(0,245,255,0.4)]",children:""}),R.jsxs("div",{children:[R.jsx("h3",{className:"font-bold text-sm tracking-wide",children:"SOVEREIGN_BRAIN_LINK"}),R.jsxs("div",{className:"text-[10px] text-[var(--neon-green)] flex items-center gap-1 font-bold uppercase",children:[R.jsx("span",{className:"w-1.5 h-1.5 bg-[var(--neon-green)] rounded-full animate-pulse"})," Synchronized"]})]})]}),R.jsx("button",{title:"Clear Log",className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:R.jsx(YO,{size:16,className:"text-gray-500"})})]}),R.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 scrollbar-hide",children:[_.map(W=>R.jsxs("div",{className:`flex gap-4 ${W.role==="user"?"flex-row-reverse":""}`,children:[R.jsx("div",{className:`w-10 h-10 rounded-xl flex-shrink-0 flex items-center justify-center transform hover:rotate-12 transition-transform ${W.role==="assistant"?"bg-gradient-to-br from-[var(--neon-cyan)]/20 to-[var(--neon-purple)]/20 border border-[var(--neon-cyan)]/30":"bg-[#2a2a50] border border-gray-700"}`,children:W.role==="assistant"?"":R.jsx(vN,{size:20,className:"text-gray-400"})}),R.jsx("div",{className:`p-4 rounded-2xl max-w-[75%] text-sm leading-relaxed tracking-tight ${W.role==="assistant"?"bg-[#1a1a3a]/40 border border-[#2a2a50] text-cyan-50 shadow-lg":"bg-cyan-600 text-white font-medium shadow-[0_5px_15px_rgba(0,0,0,0.3)]"}`,children:W.content})]},W.id)),y&&R.jsxs("div",{className:"flex gap-4",children:[R.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[var(--neon-cyan)] to-[var(--neon-purple)] animate-pulse flex items-center justify-center",children:""}),R.jsx("div",{className:"p-4 rounded-2xl bg-[#1a1a3a]/40 border border-[#2a2a50] text-cyan-200 text-sm italic",children:"Thinking..."})]}),R.jsx("div",{ref:P})]}),R.jsx("div",{className:"p-6 border-t border-[#2a2a50] bg-[#020205]/80 backdrop-blur-xl",children:R.jsxs("div",{className:"flex gap-3",children:[R.jsx("input",{title:"Neural Prompt",type:"text",disabled:y,value:A,onChange:W=>E(W.target.value),onKeyDown:W=>W.key==="Enter"&&V(),placeholder:"Pulsing Command...",className:"flex-1 bg-black/50 border border-[#2a2a50] rounded-xl py-4 px-5 focus:border-[var(--neon-cyan)] outline-none text-white transition-all text-sm"}),R.jsx("button",{title:"Send",onClick:V,disabled:y,className:"p-4 bg-[var(--neon-cyan)] text-black rounded-xl active:scale-95 shadow-[0_0_20px_rgba(0,245,255,0.3)]",children:R.jsx(pN,{size:20})})]})})]})},"chat"),u==="terminal"&&R.jsx(Vn.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},className:"h-[calc(100vh-140px)]",children:R.jsxs("div",{className:"h-full bg-black border border-[#1a1a3a] rounded-xl flex flex-col font-mono text-sm overflow-hidden border-t-4 border-t-cyan-900 shadow-2xl",children:[R.jsxs("div",{className:"bg-[#0a0a12] p-2 flex items-center justify-between border-b border-[#1a1a3a]",children:[R.jsxs("div",{className:"flex gap-1.5 ml-2",children:[R.jsx("div",{className:"w-3 h-3 rounded-full bg-[#ff5f56]/50"}),R.jsx("div",{className:"w-3 h-3 rounded-full bg-[#ffbd2e]/50"}),R.jsx("div",{className:"w-3 h-3 rounded-full bg-[#27c93f]/50"})]}),R.jsx("div",{className:"text-gray-600 text-[10px] font-bold uppercase",children:"quantum@empire: /vsh/core"}),R.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-900 animate-pulse mr-2"})]}),R.jsxs("div",{className:"flex-1 p-6 overflow-y-auto space-y-2 text-cyan-500/80 scrollbar-hide",children:[M.map((W,ee)=>R.jsx("div",{className:`break-all ${W.startsWith(">")?"text-white font-bold":""}`,children:W},ee)),R.jsx("div",{ref:z})]}),R.jsxs("div",{className:"p-4 border-t border-[#1a1a3a] bg-[#05050a] flex gap-3 items-center",children:[R.jsx("span",{className:"text-[var(--neon-cyan)] font-black",children:""}),R.jsx("input",{title:"Terminal Input",type:"text",autoFocus:!0,disabled:y,value:L,onChange:W=>N(W.target.value),onKeyDown:O,className:"flex-1 bg-transparent border-none outline-none text-white tracking-widest",placeholder:"Enter system instruction..."})]})]})},"terminal"),u==="market"&&R.jsxs(Vn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"h-full flex flex-col gap-6",children:[R.jsxs("div",{className:"flex justify-between items-center",children:[R.jsxs("div",{children:[R.jsx("h2",{className:"text-3xl font-[var(--font-display)] font-black text-white italic tracking-tighter uppercase",children:"Sovereign Market"}),R.jsx("p",{className:"text-[10px] text-[var(--neon-gold)] tracking-widest mt-1 uppercase",children:"Generated Assets"})]}),R.jsxs("div",{className:"px-4 py-2 bg-[#0a0a12] border border-[#2a2a50] rounded-lg flex items-center gap-2",children:[R.jsx("span",{className:"text-xs text-gray-500 font-bold uppercase",children:"Estimated MRR:"}),R.jsx("span",{className:"text-lg font-bold text-[var(--neon-green)]",children:"10,420.00"})]})]}),R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.jsxs("div",{className:"p-6 bg-[#0a0a12] border border-[#2a2a50] rounded-xl hover:border-[var(--neon-gold)] transition-all group",children:[R.jsxs("div",{className:"flex justify-between items-start mb-4",children:[R.jsx("div",{className:"w-12 h-12 bg-gray-900 rounded-lg flex items-center justify-center border border-gray-800",children:R.jsx(hM,{className:"text-gray-500 group-hover:text-[var(--neon-gold)]"})}),R.jsx("div",{className:"px-2 py-1 bg-green-900/20 border border-green-900/50 rounded text-[10px] text-green-400 font-bold",children:"READY"})]}),R.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Omni-Scraper V1"}),R.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-[#2a2a50]",children:[R.jsx("span",{className:"text-xl font-bold text-white",children:"49.99"}),R.jsx("button",{onClick:()=>F("Omni-Scraper V1"),className:"px-4 py-2 bg-white text-black text-xs font-bold rounded hover:bg-[var(--neon-gold)] transition-colors uppercase",children:"Deploy"})]})]})})]},"market"),u==="money"&&R.jsx(Vn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"h-full overflow-auto",children:R.jsx(MY,{})},"money"),u==="saas"&&R.jsx(Vn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"h-full overflow-auto",children:R.jsx(TY,{})},"saas"),u==="network"&&R.jsx(Vn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"h-full",children:R.jsx(CQ,{})},"network")]})})]})]})},uE=[{id:"node_access",name:"Node Access",price:29,currency:"EUR",interval:"month",features:["Access to 1 SaaS application","Basic neural node access","API access (1000 req/day)","Community support","Basic telemetry dashboard"],apps:["wealth_scanner"]},{id:"sovereign_empire",name:"Sovereign Empire",price:99,currency:"EUR",interval:"month",popular:!0,features:["Access to 2 SaaS applications","Advanced neural network access","API access (10,000 req/day)","Priority support","Cross-app data sharing","Custom integrations"],apps:["wealth_scanner","network_optimizer"]},{id:"galactic_core",name:"Galactic Core",price:499,currency:"EUR",interval:"month",features:["Access to all 6 SaaS applications","Unlimited neural network access","Unlimited API access","24/7 dedicated support","AI model training","White-label options","Telegram mobile control (967408)","Quantum features access"],apps:["wealth_scanner","network_optimizer","sector_security","valuation_gate","automation_nexus","intelligence_core"]}],DQ=()=>{const[n,e]=pe.useState("landing"),[t,i]=pe.useState({email:"",name:"",subscriptions:[],isLoggedIn:!1}),[s,a]=pe.useState(null),[l,u]=pe.useState("en");pe.useEffect(()=>{const x=localStorage.getItem("aeterna_user");if(x){const _=JSON.parse(x);i(_),e("dashboard")}},[]);const d=async(x,_,w)=>{const A={email:x,name:_,subscriptions:[],isLoggedIn:!0};i(A),localStorage.setItem("aeterna_user",JSON.stringify(A)),s?await p(s):e("payment")},p=async x=>{try{const w=await(await fetch("/api/economy/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:x.id,successUrl:window.location.origin+"/success",cancelUrl:window.location.origin+"/cancel"})})).json();w.checkoutUrl?window.location.href=w.checkoutUrl:g(x)}catch(_){console.error("Payment error:",_),g(x)}},g=x=>{const _={...t,plan:x.id,subscriptions:x.apps};i(_),localStorage.setItem("aeterna_user",JSON.stringify(_)),e("dashboard")},y=()=>{localStorage.removeItem("aeterna_user"),i({email:"",name:"",subscriptions:[],isLoggedIn:!1}),e("landing")};return R.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:[R.jsxs("div",{className:"fixed top-4 right-4 z-50 flex gap-2",children:[R.jsx("button",{onClick:()=>u("bg"),className:`px-3 py-1 rounded-lg text-sm transition ${l==="bg"?"bg-purple-600":"bg-white/10 hover:bg-white/20"}`,children:" "}),R.jsx("button",{onClick:()=>u("en"),className:`px-3 py-1 rounded-lg text-sm transition ${l==="en"?"bg-purple-600":"bg-white/10 hover:bg-white/20"}`,children:" EN"})]}),R.jsxs(Qx,{mode:"wait",children:[n==="landing"&&R.jsx(IQ,{language:l,onGetStarted:()=>e("register"),onLogin:()=>e("login"),onSelectPlan:x=>{a(x),e("register")}}),n==="register"&&R.jsx(LQ,{language:l,selectedPlan:s,onRegister:d,onBack:()=>e("landing")}),n==="login"&&R.jsx(PQ,{language:l,onLogin:(x,_)=>{const w={email:x,name:"Demo User",subscriptions:["wealth_scanner"],isLoggedIn:!0};i(w),localStorage.setItem("aeterna_user",JSON.stringify(w)),e("dashboard")},onBack:()=>e("landing")}),n==="payment"&&R.jsx(UQ,{language:l,plans:uE,selectedPlan:s,onSelectPlan:a,onPayment:p,onBack:()=>e("register")}),n==="dashboard"&&t.isLoggedIn&&R.jsx(OQ,{language:l,user:t,onLogout:y,onLaunchApp:x=>e("app")})]})]})},IQ=({language:n,onGetStarted:e,onLogin:t,onSelectPlan:i})=>{const s=n==="bg"?{title:"AETERNA.WEBSITE",subtitle:" SaaS      ",description:" .  .     .",getStarted:" ",login:"",pricing:"  "}:{title:"AETERNA.WEBSITE",subtitle:"The Last SaaS Platform You'll Ever Need",description:"One platform. Every tool. Superior to everything on the market.",getStarted:"Get Started Free",login:"Login",pricing:"Plans & Pricing"};return R.jsxs(Vn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen",children:[R.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen text-center px-6",children:[R.jsx(Vn.h1,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-6xl font-bold mb-6 bg-gradient-to-r from-white via-purple-200 to-pink-200 bg-clip-text text-transparent",children:s.title}),R.jsx(Vn.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-2xl text-gray-300 mb-4",children:s.subtitle}),R.jsx(Vn.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-lg text-gray-400 mb-12 max-w-2xl",children:s.description}),R.jsxs(Vn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"flex gap-4",children:[R.jsx("button",{onClick:e,className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl font-semibold text-lg hover:scale-105 transition-transform",children:s.getStarted}),R.jsx("button",{onClick:t,className:"px-8 py-4 border border-white/20 rounded-xl font-semibold text-lg hover:bg-white/10 transition",children:s.login})]})]}),R.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12",children:[R.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:s.pricing}),R.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:uE.map(a=>R.jsxs(Vn.div,{whileHover:{scale:1.02,y:-5},className:`bg-white/5 rounded-2xl p-8 border transition cursor-pointer ${a.popular?"border-purple-500 bg-purple-500/10":"border-white/10 hover:border-purple-500/30"}`,onClick:()=>i(a),children:[a.popular&&R.jsx("div",{className:"text-center mb-4",children:R.jsx("span",{className:"bg-gradient-to-r from-purple-600 to-pink-600 px-4 py-1 rounded-full text-sm font-semibold",children:n==="bg"?"-":"MOST POPULAR"})}),R.jsx("h3",{className:"text-xl font-bold mb-2",children:a.name}),R.jsxs("div",{className:"text-3xl font-bold mb-1",children:["",a.price,R.jsxs("span",{className:"text-lg text-gray-400",children:["/",a.interval]})]}),R.jsxs("ul",{className:"space-y-2 mb-6 text-sm",children:[a.features.slice(0,3).map((l,u)=>R.jsxs("li",{className:"flex items-center gap-2",children:[R.jsx(yw,{className:"w-4 h-4 text-green-400"}),R.jsx("span",{children:l})]},u)),R.jsxs("li",{className:"text-gray-400",children:["+ ",a.features.length-3," ..."]})]}),R.jsx("button",{className:"w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg font-semibold hover:opacity-90 transition",children:n==="bg"?" ":"Choose Plan"})]},a.id))})]})]})},LQ=({language:n,selectedPlan:e,onRegister:t,onBack:i})=>{const[s,a]=pe.useState(""),[l,u]=pe.useState(""),[d,p]=pe.useState(""),g=n==="bg"?{title:"  ",subtitle:"     SaaS",emailLabel:"Email ",nameLabel:" ",passwordLabel:"",createAccount:" ",alreadyHave:"  ?",signIn:" ",selectedPlan:" "}:{title:"Create Account",subtitle:"Join the future of SaaS",emailLabel:"Email address",nameLabel:"Full name",passwordLabel:"Password",createAccount:"Create Account",alreadyHave:"Already have an account?",signIn:"Sign in here",selectedPlan:"Selected plan"},y=x=>{x.preventDefault(),t(s,l,d)};return R.jsx(Vn.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"min-h-screen flex items-center justify-center px-6",children:R.jsx("div",{className:"w-full max-w-md",children:R.jsxs("div",{className:"bg-white/5 rounded-2xl border border-white/10 p-8 backdrop-blur",children:[R.jsxs("div",{className:"text-center mb-8",children:[R.jsx("h1",{className:"text-3xl font-bold mb-2",children:g.title}),R.jsx("p",{className:"text-gray-400",children:g.subtitle})]}),e&&R.jsxs("div",{className:"mb-6 p-4 bg-purple-500/20 rounded-xl border border-purple-500/30",children:[R.jsxs("div",{className:"text-sm text-purple-300 mb-1",children:[g.selectedPlan,":"]}),R.jsxs("div",{className:"font-semibold",children:[e.name," - ",e.price,"/",e.interval]})]}),R.jsxs("form",{onSubmit:y,className:"space-y-6",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium mb-2",children:g.emailLabel}),R.jsxs("div",{className:"relative",children:[R.jsx(hN,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),R.jsx("input",{type:"email",required:!0,value:s,onChange:x=>a(x.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg pl-10 pr-4 py-3 focus:outline-none focus:border-purple-500 transition",placeholder:"your@email.com"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium mb-2",children:g.nameLabel}),R.jsxs("div",{className:"relative",children:[R.jsx(vN,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),R.jsx("input",{type:"text",required:!0,value:l,onChange:x=>u(x.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg pl-10 pr-4 py-3 focus:outline-none focus:border-purple-500 transition",placeholder:n==="bg"?" ":"Your name"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium mb-2",children:g.passwordLabel}),R.jsxs("div",{className:"relative",children:[R.jsx(fN,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),R.jsx("input",{type:"password",required:!0,value:d,onChange:x=>p(x.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg pl-10 pr-4 py-3 focus:outline-none focus:border-purple-500 transition",placeholder:""})]})]}),R.jsx("button",{type:"submit",className:"w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg font-semibold hover:scale-105 transition-transform",children:g.createAccount})]}),R.jsxs("div",{className:"text-center mt-6 text-sm text-gray-400",children:[g.alreadyHave," ",R.jsx("button",{onClick:i,className:"text-purple-400 hover:text-purple-300 transition",children:g.signIn})]})]})})})},PQ=({language:n,onLogin:e,onBack:t})=>{const[i,s]=pe.useState(""),[a,l]=pe.useState(""),u=n==="bg"?{title:"  ",subtitle:"  ",login:"",forgotPassword:" ?",noAccount:"mate ?",signUp:" "}:{title:"Sign In",subtitle:"Welcome back",login:"Sign In",forgotPassword:"Forgot password?",noAccount:"Don't have an account?",signUp:"Sign up"},d=p=>{p.preventDefault(),e(i,a)};return R.jsx(Vn.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"min-h-screen flex items-center justify-center px-6",children:R.jsx("div",{className:"w-full max-w-md",children:R.jsxs("div",{className:"bg-white/5 rounded-2xl border border-white/10 p-8 backdrop-blur",children:[R.jsxs("div",{className:"text-center mb-8",children:[R.jsx("h1",{className:"text-3xl font-bold mb-2",children:u.title}),R.jsx("p",{className:"text-gray-400",children:u.subtitle})]}),R.jsxs("form",{onSubmit:d,className:"space-y-6",children:[R.jsx("div",{children:R.jsxs("div",{className:"relative",children:[R.jsx(hN,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),R.jsx("input",{type:"email",required:!0,value:i,onChange:p=>s(p.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg pl-10 pr-4 py-3 focus:outline-none focus:border-purple-500 transition",placeholder:"your@email.com"})]})}),R.jsx("div",{children:R.jsxs("div",{className:"relative",children:[R.jsx(fN,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),R.jsx("input",{type:"password",required:!0,value:a,onChange:p=>l(p.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg pl-10 pr-4 py-3 focus:outline-none focus:border-purple-500 transition",placeholder:""})]})}),R.jsx("button",{type:"submit",className:"w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg font-semibold hover:scale-105 transition-transform",children:u.login})]}),R.jsxs("div",{className:"text-center mt-6 space-y-2",children:[R.jsx("button",{className:"text-sm text-purple-400 hover:text-purple-300 transition",children:u.forgotPassword}),R.jsxs("div",{className:"text-sm text-gray-400",children:[u.noAccount," ",R.jsx("button",{onClick:t,className:"text-purple-400 hover:text-purple-300 transition",children:u.signUp})]})]})]})})})},UQ=({language:n,plans:e,selectedPlan:t,onSelectPlan:i,onPayment:s,onBack:a})=>{const l=n==="bg"?{title:"  ",subtitle:"    ",payNow:" ",mostPopular:"-"}:{title:"Choose Your Plan",subtitle:"Start generating revenue today",payNow:"Pay Now",mostPopular:"MOST POPULAR"};return R.jsx(Vn.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"min-h-screen py-12 px-6",children:R.jsxs("div",{className:"max-w-6xl mx-auto",children:[R.jsxs("div",{className:"text-center mb-12",children:[R.jsx("h1",{className:"text-4xl font-bold mb-4",children:l.title}),R.jsx("p",{className:"text-xl text-gray-400",children:l.subtitle})]}),R.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:e.map(u=>R.jsxs(Vn.div,{whileHover:{scale:1.02,y:-5},className:`bg-white/5 rounded-2xl p-8 border transition cursor-pointer ${u.popular?"border-purple-500 bg-purple-500/10":"border-white/10"} ${t?.id===u.id?"ring-2 ring-purple-500":""}`,onClick:()=>i(u),children:[u.popular&&R.jsx("div",{className:"text-center mb-4",children:R.jsx("span",{className:"bg-gradient-to-r from-purple-600 to-pink-600 px-4 py-1 rounded-full text-sm font-semibold",children:l.mostPopular})}),R.jsx("h3",{className:"text-2xl font-bold mb-2",children:u.name}),R.jsxs("div",{className:"text-4xl font-bold mb-6",children:["",u.price,R.jsxs("span",{className:"text-lg text-gray-400",children:["/",u.interval]})]}),R.jsx("ul",{className:"space-y-3 mb-8",children:u.features.map((d,p)=>R.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[R.jsx(yw,{className:"w-4 h-4 text-green-400"}),R.jsx("span",{children:d})]},p))}),R.jsxs("div",{className:"text-sm text-gray-400 mb-6",children:[R.jsxs("strong",{children:[n==="bg"?" ":"Included apps",":"]}),R.jsx("div",{className:"mt-2 space-y-1",children:u.apps.map(d=>R.jsxs("div",{className:"text-purple-300",children:[" ",d.replace(/_/g," ")]},d))})]})]},u.id))}),R.jsxs("div",{className:"text-center mt-8",children:[t&&R.jsxs(Vn.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},onClick:()=>s(t),className:"px-12 py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl font-semibold text-lg hover:scale-105 transition-transform mr-4",children:[R.jsx(uN,{className:"w-5 h-5 inline mr-2"}),l.payNow," ",t.price]}),R.jsx("button",{onClick:a,className:"px-8 py-4 border border-white/20 rounded-xl font-semibold hover:bg-white/10 transition",children:n==="bg"?"":"Back"})]})]})})},OQ=({language:n,user:e,onLogout:t,onLaunchApp:i})=>{const s=n==="bg"?{welcome:" ",yourApps:" SaaS ",launch:"",logout:"",account:""}:{welcome:"Welcome",yourApps:"Your SaaS Applications",launch:"Launch",logout:"Logout",account:"Account"},a=uE.find(u=>u.id===e.plan)?.apps||e.subscriptions,l=[{id:"wealth_scanner",name:"Wealth Scanner Pro",icon:"",url:"wealth-scanner.aeterna.website"},{id:"sector_security",name:"Sector Security Suite",icon:"",url:"sector-security.aeterna.website"},{id:"network_optimizer",name:"Network Optimizer Pro",icon:"",url:"network-optimizer.aeterna.website"},{id:"valuation_gate",name:"Valuation Gate AI",icon:"",url:"valuation-gate.aeterna.website"},{id:"automation_nexus",name:"Automation Nexus",icon:"",url:"automation-nexus.aeterna.website"},{id:"intelligence_core",name:"Intelligence Core",icon:"",url:"intelligence-core.aeterna.website"}].filter(u=>a.includes(u.id));return R.jsxs(Vn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"min-h-screen",children:[R.jsx("nav",{className:"border-b border-white/10 bg-black/20 backdrop-blur p-6",children:R.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[R.jsxs("div",{className:"flex items-center gap-4",children:[R.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center",children:R.jsx("span",{className:"text-xl font-bold",children:""})}),R.jsxs("div",{children:[R.jsx("h1",{className:"text-xl font-bold",children:"aeterna.website"}),R.jsxs("p",{className:"text-sm text-gray-400",children:[s.welcome,", ",e.name]})]})]}),R.jsxs("div",{className:"flex items-center gap-4",children:[R.jsx("button",{className:"p-2 hover:bg-white/10 rounded-lg transition",children:R.jsx(dM,{className:"w-5 h-5"})}),R.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 border border-white/20 rounded-lg hover:bg-white/10 transition",children:[R.jsx(PO,{className:"w-4 h-4"}),s.logout]})]})]})}),R.jsxs("main",{className:"max-w-7xl mx-auto p-6",children:[R.jsxs("div",{className:"mb-8",children:[R.jsx("h2",{className:"text-3xl font-bold mb-2",children:s.yourApps}),R.jsx("p",{className:"text-gray-400",children:n==="bg"?`   ${l.length} SaaS `:`You have access to ${l.length} SaaS applications`})]}),R.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:l.map(u=>R.jsxs(Vn.div,{whileHover:{scale:1.02,y:-5},className:"bg-white/5 rounded-2xl p-6 border border-white/10 hover:border-purple-500/30 transition",children:[R.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[R.jsx("div",{className:"text-3xl",children:u.icon}),R.jsxs("div",{children:[R.jsx("h3",{className:"text-xl font-semibold",children:u.name}),R.jsx("div",{className:"text-sm text-gray-400",children:u.url})]})]}),R.jsxs("div",{className:"flex gap-3",children:[R.jsxs("button",{onClick:()=>window.open(`https://${u.url}`,"_blank"),className:"flex-1 py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg font-semibold hover:scale-105 transition-transform",children:[R.jsx(uO,{className:"w-4 h-4 inline mr-2"}),s.launch]}),R.jsx("button",{className:"px-4 py-3 border border-white/20 rounded-lg hover:bg-white/10 transition",children:R.jsx(dM,{className:"w-4 h-4"})})]})]},u.id))}),R.jsxs("div",{className:"mt-12 bg-white/5 rounded-2xl p-6 border border-white/10",children:[R.jsx("h3",{className:"text-xl font-semibold mb-4",children:s.account}),R.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"text-2xl font-bold text-green-400",children:"Active"}),R.jsx("div",{className:"text-sm text-gray-400",children:n==="bg"?"  ":"Account Status"})]}),R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"text-2xl font-bold text-purple-400",children:e.plan||"galactic_core"}),R.jsx("div",{className:"text-sm text-gray-400",children:n==="bg"?" ":"Current Plan"})]}),R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"text-2xl font-bold text-blue-400",children:l.length}),R.jsx("div",{className:"text-sm text-gray-400",children:n==="bg"?" ":"Active Apps"})]})]})]})]})]})};function zQ(){const[n,e]=pe.useState("client");return pe.useEffect(()=>{new URLSearchParams(window.location.search).get("mode")==="admin"&&e("admin")},[]),R.jsxs("div",{className:"w-screen h-screen bg-black overflow-hidden selection:bg-cyan-500/30",children:[R.jsxs("div",{className:"fixed top-4 left-4 z-50 flex gap-2",children:[R.jsx("button",{onClick:()=>e("client"),className:`px-3 py-1 rounded-lg text-sm transition ${n==="client"?"bg-purple-600":"bg-white/10 hover:bg-white/20"}`,children:" Client"}),R.jsx("button",{onClick:()=>e("admin"),className:`px-3 py-1 rounded-lg text-sm transition ${n==="admin"?"bg-purple-600":"bg-white/10 hover:bg-white/20"}`,children:" Admin"})]}),n==="client"?R.jsx(DQ,{}):R.jsx(NQ,{})]})}nO.createRoot(document.getElementById("root")).render(R.jsx(jf.StrictMode,{children:R.jsx(zQ,{})}));
